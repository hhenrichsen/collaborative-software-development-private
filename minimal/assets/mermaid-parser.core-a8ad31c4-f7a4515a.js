import{bc as Wf,bd as Vf,be as qp,bf as Hf,aB as Yf,ap as Xf,b4 as ou,bg as au,bh as Jf,b6 as ae,y as Rt,bi as Ir,bj as Lr,av as jp,au as ze,bk as Zf,b5 as Zr,aq as Up,at as cu,bl as Gp,bm as zp,ay as Qf}from"./index-1e9f51e4.js";import{O as Nn,c as Bp,b as Kp,E as em,M as j,D as rr,k as tm,e as rm,S as nm,W as Oe,F as Pe,m as Qe,L as Vn,V as Wp,N as Vp,f as im,g as sm,R as mt,Z as _l,T as om,I as am}from"./_baseUniq-b0a170bc-42a6419c.js";import{u as $t,o as O,x as G,v as wn,g as Kr,Z as bo,h as Pl,I as cm,m as lm}from"./_basePickBy-2460efa6-bfe75f17.js";import{a as Ke}from"./clone-6771fede-644de875.js";var um=Object.defineProperty,dm=(t,e,r)=>e in t?um(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_r=(t,e,r)=>(dm(t,typeof e!="symbol"?e+"":e,r),r),pm=Object.prototype,hm=pm.hasOwnProperty,fm=Wf(function(t,e){if(Vf(e)||qp(e)){Hf(e,Nn(e),t);return}for(var r in e)hm.call(e,r)&&Yf(t,r,e[r])});const ft=fm;function Hp(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=t[n+e];return s}function Wi(t){for(var e=-1,r=t==null?0:t.length,n=0,i=[];++e<r;){var s=t[e];s&&(i[n++]=s)}return i}function mm(t,e,r,n){for(var i=-1,s=t==null?0:t.length;++i<s;){var o=t[i];e(n,o,r(o),t)}return n}function gm(t,e,r,n){return _l(t,function(i,s,o){e(n,i,r(i),o)}),n}function ym(t,e){return function(r,n){var i=ze(r)?mm:gm,s=e?e():{};return i(r,t,Vn(n),s)}}var Tm=200;function vm(t,e,r,n){var i=-1,s=tm,o=!0,a=t.length,c=[],l=e.length;if(!a)return c;r&&(e=Kp(e,jp(r))),n?(s=rm,o=!1):e.length>=Tm&&(s=nm,o=!1,e=new em(e));e:for(;++i<a;){var d=t[i],h=r==null?d:r(d);if(d=n||d!==0?d:0,o&&h===h){for(var f=l;f--;)if(e[f]===h)continue e;c.push(d)}else s(e,h,n)||c.push(d)}return c}var Rm=Xf(function(t,e){return ou(t)?vm(t,Bp(e,1,ou,!0)):[]});const Co=Rm;function je(t,e,r){var n=t==null?0:t.length;return n?(e=r||e===void 0?1:bo(e),Hp(t,e<0?0:e,n)):[]}function wi(t,e,r){var n=t==null?0:t.length;return n?(e=r||e===void 0?1:bo(e),e=n-e,Hp(t,0,e<0?0:e)):[]}function $m(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function Em(t,e){var r=!0;return _l(t,function(n,i,s){return r=!!e(n,i,s),r}),r}function Nt(t,e,r){var n=ze(t)?$m:Em;return r&&Up(t,e,r)&&(e=void 0),n(t,Vn(e))}function It(t){return t&&t.length?t[0]:void 0}function ht(t,e){return Bp(O(t,e),1)}var km=Object.prototype,Sm=km.hasOwnProperty,Am=ym(function(t,e,r){Sm.call(t,r)?t[r].push(e):Qf(t,r,[e])});const bm=Am;var Cm="[object String]";function ot(t){return typeof t=="string"||!ze(t)&&Gp(t)&&zp(t)==Cm}var xm=Math.max;function rt(t,e,r,n){t=qp(t)?t:Pe(t),r=r&&!n?bo(r):0;var i=t.length;return r<0&&(r=xm(i+r,0)),ot(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&Wp(t,e,r)>-1}var Nm=Math.max;function lu(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:bo(r);return i<0&&(i=Nm(n+i,0)),Wp(t,e,i)}var wm="[object RegExp]";function Im(t){return Gp(t)&&zp(t)==wm}var uu=au&&au.isRegExp,Lm=uu?jp(uu):Im;const nr=Lm;var _m="Expected a function";function Pm(t){if(typeof t!="function")throw new TypeError(_m);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Lt(t,e){if(t==null)return{};var r=Kp(im(t),function(n){return[n]});return e=Vn(e),cm(t,r,function(n,i){return e(n,i[0])})}function xo(t,e){var r=ze(t)?om:am;return r(t,Pm(Vn(e)))}function Dm(t,e){var r;return _l(t,function(n,i,s){return r=e(n,i,s),!r}),!!r}function Yp(t,e,r){var n=ze(t)?sm:Dm;return r&&Up(t,e,r)&&(e=void 0),n(t,Vn(e))}function Dl(t){return t&&t.length?Vp(t):[]}function Om(t,e){return t&&t.length?Vp(t,Vn(e)):[]}function He(t){return typeof t=="object"&&t!==null&&typeof t.$type=="string"}function Ct(t){return typeof t=="object"&&t!==null&&typeof t.$refText=="string"&&"ref"in t}function pr(t){return typeof t=="object"&&t!==null&&typeof t.$refText=="string"&&"items"in t}function Mm(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.type=="string"&&typeof t.path=="string"}function li(t){return typeof t=="object"&&t!==null&&typeof t.info=="object"&&typeof t.message=="string"}class Xp{constructor(){this.subtypes={},this.allSubtypes={}}getAllTypes(){return Object.keys(this.types)}getReferenceType(e){var r;const n=this.types[e.container.$type];if(!n)throw new Error(`Type ${e.container.$type||"undefined"} not found.`);const i=(r=n.properties[e.property])==null?void 0:r.referenceType;if(!i)throw new Error(`Property ${e.property||"undefined"} of type ${e.container.$type} is not a reference.`);return i}getTypeMetaData(e){return this.types[e]||{name:e,properties:{},superTypes:[]}}isInstance(e,r){return He(e)&&this.isSubtype(e.$type,r)}isSubtype(e,r){if(e===r)return!0;let n=this.subtypes[e];n||(n=this.subtypes[e]={});const i=n[r];if(i!==void 0)return i;{const s=this.types[e],o=s?s.superTypes.some(a=>this.isSubtype(a,r)):!1;return n[r]=o,o}}getAllSubTypes(e){const r=this.allSubtypes[e];if(r)return r;{const n=this.getAllTypes(),i=[];for(const s of n)this.isSubtype(s,e)&&i.push(s);return this.allSubtypes[e]=i,i}}}function Ii(t){return typeof t=="object"&&t!==null&&Array.isArray(t.content)}function Jp(t){return typeof t=="object"&&t!==null&&typeof t.tokenType=="object"}function Zp(t){return Ii(t)&&typeof t.fullText=="string"}class Ue{constructor(e,r){this.startFn=e,this.nextFn=r}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){const e=this.iterator();let r=0,n=e.next();for(;!n.done;)r++,n=e.next();return r}toArray(){const e=[],r=this.iterator();let n;do n=r.next(),n.value!==void 0&&e.push(n.value);while(!n.done);return e}toSet(){return new Set(this)}toMap(e,r){const n=this.map(i=>[e?e(i):i,r?r(i):i]);return new Map(n)}toString(){return this.join()}concat(e){return new Ue(()=>({first:this.startFn(),firstDone:!1,iterator:e[Symbol.iterator]()}),r=>{let n;if(!r.firstDone){do if(n=this.nextFn(r.first),!n.done)return n;while(!n.done);r.firstDone=!0}do if(n=r.iterator.next(),!n.done)return n;while(!n.done);return dt})}join(e=","){const r=this.iterator();let n="",i,s=!1;do i=r.next(),i.done||(s&&(n+=e),n+=Fm(i.value)),s=!0;while(!i.done);return n}indexOf(e,r=0){const n=this.iterator();let i=0,s=n.next();for(;!s.done;){if(i>=r&&s.value===e)return i;s=n.next(),i++}return-1}every(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(!e(n.value))return!1;n=r.next()}return!0}some(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(e(n.value))return!0;n=r.next()}return!1}forEach(e){const r=this.iterator();let n=0,i=r.next();for(;!i.done;)e(i.value,n),i=r.next(),n++}map(e){return new Ue(this.startFn,r=>{const{done:n,value:i}=this.nextFn(r);return n?dt:{done:!1,value:e(i)}})}filter(e){return new Ue(this.startFn,r=>{let n;do if(n=this.nextFn(r),!n.done&&e(n.value))return n;while(!n.done);return dt})}nonNullable(){return this.filter(e=>e!=null)}reduce(e,r){const n=this.iterator();let i=r,s=n.next();for(;!s.done;)i===void 0?i=s.value:i=e(i,s.value),s=n.next();return i}reduceRight(e,r){return this.recursiveReduce(this.iterator(),e,r)}recursiveReduce(e,r,n){const i=e.next();if(i.done)return n;const s=this.recursiveReduce(e,r,n);return s===void 0?i.value:r(s,i.value)}find(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(e(n.value))return n.value;n=r.next()}}findIndex(e){const r=this.iterator();let n=0,i=r.next();for(;!i.done;){if(e(i.value))return n;i=r.next(),n++}return-1}includes(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(n.value===e)return!0;n=r.next()}return!1}flatMap(e){return new Ue(()=>({this:this.startFn()}),r=>{do{if(r.iterator){const s=r.iterator.next();if(s.done)r.iterator=void 0;else return s}const{done:n,value:i}=this.nextFn(r.this);if(!n){const s=e(i);if(Vs(s))r.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}}while(r.iterator);return dt})}flat(e){if(e===void 0&&(e=1),e<=0)return this;const r=e>1?this.flat(e-1):this;return new Ue(()=>({this:r.startFn()}),n=>{do{if(n.iterator){const o=n.iterator.next();if(o.done)n.iterator=void 0;else return o}const{done:i,value:s}=r.nextFn(n.this);if(!i)if(Vs(s))n.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}while(n.iterator);return dt})}head(){const e=this.iterator().next();if(!e.done)return e.value}tail(e=1){return new Ue(()=>{const r=this.startFn();for(let n=0;n<e;n++)if(this.nextFn(r).done)return r;return r},this.nextFn)}limit(e){return new Ue(()=>({size:0,state:this.startFn()}),r=>(r.size++,r.size>e?dt:this.nextFn(r.state)))}distinct(e){return new Ue(()=>({set:new Set,internalState:this.startFn()}),r=>{let n;do if(n=this.nextFn(r.internalState),!n.done){const i=e?e(n.value):n.value;if(!r.set.has(i))return r.set.add(i),n}while(!n.done);return dt})}exclude(e,r){const n=new Set;for(const i of e){const s=r?r(i):i;n.add(s)}return this.filter(i=>{const s=r?r(i):i;return!n.has(s)})}}function Fm(t){return typeof t=="string"?t:typeof t>"u"?"undefined":typeof t.toString=="function"?t.toString():Object.prototype.toString.call(t)}function Vs(t){return!!t&&typeof t[Symbol.iterator]=="function"}const Qp=new Ue(()=>{},()=>dt),dt=Object.freeze({done:!0,value:void 0});function fe(...t){if(t.length===1){const e=t[0];if(e instanceof Ue)return e;if(Vs(e))return new Ue(()=>e[Symbol.iterator](),r=>r.next());if(typeof e.length=="number")return new Ue(()=>({index:0}),r=>r.index<e.length?{done:!1,value:e[r.index++]}:dt)}return t.length>1?new Ue(()=>({collIndex:0,arrIndex:0}),e=>{do{if(e.iterator){const r=e.iterator.next();if(!r.done)return r;e.iterator=void 0}if(e.array){if(e.arrIndex<e.array.length)return{done:!1,value:e.array[e.arrIndex++]};e.array=void 0,e.arrIndex=0}if(e.collIndex<t.length){const r=t[e.collIndex++];Vs(r)?e.iterator=r[Symbol.iterator]():r&&typeof r.length=="number"&&(e.array=r)}}while(e.iterator||e.array||e.collIndex<t.length);return dt}):Qp}class Hs extends Ue{constructor(e,r,n){super(()=>({iterators:n!=null&&n.includeRoot?[[e][Symbol.iterator]()]:[r(e)[Symbol.iterator]()],pruned:!1}),i=>{for(i.pruned&&(i.iterators.pop(),i.pruned=!1);i.iterators.length>0;){const s=i.iterators[i.iterators.length-1].next();if(s.done)i.iterators.pop();else return i.iterators.push(r(s.value)[Symbol.iterator]()),s}return dt})}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}}var ja;(function(t){function e(s){return s.reduce((o,a)=>o+a,0)}t.sum=e;function r(s){return s.reduce((o,a)=>o*a,0)}t.product=r;function n(s){return s.reduce((o,a)=>Math.min(o,a))}t.min=n;function i(s){return s.reduce((o,a)=>Math.max(o,a))}t.max=i})(ja||(ja={}));function Ua(t,e={}){for(const[r,n]of Object.entries(t))r.startsWith("$")||(Array.isArray(n)?n.forEach((i,s)=>{He(i)&&(i.$container=t,i.$containerProperty=r,i.$containerIndex=s,e.deep&&Ua(i,e))}):He(n)&&(n.$container=t,n.$containerProperty=r,e.deep&&Ua(n,e)))}function No(t,e){let r=t;for(;r;){if(e(r))return r;r=r.$container}}function Zt(t){const e=Ls(t).$document;if(!e)throw new Error("AST node has no document.");return e}function Ls(t){for(;t.$container;)t=t.$container;return t}function du(t){return Ct(t)?t.ref?[t.ref]:[]:pr(t)?t.items.map(e=>e.ref):[]}function Ol(t,e){if(!t)throw new Error("Node must be an AstNode.");const r=e==null?void 0:e.range;return new Ue(()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0}),n=>{for(;n.keyIndex<n.keys.length;){const i=n.keys[n.keyIndex];if(!i.startsWith("$")){const s=t[i];if(He(s)){if(n.keyIndex++,Ga(s,r))return{done:!1,value:s}}else if(Array.isArray(s)){for(;n.arrayIndex<s.length;){const o=n.arrayIndex++,a=s[o];if(He(a)&&Ga(a,r))return{done:!1,value:a}}n.arrayIndex=0}}n.keyIndex++}return dt})}function Vi(t,e){if(!t)throw new Error("Root node must be an AstNode.");return new Hs(t,r=>Ol(r,e))}function Qt(t,e){if(t){if(e!=null&&e.range&&!Ga(t,e.range))return new Hs(t,()=>[])}else throw new Error("Root node must be an AstNode.");return new Hs(t,r=>Ol(r,e),{includeRoot:!0})}function Ga(t,e){var r;if(!e)return!0;const n=(r=t.$cstNode)==null?void 0:r.range;return n?og(n,e):!1}function Ys(t){return new Ue(()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0}),e=>{for(;e.keyIndex<e.keys.length;){const r=e.keys[e.keyIndex];if(!r.startsWith("$")){const n=t[r];if(Ct(n)||pr(n))return e.keyIndex++,{done:!1,value:{reference:n,container:t,property:r}};if(Array.isArray(n)){for(;e.arrayIndex<n.length;){const i=e.arrayIndex++,s=n[i];if(Ct(s)||pr(n))return{done:!1,value:{reference:s,container:t,property:r,index:i}}}e.arrayIndex=0}}e.keyIndex++}return dt})}function qm(t,e){const r=t.getTypeMetaData(e.$type),n=e;for(const i of Object.values(r.properties))i.defaultValue!==void 0&&n[i.name]===void 0&&(n[i.name]=eh(i.defaultValue))}function eh(t){return Array.isArray(t)?[...t.map(eh)]:t}const ut={$type:"AbstractElement",cardinality:"cardinality"};function jm(t){return Z.isInstance(t,ut.$type)}const _s={$type:"AbstractParserRule"};function Hi(t){return Z.isInstance(t,_s.$type)}const Rs={$type:"AbstractRule"},At={$type:"AbstractType"},Or={$type:"Action",cardinality:"cardinality",feature:"feature",inferredType:"inferredType",operator:"operator",type:"type"};function wo(t){return Z.isInstance(t,Or.$type)}const Ps={$type:"Alternatives",cardinality:"cardinality",elements:"elements"};function th(t){return Z.isInstance(t,Ps.$type)}const pu={$type:"ArrayLiteral",elements:"elements"},hu={$type:"ArrayType",elementType:"elementType"},Mr={$type:"Assignment",cardinality:"cardinality",feature:"feature",operator:"operator",predicate:"predicate",terminal:"terminal"};function Wr(t){return Z.isInstance(t,Mr.$type)}const za={$type:"BooleanLiteral",true:"true"};function Um(t){return Z.isInstance(t,za.$type)}const Fr={$type:"CharacterRange",cardinality:"cardinality",left:"left",lookahead:"lookahead",parenthesized:"parenthesized",right:"right"};function Gm(t){return Z.isInstance(t,Fr.$type)}const on={$type:"Condition"},Ds={$type:"Conjunction",left:"left",right:"right"};function zm(t){return Z.isInstance(t,Ds.$type)}const qr={$type:"CrossReference",cardinality:"cardinality",deprecatedSyntax:"deprecatedSyntax",isMulti:"isMulti",terminal:"terminal",type:"type"};function Io(t){return Z.isInstance(t,qr.$type)}const Os={$type:"Disjunction",left:"left",right:"right"};function Bm(t){return Z.isInstance(t,Os.$type)}const Ba={$type:"EndOfFile",cardinality:"cardinality"};function Km(t){return Z.isInstance(t,Ba.$type)}const Pr={$type:"Grammar",imports:"imports",interfaces:"interfaces",isDeclared:"isDeclared",name:"name",rules:"rules",types:"types"},fu={$type:"GrammarImport",path:"path"},pn={$type:"Group",cardinality:"cardinality",elements:"elements",guardCondition:"guardCondition",predicate:"predicate"};function Ml(t){return Z.isInstance(t,pn.$type)}const Ka={$type:"InferredType",name:"name"};function rh(t){return Z.isInstance(t,Ka.$type)}const Wt={$type:"InfixRule",call:"call",dataType:"dataType",inferredType:"inferredType",name:"name",operators:"operators",parameters:"parameters",returnType:"returnType"};function Xs(t){return Z.isInstance(t,Wt.$type)}const na={$type:"InfixRuleOperatorList",associativity:"associativity",operators:"operators"},mu={$type:"InfixRuleOperators",precedences:"precedences"},Ti={$type:"Interface",attributes:"attributes",name:"name",superTypes:"superTypes"};function Wm(t){return Z.isInstance(t,Ti.$type)}const vi={$type:"Keyword",cardinality:"cardinality",predicate:"predicate",value:"value"};function Vr(t){return Z.isInstance(t,vi.$type)}const $s={$type:"NamedArgument",calledByName:"calledByName",parameter:"parameter",value:"value"},hn={$type:"NegatedToken",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",terminal:"terminal"};function Vm(t){return Z.isInstance(t,hn.$type)}const Wa={$type:"Negation",value:"value"};function Hm(t){return Z.isInstance(t,Wa.$type)}const gu={$type:"NumberLiteral",value:"value"},Es={$type:"Parameter",name:"name"},Va={$type:"ParameterReference",parameter:"parameter"};function Ym(t){return Z.isInstance(t,Va.$type)}const Ot={$type:"ParserRule",dataType:"dataType",definition:"definition",entry:"entry",fragment:"fragment",inferredType:"inferredType",name:"name",parameters:"parameters",returnType:"returnType"};function or(t){return Z.isInstance(t,Ot.$type)}const ia={$type:"ReferenceType",isMulti:"isMulti",referenceType:"referenceType"},fn={$type:"RegexToken",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",regex:"regex"};function Xm(t){return Z.isInstance(t,fn.$type)}const Ha={$type:"ReturnType",name:"name"};function Jm(t){return Z.isInstance(t,Ha.$type)}const mn={$type:"RuleCall",arguments:"arguments",cardinality:"cardinality",predicate:"predicate",rule:"rule"};function Hr(t){return Z.isInstance(t,mn.$type)}const Ri={$type:"SimpleType",primitiveType:"primitiveType",stringType:"stringType",typeRef:"typeRef"};function Zm(t){return Z.isInstance(t,Ri.$type)}const yu={$type:"StringLiteral",value:"value"},gn={$type:"TerminalAlternatives",cardinality:"cardinality",elements:"elements",lookahead:"lookahead",parenthesized:"parenthesized"};function Qm(t){return Z.isInstance(t,gn.$type)}const Tt={$type:"TerminalElement",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized"},yn={$type:"TerminalGroup",cardinality:"cardinality",elements:"elements",lookahead:"lookahead",parenthesized:"parenthesized"};function eg(t){return Z.isInstance(t,yn.$type)}const dr={$type:"TerminalRule",definition:"definition",fragment:"fragment",hidden:"hidden",name:"name",type:"type"};function ar(t){return Z.isInstance(t,dr.$type)}const Tn={$type:"TerminalRuleCall",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",rule:"rule"};function nh(t){return Z.isInstance(t,Tn.$type)}const Ms={$type:"Type",name:"name",type:"type"};function tg(t){return Z.isInstance(t,Ms.$type)}const ui={$type:"TypeAttribute",defaultValue:"defaultValue",isOptional:"isOptional",name:"name",type:"type"},di={$type:"TypeDefinition"},Tu={$type:"UnionType",types:"types"},Fs={$type:"UnorderedGroup",cardinality:"cardinality",elements:"elements"};function ih(t){return Z.isInstance(t,Fs.$type)}const vn={$type:"UntilToken",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",terminal:"terminal"};function rg(t){return Z.isInstance(t,vn.$type)}const pi={$type:"ValueLiteral"},$i={$type:"Wildcard",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized"};function ng(t){return Z.isInstance(t,$i.$type)}class sh extends Xp{constructor(){super(...arguments),this.types={AbstractElement:{name:ut.$type,properties:{cardinality:{name:ut.cardinality}},superTypes:[]},AbstractParserRule:{name:_s.$type,properties:{},superTypes:[Rs.$type,At.$type]},AbstractRule:{name:Rs.$type,properties:{},superTypes:[]},AbstractType:{name:At.$type,properties:{},superTypes:[]},Action:{name:Or.$type,properties:{cardinality:{name:Or.cardinality},feature:{name:Or.feature},inferredType:{name:Or.inferredType},operator:{name:Or.operator},type:{name:Or.type,referenceType:At.$type}},superTypes:[ut.$type]},Alternatives:{name:Ps.$type,properties:{cardinality:{name:Ps.cardinality},elements:{name:Ps.elements,defaultValue:[]}},superTypes:[ut.$type]},ArrayLiteral:{name:pu.$type,properties:{elements:{name:pu.elements,defaultValue:[]}},superTypes:[pi.$type]},ArrayType:{name:hu.$type,properties:{elementType:{name:hu.elementType}},superTypes:[di.$type]},Assignment:{name:Mr.$type,properties:{cardinality:{name:Mr.cardinality},feature:{name:Mr.feature},operator:{name:Mr.operator},predicate:{name:Mr.predicate},terminal:{name:Mr.terminal}},superTypes:[ut.$type]},BooleanLiteral:{name:za.$type,properties:{true:{name:za.true,defaultValue:!1}},superTypes:[on.$type,pi.$type]},CharacterRange:{name:Fr.$type,properties:{cardinality:{name:Fr.cardinality},left:{name:Fr.left},lookahead:{name:Fr.lookahead},parenthesized:{name:Fr.parenthesized,defaultValue:!1},right:{name:Fr.right}},superTypes:[Tt.$type]},Condition:{name:on.$type,properties:{},superTypes:[]},Conjunction:{name:Ds.$type,properties:{left:{name:Ds.left},right:{name:Ds.right}},superTypes:[on.$type]},CrossReference:{name:qr.$type,properties:{cardinality:{name:qr.cardinality},deprecatedSyntax:{name:qr.deprecatedSyntax,defaultValue:!1},isMulti:{name:qr.isMulti,defaultValue:!1},terminal:{name:qr.terminal},type:{name:qr.type,referenceType:At.$type}},superTypes:[ut.$type]},Disjunction:{name:Os.$type,properties:{left:{name:Os.left},right:{name:Os.right}},superTypes:[on.$type]},EndOfFile:{name:Ba.$type,properties:{cardinality:{name:Ba.cardinality}},superTypes:[ut.$type]},Grammar:{name:Pr.$type,properties:{imports:{name:Pr.imports,defaultValue:[]},interfaces:{name:Pr.interfaces,defaultValue:[]},isDeclared:{name:Pr.isDeclared,defaultValue:!1},name:{name:Pr.name},rules:{name:Pr.rules,defaultValue:[]},types:{name:Pr.types,defaultValue:[]}},superTypes:[]},GrammarImport:{name:fu.$type,properties:{path:{name:fu.path}},superTypes:[]},Group:{name:pn.$type,properties:{cardinality:{name:pn.cardinality},elements:{name:pn.elements,defaultValue:[]},guardCondition:{name:pn.guardCondition},predicate:{name:pn.predicate}},superTypes:[ut.$type]},InferredType:{name:Ka.$type,properties:{name:{name:Ka.name}},superTypes:[At.$type]},InfixRule:{name:Wt.$type,properties:{call:{name:Wt.call},dataType:{name:Wt.dataType},inferredType:{name:Wt.inferredType},name:{name:Wt.name},operators:{name:Wt.operators},parameters:{name:Wt.parameters,defaultValue:[]},returnType:{name:Wt.returnType,referenceType:At.$type}},superTypes:[_s.$type]},InfixRuleOperatorList:{name:na.$type,properties:{associativity:{name:na.associativity},operators:{name:na.operators,defaultValue:[]}},superTypes:[]},InfixRuleOperators:{name:mu.$type,properties:{precedences:{name:mu.precedences,defaultValue:[]}},superTypes:[]},Interface:{name:Ti.$type,properties:{attributes:{name:Ti.attributes,defaultValue:[]},name:{name:Ti.name},superTypes:{name:Ti.superTypes,defaultValue:[],referenceType:At.$type}},superTypes:[At.$type]},Keyword:{name:vi.$type,properties:{cardinality:{name:vi.cardinality},predicate:{name:vi.predicate},value:{name:vi.value}},superTypes:[ut.$type]},NamedArgument:{name:$s.$type,properties:{calledByName:{name:$s.calledByName,defaultValue:!1},parameter:{name:$s.parameter,referenceType:Es.$type},value:{name:$s.value}},superTypes:[]},NegatedToken:{name:hn.$type,properties:{cardinality:{name:hn.cardinality},lookahead:{name:hn.lookahead},parenthesized:{name:hn.parenthesized,defaultValue:!1},terminal:{name:hn.terminal}},superTypes:[Tt.$type]},Negation:{name:Wa.$type,properties:{value:{name:Wa.value}},superTypes:[on.$type]},NumberLiteral:{name:gu.$type,properties:{value:{name:gu.value}},superTypes:[pi.$type]},Parameter:{name:Es.$type,properties:{name:{name:Es.name}},superTypes:[]},ParameterReference:{name:Va.$type,properties:{parameter:{name:Va.parameter,referenceType:Es.$type}},superTypes:[on.$type]},ParserRule:{name:Ot.$type,properties:{dataType:{name:Ot.dataType},definition:{name:Ot.definition},entry:{name:Ot.entry,defaultValue:!1},fragment:{name:Ot.fragment,defaultValue:!1},inferredType:{name:Ot.inferredType},name:{name:Ot.name},parameters:{name:Ot.parameters,defaultValue:[]},returnType:{name:Ot.returnType,referenceType:At.$type}},superTypes:[_s.$type]},ReferenceType:{name:ia.$type,properties:{isMulti:{name:ia.isMulti,defaultValue:!1},referenceType:{name:ia.referenceType}},superTypes:[di.$type]},RegexToken:{name:fn.$type,properties:{cardinality:{name:fn.cardinality},lookahead:{name:fn.lookahead},parenthesized:{name:fn.parenthesized,defaultValue:!1},regex:{name:fn.regex}},superTypes:[Tt.$type]},ReturnType:{name:Ha.$type,properties:{name:{name:Ha.name}},superTypes:[]},RuleCall:{name:mn.$type,properties:{arguments:{name:mn.arguments,defaultValue:[]},cardinality:{name:mn.cardinality},predicate:{name:mn.predicate},rule:{name:mn.rule,referenceType:Rs.$type}},superTypes:[ut.$type]},SimpleType:{name:Ri.$type,properties:{primitiveType:{name:Ri.primitiveType},stringType:{name:Ri.stringType},typeRef:{name:Ri.typeRef,referenceType:At.$type}},superTypes:[di.$type]},StringLiteral:{name:yu.$type,properties:{value:{name:yu.value}},superTypes:[pi.$type]},TerminalAlternatives:{name:gn.$type,properties:{cardinality:{name:gn.cardinality},elements:{name:gn.elements,defaultValue:[]},lookahead:{name:gn.lookahead},parenthesized:{name:gn.parenthesized,defaultValue:!1}},superTypes:[Tt.$type]},TerminalElement:{name:Tt.$type,properties:{cardinality:{name:Tt.cardinality},lookahead:{name:Tt.lookahead},parenthesized:{name:Tt.parenthesized,defaultValue:!1}},superTypes:[ut.$type]},TerminalGroup:{name:yn.$type,properties:{cardinality:{name:yn.cardinality},elements:{name:yn.elements,defaultValue:[]},lookahead:{name:yn.lookahead},parenthesized:{name:yn.parenthesized,defaultValue:!1}},superTypes:[Tt.$type]},TerminalRule:{name:dr.$type,properties:{definition:{name:dr.definition},fragment:{name:dr.fragment,defaultValue:!1},hidden:{name:dr.hidden,defaultValue:!1},name:{name:dr.name},type:{name:dr.type}},superTypes:[Rs.$type]},TerminalRuleCall:{name:Tn.$type,properties:{cardinality:{name:Tn.cardinality},lookahead:{name:Tn.lookahead},parenthesized:{name:Tn.parenthesized,defaultValue:!1},rule:{name:Tn.rule,referenceType:dr.$type}},superTypes:[Tt.$type]},Type:{name:Ms.$type,properties:{name:{name:Ms.name},type:{name:Ms.type}},superTypes:[At.$type]},TypeAttribute:{name:ui.$type,properties:{defaultValue:{name:ui.defaultValue},isOptional:{name:ui.isOptional,defaultValue:!1},name:{name:ui.name},type:{name:ui.type}},superTypes:[]},TypeDefinition:{name:di.$type,properties:{},superTypes:[]},UnionType:{name:Tu.$type,properties:{types:{name:Tu.types,defaultValue:[]}},superTypes:[di.$type]},UnorderedGroup:{name:Fs.$type,properties:{cardinality:{name:Fs.cardinality},elements:{name:Fs.elements,defaultValue:[]}},superTypes:[ut.$type]},UntilToken:{name:vn.$type,properties:{cardinality:{name:vn.cardinality},lookahead:{name:vn.lookahead},parenthesized:{name:vn.parenthesized,defaultValue:!1},terminal:{name:vn.terminal}},superTypes:[Tt.$type]},ValueLiteral:{name:pi.$type,properties:{},superTypes:[]},Wildcard:{name:$i.$type,properties:{cardinality:{name:$i.cardinality},lookahead:{name:$i.lookahead},parenthesized:{name:$i.parenthesized,defaultValue:!1}},superTypes:[Tt.$type]}}}}const Z=new sh;function Ya(t){return new Hs(t,e=>Ii(e)?e.content:[],{includeRoot:!0})}function ig(t,e){for(;t.container;)if(t=t.container,t===e)return!0;return!1}function Xa(t){return{start:{character:t.startColumn-1,line:t.startLine-1},end:{character:t.endColumn,line:t.endLine-1}}}function Js(t){if(!t)return;const{offset:e,end:r,range:n}=t;return{range:n,offset:e,end:r,length:r-e}}var Xt;(function(t){t[t.Before=0]="Before",t[t.After=1]="After",t[t.OverlapFront=2]="OverlapFront",t[t.OverlapBack=3]="OverlapBack",t[t.Inside=4]="Inside",t[t.Outside=5]="Outside"})(Xt||(Xt={}));function sg(t,e){if(t.end.line<e.start.line||t.end.line===e.start.line&&t.end.character<=e.start.character)return Xt.Before;if(t.start.line>e.end.line||t.start.line===e.end.line&&t.start.character>=e.end.character)return Xt.After;const r=t.start.line>e.start.line||t.start.line===e.start.line&&t.start.character>=e.start.character,n=t.end.line<e.end.line||t.end.line===e.end.line&&t.end.character<=e.end.character;return r&&n?Xt.Inside:r?Xt.OverlapBack:n?Xt.OverlapFront:Xt.Outside}function og(t,e){return sg(t,e)>Xt.After}const ag=/^[\w\p{L}]$/u;function cg(t,e){if(t){const r=lg(t,!0);if(r&&vu(r,e))return r;if(Zp(t)){const n=t.content.findIndex(i=>!i.hidden);for(let i=n-1;i>=0;i--){const s=t.content[i];if(vu(s,e))return s}}}}function vu(t,e){return Jp(t)&&e.includes(t.tokenType.name)}function lg(t,e=!0){for(;t.container;){const r=t.container;let n=r.content.indexOf(t);for(;n>0;){n--;const i=r.content[n];if(e||!i.hidden)return i}t=r}}class oh extends Error{constructor(e,r){super(e?`${r} at ${e.range.start.line}:${e.range.start.character}`:r)}}function Yi(t,e="Error: Got unexpected value."){throw new Error(e)}function z(t){return t.charCodeAt(0)}function sa(t,e){Array.isArray(t)?t.forEach(function(r){e.push(r)}):e.push(t)}function hi(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}function an(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function ug(){throw Error("Internal Error - Should never get here!")}function Ru(t){return t.type==="Character"}const Zs=[];for(let t=z("0");t<=z("9");t++)Zs.push(t);const Qs=[z("_")].concat(Zs);for(let t=z("a");t<=z("z");t++)Qs.push(t);for(let t=z("A");t<=z("Z");t++)Qs.push(t);const $u=[z(" "),z("\f"),z(`
`),z("\r"),z("	"),z("\v"),z("	"),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z("\u2028"),z("\u2029"),z(" "),z(" "),z("　"),z("\uFEFF")],dg=/[0-9a-fA-F]/,ks=/[0-9]/,pg=/[1-9]/;class ah{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const r=this.disjunction();this.consumeChar("/");const n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":hi(n,"global");break;case"i":hi(n,"ignoreCase");break;case"m":hi(n,"multiLine");break;case"u":hi(n,"unicode");break;case"y":hi(n,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:r,loc:this.loc(0)}}disjunction(){const e=[],r=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(r)}}alternative(){const e=[],r=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let r;switch(this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":r="Lookbehind";break;case"!":r="NegativeLookbehind"}break}}an(r);const n=this.disjunction();return this.consumeChar(")"),{type:r,value:n,loc:this.loc(e)}}return ug()}quantifier(e=!1){let r;const n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:i,atMost:i};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),r={atLeast:i,atMost:s}):r={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&r===void 0)return;an(r);break}if(!(e===!0&&r===void 0)&&an(r))return this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(n),r}atom(){let e;const r=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),an(e))return e.loc=this.loc(r),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[z(`
`),z("\r"),z("\u2028"),z("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,r=!1;switch(this.popChar()){case"d":e=Zs;break;case"D":e=Zs,r=!0;break;case"s":e=$u;break;case"S":e=$u,r=!0;break;case"w":e=Qs;break;case"W":e=Qs,r=!0;break}if(an(e))return{type:"Set",value:e,complement:r}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=z("\f");break;case"n":e=z(`
`);break;case"r":e=z("\r");break;case"t":e=z("	");break;case"v":e=z("\v");break}if(an(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:z("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:z(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:z(e)}}}characterClass(){const e=[];let r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){const n=this.classAtom();if(n.type,Ru(n)&&this.isRangeDash()){this.consumeChar("-");const i=this.classAtom();if(i.type,Ru(i)){if(i.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:i.value})}else sa(n.value,e),e.push(z("-")),sa(i.value,e)}else sa(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:r,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:z("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const r=this.disjunction();this.consumeChar(")");const n={type:"Group",capturing:e,value:r};return e&&(n.idx=this.groupIdx),n}positiveInteger(){let e=this.popChar();if(pg.test(e)===!1)throw Error("Expecting a positive integer");for(;ks.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(ks.test(e)===!1)throw Error("Expecting an integer");for(;ks.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:z(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return ks.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let r="";for(let n=0;n<e;n++){const i=this.popChar();if(dg.test(i)===!1)throw Error("Expecting a HexDecimal digits");r+=i}return{type:"Character",value:parseInt(r,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class Lo{visitChildren(e){for(const r in e){const n=e[r];e.hasOwnProperty(r)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}const hg=/\r?\n/gm,fg=new ah;class mg extends Lo{constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){const r=String.fromCharCode(e.value);if(!this.multiline&&r===`
`&&(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const n=_o(r);this.endRegexpStack.push(n),this.isStarting&&(this.startRegexp+=n)}}visitSet(e){if(!this.multiline){const r=this.regex.substring(e.loc.begin,e.loc.end),n=new RegExp(r);this.multiline=!!`
`.match(n)}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const r=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(r),this.isStarting&&(this.startRegexp+=r)}}visitChildren(e){e.type==="Group"&&e.quantifier||super.visitChildren(e)}}const oa=new mg;function gg(t){try{return typeof t=="string"&&(t=new RegExp(t)),t=t.toString(),oa.reset(t),oa.visit(fg.pattern(t)),oa.multiline}catch{return!1}}const yg=`\f
\r	\v              \u2028\u2029  　\uFEFF`.split("");function ch(t){const e=typeof t=="string"?new RegExp(t):t;return yg.some(r=>e.test(r))}function _o(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Tg(t,e){const r=vg(t),n=e.match(r);return!!n&&n[0].length>0}function vg(t){typeof t=="string"&&(t=new RegExp(t));const e=t,r=t.source;let n=0;function i(){let s="",o;function a(l){s+=r.substr(n,l),n+=l}function c(l){s+="(?:"+r.substr(n,l)+"|$)",n+=l}for(;n<r.length;)switch(r[n]){case"\\":switch(r[n+1]){case"c":c(3);break;case"x":c(4);break;case"u":e.unicode?r[n+2]==="{"?c(r.indexOf("}",n)-n+1):c(6):c(2);break;case"p":case"P":e.unicode?c(r.indexOf("}",n)-n+1):c(2);break;case"k":c(r.indexOf(">",n)-n+1);break;default:c(2);break}break;case"[":o=/\[(?:\\.|.)*?\]/g,o.lastIndex=n,o=o.exec(r)||[],c(o[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":a(1);break;case"{":o=/\{\d+,?\d*\}/g,o.lastIndex=n,o=o.exec(r),o?a(o[0].length):c(1);break;case"(":if(r[n+1]==="?")switch(r[n+2]){case":":s+="(?:",n+=3,s+=i()+"|$)";break;case"=":s+="(?=",n+=3,s+=i()+")";break;case"!":o=n,n+=3,i(),s+=r.substr(o,n-o);break;case"<":switch(r[n+3]){case"=":case"!":o=n,n+=4,i(),s+=r.substr(o,n-o);break;default:a(r.indexOf(">",n)-n+1),s+=i()+"|$)";break}break}else a(1),s+=i()+"|$)";break;case")":return++n,s;default:c(1);break}return s}return new RegExp(i(),t.flags)}function Rg(t){return t.rules.find(e=>or(e)&&e.entry)}function $g(t){return t.rules.filter(e=>ar(e)&&e.hidden)}function lh(t,e){const r=new Set,n=Rg(t);if(!n)return new Set(t.rules);const i=[n].concat($g(t));for(const o of i)uh(o,r,e);const s=new Set;for(const o of t.rules)(r.has(o.name)||ar(o)&&o.hidden)&&s.add(o);return s}function uh(t,e,r){e.add(t.name),Vi(t).forEach(n=>{if(Hr(n)||r&&nh(n)){const i=n.rule.ref;i&&!e.has(i.name)&&uh(i,e,r)}})}function Eg(t){if(t.terminal)return t.terminal;if(t.type.ref){const e=ph(t.type.ref);return e==null?void 0:e.terminal}}function kg(t){return t.hidden&&!ch(ql(t))}function Sg(t,e){return!t||!e?[]:Fl(t,e,t.astNode,!0)}function dh(t,e,r){if(!t||!e)return;const n=Fl(t,e,t.astNode,!0);if(n.length!==0)return r!==void 0?r=Math.max(0,Math.min(r,n.length-1)):r=0,n[r]}function Fl(t,e,r,n){if(!n){const i=No(t.grammarSource,Wr);if(i&&i.feature===e)return[t]}return Ii(t)&&t.astNode===r?t.content.flatMap(i=>Fl(i,e,r,!1)):[]}function Ag(t,e,r){if(!t)return;const n=bg(t,e,t==null?void 0:t.astNode);if(n.length!==0)return r!==void 0?r=Math.max(0,Math.min(r,n.length-1)):r=0,n[r]}function bg(t,e,r){if(t.astNode!==r)return[];if(Vr(t.grammarSource)&&t.grammarSource.value===e)return[t];const n=Ya(t).iterator();let i;const s=[];do if(i=n.next(),!i.done){const o=i.value;o.astNode===r?Vr(o.grammarSource)&&o.grammarSource.value===e&&s.push(o):n.prune()}while(!i.done);return s}function Cg(t){var e;const r=t.astNode;for(;r===((e=t.container)==null?void 0:e.astNode);){const n=No(t.grammarSource,Wr);if(n)return n;t=t.container}}function ph(t){let e=t;return rh(e)&&(wo(e.$container)?e=e.$container.$container:Hi(e.$container)?e=e.$container:Yi(e.$container)),hh(t,e,new Map)}function hh(t,e,r){var n;function i(s,o){let a;return No(s,Wr)||(a=hh(o,o,r)),r.set(t,a),a}if(r.has(t))return r.get(t);r.set(t,void 0);for(const s of Vi(e)){if(Wr(s)&&s.feature.toLowerCase()==="name")return r.set(t,s),s;if(Hr(s)&&or(s.rule.ref))return i(s,s.rule.ref);if(Zm(s)&&(n=s.typeRef)!=null&&n.ref)return i(s,s.typeRef.ref)}}function fh(t){return mh(t,new Set)}function mh(t,e){if(e.has(t))return!0;e.add(t);for(const r of Vi(t))if(Hr(r)){if(!r.rule.ref||or(r.rule.ref)&&!mh(r.rule.ref,e)||Xs(r.rule.ref))return!1}else if(Wr(r)||wo(r))return!1;return!!t.definition}function gh(t){if(!ar(t)){if(t.inferredType)return t.inferredType.name;if(t.dataType)return t.dataType;if(t.returnType){const e=t.returnType.ref;if(e)return e.name}}}function Li(t){if(Hi(t))return or(t)&&fh(t)?t.name:gh(t)??t.name;if(Wm(t)||tg(t)||Jm(t))return t.name;if(wo(t)){const e=xg(t);if(e)return e}else if(rh(t))return t.name;throw new Error("Cannot get name of Unknown Type")}function xg(t){var e;if(t.inferredType)return t.inferredType.name;if((e=t.type)!=null&&e.ref)return Li(t.type.ref)}function Ng(t){var e;return ar(t)?((e=t.type)==null?void 0:e.name)??"string":gh(t)??t.name}function ql(t){const e={s:!1,i:!1,u:!1},r=Hn(t.definition,e),n=Object.entries(e).filter(([,i])=>i).map(([i])=>i).join("");return new RegExp(r,n)}const jl=/[\s\S]/.source;function Hn(t,e){var r;if(Qm(t))return wg(t);if(eg(t))return Ig(t);if(Gm(t))return Pg(t);if(nh(t)){const n=t.rule.ref;if(!n)throw new Error("Missing rule reference.");return er(Hn(n.definition),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized})}else{if(Vm(t))return _g(t);if(rg(t))return Lg(t);if(Xm(t)){const n=t.regex.lastIndexOf("/"),i=t.regex.substring(1,n),s=t.regex.substring(n+1);return e&&(e.i=s.includes("i"),e.s=s.includes("s"),e.u=s.includes("u")),er(i,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}else{if(ng(t))return er(jl,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized});throw new Error(`Invalid terminal element: ${t==null?void 0:t.$type}, ${(r=t==null?void 0:t.$cstNode)==null?void 0:r.text}`)}}}function wg(t){return er(t.elements.map(e=>Hn(e)).join("|"),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}function Ig(t){return er(t.elements.map(e=>Hn(e)).join(""),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}function Lg(t){return er(`${jl}*?${Hn(t.terminal)}`,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized})}function _g(t){return er(`(?!${Hn(t.terminal)})${jl}*?`,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized})}function Pg(t){return t.right?er(`[${aa(t.left)}-${aa(t.right)}]`,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1}):er(aa(t.left),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}function aa(t){return _o(t.value)}function er(t,e){return(e.parenthesized||e.lookahead||e.wrap!==!1)&&(t=`(${e.lookahead??(e.parenthesized?"":"?:")}${t})`),e.cardinality?`${t}${e.cardinality}`:t}function Dg(t){const e=[],r=t.Grammar;for(const n of r.rules)ar(n)&&kg(n)&&gg(ql(n))&&e.push(n.name);return{multilineCommentRules:e,nameRegexp:ag}}function Ja(t){console&&console.error&&console.error(`Error: ${t}`)}function yh(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function Th(t){const e=new Date().getTime(),r=t();return{time:new Date().getTime()-e,value:r}}function vh(t){function e(){}e.prototype=t;const r=new e;function n(){return typeof r.bar}return n(),n(),t}function Og(t){return Mg(t)?t.LABEL:t.name}function Mg(t){return ot(t.LABEL)&&t.LABEL!==""}class zt{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),j(this.definition,r=>{r.accept(e)})}}class et extends zt{constructor(e){super([]),this.idx=1,ft(this,Lt(e,r=>r!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Yn extends zt{constructor(e){super(e.definition),this.orgText="",ft(this,Lt(e,r=>r!==void 0))}}class at extends zt{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,ft(this,Lt(e,r=>r!==void 0))}}let Be=class extends zt{constructor(t){super(t.definition),this.idx=1,ft(this,Lt(t,e=>e!==void 0))}};class gt extends zt{constructor(e){super(e.definition),this.idx=1,ft(this,Lt(e,r=>r!==void 0))}}class yt extends zt{constructor(e){super(e.definition),this.idx=1,ft(this,Lt(e,r=>r!==void 0))}}class Re extends zt{constructor(e){super(e.definition),this.idx=1,ft(this,Lt(e,r=>r!==void 0))}}class ct extends zt{constructor(e){super(e.definition),this.idx=1,ft(this,Lt(e,r=>r!==void 0))}}class lt extends zt{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,ft(this,Lt(e,r=>r!==void 0))}}class ue{constructor(e){this.idx=1,ft(this,Lt(e,r=>r!==void 0))}accept(e){e.visit(this)}}function Fg(t){return O(t,qs)}function qs(t){function e(r){return O(r,qs)}if(t instanceof et){const r={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return ot(t.label)&&(r.label=t.label),r}else{if(t instanceof at)return{type:"Alternative",definition:e(t.definition)};if(t instanceof Be)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof gt)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof yt)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:qs(new ue({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof ct)return{type:"RepetitionWithSeparator",idx:t.idx,separator:qs(new ue({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Re)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof lt)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof ue){const r={type:"Terminal",name:t.terminalType.name,label:Og(t.terminalType),idx:t.idx};ot(t.label)&&(r.terminalLabel=t.label);const n=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(r.pattern=nr(n)?n.source:n),r}else{if(t instanceof Yn)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}class Xn{visit(e){const r=e;switch(r.constructor){case et:return this.visitNonTerminal(r);case at:return this.visitAlternative(r);case Be:return this.visitOption(r);case gt:return this.visitRepetitionMandatory(r);case yt:return this.visitRepetitionMandatoryWithSeparator(r);case ct:return this.visitRepetitionWithSeparator(r);case Re:return this.visitRepetition(r);case lt:return this.visitAlternation(r);case ue:return this.visitTerminal(r);case Yn:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function qg(t){return t instanceof at||t instanceof Be||t instanceof Re||t instanceof gt||t instanceof yt||t instanceof ct||t instanceof ue||t instanceof Yn}function eo(t,e=[]){return t instanceof Be||t instanceof Re||t instanceof ct?!0:t instanceof lt?Yp(t.definition,r=>eo(r,e)):t instanceof et&&rt(e,t)?!1:t instanceof zt?(t instanceof et&&e.push(t),Nt(t.definition,r=>eo(r,e))):!1}function jg(t){return t instanceof lt}function Mt(t){if(t instanceof et)return"SUBRULE";if(t instanceof Be)return"OPTION";if(t instanceof lt)return"OR";if(t instanceof gt)return"AT_LEAST_ONE";if(t instanceof yt)return"AT_LEAST_ONE_SEP";if(t instanceof ct)return"MANY_SEP";if(t instanceof Re)return"MANY";if(t instanceof ue)return"CONSUME";throw Error("non exhaustive match")}class Po{walk(e,r=[]){j(e.definition,(n,i)=>{const s=je(e.definition,i+1);if(n instanceof et)this.walkProdRef(n,s,r);else if(n instanceof ue)this.walkTerminal(n,s,r);else if(n instanceof at)this.walkFlat(n,s,r);else if(n instanceof Be)this.walkOption(n,s,r);else if(n instanceof gt)this.walkAtLeastOne(n,s,r);else if(n instanceof yt)this.walkAtLeastOneSep(n,s,r);else if(n instanceof ct)this.walkManySep(n,s,r);else if(n instanceof Re)this.walkMany(n,s,r);else if(n instanceof lt)this.walkOr(n,s,r);else throw Error("non exhaustive match")})}walkTerminal(e,r,n){}walkProdRef(e,r,n){}walkFlat(e,r,n){const i=r.concat(n);this.walk(e,i)}walkOption(e,r,n){const i=r.concat(n);this.walk(e,i)}walkAtLeastOne(e,r,n){const i=[new Be({definition:e.definition})].concat(r,n);this.walk(e,i)}walkAtLeastOneSep(e,r,n){const i=Eu(e,r,n);this.walk(e,i)}walkMany(e,r,n){const i=[new Be({definition:e.definition})].concat(r,n);this.walk(e,i)}walkManySep(e,r,n){const i=Eu(e,r,n);this.walk(e,i)}walkOr(e,r,n){const i=r.concat(n);j(e.definition,s=>{const o=new at({definition:[s]});this.walk(o,i)})}}function Eu(t,e,r){return[new Be({definition:[new ue({terminalType:t.separator})].concat(t.definition)})].concat(e,r)}function Xi(t){if(t instanceof et)return Xi(t.referencedRule);if(t instanceof ue)return zg(t);if(qg(t))return Ug(t);if(jg(t))return Gg(t);throw Error("non exhaustive match")}function Ug(t){let e=[];const r=t.definition;let n=0,i=r.length>n,s,o=!0;for(;i&&o;)s=r[n],o=eo(s),e=e.concat(Xi(s)),n=n+1,i=r.length>n;return Dl(e)}function Gg(t){const e=O(t.definition,r=>Xi(r));return Dl($t(e))}function zg(t){return[t.terminalType]}const Rh="_~IN~_";class Bg extends Po{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,r,n){}walkProdRef(e,r,n){const i=Wg(e.referencedRule,e.idx)+this.topProd.name,s=r.concat(n),o=new at({definition:s}),a=Xi(o);this.follows[i]=a}}function Kg(t){const e={};return j(t,r=>{const n=new Bg(r).startWalking();ft(e,n)}),e}function Wg(t,e){return t.name+e+Rh}let js={};const Vg=new ah;function Do(t){const e=t.toString();if(js.hasOwnProperty(e))return js[e];{const r=Vg.pattern(e);return js[e]=r,r}}function Hg(){js={}}const $h="Complement Sets are not supported for first char optimization",to=`Unable to use "first char" lexer optimizations:
`;function Yg(t,e=!1){try{const r=Do(t);return Za(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===$h)e&&yh(`${to}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";e&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Ja(`${to}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function Za(t,e,r){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)Za(t.value[i],e,r);break;case"Alternative":const n=t.value;for(let i=0;i<n.length;i++){const s=n[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const o=s;switch(o.type){case"Character":Ss(o.value,e,r);break;case"Set":if(o.complement===!0)throw Error($h);j(o.value,c=>{if(typeof c=="number")Ss(c,e,r);else{const l=c;if(r===!0)for(let d=l.from;d<=l.to;d++)Ss(d,e,r);else{for(let d=l.from;d<=l.to&&d<ki;d++)Ss(d,e,r);if(l.to>=ki){const d=l.from>=ki?l.from:ki,h=l.to,f=Rr(d),$=Rr(h);for(let S=f;S<=$;S++)e[S]=S}}}});break;case"Group":Za(o.value,e,r);break;default:throw Error("Non Exhaustive Match")}const a=o.quantifier!==void 0&&o.quantifier.atLeast===0;if(o.type==="Group"&&Qa(o)===!1||o.type!=="Group"&&a===!1)break}break;default:throw Error("non exhaustive match!")}return Pe(e)}function Ss(t,e,r){const n=Rr(t);e[n]=n,r===!0&&Xg(t,e)}function Xg(t,e){const r=String.fromCharCode(t),n=r.toUpperCase();if(n!==r){const i=Rr(n.charCodeAt(0));e[i]=i}else{const i=r.toLowerCase();if(i!==r){const s=Rr(i.charCodeAt(0));e[s]=s}}}function ku(t,e){return wn(t.value,r=>{if(typeof r=="number")return rt(e,r);{const n=r;return wn(e,i=>n.from<=i&&i<=n.to)!==void 0}})}function Qa(t){const e=t.quantifier;return e&&e.atLeast===0?!0:t.value?ze(t.value)?Nt(t.value,Qa):Qa(t.value):!1}class Jg extends Lo{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){rt(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?ku(e,this.targetCharCodes)===void 0&&(this.found=!0):ku(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Ul(t,e){if(e instanceof RegExp){const r=Do(e),n=new Jg(t);return n.visit(r),n.found}else return wn(e,r=>rt(t,r.charCodeAt(0)))!==void 0}const Yr="PATTERN",Ei="defaultMode",As="modes";let Eh=typeof new RegExp("(?:)").sticky=="boolean";function Zg(t,e){e=Pl(e,{useSticky:Eh,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(_,C)=>C()});const r=e.tracer;r("initCharCodeToOptimizedIndexMap",()=>{Ey()});let n;r("Reject Lexer.NA",()=>{n=xo(t,_=>_[Yr]===st.NA)});let i=!1,s;r("Transform Patterns",()=>{i=!1,s=O(n,_=>{const C=_[Yr];if(nr(C)){const D=C.source;return D.length===1&&D!=="^"&&D!=="$"&&D!=="."&&!C.ignoreCase?D:D.length===2&&D[0]==="\\"&&!rt(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],D[1])?D[1]:e.useSticky?Au(C):Su(C)}else{if(Zr(C))return i=!0,{exec:C};if(typeof C=="object")return i=!0,C;if(typeof C=="string"){if(C.length===1)return C;{const D=C.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),Q=new RegExp(D);return e.useSticky?Au(Q):Su(Q)}}else throw Error("non exhaustive match")}})});let o,a,c,l,d;r("misc mapping",()=>{o=O(n,_=>_.tokenTypeIdx),a=O(n,_=>{const C=_.GROUP;if(C!==st.SKIPPED){if(ot(C))return C;if(rr(C))return!1;throw Error("non exhaustive match")}}),c=O(n,_=>{const C=_.LONGER_ALT;if(C)return ze(C)?O(C,D=>lu(n,D)):[lu(n,C)]}),l=O(n,_=>_.PUSH_MODE),d=O(n,_=>G(_,"POP_MODE"))});let h;r("Line Terminator Handling",()=>{const _=Ah(e.lineTerminatorCharacters);h=O(n,C=>!1),e.positionTracking!=="onlyOffset"&&(h=O(n,C=>G(C,"LINE_BREAKS")?!!C.LINE_BREAKS:Sh(C,_)===!1&&Ul(_,C.PATTERN)))});let f,$,S,b;r("Misc Mapping #2",()=>{f=O(n,kh),$=O(s,vy),S=Qe(n,(_,C)=>{const D=C.GROUP;return ot(D)&&D!==st.SKIPPED&&(_[D]=[]),_},{}),b=O(s,(_,C)=>({pattern:s[C],longerAlt:c[C],canLineTerminator:h[C],isCustom:f[C],short:$[C],group:a[C],push:l[C],pop:d[C],tokenTypeIdx:o[C],tokenType:n[C]}))});let F=!0,L=[];return e.safeMode||r("First Char Optimization",()=>{L=Qe(n,(_,C,D)=>{if(typeof C.PATTERN=="string"){const Q=C.PATTERN.charCodeAt(0),ne=Rr(Q);ca(_,ne,b[D])}else if(ze(C.START_CHARS_HINT)){let Q;j(C.START_CHARS_HINT,ne=>{const ie=typeof ne=="string"?ne.charCodeAt(0):ne,be=Rr(ie);Q!==be&&(Q=be,ca(_,be,b[D]))})}else if(nr(C.PATTERN))if(C.PATTERN.unicode)F=!1,e.ensureOptimizations&&Ja(`${to}	Unable to analyze < ${C.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const Q=Yg(C.PATTERN,e.ensureOptimizations);ae(Q)&&(F=!1),j(Q,ne=>{ca(_,ne,b[D])})}else e.ensureOptimizations&&Ja(`${to}	TokenType: <${C.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),F=!1;return _},[])}),{emptyGroups:S,patternIdxToConfig:b,charCodeToPatternIdxToConfig:L,hasCustom:i,canBeOptimized:F}}function Qg(t,e){let r=[];const n=ty(t);r=r.concat(n.errors);const i=ry(n.valid),s=i.valid;return r=r.concat(i.errors),r=r.concat(ey(s)),r=r.concat(uy(s)),r=r.concat(dy(s,e)),r=r.concat(py(s)),r}function ey(t){let e=[];const r=mt(t,n=>nr(n[Yr]));return e=e.concat(iy(r)),e=e.concat(ay(r)),e=e.concat(cy(r)),e=e.concat(ly(r)),e=e.concat(sy(r)),e}function ty(t){const e=mt(t,i=>!G(i,Yr)),r=O(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:$e.MISSING_PATTERN,tokenTypes:[i]})),n=Co(t,e);return{errors:r,valid:n}}function ry(t){const e=mt(t,i=>{const s=i[Yr];return!nr(s)&&!Zr(s)&&!G(s,"exec")&&!ot(s)}),r=O(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:$e.INVALID_PATTERN,tokenTypes:[i]})),n=Co(t,e);return{errors:r,valid:n}}const ny=/[^\\][$]/;function iy(t){class e extends Lo{constructor(){super(...arguments),this.found=!1}visitEndAnchor(i){this.found=!0}}const r=mt(t,n=>{const i=n.PATTERN;try{const s=Do(i),o=new e;return o.visit(s),o.found}catch{return ny.test(i.source)}});return O(r,n=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+n.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:$e.EOI_ANCHOR_FOUND,tokenTypes:[n]}))}function sy(t){const e=mt(t,r=>r.PATTERN.test(""));return O(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:$e.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}const oy=/[^\\[][\^]|^\^/;function ay(t){class e extends Lo{constructor(){super(...arguments),this.found=!1}visitStartAnchor(i){this.found=!0}}const r=mt(t,n=>{const i=n.PATTERN;try{const s=Do(i),o=new e;return o.visit(s),o.found}catch{return oy.test(i.source)}});return O(r,n=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+n.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:$e.SOI_ANCHOR_FOUND,tokenTypes:[n]}))}function cy(t){const e=mt(t,r=>{const n=r[Yr];return n instanceof RegExp&&(n.multiline||n.global)});return O(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:$e.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function ly(t){const e=[];let r=O(t,i=>Qe(t,(s,o)=>(i.PATTERN.source===o.PATTERN.source&&!rt(e,o)&&o.PATTERN!==st.NA&&(e.push(o),s.push(o)),s),[]));r=Wi(r);const n=mt(r,i=>i.length>1);return O(n,i=>{const s=O(i,o=>o.name);return{message:`The same RegExp pattern ->${It(i).PATTERN}<-has been used in all of the following Token Types: ${s.join(", ")} <-`,type:$e.DUPLICATE_PATTERNS_FOUND,tokenTypes:i}})}function uy(t){const e=mt(t,r=>{if(!G(r,"GROUP"))return!1;const n=r.GROUP;return n!==st.SKIPPED&&n!==st.NA&&!ot(n)});return O(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:$e.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function dy(t,e){const r=mt(t,n=>n.PUSH_MODE!==void 0&&!rt(e,n.PUSH_MODE));return O(r,n=>({message:`Token Type: ->${n.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${n.PUSH_MODE}<-which does not exist`,type:$e.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[n]}))}function py(t){const e=[],r=Qe(t,(n,i,s)=>{const o=i.PATTERN;return o===st.NA||(ot(o)?n.push({str:o,idx:s,tokenType:i}):nr(o)&&fy(o)&&n.push({str:o.source,idx:s,tokenType:i})),n},[]);return j(t,(n,i)=>{j(r,({str:s,idx:o,tokenType:a})=>{if(i<o&&hy(s,n.PATTERN)){const c=`Token: ->${a.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:$e.UNREACHABLE_PATTERN,tokenTypes:[n,a]})}})}),e}function hy(t,e){if(nr(e)){if(my(e))return!1;const r=e.exec(t);return r!==null&&r.index===0}else{if(Zr(e))return e(t,0,[],{});if(G(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function fy(t){return wn([".","\\","[","]","|","^","$","(",")","?","*","+","{"],e=>t.source.indexOf(e)!==-1)===void 0}function my(t){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(t.source)}function Su(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function Au(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function gy(t,e,r){const n=[];return G(t,Ei)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+Ei+`> property in its definition
`,type:$e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),G(t,As)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+As+`> property in its definition
`,type:$e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),G(t,As)&&G(t,Ei)&&!G(t.modes,t.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${Ei}: <${t.defaultMode}>which does not exist
`,type:$e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),G(t,As)&&j(t.modes,(i,s)=>{j(i,(o,a)=>{if(rr(o))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${a}>
`,type:$e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(G(o,"LONGER_ALT")){const c=ze(o.LONGER_ALT)?o.LONGER_ALT:[o.LONGER_ALT];j(c,l=>{!rr(l)&&!rt(i,l)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${o.name}> outside of mode <${s}>
`,type:$e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),n}function yy(t,e,r){const n=[];let i=!1;const s=Wi($t(Pe(t.modes))),o=xo(s,c=>c[Yr]===st.NA),a=Ah(r);return e&&j(o,c=>{const l=Sh(c,a);if(l!==!1){const d={message:$y(c,l),type:l.issue,tokenType:c};n.push(d)}else G(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(i=!0):Ul(a,c.PATTERN)&&(i=!0)}),e&&!i&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:$e.NO_LINE_BREAKS_FLAGS}),n}function Ty(t){const e={},r=Nn(t);return j(r,n=>{const i=t[n];if(ze(i))e[n]=[];else throw Error("non exhaustive match")}),e}function kh(t){const e=t.PATTERN;if(nr(e))return!1;if(Zr(e)||G(e,"exec"))return!0;if(ot(e))return!1;throw Error("non exhaustive match")}function vy(t){return ot(t)&&t.length===1?t.charCodeAt(0):!1}const Ry={test:function(t){const e=t.length;for(let r=this.lastIndex;r<e;r++){const n=t.charCodeAt(r);if(n===10)return this.lastIndex=r+1,!0;if(n===13)return t.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function Sh(t,e){if(G(t,"LINE_BREAKS"))return!1;if(nr(t.PATTERN)){try{Ul(e,t.PATTERN)}catch(r){return{issue:$e.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(ot(t.PATTERN))return!1;if(kh(t))return{issue:$e.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function $y(t,e){if(e.issue===$e.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===$e.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Ah(t){return O(t,e=>ot(e)?e.charCodeAt(0):e)}function ca(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}const ki=256;let Us=[];function Rr(t){return t<ki?t:Us[t]}function Ey(){if(ae(Us)){Us=new Array(65536);for(let t=0;t<65536;t++)Us[t]=t>255?255+~~(t/255):t}}function Ji(t,e){const r=t.tokenTypeIdx;return r===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[r]===!0}function ro(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let bu=1;const bh={};function Zi(t){const e=ky(t);Sy(e),by(e),Ay(e),j(e,r=>{r.isParent=r.categoryMatches.length>0})}function ky(t){let e=Ke(t),r=t,n=!0;for(;n;){r=Wi($t(O(r,s=>s.CATEGORIES)));const i=Co(r,e);e=e.concat(i),ae(i)?n=!1:r=i}return e}function Sy(t){j(t,e=>{xh(e)||(bh[bu]=e,e.tokenTypeIdx=bu++),Cu(e)&&!ze(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Cu(e)||(e.CATEGORIES=[]),Cy(e)||(e.categoryMatches=[]),xy(e)||(e.categoryMatchesMap={})})}function Ay(t){j(t,e=>{e.categoryMatches=[],j(e.categoryMatchesMap,(r,n)=>{e.categoryMatches.push(bh[n].tokenTypeIdx)})})}function by(t){j(t,e=>{Ch([],e)})}function Ch(t,e){j(t,r=>{e.categoryMatchesMap[r.tokenTypeIdx]=!0}),j(e.CATEGORIES,r=>{const n=t.concat(e);rt(n,r)||Ch(n,r)})}function xh(t){return G(t,"tokenTypeIdx")}function Cu(t){return G(t,"CATEGORIES")}function Cy(t){return G(t,"categoryMatches")}function xy(t){return G(t,"categoryMatchesMap")}function Ny(t){return G(t,"tokenTypeIdx")}const ec={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,r,n,i,s){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${r} characters.`}};var $e;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})($e||($e={}));const Si={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:ec,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Si);class st{constructor(e,r=Si){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const o=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${o}--> <${i}>`);const{time:a,value:c}=Th(s),l=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${o}<-- <${i}> time: ${a}ms`),this.traceInitIndent--,c}else return s()},typeof r=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=ft({},Si,r);const n=this.config.traceInitPerf;n===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof n=="number"&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Si.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Ry;else if(this.config.lineTerminatorCharacters===Si.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),ze(e)?i={modes:{defaultMode:Ke(e)},defaultMode:Ei}:(s=!1,i=Ke(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(gy(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(yy(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},j(i.modes,(a,c)=>{i.modes[c]=xo(a,l=>rr(l))});const o=Nn(i.modes);if(j(i.modes,(a,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Qg(a,o))}),ae(this.lexerDefinitionErrors)){Zi(a);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=Zg(a,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=l.charCodeToPatternIdxToConfig,this.emptyGroups=ft({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=l.canBeOptimized}})}),this.defaultMode=i.defaultMode,!ae(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const a=O(this.lexerDefinitionErrors,c=>c.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+a)}j(this.lexerDefinitionWarning,a=>{yh(a.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Eh?(this.chopInput=cu,this.match=this.matchWithTest):(this.updateLastIndex=Oe,this.match=this.matchWithExec),s&&(this.handleModes=Oe),this.trackStartLines===!1&&(this.computeNewColumn=cu),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Oe),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const a=Qe(this.canModeBeOptimized,(c,l,d)=>(l===!1&&c.push(d),c),[]);if(r.ensureOptimizations&&!ae(a))throw Error(`Lexer Modes: < ${a.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{Hg()}),this.TRACE_INIT("toFastProperties",()=>{vh(this)})})}tokenize(e,r=this.defaultMode){if(!ae(this.lexerDefinitionErrors)){const n=O(this.lexerDefinitionErrors,i=>i.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+n)}return this.tokenizeInternal(e,r)}tokenizeInternal(e,r){let n,i,s,o,a,c,l,d,h,f,$,S,b,F,L;const _=e,C=_.length;let D=0,Q=0;const ne=this.hasCustom?0:Math.floor(e.length/10),ie=new Array(ne),be=[];let Ne=this.trackStartLines?1:void 0,we=this.trackStartLines?1:void 0;const A=Ty(this.emptyGroups),v=this.trackStartLines,y=this.config.lineTerminatorsPattern;let k=0,m=[],g=[];const R=[],w=[];Object.freeze(w);let P;function I(){return m}function U(te){const Le=Rr(te),Fe=g[Le];return Fe===void 0?w:Fe}const B=te=>{if(R.length===1&&te.tokenType.PUSH_MODE===void 0){const Le=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(te);be.push({offset:te.startOffset,line:te.startLine,column:te.startColumn,length:te.image.length,message:Le})}else{R.pop();const Le=Kr(R);m=this.patternIdxToConfig[Le],g=this.charCodeToPatternIdxToConfig[Le],k=m.length;const Fe=this.canModeBeOptimized[Le]&&this.config.safeMode===!1;g&&Fe?P=U:P=I}};function se(te){R.push(te),g=this.charCodeToPatternIdxToConfig[te],m=this.patternIdxToConfig[te],k=m.length,k=m.length;const Le=this.canModeBeOptimized[te]&&this.config.safeMode===!1;g&&Le?P=U:P=I}se.call(this,r);let W;const Ie=this.config.recoveryEnabled;for(;D<C;){c=null;const te=_.charCodeAt(D),Le=P(te),Fe=Le.length;for(n=0;n<Fe;n++){W=Le[n];const de=W.pattern;l=null;const qe=W.short;if(qe!==!1?te===qe&&(c=de):W.isCustom===!0?(L=de.exec(_,D,ie,A),L!==null?(c=L[0],L.payload!==void 0&&(l=L.payload)):c=null):(this.updateLastIndex(de,D),c=this.match(de,e,D)),c!==null){if(a=W.longerAlt,a!==void 0){const Ee=a.length;for(s=0;s<Ee;s++){const V=m[a[s]],De=V.pattern;if(d=null,V.isCustom===!0?(L=De.exec(_,D,ie,A),L!==null?(o=L[0],L.payload!==void 0&&(d=L.payload)):o=null):(this.updateLastIndex(De,D),o=this.match(De,e,D)),o&&o.length>c.length){c=o,l=d,W=V;break}}}break}}if(c!==null){if(h=c.length,f=W.group,f!==void 0&&($=W.tokenTypeIdx,S=this.createTokenInstance(c,D,$,W.tokenType,Ne,we,h),this.handlePayload(S,l),f===!1?Q=this.addToken(ie,Q,S):A[f].push(S)),e=this.chopInput(e,h),D=D+h,we=this.computeNewColumn(we,h),v===!0&&W.canLineTerminator===!0){let de=0,qe,Ee;y.lastIndex=0;do qe=y.test(c),qe===!0&&(Ee=y.lastIndex-1,de++);while(qe===!0);de!==0&&(Ne=Ne+de,we=h-Ee,this.updateTokenEndLineColumnLocation(S,f,Ee,de,Ne,we,h))}this.handleModes(W,B,se,S)}else{const de=D,qe=Ne,Ee=we;let V=Ie===!1;for(;V===!1&&D<C;)for(e=this.chopInput(e,1),D++,i=0;i<k;i++){const De=m[i],ce=De.pattern,nt=De.short;if(nt!==!1?_.charCodeAt(D)===nt&&(V=!0):De.isCustom===!0?V=ce.exec(_,D,ie,A)!==null:(this.updateLastIndex(ce,D),V=ce.exec(e)!==null),V===!0)break}if(b=D-de,we=this.computeNewColumn(we,b),F=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(_,de,b,qe,Ee,Kr(R)),be.push({offset:de,line:qe,column:Ee,length:b,message:F}),Ie===!1)break}}return this.hasCustom||(ie.length=Q),{tokens:ie,groups:A,errors:be}}handleModes(e,r,n,i){if(e.pop===!0){const s=e.push;r(i),s!==void 0&&n.call(this,s)}else e.push!==void 0&&n.call(this,e.push)}chopInput(e,r){return e.substring(r)}updateLastIndex(e,r){e.lastIndex=r}updateTokenEndLineColumnLocation(e,r,n,i,s,o,a){let c,l;r!==void 0&&(c=n===a-1,l=c?-1:0,i===1&&c===!0||(e.endLine=s+l,e.endColumn=o-1+-l))}computeNewColumn(e,r){return e+r}createOffsetOnlyToken(e,r,n,i){return{image:e,startOffset:r,tokenTypeIdx:n,tokenType:i}}createStartOnlyToken(e,r,n,i,s,o){return{image:e,startOffset:r,startLine:s,startColumn:o,tokenTypeIdx:n,tokenType:i}}createFullToken(e,r,n,i,s,o,a){return{image:e,startOffset:r,endOffset:r+a-1,startLine:s,endLine:s,startColumn:o,endColumn:o+a-1,tokenTypeIdx:n,tokenType:i}}addTokenUsingPush(e,r,n){return e.push(n),r}addTokenUsingMemberAccess(e,r,n){return e[r]=n,r++,r}handlePayloadNoCustom(e,r){}handlePayloadWithCustom(e,r){r!==null&&(e.payload=r)}matchWithTest(e,r,n){return e.test(r)===!0?r.substring(n,e.lastIndex):null}matchWithExec(e,r){const n=e.exec(r);return n!==null?n[0]:null}}st.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";st.NA=/NOT_APPLICABLE/;function xn(t){return Nh(t)?t.LABEL:t.name}function Nh(t){return ot(t.LABEL)&&t.LABEL!==""}const wy="parent",xu="categories",Nu="label",wu="group",Iu="push_mode",Lu="pop_mode",_u="longer_alt",Pu="line_breaks",Du="start_chars_hint";function wh(t){return Iy(t)}function Iy(t){const e=t.pattern,r={};if(r.name=t.name,rr(e)||(r.PATTERN=e),G(t,wy))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return G(t,xu)&&(r.CATEGORIES=t[xu]),Zi([r]),G(t,Nu)&&(r.LABEL=t[Nu]),G(t,wu)&&(r.GROUP=t[wu]),G(t,Lu)&&(r.POP_MODE=t[Lu]),G(t,Iu)&&(r.PUSH_MODE=t[Iu]),G(t,_u)&&(r.LONGER_ALT=t[_u]),G(t,Pu)&&(r.LINE_BREAKS=t[Pu]),G(t,Du)&&(r.START_CHARS_HINT=t[Du]),r}const $r=wh({name:"EOF",pattern:st.NA});Zi([$r]);function Gl(t,e,r,n,i,s,o,a){return{image:e,startOffset:r,endOffset:n,startLine:i,endLine:s,startColumn:o,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function Ih(t,e){return Ji(t,e)}const bn={buildMismatchTokenMessage({expected:t,actual:e,previous:r,ruleName:n}){return`Expecting ${Nh(t)?`--> ${xn(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:r,customUserDescription:n,ruleName:i}){const s="Expecting: ",o=`
but found: '`+It(e).image+"'";if(n)return s+n+o;{const a=Qe(t,(d,h)=>d.concat(h),[]),c=O(a,d=>`[${O(d,h=>xn(h)).join(", ")}]`),l=`one of these possible Token sequences:
${O(c,(d,h)=>`  ${h+1}. ${d}`).join(`
`)}`;return s+l+o}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:r,ruleName:n}){const i="Expecting: ",s=`
but found: '`+It(e).image+"'";if(r)return i+r+s;{const o=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${O(t,a=>`[${O(a,c=>xn(c)).join(",")}]`).join(" ,")}>`;return i+o+s}}};Object.freeze(bn);const Ly={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},zr={buildDuplicateFoundError(t,e){function r(d){return d instanceof ue?d.terminalType.name:d instanceof et?d.nonTerminalName:""}const n=t.name,i=It(e),s=i.idx,o=Mt(i),a=r(i),c=s>0;let l=`->${o}${c?s:""}<- ${a?`with argument: ->${a}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){const e=O(t.prefixPath,n=>xn(n)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=O(t.prefixPath,i=>xn(i)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx;let n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(t){let e=Mt(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){const e=t.topLevelRule.name,r=O(t.leftRecursionPath,i=>i.name),n=`${e} --> ${r.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof Yn?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function _y(t,e){const r=new Py(t,e);return r.resolveRefs(),r.errors}class Py extends Xn{constructor(e,r){super(),this.nameToTopRule=e,this.errMsgProvider=r,this.errors=[]}resolveRefs(){j(Pe(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const r=this.nameToTopRule[e.nonTerminalName];if(r)e.referencedRule=r;else{const n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:tt.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class Dy extends Po{constructor(e,r){super(),this.topProd=e,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Ke(this.path.ruleStack).reverse(),this.occurrenceStack=Ke(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,r=[]){this.found||super.walk(e,r)}walkProdRef(e,r,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const i=r.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){ae(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class Oy extends Dy{constructor(e,r){super(e,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,r,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const i=r.concat(n),s=new at({definition:i});this.possibleTokTypes=Xi(s),this.found=!0}}}class Oo extends Po{constructor(e,r){super(),this.topRule=e,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class My extends Oo{walkMany(e,r,n){if(e.idx===this.occurrence){const i=It(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof ue&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,r,n)}}class Ou extends Oo{walkManySep(e,r,n){if(e.idx===this.occurrence){const i=It(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof ue&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,r,n)}}class Fy extends Oo{walkAtLeastOne(e,r,n){if(e.idx===this.occurrence){const i=It(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof ue&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,r,n)}}class Mu extends Oo{walkAtLeastOneSep(e,r,n){if(e.idx===this.occurrence){const i=It(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof ue&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,r,n)}}function tc(t,e,r=[]){r=Ke(r);let n=[],i=0;function s(a){return a.concat(je(t,i+1))}function o(a){const c=tc(s(a),e,r);return n.concat(c)}for(;r.length<e&&i<t.length;){const a=t[i];if(a instanceof at||a instanceof et)return o(a.definition);if(a instanceof Be)n=o(a.definition);else if(a instanceof gt){const c=a.definition.concat([new Re({definition:a.definition})]);return o(c)}else if(a instanceof yt){const c=[new at({definition:a.definition}),new Re({definition:[new ue({terminalType:a.separator})].concat(a.definition)})];return o(c)}else if(a instanceof ct){const c=a.definition.concat([new Re({definition:[new ue({terminalType:a.separator})].concat(a.definition)})]);n=o(c)}else if(a instanceof Re){const c=a.definition.concat([new Re({definition:a.definition})]);n=o(c)}else{if(a instanceof lt)return j(a.definition,c=>{ae(c.definition)===!1&&(n=o(c.definition))}),n;if(a instanceof ue)r.push(a.terminalType);else throw Error("non exhaustive match")}i++}return n.push({partialPath:r,suffixDef:je(t,i)}),n}function Lh(t,e,r,n){const i="EXIT_NONE_TERMINAL",s=[i],o="EXIT_ALTERNATIVE";let a=!1;const c=e.length,l=c-n-1,d=[],h=[];for(h.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!ae(h);){const f=h.pop();if(f===o){a&&Kr(h).idx<=l&&h.pop();continue}const $=f.def,S=f.idx,b=f.ruleStack,F=f.occurrenceStack;if(ae($))continue;const L=$[0];if(L===i){const _={idx:S,def:je($),ruleStack:wi(b),occurrenceStack:wi(F)};h.push(_)}else if(L instanceof ue)if(S<c-1){const _=S+1,C=e[_];if(r(C,L.terminalType)){const D={idx:_,def:je($),ruleStack:b,occurrenceStack:F};h.push(D)}}else if(S===c-1)d.push({nextTokenType:L.terminalType,nextTokenOccurrence:L.idx,ruleStack:b,occurrenceStack:F}),a=!0;else throw Error("non exhaustive match");else if(L instanceof et){const _=Ke(b);_.push(L.nonTerminalName);const C=Ke(F);C.push(L.idx);const D={idx:S,def:L.definition.concat(s,je($)),ruleStack:_,occurrenceStack:C};h.push(D)}else if(L instanceof Be){const _={idx:S,def:je($),ruleStack:b,occurrenceStack:F};h.push(_),h.push(o);const C={idx:S,def:L.definition.concat(je($)),ruleStack:b,occurrenceStack:F};h.push(C)}else if(L instanceof gt){const _=new Re({definition:L.definition,idx:L.idx}),C=L.definition.concat([_],je($)),D={idx:S,def:C,ruleStack:b,occurrenceStack:F};h.push(D)}else if(L instanceof yt){const _=new ue({terminalType:L.separator}),C=new Re({definition:[_].concat(L.definition),idx:L.idx}),D=L.definition.concat([C],je($)),Q={idx:S,def:D,ruleStack:b,occurrenceStack:F};h.push(Q)}else if(L instanceof ct){const _={idx:S,def:je($),ruleStack:b,occurrenceStack:F};h.push(_),h.push(o);const C=new ue({terminalType:L.separator}),D=new Re({definition:[C].concat(L.definition),idx:L.idx}),Q=L.definition.concat([D],je($)),ne={idx:S,def:Q,ruleStack:b,occurrenceStack:F};h.push(ne)}else if(L instanceof Re){const _={idx:S,def:je($),ruleStack:b,occurrenceStack:F};h.push(_),h.push(o);const C=new Re({definition:L.definition,idx:L.idx}),D=L.definition.concat([C],je($)),Q={idx:S,def:D,ruleStack:b,occurrenceStack:F};h.push(Q)}else if(L instanceof lt)for(let _=L.definition.length-1;_>=0;_--){const C=L.definition[_],D={idx:S,def:C.definition.concat(je($)),ruleStack:b,occurrenceStack:F};h.push(D),h.push(o)}else if(L instanceof at)h.push({idx:S,def:L.definition.concat(je($)),ruleStack:b,occurrenceStack:F});else if(L instanceof Yn)h.push(qy(L,S,b,F));else throw Error("non exhaustive match")}return d}function qy(t,e,r,n){const i=Ke(r);i.push(t.name);const s=Ke(n);return s.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:s}}var me;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(me||(me={}));function zl(t){if(t instanceof Be||t==="Option")return me.OPTION;if(t instanceof Re||t==="Repetition")return me.REPETITION;if(t instanceof gt||t==="RepetitionMandatory")return me.REPETITION_MANDATORY;if(t instanceof yt||t==="RepetitionMandatoryWithSeparator")return me.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof ct||t==="RepetitionWithSeparator")return me.REPETITION_WITH_SEPARATOR;if(t instanceof lt||t==="Alternation")return me.ALTERNATION;throw Error("non exhaustive match")}function Fu(t){const{occurrence:e,rule:r,prodType:n,maxLookahead:i}=t,s=zl(n);return s===me.ALTERNATION?Mo(e,r,i):Fo(e,r,s,i)}function jy(t,e,r,n,i,s){const o=Mo(t,e,r),a=Dh(o)?ro:Ji;return s(o,n,a,i)}function Uy(t,e,r,n,i,s){const o=Fo(t,e,i,r),a=Dh(o)?ro:Ji;return s(o[0],a,n)}function Gy(t,e,r,n){const i=t.length,s=Nt(t,o=>Nt(o,a=>a.length===1));if(e)return function(o){const a=O(o,c=>c.GATE);for(let c=0;c<i;c++){const l=t[c],d=l.length,h=a[c];if(!(h!==void 0&&h.call(this)===!1))e:for(let f=0;f<d;f++){const $=l[f],S=$.length;for(let b=0;b<S;b++){const F=this.LA(b+1);if(r(F,$[b])===!1)continue e}return c}}};if(s&&!n){const o=O(t,c=>$t(c)),a=Qe(o,(c,l,d)=>(j(l,h=>{G(c,h.tokenTypeIdx)||(c[h.tokenTypeIdx]=d),j(h.categoryMatches,f=>{G(c,f)||(c[f]=d)})}),c),{});return function(){const c=this.LA(1);return a[c.tokenTypeIdx]}}else return function(){for(let o=0;o<i;o++){const a=t[o],c=a.length;e:for(let l=0;l<c;l++){const d=a[l],h=d.length;for(let f=0;f<h;f++){const $=this.LA(f+1);if(r($,d[f])===!1)continue e}return o}}}}function zy(t,e,r){const n=Nt(t,s=>s.length===1),i=t.length;if(n&&!r){const s=$t(t);if(s.length===1&&ae(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const o=Qe(s,(a,c,l)=>(a[c.tokenTypeIdx]=!0,j(c.categoryMatches,d=>{a[d]=!0}),a),[]);return function(){const a=this.LA(1);return o[a.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<i;s++){const o=t[s],a=o.length;for(let c=0;c<a;c++){const l=this.LA(c+1);if(e(l,o[c])===!1)continue e}return!0}return!1}}class By extends Po{constructor(e,r,n){super(),this.topProd=e,this.targetOccurrence=r,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,r,n,i){return e.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=n.concat(i),!0):!1}walkOption(e,r,n){this.checkIsTarget(e,me.OPTION,r,n)||super.walkOption(e,r,n)}walkAtLeastOne(e,r,n){this.checkIsTarget(e,me.REPETITION_MANDATORY,r,n)||super.walkOption(e,r,n)}walkAtLeastOneSep(e,r,n){this.checkIsTarget(e,me.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}walkMany(e,r,n){this.checkIsTarget(e,me.REPETITION,r,n)||super.walkOption(e,r,n)}walkManySep(e,r,n){this.checkIsTarget(e,me.REPETITION_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}}class _h extends Xn{constructor(e,r,n){super(),this.targetOccurrence=e,this.targetProdType=r,this.targetRef=n,this.result=[]}checkIsTarget(e,r){e.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,me.OPTION)}visitRepetition(e){this.checkIsTarget(e,me.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,me.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,me.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,me.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,me.ALTERNATION)}}function qu(t){const e=new Array(t);for(let r=0;r<t;r++)e[r]=[];return e}function la(t){let e=[""];for(let r=0;r<t.length;r++){const n=t[r],i=[];for(let s=0;s<e.length;s++){const o=e[s];i.push(o+"_"+n.tokenTypeIdx);for(let a=0;a<n.categoryMatches.length;a++){const c="_"+n.categoryMatches[a];i.push(o+c)}}e=i}return e}function Ky(t,e,r){for(let n=0;n<t.length;n++){if(n===r)continue;const i=t[n];for(let s=0;s<e.length;s++){const o=e[s];if(i[o]===!0)return!1}}return!0}function Ph(t,e){const r=O(t,o=>tc([o],1)),n=qu(r.length),i=O(r,o=>{const a={};return j(o,c=>{const l=la(c.partialPath);j(l,d=>{a[d]=!0})}),a});let s=r;for(let o=1;o<=e;o++){const a=s;s=qu(a.length);for(let c=0;c<a.length;c++){const l=a[c];for(let d=0;d<l.length;d++){const h=l[d].partialPath,f=l[d].suffixDef,$=la(h);if(Ky(i,$,c)||ae(f)||h.length===e){const S=n[c];if(rc(S,h)===!1){S.push(h);for(let b=0;b<$.length;b++){const F=$[b];i[c][F]=!0}}}else{const S=tc(f,o+1,h);s[c]=s[c].concat(S),j(S,b=>{const F=la(b.partialPath);j(F,L=>{i[c][L]=!0})})}}}}return n}function Mo(t,e,r,n){const i=new _h(t,me.ALTERNATION,n);return e.accept(i),Ph(i.result,r)}function Fo(t,e,r,n){const i=new _h(t,r);e.accept(i);const s=i.result,o=new By(e,t,r).startWalking(),a=new at({definition:s}),c=new at({definition:o});return Ph([a,c],n)}function rc(t,e){e:for(let r=0;r<t.length;r++){const n=t[r];if(n.length===e.length){for(let i=0;i<n.length;i++){const s=e[i],o=n[i];if(!(s===o||o.categoryMatchesMap[s.tokenTypeIdx]!==void 0))continue e}return!0}}return!1}function Wy(t,e){return t.length<e.length&&Nt(t,(r,n)=>{const i=e[n];return r===i||i.categoryMatchesMap[r.tokenTypeIdx]})}function Dh(t){return Nt(t,e=>Nt(e,r=>Nt(r,n=>ae(n.categoryMatches))))}function Vy(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return O(e,r=>Object.assign({type:tt.CUSTOM_LOOKAHEAD_VALIDATION},r))}function Hy(t,e,r,n){const i=ht(t,c=>Yy(c,r)),s=aT(t,e,r),o=ht(t,c=>nT(c,r)),a=ht(t,c=>Zy(c,t,n,r));return i.concat(s,o,a)}function Yy(t,e){const r=new Jy;t.accept(r);const n=r.allProductions,i=bm(n,Xy),s=Lt(i,o=>o.length>1);return O(Pe(s),o=>{const a=It(o),c=e.buildDuplicateFoundError(t,o),l=Mt(a),d={message:c,type:tt.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:l,occurrence:a.idx},h=Oh(a);return h&&(d.parameter=h),d})}function Xy(t){return`${Mt(t)}_#_${t.idx}_#_${Oh(t)}`}function Oh(t){return t instanceof ue?t.terminalType.name:t instanceof et?t.nonTerminalName:""}class Jy extends Xn{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function Zy(t,e,r,n){const i=[];if(Qe(e,(s,o)=>o.name===t.name?s+1:s,0)>1){const s=n.buildDuplicateRuleNameError({topLevelRule:t,grammarName:r});i.push({message:s,type:tt.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function Qy(t,e,r){const n=[];let i;return rt(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:i,type:tt.INVALID_RULE_OVERRIDE,ruleName:t})),n}function Mh(t,e,r,n=[]){const i=[],s=Gs(e.definition);if(ae(s))return[];{const o=t.name;rt(s,t)&&i.push({message:r.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:n}),type:tt.LEFT_RECURSION,ruleName:o});const a=Co(s,n.concat([t])),c=ht(a,l=>{const d=Ke(n);return d.push(l),Mh(t,l,r,d)});return i.concat(c)}}function Gs(t){let e=[];if(ae(t))return e;const r=It(t);if(r instanceof et)e.push(r.referencedRule);else if(r instanceof at||r instanceof Be||r instanceof gt||r instanceof yt||r instanceof ct||r instanceof Re)e=e.concat(Gs(r.definition));else if(r instanceof lt)e=$t(O(r.definition,s=>Gs(s.definition)));else if(!(r instanceof ue))throw Error("non exhaustive match");const n=eo(r),i=t.length>1;if(n&&i){const s=je(t);return e.concat(Gs(s))}else return e}class Bl extends Xn{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function eT(t,e){const r=new Bl;t.accept(r);const n=r.alternations;return ht(n,i=>{const s=wi(i.definition);return ht(s,(o,a)=>{const c=Lh([o],[],Ji,1);return ae(c)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:i,emptyChoiceIdx:a}),type:tt.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:i.idx,alternative:a+1}]:[]})})}function tT(t,e,r){const n=new Bl;t.accept(n);let i=n.alternations;return i=xo(i,s=>s.ignoreAmbiguities===!0),ht(i,s=>{const o=s.idx,a=s.maxLookahead||e,c=Mo(o,t,a,s),l=sT(c,s,t,r),d=oT(c,s,t,r);return l.concat(d)})}class rT extends Xn{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function nT(t,e){const r=new Bl;t.accept(r);const n=r.alternations;return ht(n,i=>i.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:i}),type:tt.TOO_MANY_ALTS,ruleName:t.name,occurrence:i.idx}]:[])}function iT(t,e,r){const n=[];return j(t,i=>{const s=new rT;i.accept(s);const o=s.allProductions;j(o,a=>{const c=zl(a),l=a.maxLookahead||e,d=a.idx,h=Fo(d,i,c,l)[0];if(ae($t(h))){const f=r.buildEmptyRepetitionError({topLevelRule:i,repetition:a});n.push({message:f,type:tt.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),n}function sT(t,e,r,n){const i=[],s=Qe(t,(o,a,c)=>(e.definition[c].ignoreAmbiguities===!0||j(a,l=>{const d=[c];j(t,(h,f)=>{c!==f&&rc(h,l)&&e.definition[f].ignoreAmbiguities!==!0&&d.push(f)}),d.length>1&&!rc(i,l)&&(i.push(l),o.push({alts:d,path:l}))}),o),[]);return O(s,o=>{const a=O(o.alts,c=>c+1);return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:a,prefixPath:o.path}),type:tt.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:e.idx,alternatives:o.alts}})}function oT(t,e,r,n){const i=Qe(t,(s,o,a)=>{const c=O(o,l=>({idx:a,path:l}));return s.concat(c)},[]);return Wi(ht(i,s=>{if(e.definition[s.idx].ignoreAmbiguities===!0)return[];const o=s.idx,a=s.path,c=mt(i,l=>e.definition[l.idx].ignoreAmbiguities!==!0&&l.idx<o&&Wy(l.path,a));return O(c,l=>{const d=[l.idx+1,o+1],h=e.idx===0?"":e.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:d,prefixPath:l.path}),type:tt.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:h,alternatives:d}})}))}function aT(t,e,r){const n=[],i=O(e,s=>s.name);return j(t,s=>{const o=s.name;if(rt(i,o)){const a=r.buildNamespaceConflictError(s);n.push({message:a,type:tt.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:o})}}),n}function cT(t){const e=Pl(t,{errMsgProvider:Ly}),r={};return j(t.rules,n=>{r[n.name]=n}),_y(r,e.errMsgProvider)}function lT(t){return t=Pl(t,{errMsgProvider:zr}),Hy(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}const Fh="MismatchedTokenException",qh="NoViableAltException",jh="EarlyExitException",Uh="NotAllInputParsedException",Gh=[Fh,qh,jh,Uh];Object.freeze(Gh);function no(t){return rt(Gh,t.name)}class qo extends Error{constructor(e,r){super(e),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class zh extends qo{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=Fh}}class uT extends qo{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=qh}}class dT extends qo{constructor(e,r){super(e,r),this.name=Uh}}class pT extends qo{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=jh}}const ua={},Bh="InRuleRecoveryException";class hT extends Error{constructor(e){super(e),this.name=Bh}}class fT{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=G(e,"recoveryEnabled")?e.recoveryEnabled:ir.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=mT)}getTokenToInsert(e){const r=Gl(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,r,n,i){const s=this.findReSyncTokenType(),o=this.exportLexerState(),a=[];let c=!1;const l=this.LA(1);let d=this.LA(1);const h=()=>{const f=this.LA(0),$=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:f,ruleName:this.getCurrRuleFullName()}),S=new zh($,l,this.LA(0));S.resyncedTokens=wi(a),this.SAVE_ERROR(S)};for(;!c;)if(this.tokenMatcher(d,i)){h();return}else if(n.call(this)){h(),e.apply(this,r);return}else this.tokenMatcher(d,s)?c=!0:(d=this.SKIP_TOKEN(),this.addToResyncTokens(d,a));this.importLexerState(o)}shouldInRepetitionRecoveryBeTried(e,r,n){return!(n===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,r)))}getFollowsForInRuleRecovery(e,r){const n=this.getCurrentGrammarPath(e,r);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(e,r){if(this.canRecoverWithSingleTokenInsertion(e,r))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new hT("sad sad panda")}canPerformInRuleRecovery(e,r){return this.canRecoverWithSingleTokenInsertion(e,r)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,r){if(!this.canTokenTypeBeInsertedInRecovery(e)||ae(r))return!1;const n=this.LA(1);return wn(r,i=>this.tokenMatcher(n,i))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const r=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(r);return rt(n,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let r=this.LA(1),n=2;for(;;){const i=wn(e,s=>Ih(r,s));if(i!==void 0)return i;r=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return ua;const e=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return O(e,(n,i)=>i===0?ua:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:r[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){const e=O(this.buildFullFollowKeyStack(),r=>this.getFollowSetFromFollowKey(r));return $t(e)}getFollowSetFromFollowKey(e){if(e===ua)return[$r];const r=e.ruleName+e.idxInCallingRule+Rh+e.inRule;return this.resyncFollows[r]}addToResyncTokens(e,r){return this.tokenMatcher(e,$r)||r.push(e),r}reSyncTo(e){const r=[];let n=this.LA(1);for(;this.tokenMatcher(n,e)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,r);return wi(r)}attemptInRepetitionRecovery(e,r,n,i,s,o,a){}getCurrentGrammarPath(e,r){const n=this.getHumanReadableRuleStack(),i=Ke(this.RULE_OCCURRENCE_STACK);return{ruleStack:n,occurrenceStack:i,lastTok:e,lastTokOccurrence:r}}getHumanReadableRuleStack(){return O(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function mT(t,e,r,n,i,s,o){const a=this.getKeyForAutomaticLookahead(n,i);let c=this.firstAfterRepMap[a];if(c===void 0){const f=this.getCurrRuleFullName(),$=this.getGAstProductions()[f];c=new s($,i).startWalking(),this.firstAfterRepMap[a]=c}let l=c.token,d=c.occurrence;const h=c.isEndOfRule;this.RULE_STACK.length===1&&h&&l===void 0&&(l=$r,d=1),!(l===void 0||d===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,d,o)&&this.tryInRepetitionRecovery(t,e,r,l)}const gT=4,Sr=8,Kh=1<<Sr,Wh=2<<Sr,nc=3<<Sr,ic=4<<Sr,sc=5<<Sr,zs=6<<Sr;function da(t,e,r){return r|e|t}class Kl{constructor(e){var r;this.maxLookahead=(r=e==null?void 0:e.maxLookahead)!==null&&r!==void 0?r:ir.maxLookahead}validate(e){const r=this.validateNoLeftRecursion(e.rules);if(ae(r)){const n=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...r,...n,...i,...s]}return r}validateNoLeftRecursion(e){return ht(e,r=>Mh(r,r,zr))}validateEmptyOrAlternatives(e){return ht(e,r=>eT(r,zr))}validateAmbiguousAlternationAlternatives(e,r){return ht(e,n=>tT(n,r,zr))}validateSomeNonEmptyLookaheadPath(e,r){return iT(e,r,zr)}buildLookaheadForAlternation(e){return jy(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Gy)}buildLookaheadForOptional(e){return Uy(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,zl(e.prodType),zy)}}class yT{initLooksAhead(e){this.dynamicTokensEnabled=G(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:ir.dynamicTokensEnabled,this.maxLookahead=G(e,"maxLookahead")?e.maxLookahead:ir.maxLookahead,this.lookaheadStrategy=G(e,"lookaheadStrategy")?e.lookaheadStrategy:new Kl({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){j(e,r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,()=>{const{alternation:n,repetition:i,option:s,repetitionMandatory:o,repetitionMandatoryWithSeparator:a,repetitionWithSeparator:c}=vT(r);j(n,l=>{const d=l.idx===0?"":l.idx;this.TRACE_INIT(`${Mt(l)}${d}`,()=>{const h=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:r,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),f=da(this.fullRuleNameToShort[r.name],Kh,l.idx);this.setLaFuncCache(f,h)})}),j(i,l=>{this.computeLookaheadFunc(r,l.idx,nc,"Repetition",l.maxLookahead,Mt(l))}),j(s,l=>{this.computeLookaheadFunc(r,l.idx,Wh,"Option",l.maxLookahead,Mt(l))}),j(o,l=>{this.computeLookaheadFunc(r,l.idx,ic,"RepetitionMandatory",l.maxLookahead,Mt(l))}),j(a,l=>{this.computeLookaheadFunc(r,l.idx,zs,"RepetitionMandatoryWithSeparator",l.maxLookahead,Mt(l))}),j(c,l=>{this.computeLookaheadFunc(r,l.idx,sc,"RepetitionWithSeparator",l.maxLookahead,Mt(l))})})})}computeLookaheadFunc(e,r,n,i,s,o){this.TRACE_INIT(`${o}${r===0?"":r}`,()=>{const a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),c=da(this.fullRuleNameToShort[e.name],n,r);this.setLaFuncCache(c,a)})}getKeyForAutomaticLookahead(e,r){const n=this.getLastExplicitRuleShortName();return da(n,e,r)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,r){this.lookAheadFuncsCache.set(e,r)}}class TT extends Xn{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const bs=new TT;function vT(t){bs.reset(),t.accept(bs);const e=bs.dslMethods;return bs.reset(),e}function ju(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function Uu(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function RT(t,e,r){t.children[r]===void 0?t.children[r]=[e]:t.children[r].push(e)}function $T(t,e,r){t.children[e]===void 0?t.children[e]=[r]:t.children[e].push(r)}const ET="name";function Vh(t,e){Object.defineProperty(t,ET,{enumerable:!1,configurable:!0,writable:!1,value:e})}function kT(t,e){const r=Nn(t),n=r.length;for(let i=0;i<n;i++){const s=r[i],o=t[s],a=o.length;for(let c=0;c<a;c++){const l=o[c];l.tokenTypeIdx===void 0&&this[l.name](l.children,e)}}}function ST(t,e){const r=function(){};Vh(r,t+"BaseSemantics");const n={visit:function(i,s){if(ze(i)&&(i=i[0]),!rr(i))return this[i.name](i.children,s)},validateVisitor:function(){const i=bT(this,e);if(!ae(i)){const s=O(i,o=>o.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=e,r}function AT(t,e,r){const n=function(){};Vh(n,t+"BaseSemanticsWithDefaults");const i=Object.create(r.prototype);return j(e,s=>{i[s]=kT}),n.prototype=i,n.prototype.constructor=n,n}var oc;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(oc||(oc={}));function bT(t,e){return CT(t,e)}function CT(t,e){const r=mt(e,i=>Zr(t[i])===!1),n=O(r,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:oc.MISSING_METHOD,methodName:i}));return Wi(n)}class xT{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=G(e,"nodeLocationTracking")?e.nodeLocationTracking:ir.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Oe,this.cstFinallyStateUpdate=Oe,this.cstPostTerminal=Oe,this.cstPostNonTerminal=Oe,this.cstPostRule=Oe;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Uu,this.setNodeLocationFromNode=Uu,this.cstPostRule=Oe,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Oe,this.setNodeLocationFromNode=Oe,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=ju,this.setNodeLocationFromNode=ju,this.cstPostRule=Oe,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Oe,this.setNodeLocationFromNode=Oe,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Oe,this.setNodeLocationFromNode=Oe,this.cstPostRule=Oe,this.setInitialNodeLocation=Oe;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const r=this.LA(1);e.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const r={name:e,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?(n.endOffset=r.endOffset,n.endLine=r.endLine,n.endColumn=r.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(e){const r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?n.endOffset=r.endOffset:n.startOffset=NaN}cstPostTerminal(e,r){const n=this.CST_STACK[this.CST_STACK.length-1];RT(n,r,e),this.setNodeLocationFromToken(n.location,r)}cstPostNonTerminal(e,r){const n=this.CST_STACK[this.CST_STACK.length-1];$T(n,r,e),this.setNodeLocationFromNode(n.location,e.location)}getBaseCstVisitorConstructor(){if(rr(this.baseCstVisitorConstructor)){const e=ST(this.className,Nn(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(rr(this.baseCstVisitorWithDefaultsConstructor)){const e=AT(this.className,Nn(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class NT{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):so}LA(e){const r=this.currIdx+e;return r<0||this.tokVectorLength<=r?so:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class wT{ACTION(e){return e.call(this)}consume(e,r,n){return this.consumeInternal(r,e,n)}subrule(e,r,n){return this.subruleInternal(r,e,n)}option(e,r){return this.optionInternal(r,e)}or(e,r){return this.orInternal(r,e)}many(e,r){return this.manyInternal(e,r)}atLeastOne(e,r){return this.atLeastOneInternal(e,r)}CONSUME(e,r){return this.consumeInternal(e,0,r)}CONSUME1(e,r){return this.consumeInternal(e,1,r)}CONSUME2(e,r){return this.consumeInternal(e,2,r)}CONSUME3(e,r){return this.consumeInternal(e,3,r)}CONSUME4(e,r){return this.consumeInternal(e,4,r)}CONSUME5(e,r){return this.consumeInternal(e,5,r)}CONSUME6(e,r){return this.consumeInternal(e,6,r)}CONSUME7(e,r){return this.consumeInternal(e,7,r)}CONSUME8(e,r){return this.consumeInternal(e,8,r)}CONSUME9(e,r){return this.consumeInternal(e,9,r)}SUBRULE(e,r){return this.subruleInternal(e,0,r)}SUBRULE1(e,r){return this.subruleInternal(e,1,r)}SUBRULE2(e,r){return this.subruleInternal(e,2,r)}SUBRULE3(e,r){return this.subruleInternal(e,3,r)}SUBRULE4(e,r){return this.subruleInternal(e,4,r)}SUBRULE5(e,r){return this.subruleInternal(e,5,r)}SUBRULE6(e,r){return this.subruleInternal(e,6,r)}SUBRULE7(e,r){return this.subruleInternal(e,7,r)}SUBRULE8(e,r){return this.subruleInternal(e,8,r)}SUBRULE9(e,r){return this.subruleInternal(e,9,r)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,r,n=oo){if(rt(this.definedRulesNames,e)){const s={message:zr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:tt.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(s)}this.definedRulesNames.push(e);const i=this.defineRule(e,r,n);return this[e]=i,i}OVERRIDE_RULE(e,r,n=oo){const i=Qy(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const s=this.defineRule(e,r,n);return this[e]=s,s}BACKTRACK(e,r){return function(){this.isBackTrackingStack.push(1);const n=this.saveRecogState();try{return e.apply(this,r),!0}catch(i){if(no(i))return!1;throw i}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Fg(Pe(this.gastProductionsCache))}}class IT{initRecognizerEngine(e,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=ro,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},G(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(ze(e)){if(ae(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(ze(e))this.tokensMap=Qe(e,(s,o)=>(s[o.name]=o,s),{});else if(G(e,"modes")&&Nt($t(Pe(e.modes)),Ny)){const s=$t(Pe(e.modes)),o=Dl(s);this.tokensMap=Qe(o,(a,c)=>(a[c.name]=c,a),{})}else if(Zf(e))this.tokensMap=Ke(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=$r;const n=G(e,"modes")?$t(Pe(e.modes)):Pe(e),i=Nt(n,s=>ae(s.categoryMatches));this.tokenMatcher=i?ro:Ji,Zi(Pe(this.tokensMap))}defineRule(e,r,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=G(n,"resyncEnabled")?n.resyncEnabled:oo.resyncEnabled,s=G(n,"recoveryValueFunc")?n.recoveryValueFunc:oo.recoveryValueFunc,o=this.ruleShortNameIdx<<gT+Sr;this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=e,this.fullRuleNameToShort[e]=o;let a;return this.outputCst===!0?a=function(...c){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx),r.apply(this,c);const l=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(l),l}catch(l){return this.invokeRuleCatch(l,i,s)}finally{this.ruleFinallyStateUpdate()}}:a=function(...c){try{return this.ruleInvocationStateUpdate(o,e,this.subruleIdx),r.apply(this,c)}catch(l){return this.invokeRuleCatch(l,i,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(a,{ruleName:e,originalGrammarAction:r})}invokeRuleCatch(e,r,n){const i=this.RULE_STACK.length===1,s=r&&!this.isBackTracking()&&this.recoveryEnabled;if(no(e)){const o=e;if(s){const a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a))if(o.resyncedTokens=this.reSyncTo(a),this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return n(e);else{if(this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,o.partialCstResult=c}throw o}}else{if(i)return this.moveToTerminatedState(),n(e);throw o}}else throw e}optionInternal(e,r){const n=this.getKeyForAutomaticLookahead(Wh,r);return this.optionInternalLogic(e,r,n)}optionInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),s;if(typeof e!="function"){s=e.DEF;const o=e.GATE;if(o!==void 0){const a=i;i=()=>o.call(this)&&a.call(this)}}else s=e;if(i.call(this)===!0)return s.call(this)}atLeastOneInternal(e,r){const n=this.getKeyForAutomaticLookahead(ic,e);return this.atLeastOneInternalLogic(e,r,n)}atLeastOneInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),s;if(typeof r!="function"){s=r.DEF;const o=r.GATE;if(o!==void 0){const a=i;i=()=>o.call(this)&&a.call(this)}}else s=r;if(i.call(this)===!0){let o=this.doSingleRepetition(s);for(;i.call(this)===!0&&o===!0;)o=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,me.REPETITION_MANDATORY,r.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,r],i,ic,e,Fy)}atLeastOneSepFirstInternal(e,r){const n=this.getKeyForAutomaticLookahead(zs,e);this.atLeastOneSepFirstInternalLogic(e,r,n)}atLeastOneSepFirstInternalLogic(e,r,n){const i=r.DEF,s=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,Mu],o,zs,e,Mu)}else throw this.raiseEarlyExitException(e,me.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG)}manyInternal(e,r){const n=this.getKeyForAutomaticLookahead(nc,e);return this.manyInternalLogic(e,r,n)}manyInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),s;if(typeof r!="function"){s=r.DEF;const a=r.GATE;if(a!==void 0){const c=i;i=()=>a.call(this)&&c.call(this)}}else s=r;let o=!0;for(;i.call(this)===!0&&o===!0;)o=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,r],i,nc,e,My,o)}manySepFirstInternal(e,r){const n=this.getKeyForAutomaticLookahead(sc,e);this.manySepFirstInternalLogic(e,r,n)}manySepFirstInternalLogic(e,r,n){const i=r.DEF,s=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,Ou],o,sc,e,Ou)}}repetitionSepSecondInternal(e,r,n,i,s){for(;n();)this.CONSUME(r),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,r,n,i,s],n,zs,e,s)}doSingleRepetition(e){const r=this.getLexerPosition();return e.call(this),this.getLexerPosition()>r}orInternal(e,r){const n=this.getKeyForAutomaticLookahead(Kh,r),i=ze(e)?e:e.DEF,s=this.getLaFuncFromCache(n).call(this,i);if(s!==void 0)return i[s].ALT.call(this);this.raiseNoAltException(r,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new dT(r,e))}}subruleInternal(e,r,n){let i;try{const s=n!==void 0?n.ARGS:void 0;return this.subruleIdx=r,i=e.apply(this,s),this.cstPostNonTerminal(i,n!==void 0&&n.LABEL!==void 0?n.LABEL:e.ruleName),i}catch(s){throw this.subruleInternalError(s,n,e.ruleName)}}subruleInternalError(e,r,n){throw no(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:n),delete e.partialCstResult),e}consumeInternal(e,r,n){let i;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),i=s):this.consumeInternalError(e,s,n)}catch(s){i=this.consumeInternalRecovery(e,r,s)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:e.name,i),i}consumeInternalError(e,r,n){let i;const s=this.LA(0);throw n!==void 0&&n.ERR_MSG?i=n.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:r,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new zh(i,r,s))}consumeInternalRecovery(e,r,n){if(this.recoveryEnabled&&n.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(e,r);try{return this.tryInRuleRecovery(e,i)}catch(s){throw s.name===Bh?n:s}}else throw n}saveRecogState(){const e=this.errors,r=Ke(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,r,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),$r)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class LT{initErrorHandler(e){this._errors=[],this.errorMessageProvider=G(e,"errorMessageProvider")?e.errorMessageProvider:ir.errorMessageProvider}SAVE_ERROR(e){if(no(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Ke(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Ke(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,r,n){const i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],o=Fo(e,s,r,this.maxLookahead)[0],a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));const c=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:a,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new pT(c,this.LA(1),this.LA(0)))}raiseNoAltException(e,r){const n=this.getCurrRuleFullName(),i=this.getGAstProductions()[n],s=Mo(e,i,this.maxLookahead),o=[];for(let l=1;l<=this.maxLookahead;l++)o.push(this.LA(l));const a=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:o,previous:a,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new uT(c,this.LA(1),a))}}class _T{initContentAssist(){}computeContentAssist(e,r){const n=this.gastProductionsCache[e];if(rr(n))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Lh([n],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const r=It(e.ruleStack),n=this.getGAstProductions()[r];return new Oy(n,e).startWalking()}}const jo={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(jo);const Gu=!0,zu=Math.pow(2,Sr)-1,Hh=wh({name:"RECORDING_PHASE_TOKEN",pattern:st.NA});Zi([Hh]);const Yh=Gl(Hh,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Yh);const PT={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class DT{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const r=e>0?e:"";this[`CONSUME${r}`]=function(n,i){return this.consumeInternalRecord(n,e,i)},this[`SUBRULE${r}`]=function(n,i){return this.subruleInternalRecord(n,e,i)},this[`OPTION${r}`]=function(n){return this.optionInternalRecord(n,e)},this[`OR${r}`]=function(n){return this.orInternalRecord(n,e)},this[`MANY${r}`]=function(n){this.manyInternalRecord(e,n)},this[`MANY_SEP${r}`]=function(n){this.manySepFirstInternalRecord(e,n)},this[`AT_LEAST_ONE${r}`]=function(n){this.atLeastOneInternalRecord(e,n)},this[`AT_LEAST_ONE_SEP${r}`]=function(n){this.atLeastOneSepFirstInternalRecord(e,n)}}this.consume=function(e,r,n){return this.consumeInternalRecord(r,e,n)},this.subrule=function(e,r,n){return this.subruleInternalRecord(r,e,n)},this.option=function(e,r){return this.optionInternalRecord(r,e)},this.or=function(e,r){return this.orInternalRecord(r,e)},this.many=function(e,r){this.manyInternalRecord(e,r)},this.atLeastOne=function(e,r){this.atLeastOneInternalRecord(e,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let r=0;r<10;r++){const n=r>0?r:"";delete e[`CONSUME${n}`],delete e[`SUBRULE${n}`],delete e[`OPTION${n}`],delete e[`OR${n}`],delete e[`MANY${n}`],delete e[`MANY_SEP${n}`],delete e[`AT_LEAST_ONE${n}`],delete e[`AT_LEAST_ONE_SEP${n}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,r){return()=>!0}LA_RECORD(e){return so}topLevelRuleRecord(e,r){try{const n=new Yn({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),r.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(e,r){return fi.call(this,Be,e,r)}atLeastOneInternalRecord(e,r){fi.call(this,gt,r,e)}atLeastOneSepFirstInternalRecord(e,r){fi.call(this,yt,r,e,Gu)}manyInternalRecord(e,r){fi.call(this,Re,r,e)}manySepFirstInternalRecord(e,r){fi.call(this,ct,r,e,Gu)}orInternalRecord(e,r){return OT.call(this,e,r)}subruleInternalRecord(e,r,n){if(io(r),!e||G(e,"ruleName")===!1){const a=new Error(`<SUBRULE${Bu(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const i=Kr(this.recordingProdStack),s=e.ruleName,o=new et({idx:r,nonTerminalName:s,label:n==null?void 0:n.LABEL,referencedRule:void 0});return i.definition.push(o),this.outputCst?PT:jo}consumeInternalRecord(e,r,n){if(io(r),!xh(e)){const o=new Error(`<CONSUME${Bu(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=Kr(this.recordingProdStack),s=new ue({idx:r,terminalType:e,label:n==null?void 0:n.LABEL});return i.definition.push(s),Yh}}function fi(t,e,r,n=!1){io(r);const i=Kr(this.recordingProdStack),s=Zr(e)?e:e.DEF,o=new t({definition:[],idx:r});return n&&(o.separator=e.SEP),G(e,"MAX_LOOKAHEAD")&&(o.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(o),s.call(this),i.definition.push(o),this.recordingProdStack.pop(),jo}function OT(t,e){io(e);const r=Kr(this.recordingProdStack),n=ze(t)===!1,i=n===!1?t:t.DEF,s=new lt({definition:[],idx:e,ignoreAmbiguities:n&&t.IGNORE_AMBIGUITIES===!0});G(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);const o=Yp(i,a=>Zr(a.GATE));return s.hasPredicates=o,r.definition.push(s),j(i,a=>{const c=new at({definition:[]});s.definition.push(c),G(a,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=a.IGNORE_AMBIGUITIES:G(a,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),a.ALT.call(this),this.recordingProdStack.pop()}),jo}function Bu(t){return t===0?"":`${t}`}function io(t){if(t<0||t>zu){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${zu+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class MT{initPerformanceTracer(e){if(G(e,"traceInitPerf")){const r=e.traceInitPerf,n=typeof r=="number";this.traceInitMaxIdent=n?r:1/0,this.traceInitPerf=n?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=ir.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,r){if(this.traceInitPerf===!0){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${e}>`);const{time:i,value:s}=Th(r),o=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o(`${n}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,s}else return r()}}function FT(t,e){e.forEach(r=>{const n=r.prototype;Object.getOwnPropertyNames(n).forEach(i=>{if(i==="constructor")return;const s=Object.getOwnPropertyDescriptor(n,i);s&&(s.get||s.set)?Object.defineProperty(t.prototype,i,s):t.prototype[i]=r.prototype[i]})})}const so=Gl($r,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(so);const ir=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:bn,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),oo=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var tt;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(tt||(tt={}));function Ku(t=void 0){return function(){return t}}class Qi{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const r=this.className;this.TRACE_INIT("toFastProps",()=>{vh(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),j(this.definedRulesNames,i=>{const s=this[i].originalGrammarAction;let o;this.TRACE_INIT(`${i} Rule`,()=>{o=this.topLevelRuleRecord(i,s)}),this.gastProductionsCache[i]=o})}finally{this.disableRecording()}});let n=[];if(this.TRACE_INIT("Grammar Resolving",()=>{n=cT({rules:Pe(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)}),this.TRACE_INIT("Grammar Validations",()=>{if(ae(n)&&this.skipValidations===!1){const i=lT({rules:Pe(this.gastProductionsCache),tokenTypes:Pe(this.tokensMap),errMsgProvider:zr,grammarName:r}),s=Vy({lookaheadStrategy:this.lookaheadStrategy,rules:Pe(this.gastProductionsCache),tokenTypes:Pe(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(i,s)}}),ae(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=Kg(Pe(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,s;(s=(i=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(i,{rules:Pe(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(Pe(this.gastProductionsCache))})),!Qi.DEFER_DEFINITION_ERRORS_HANDLING&&!ae(this.definitionErrors))throw e=O(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,r){this.definitionErrors=[],this.selfAnalysisDone=!1;const n=this;if(n.initErrorHandler(r),n.initLexerAdapter(),n.initLooksAhead(r),n.initRecognizerEngine(e,r),n.initRecoverable(r),n.initTreeBuilder(r),n.initContentAssist(),n.initGastRecorder(r),n.initPerformanceTracer(r),G(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=G(r,"skipValidations")?r.skipValidations:ir.skipValidations}}Qi.DEFER_DEFINITION_ERRORS_HANDLING=!1;FT(Qi,[fT,yT,xT,NT,IT,wT,LT,_T,DT,MT]);class qT extends Qi{constructor(e,r=ir){const n=Ke(r);n.outputCst=!1,super(e,n)}}function In(t,e,r){return`${t.name}_${e}_${r}`}const Er=1,jT=2,Xh=4,Jh=5,es=7,UT=8,GT=9,zT=10,BT=11,Zh=12;class Wl{constructor(e){this.target=e}isEpsilon(){return!1}}class Vl extends Wl{constructor(e,r){super(e),this.tokenType=r}}class Qh extends Wl{constructor(e){super(e)}isEpsilon(){return!0}}class Hl extends Wl{constructor(e,r,n){super(e),this.rule=r,this.followState=n}isEpsilon(){return!0}}function KT(t){const e={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};WT(e,t);const r=t.length;for(let n=0;n<r;n++){const i=t[n],s=Qr(e,i,i);s!==void 0&&nv(e,i,s)}return e}function WT(t,e){const r=e.length;for(let n=0;n<r;n++){const i=e[n],s=Me(t,i,void 0,{type:jT}),o=Me(t,i,void 0,{type:es});s.stop=o,t.ruleToStartState.set(i,s),t.ruleToStopState.set(i,o)}}function ef(t,e,r){return r instanceof ue?Yl(t,e,r.terminalType,r):r instanceof et?rv(t,e,r):r instanceof lt?JT(t,e,r):r instanceof Be?ZT(t,e,r):r instanceof Re?VT(t,e,r):r instanceof ct?HT(t,e,r):r instanceof gt?YT(t,e,r):r instanceof yt?XT(t,e,r):Qr(t,e,r)}function VT(t,e,r){const n=Me(t,e,r,{type:Jh});Ar(t,n);const i=Jn(t,e,n,r,Qr(t,e,r));return rf(t,e,r,i)}function HT(t,e,r){const n=Me(t,e,r,{type:Jh});Ar(t,n);const i=Jn(t,e,n,r,Qr(t,e,r)),s=Yl(t,e,r.separator,r);return rf(t,e,r,i,s)}function YT(t,e,r){const n=Me(t,e,r,{type:Xh});Ar(t,n);const i=Jn(t,e,n,r,Qr(t,e,r));return tf(t,e,r,i)}function XT(t,e,r){const n=Me(t,e,r,{type:Xh});Ar(t,n);const i=Jn(t,e,n,r,Qr(t,e,r)),s=Yl(t,e,r.separator,r);return tf(t,e,r,i,s)}function JT(t,e,r){const n=Me(t,e,r,{type:Er});Ar(t,n);const i=O(r.definition,s=>ef(t,e,s));return Jn(t,e,n,r,...i)}function ZT(t,e,r){const n=Me(t,e,r,{type:Er});Ar(t,n);const i=Jn(t,e,n,r,Qr(t,e,r));return QT(t,e,r,i)}function Qr(t,e,r){const n=mt(O(r.definition,i=>ef(t,e,i)),i=>i!==void 0);return n.length===1?n[0]:n.length===0?void 0:tv(t,n)}function tf(t,e,r,n,i){const s=n.left,o=n.right,a=Me(t,e,r,{type:BT});Ar(t,a);const c=Me(t,e,r,{type:Zh});return s.loopback=a,c.loopback=a,t.decisionMap[In(e,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",r.idx)]=a,Ce(o,a),i===void 0?(Ce(a,s),Ce(a,c)):(Ce(a,c),Ce(a,i.left),Ce(i.right,s)),{left:s,right:c}}function rf(t,e,r,n,i){const s=n.left,o=n.right,a=Me(t,e,r,{type:zT});Ar(t,a);const c=Me(t,e,r,{type:Zh}),l=Me(t,e,r,{type:GT});return a.loopback=l,c.loopback=l,Ce(a,s),Ce(a,c),Ce(o,l),i!==void 0?(Ce(l,c),Ce(l,i.left),Ce(i.right,s)):Ce(l,a),t.decisionMap[In(e,i?"RepetitionWithSeparator":"Repetition",r.idx)]=a,{left:a,right:c}}function QT(t,e,r,n){const i=n.left,s=n.right;return Ce(i,s),t.decisionMap[In(e,"Option",r.idx)]=i,n}function Ar(t,e){return t.decisionStates.push(e),e.decision=t.decisionStates.length-1,e.decision}function Jn(t,e,r,n,...i){const s=Me(t,e,n,{type:UT,start:r});r.end=s;for(const a of i)a!==void 0?(Ce(r,a.left),Ce(a.right,s)):Ce(r,s);const o={left:r,right:s};return t.decisionMap[In(e,ev(n),n.idx)]=r,o}function ev(t){if(t instanceof lt)return"Alternation";if(t instanceof Be)return"Option";if(t instanceof Re)return"Repetition";if(t instanceof ct)return"RepetitionWithSeparator";if(t instanceof gt)return"RepetitionMandatory";if(t instanceof yt)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function tv(t,e){const r=e.length;for(let s=0;s<r-1;s++){const o=e[s];let a;o.left.transitions.length===1&&(a=o.left.transitions[0]);const c=a instanceof Hl,l=a,d=e[s+1].left;o.left.type===Er&&o.right.type===Er&&a!==void 0&&(c&&l.followState===o.right||a.target===o.right)?(c?l.followState=d:a.target=d,iv(t,o.right)):Ce(o.right,d)}const n=e[0],i=e[r-1];return{left:n.left,right:i.right}}function Yl(t,e,r,n){const i=Me(t,e,n,{type:Er}),s=Me(t,e,n,{type:Er});return Xl(i,new Vl(s,r)),{left:i,right:s}}function rv(t,e,r){const n=r.referencedRule,i=t.ruleToStartState.get(n),s=Me(t,e,r,{type:Er}),o=Me(t,e,r,{type:Er}),a=new Hl(i,n,o);return Xl(s,a),{left:s,right:o}}function nv(t,e,r){const n=t.ruleToStartState.get(e);Ce(n,r.left);const i=t.ruleToStopState.get(e);return Ce(r.right,i),{left:n,right:i}}function Ce(t,e){const r=new Qh(e);Xl(t,r)}function Me(t,e,r,n){const i=Object.assign({atn:t,production:r,epsilonOnlyTransitions:!1,rule:e,transitions:[],nextTokenWithinRule:[],stateNumber:t.states.length},n);return t.states.push(i),i}function Xl(t,e){t.transitions.length===0&&(t.epsilonOnlyTransitions=e.isEpsilon()),t.transitions.push(e)}function iv(t,e){t.states.splice(t.states.indexOf(e),1)}const ao={};class ac{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const r=nf(e);r in this.map||(this.map[r]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return O(this.configs,e=>e.alt)}get key(){let e="";for(const r in this.map)e+=r+":";return e}}function nf(t,e=!0){return`${e?`a${t.alt}`:""}s${t.state.stateNumber}:${t.stack.map(r=>r.stateNumber.toString()).join("_")}`}function sv(t,e){const r={};return n=>{const i=n.toString();let s=r[i];return s!==void 0||(s={atnStartState:t,decision:e,states:{}},r[i]=s),s}}class sf{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,r){this.predicates[e]=r}toString(){let e="";const r=this.predicates.length;for(let n=0;n<r;n++)e+=this.predicates[n]===!0?"1":"0";return e}}const Wu=new sf;class ov extends Kl{constructor(e){var r;super(),this.logging=(r=e==null?void 0:e.logging)!==null&&r!==void 0?r:n=>console.log(n)}initialize(e){this.atn=KT(e.rules),this.dfas=av(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){const{prodOccurrence:r,rule:n,hasPredicates:i,dynamicTokensEnabled:s}=e,o=this.dfas,a=this.logging,c=In(n,"Alternation",r),l=this.atn.decisionMap[c].decision,d=O(Fu({maxLookahead:1,occurrence:r,prodType:"Alternation",rule:n}),h=>O(h,f=>f[0]));if(Vu(d,!1)&&!s){const h=Qe(d,(f,$,S)=>(j($,b=>{b&&(f[b.tokenTypeIdx]=S,j(b.categoryMatches,F=>{f[F]=S}))}),f),{});return i?function(f){var $;const S=this.LA(1),b=h[S.tokenTypeIdx];if(f!==void 0&&b!==void 0){const F=($=f[b])===null||$===void 0?void 0:$.GATE;if(F!==void 0&&F.call(this)===!1)return}return b}:function(){const f=this.LA(1);return h[f.tokenTypeIdx]}}else return i?function(h){const f=new sf,$=h===void 0?0:h.length;for(let b=0;b<$;b++){const F=h==null?void 0:h[b].GATE;f.set(b,F===void 0||F.call(this))}const S=pa.call(this,o,l,f,a);return typeof S=="number"?S:void 0}:function(){const h=pa.call(this,o,l,Wu,a);return typeof h=="number"?h:void 0}}buildLookaheadForOptional(e){const{prodOccurrence:r,rule:n,prodType:i,dynamicTokensEnabled:s}=e,o=this.dfas,a=this.logging,c=In(n,i,r),l=this.atn.decisionMap[c].decision,d=O(Fu({maxLookahead:1,occurrence:r,prodType:i,rule:n}),h=>O(h,f=>f[0]));if(Vu(d)&&d[0][0]&&!s){const h=d[0],f=$t(h);if(f.length===1&&ae(f[0].categoryMatches)){const $=f[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===$}}else{const $=Qe(f,(S,b)=>(b!==void 0&&(S[b.tokenTypeIdx]=!0,j(b.categoryMatches,F=>{S[F]=!0})),S),{});return function(){const S=this.LA(1);return $[S.tokenTypeIdx]===!0}}}return function(){const h=pa.call(this,o,l,Wu,a);return typeof h=="object"?!1:h===0}}}function Vu(t,e=!0){const r=new Set;for(const n of t){const i=new Set;for(const s of n){if(s===void 0){if(e)break;return!1}const o=[s.tokenTypeIdx].concat(s.categoryMatches);for(const a of o)if(r.has(a)){if(!i.has(a))return!1}else r.add(a),i.add(a)}}return!0}function av(t){const e=t.decisionStates.length,r=Array(e);for(let n=0;n<e;n++)r[n]=sv(t.decisionStates[n],n);return r}function pa(t,e,r,n){const i=t[e](r);let s=i.start;if(s===void 0){const o=Tv(i.atnStartState);s=af(i,of(o)),i.start=s}return cv.apply(this,[i,s,r,n])}function cv(t,e,r,n){let i=e,s=1;const o=[];let a=this.LA(s++);for(;;){let c=fv(i,a);if(c===void 0&&(c=lv.apply(this,[t,i,a,s,r,n])),c===ao)return hv(o,i,a);if(c.isAcceptState===!0)return c.prediction;i=c,o.push(a),a=this.LA(s++)}}function lv(t,e,r,n,i,s){const o=mv(e.configs,r,i);if(o.size===0)return Hu(t,e,r,ao),ao;let a=of(o);const c=yv(o,i);if(c!==void 0)a.isAcceptState=!0,a.prediction=c,a.configs.uniqueAlt=c;else if(Ev(o)){const l=lm(o.alts);a.isAcceptState=!0,a.prediction=l,a.configs.uniqueAlt=l,uv.apply(this,[t,n,o.alts,s])}return a=Hu(t,e,r,a),a}function uv(t,e,r,n){const i=[];for(let l=1;l<=e;l++)i.push(this.LA(l).tokenType);const s=t.atnStartState,o=s.rule,a=s.production,c=dv({topLevelRule:o,ambiguityIndices:r,production:a,prefixPath:i});n(c)}function dv(t){const e=O(t.prefixPath,i=>xn(i)).join(", "),r=t.production.idx===0?"":t.production.idx;let n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(", ")}> in <${pv(t.production)}${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n}function pv(t){if(t instanceof et)return"SUBRULE";if(t instanceof Be)return"OPTION";if(t instanceof lt)return"OR";if(t instanceof gt)return"AT_LEAST_ONE";if(t instanceof yt)return"AT_LEAST_ONE_SEP";if(t instanceof ct)return"MANY_SEP";if(t instanceof Re)return"MANY";if(t instanceof ue)return"CONSUME";throw Error("non exhaustive match")}function hv(t,e,r){const n=ht(e.configs.elements,s=>s.state.transitions),i=Om(n.filter(s=>s instanceof Vl).map(s=>s.tokenType),s=>s.tokenTypeIdx);return{actualToken:r,possibleTokenTypes:i,tokenPath:t}}function fv(t,e){return t.edges[e.tokenTypeIdx]}function mv(t,e,r){const n=new ac,i=[];for(const o of t.elements){if(r.is(o.alt)===!1)continue;if(o.state.type===es){i.push(o);continue}const a=o.state.transitions.length;for(let c=0;c<a;c++){const l=o.state.transitions[c],d=gv(l,e);d!==void 0&&n.add({state:d,alt:o.alt,stack:o.stack})}}let s;if(i.length===0&&n.size===1&&(s=n),s===void 0){s=new ac;for(const o of n.elements)co(o,s)}if(i.length>0&&!Rv(s))for(const o of i)s.add(o);return s}function gv(t,e){if(t instanceof Vl&&Ih(e,t.tokenType))return t.target}function yv(t,e){let r;for(const n of t.elements)if(e.is(n.alt)===!0){if(r===void 0)r=n.alt;else if(r!==n.alt)return}return r}function of(t){return{configs:t,edges:{},isAcceptState:!1,prediction:-1}}function Hu(t,e,r,n){return n=af(t,n),e.edges[r.tokenTypeIdx]=n,n}function af(t,e){if(e===ao)return e;const r=e.configs.key,n=t.states[r];return n!==void 0?n:(e.configs.finalize(),t.states[r]=e,e)}function Tv(t){const e=new ac,r=t.transitions.length;for(let n=0;n<r;n++){const i={state:t.transitions[n].target,alt:n,stack:[]};co(i,e)}return e}function co(t,e){const r=t.state;if(r.type===es){if(t.stack.length>0){const i=[...t.stack],s={state:i.pop(),alt:t.alt,stack:i};co(s,e)}else e.add(t);return}r.epsilonOnlyTransitions||e.add(t);const n=r.transitions.length;for(let i=0;i<n;i++){const s=r.transitions[i],o=vv(t,s);o!==void 0&&co(o,e)}}function vv(t,e){if(e instanceof Qh)return{state:e.target,alt:t.alt,stack:t.stack};if(e instanceof Hl){const r=[...t.stack,e.followState];return{state:e.target,alt:t.alt,stack:r}}}function Rv(t){for(const e of t.elements)if(e.state.type===es)return!0;return!1}function $v(t){for(const e of t.elements)if(e.state.type!==es)return!1;return!0}function Ev(t){if($v(t))return!0;const e=kv(t.elements);return Sv(e)&&!Av(e)}function kv(t){const e=new Map;for(const r of t){const n=nf(r,!1);let i=e.get(n);i===void 0&&(i={},e.set(n,i)),i[r.alt]=!0}return e}function Sv(t){for(const e of Array.from(t.values()))if(Object.keys(e).length>1)return!0;return!1}function Av(t){for(const e of Array.from(t.values()))if(Object.keys(e).length===1)return!0;return!1}var cc;(function(t){function e(r){return typeof r=="string"}t.is=e})(cc||(cc={}));var lo;(function(t){function e(r){return typeof r=="string"}t.is=e})(lo||(lo={}));var lc;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}t.is=e})(lc||(lc={}));var _i;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}t.is=e})(_i||(_i={}));var ee;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=_i.MAX_VALUE),i===Number.MAX_VALUE&&(i=_i.MAX_VALUE),{line:n,character:i}}t.create=e;function r(n){let i=n;return T.objectLiteral(i)&&T.uinteger(i.line)&&T.uinteger(i.character)}t.is=r})(ee||(ee={}));var X;(function(t){function e(n,i,s,o){if(T.uinteger(n)&&T.uinteger(i)&&T.uinteger(s)&&T.uinteger(o))return{start:ee.create(n,i),end:ee.create(s,o)};if(ee.is(n)&&ee.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${s}, ${o}]`)}t.create=e;function r(n){let i=n;return T.objectLiteral(i)&&ee.is(i.start)&&ee.is(i.end)}t.is=r})(X||(X={}));var Pi;(function(t){function e(n,i){return{uri:n,range:i}}t.create=e;function r(n){let i=n;return T.objectLiteral(i)&&X.is(i.range)&&(T.string(i.uri)||T.undefined(i.uri))}t.is=r})(Pi||(Pi={}));var uc;(function(t){function e(n,i,s,o){return{targetUri:n,targetRange:i,targetSelectionRange:s,originSelectionRange:o}}t.create=e;function r(n){let i=n;return T.objectLiteral(i)&&X.is(i.targetRange)&&T.string(i.targetUri)&&X.is(i.targetSelectionRange)&&(X.is(i.originSelectionRange)||T.undefined(i.originSelectionRange))}t.is=r})(uc||(uc={}));var uo;(function(t){function e(n,i,s,o){return{red:n,green:i,blue:s,alpha:o}}t.create=e;function r(n){const i=n;return T.objectLiteral(i)&&T.numberRange(i.red,0,1)&&T.numberRange(i.green,0,1)&&T.numberRange(i.blue,0,1)&&T.numberRange(i.alpha,0,1)}t.is=r})(uo||(uo={}));var dc;(function(t){function e(n,i){return{range:n,color:i}}t.create=e;function r(n){const i=n;return T.objectLiteral(i)&&X.is(i.range)&&uo.is(i.color)}t.is=r})(dc||(dc={}));var pc;(function(t){function e(n,i,s){return{label:n,textEdit:i,additionalTextEdits:s}}t.create=e;function r(n){const i=n;return T.objectLiteral(i)&&T.string(i.label)&&(T.undefined(i.textEdit)||jt.is(i))&&(T.undefined(i.additionalTextEdits)||T.typedArray(i.additionalTextEdits,jt.is))}t.is=r})(pc||(pc={}));var hc;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(hc||(hc={}));var fc;(function(t){function e(n,i,s,o,a,c){const l={startLine:n,endLine:i};return T.defined(s)&&(l.startCharacter=s),T.defined(o)&&(l.endCharacter=o),T.defined(a)&&(l.kind=a),T.defined(c)&&(l.collapsedText=c),l}t.create=e;function r(n){const i=n;return T.objectLiteral(i)&&T.uinteger(i.startLine)&&T.uinteger(i.startLine)&&(T.undefined(i.startCharacter)||T.uinteger(i.startCharacter))&&(T.undefined(i.endCharacter)||T.uinteger(i.endCharacter))&&(T.undefined(i.kind)||T.string(i.kind))}t.is=r})(fc||(fc={}));var po;(function(t){function e(n,i){return{location:n,message:i}}t.create=e;function r(n){let i=n;return T.defined(i)&&Pi.is(i.location)&&T.string(i.message)}t.is=r})(po||(po={}));var mc;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(mc||(mc={}));var gc;(function(t){t.Unnecessary=1,t.Deprecated=2})(gc||(gc={}));var yc;(function(t){function e(r){const n=r;return T.objectLiteral(n)&&T.string(n.href)}t.is=e})(yc||(yc={}));var Di;(function(t){function e(n,i,s,o,a,c){let l={range:n,message:i};return T.defined(s)&&(l.severity=s),T.defined(o)&&(l.code=o),T.defined(a)&&(l.source=a),T.defined(c)&&(l.relatedInformation=c),l}t.create=e;function r(n){var i;let s=n;return T.defined(s)&&X.is(s.range)&&T.string(s.message)&&(T.number(s.severity)||T.undefined(s.severity))&&(T.integer(s.code)||T.string(s.code)||T.undefined(s.code))&&(T.undefined(s.codeDescription)||T.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(T.string(s.source)||T.undefined(s.source))&&(T.undefined(s.relatedInformation)||T.typedArray(s.relatedInformation,po.is))}t.is=r})(Di||(Di={}));var Xr;(function(t){function e(n,i,...s){let o={title:n,command:i};return T.defined(s)&&s.length>0&&(o.arguments=s),o}t.create=e;function r(n){let i=n;return T.defined(i)&&T.string(i.title)&&T.string(i.command)}t.is=r})(Xr||(Xr={}));var jt;(function(t){function e(s,o){return{range:s,newText:o}}t.replace=e;function r(s,o){return{range:{start:s,end:s},newText:o}}t.insert=r;function n(s){return{range:s,newText:""}}t.del=n;function i(s){const o=s;return T.objectLiteral(o)&&T.string(o.newText)&&X.is(o.range)}t.is=i})(jt||(jt={}));var Br;(function(t){function e(n,i,s){const o={label:n};return i!==void 0&&(o.needsConfirmation=i),s!==void 0&&(o.description=s),o}t.create=e;function r(n){const i=n;return T.objectLiteral(i)&&T.string(i.label)&&(T.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(T.string(i.description)||i.description===void 0)}t.is=r})(Br||(Br={}));var Ge;(function(t){function e(r){const n=r;return T.string(n)}t.is=e})(Ge||(Ge={}));var Jt;(function(t){function e(s,o,a){return{range:s,newText:o,annotationId:a}}t.replace=e;function r(s,o,a){return{range:{start:s,end:s},newText:o,annotationId:a}}t.insert=r;function n(s,o){return{range:s,newText:"",annotationId:o}}t.del=n;function i(s){const o=s;return jt.is(o)&&(Br.is(o.annotationId)||Ge.is(o.annotationId))}t.is=i})(Jt||(Jt={}));var Oi;(function(t){function e(n,i){return{textDocument:n,edits:i}}t.create=e;function r(n){let i=n;return T.defined(i)&&Mi.is(i.textDocument)&&Array.isArray(i.edits)}t.is=r})(Oi||(Oi={}));var Ln;(function(t){function e(n,i,s){let o={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&T.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||T.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||T.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Ge.is(i.annotationId))}t.is=r})(Ln||(Ln={}));var _n;(function(t){function e(n,i,s,o){let a={kind:"rename",oldUri:n,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(a.options=s),o!==void 0&&(a.annotationId=o),a}t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&T.string(i.oldUri)&&T.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||T.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||T.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Ge.is(i.annotationId))}t.is=r})(_n||(_n={}));var Pn;(function(t){function e(n,i,s){let o={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&T.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||T.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||T.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Ge.is(i.annotationId))}t.is=r})(Pn||(Pn={}));var ho;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>T.string(i.kind)?Ln.is(i)||_n.is(i)||Pn.is(i):Oi.is(i)))}t.is=e})(ho||(ho={}));class Cs{constructor(e,r){this.edits=e,this.changeAnnotations=r}insert(e,r,n){let i,s;if(n===void 0?i=jt.insert(e,r):Ge.is(n)?(s=n,i=Jt.insert(e,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),i=Jt.insert(e,r,s)),this.edits.push(i),s!==void 0)return s}replace(e,r,n){let i,s;if(n===void 0?i=jt.replace(e,r):Ge.is(n)?(s=n,i=Jt.replace(e,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),i=Jt.replace(e,r,s)),this.edits.push(i),s!==void 0)return s}delete(e,r){let n,i;if(r===void 0?n=jt.del(e):Ge.is(r)?(i=r,n=Jt.del(e,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=Jt.del(e,i)),this.edits.push(n),i!==void 0)return i}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")}}class Yu{constructor(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,r){let n;if(Ge.is(e)?n=e:(n=this.nextId(),r=e),this._annotations[n]!==void 0)throw new Error(`Id ${n} is already in use.`);if(r===void 0)throw new Error(`No annotation provided for id ${n}`);return this._annotations[n]=r,this._size++,n}nextId(){return this._counter++,this._counter.toString()}}class bv{constructor(e){this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Yu(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(r=>{if(Oi.is(r)){const n=new Cs(r.edits,this._changeAnnotations);this._textEditChanges[r.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach(r=>{const n=new Cs(e.changes[r]);this._textEditChanges[r]=n})):this._workspaceEdit={}}get edit(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(Mi.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");const r={uri:e.uri,version:e.version};let n=this._textEditChanges[r.uri];if(!n){const i=[],s={textDocument:r,edits:i};this._workspaceEdit.documentChanges.push(s),n=new Cs(i,this._changeAnnotations),this._textEditChanges[r.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");let r=this._textEditChanges[e];if(!r){let n=[];this._workspaceEdit.changes[e]=n,r=new Cs(n),this._textEditChanges[e]=r}return r}}initDocumentChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Yu,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;Br.is(r)||Ge.is(r)?i=r:n=r;let s,o;if(i===void 0?s=Ln.create(e,n):(o=Ge.is(i)?i:this._changeAnnotations.manage(i),s=Ln.create(e,n,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o}renameFile(e,r,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let s;Br.is(n)||Ge.is(n)?s=n:i=n;let o,a;if(s===void 0?o=_n.create(e,r,i):(a=Ge.is(s)?s:this._changeAnnotations.manage(s),o=_n.create(e,r,i,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a}deleteFile(e,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;Br.is(r)||Ge.is(r)?i=r:n=r;let s,o;if(i===void 0?s=Pn.create(e,n):(o=Ge.is(i)?i:this._changeAnnotations.manage(i),s=Pn.create(e,n,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o}}var Tc;(function(t){function e(n){return{uri:n}}t.create=e;function r(n){let i=n;return T.defined(i)&&T.string(i.uri)}t.is=r})(Tc||(Tc={}));var vc;(function(t){function e(n,i){return{uri:n,version:i}}t.create=e;function r(n){let i=n;return T.defined(i)&&T.string(i.uri)&&T.integer(i.version)}t.is=r})(vc||(vc={}));var Mi;(function(t){function e(n,i){return{uri:n,version:i}}t.create=e;function r(n){let i=n;return T.defined(i)&&T.string(i.uri)&&(i.version===null||T.integer(i.version))}t.is=r})(Mi||(Mi={}));var Rc;(function(t){function e(n,i,s,o){return{uri:n,languageId:i,version:s,text:o}}t.create=e;function r(n){let i=n;return T.defined(i)&&T.string(i.uri)&&T.string(i.languageId)&&T.integer(i.version)&&T.string(i.text)}t.is=r})(Rc||(Rc={}));var fo;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){const n=r;return n===t.PlainText||n===t.Markdown}t.is=e})(fo||(fo={}));var Dn;(function(t){function e(r){const n=r;return T.objectLiteral(r)&&fo.is(n.kind)&&T.string(n.value)}t.is=e})(Dn||(Dn={}));var $c;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})($c||($c={}));var Ec;(function(t){t.PlainText=1,t.Snippet=2})(Ec||(Ec={}));var kc;(function(t){t.Deprecated=1})(kc||(kc={}));var Sc;(function(t){function e(n,i,s){return{newText:n,insert:i,replace:s}}t.create=e;function r(n){const i=n;return i&&T.string(i.newText)&&X.is(i.insert)&&X.is(i.replace)}t.is=r})(Sc||(Sc={}));var Ac;(function(t){t.asIs=1,t.adjustIndentation=2})(Ac||(Ac={}));var bc;(function(t){function e(r){const n=r;return n&&(T.string(n.detail)||n.detail===void 0)&&(T.string(n.description)||n.description===void 0)}t.is=e})(bc||(bc={}));var Cc;(function(t){function e(r){return{label:r}}t.create=e})(Cc||(Cc={}));var xc;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}t.create=e})(xc||(xc={}));var Fi;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function r(n){const i=n;return T.string(i)||T.objectLiteral(i)&&T.string(i.language)&&T.string(i.value)}t.is=r})(Fi||(Fi={}));var Nc;(function(t){function e(r){let n=r;return!!n&&T.objectLiteral(n)&&(Dn.is(n.contents)||Fi.is(n.contents)||T.typedArray(n.contents,Fi.is))&&(r.range===void 0||X.is(r.range))}t.is=e})(Nc||(Nc={}));var wc;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}t.create=e})(wc||(wc={}));var Ic;(function(t){function e(r,n,...i){let s={label:r};return T.defined(n)&&(s.documentation=n),T.defined(i)?s.parameters=i:s.parameters=[],s}t.create=e})(Ic||(Ic={}));var Lc;(function(t){t.Text=1,t.Read=2,t.Write=3})(Lc||(Lc={}));var _c;(function(t){function e(r,n){let i={range:r};return T.number(n)&&(i.kind=n),i}t.create=e})(_c||(_c={}));var Pc;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Pc||(Pc={}));var Dc;(function(t){t.Deprecated=1})(Dc||(Dc={}));var Oc;(function(t){function e(r,n,i,s,o){let a={name:r,kind:n,location:{uri:s,range:i}};return o&&(a.containerName=o),a}t.create=e})(Oc||(Oc={}));var Mc;(function(t){function e(r,n,i,s){return s!==void 0?{name:r,kind:n,location:{uri:i,range:s}}:{name:r,kind:n,location:{uri:i}}}t.create=e})(Mc||(Mc={}));var Fc;(function(t){function e(n,i,s,o,a,c){let l={name:n,detail:i,kind:s,range:o,selectionRange:a};return c!==void 0&&(l.children=c),l}t.create=e;function r(n){let i=n;return i&&T.string(i.name)&&T.number(i.kind)&&X.is(i.range)&&X.is(i.selectionRange)&&(i.detail===void 0||T.string(i.detail))&&(i.deprecated===void 0||T.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=r})(Fc||(Fc={}));var qc;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(qc||(qc={}));var qi;(function(t){t.Invoked=1,t.Automatic=2})(qi||(qi={}));var jc;(function(t){function e(n,i,s){let o={diagnostics:n};return i!=null&&(o.only=i),s!=null&&(o.triggerKind=s),o}t.create=e;function r(n){let i=n;return T.defined(i)&&T.typedArray(i.diagnostics,Di.is)&&(i.only===void 0||T.typedArray(i.only,T.string))&&(i.triggerKind===void 0||i.triggerKind===qi.Invoked||i.triggerKind===qi.Automatic)}t.is=r})(jc||(jc={}));var Uc;(function(t){function e(n,i,s){let o={title:n},a=!0;return typeof i=="string"?(a=!1,o.kind=i):Xr.is(i)?o.command=i:o.edit=i,a&&s!==void 0&&(o.kind=s),o}t.create=e;function r(n){let i=n;return i&&T.string(i.title)&&(i.diagnostics===void 0||T.typedArray(i.diagnostics,Di.is))&&(i.kind===void 0||T.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Xr.is(i.command))&&(i.isPreferred===void 0||T.boolean(i.isPreferred))&&(i.edit===void 0||ho.is(i.edit))}t.is=r})(Uc||(Uc={}));var Gc;(function(t){function e(n,i){let s={range:n};return T.defined(i)&&(s.data=i),s}t.create=e;function r(n){let i=n;return T.defined(i)&&X.is(i.range)&&(T.undefined(i.command)||Xr.is(i.command))}t.is=r})(Gc||(Gc={}));var zc;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}t.create=e;function r(n){let i=n;return T.defined(i)&&T.uinteger(i.tabSize)&&T.boolean(i.insertSpaces)}t.is=r})(zc||(zc={}));var Bc;(function(t){function e(n,i,s){return{range:n,target:i,data:s}}t.create=e;function r(n){let i=n;return T.defined(i)&&X.is(i.range)&&(T.undefined(i.target)||T.string(i.target))}t.is=r})(Bc||(Bc={}));var Kc;(function(t){function e(n,i){return{range:n,parent:i}}t.create=e;function r(n){let i=n;return T.objectLiteral(i)&&X.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=r})(Kc||(Kc={}));var Wc;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(Wc||(Wc={}));var Vc;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Vc||(Vc={}));var Hc;(function(t){function e(r){const n=r;return T.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=e})(Hc||(Hc={}));var Yc;(function(t){function e(n,i){return{range:n,text:i}}t.create=e;function r(n){const i=n;return i!=null&&X.is(i.range)&&T.string(i.text)}t.is=r})(Yc||(Yc={}));var Xc;(function(t){function e(n,i,s){return{range:n,variableName:i,caseSensitiveLookup:s}}t.create=e;function r(n){const i=n;return i!=null&&X.is(i.range)&&T.boolean(i.caseSensitiveLookup)&&(T.string(i.variableName)||i.variableName===void 0)}t.is=r})(Xc||(Xc={}));var Jc;(function(t){function e(n,i){return{range:n,expression:i}}t.create=e;function r(n){const i=n;return i!=null&&X.is(i.range)&&(T.string(i.expression)||i.expression===void 0)}t.is=r})(Jc||(Jc={}));var Zc;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}t.create=e;function r(n){const i=n;return T.defined(i)&&X.is(n.stoppedLocation)}t.is=r})(Zc||(Zc={}));var mo;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}t.is=e})(mo||(mo={}));var go;(function(t){function e(n){return{value:n}}t.create=e;function r(n){const i=n;return T.objectLiteral(i)&&(i.tooltip===void 0||T.string(i.tooltip)||Dn.is(i.tooltip))&&(i.location===void 0||Pi.is(i.location))&&(i.command===void 0||Xr.is(i.command))}t.is=r})(go||(go={}));var Qc;(function(t){function e(n,i,s){const o={position:n,label:i};return s!==void 0&&(o.kind=s),o}t.create=e;function r(n){const i=n;return T.objectLiteral(i)&&ee.is(i.position)&&(T.string(i.label)||T.typedArray(i.label,go.is))&&(i.kind===void 0||mo.is(i.kind))&&i.textEdits===void 0||T.typedArray(i.textEdits,jt.is)&&(i.tooltip===void 0||T.string(i.tooltip)||Dn.is(i.tooltip))&&(i.paddingLeft===void 0||T.boolean(i.paddingLeft))&&(i.paddingRight===void 0||T.boolean(i.paddingRight))}t.is=r})(Qc||(Qc={}));var el;(function(t){function e(r){return{kind:"snippet",value:r}}t.createSnippet=e})(el||(el={}));var tl;(function(t){function e(r,n,i,s){return{insertText:r,filterText:n,range:i,command:s}}t.create=e})(tl||(tl={}));var rl;(function(t){function e(r){return{items:r}}t.create=e})(rl||(rl={}));var nl;(function(t){t.Invoked=0,t.Automatic=1})(nl||(nl={}));var il;(function(t){function e(r,n){return{range:r,text:n}}t.create=e})(il||(il={}));var sl;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}t.create=e})(sl||(sl={}));var ol;(function(t){function e(r){const n=r;return T.objectLiteral(n)&&lo.is(n.uri)&&T.string(n.name)}t.is=e})(ol||(ol={}));const Cv=[`
`,`\r
`,"\r"];var al;(function(t){function e(s,o,a,c){return new xv(s,o,a,c)}t.create=e;function r(s){let o=s;return!!(T.defined(o)&&T.string(o.uri)&&(T.undefined(o.languageId)||T.string(o.languageId))&&T.uinteger(o.lineCount)&&T.func(o.getText)&&T.func(o.positionAt)&&T.func(o.offsetAt))}t.is=r;function n(s,o){let a=s.getText(),c=i(o,(d,h)=>{let f=d.range.start.line-h.range.start.line;return f===0?d.range.start.character-h.range.start.character:f}),l=a.length;for(let d=c.length-1;d>=0;d--){let h=c[d],f=s.offsetAt(h.range.start),$=s.offsetAt(h.range.end);if($<=l)a=a.substring(0,f)+h.newText+a.substring($,a.length);else throw new Error("Overlapping edit");l=f}return a}t.applyEdits=n;function i(s,o){if(s.length<=1)return s;const a=s.length/2|0,c=s.slice(0,a),l=s.slice(a);i(c,o),i(l,o);let d=0,h=0,f=0;for(;d<c.length&&h<l.length;)o(c[d],l[h])<=0?s[f++]=c[d++]:s[f++]=l[h++];for(;d<c.length;)s[f++]=c[d++];for(;h<l.length;)s[f++]=l[h++];return s}})(al||(al={}));let xv=class{constructor(t,e,r,n){this._uri=t,this._languageId=e,this._version=r,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let e=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(e,r)}return this._content}update(t,e){this._content=t.text,this._version=e,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let t=[],e=this._content,r=!0;for(let n=0;n<e.length;n++){r&&(t.push(n),r=!1);let i=e.charAt(n);r=i==="\r"||i===`
`,i==="\r"&&n+1<e.length&&e.charAt(n+1)===`
`&&n++}r&&e.length>0&&t.push(e.length),this._lineOffsets=t}return this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let e=this.getLineOffsets(),r=0,n=e.length;if(n===0)return ee.create(0,t);for(;r<n;){let s=Math.floor((r+n)/2);e[s]>t?n=s:r=s+1}let i=r-1;return ee.create(i,t-e[i])}offsetAt(t){let e=this.getLineOffsets();if(t.line>=e.length)return this._content.length;if(t.line<0)return 0;let r=e[t.line],n=t.line+1<e.length?e[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,n),r)}get lineCount(){return this.getLineOffsets().length}};var T;(function(t){const e=Object.prototype.toString;function r($){return typeof $<"u"}t.defined=r;function n($){return typeof $>"u"}t.undefined=n;function i($){return $===!0||$===!1}t.boolean=i;function s($){return e.call($)==="[object String]"}t.string=s;function o($){return e.call($)==="[object Number]"}t.number=o;function a($,S,b){return e.call($)==="[object Number]"&&S<=$&&$<=b}t.numberRange=a;function c($){return e.call($)==="[object Number]"&&-2147483648<=$&&$<=2147483647}t.integer=c;function l($){return e.call($)==="[object Number]"&&0<=$&&$<=2147483647}t.uinteger=l;function d($){return e.call($)==="[object Function]"}t.func=d;function h($){return $!==null&&typeof $=="object"}t.objectLiteral=h;function f($,S){return Array.isArray($)&&$.every(S)}t.typedArray=f})(T||(T={}));const Nv=Object.freeze(Object.defineProperty({__proto__:null,get AnnotatedTextEdit(){return Jt},get ChangeAnnotation(){return Br},get ChangeAnnotationIdentifier(){return Ge},get CodeAction(){return Uc},get CodeActionContext(){return jc},get CodeActionKind(){return qc},get CodeActionTriggerKind(){return qi},get CodeDescription(){return yc},get CodeLens(){return Gc},get Color(){return uo},get ColorInformation(){return dc},get ColorPresentation(){return pc},get Command(){return Xr},get CompletionItem(){return Cc},get CompletionItemKind(){return $c},get CompletionItemLabelDetails(){return bc},get CompletionItemTag(){return kc},get CompletionList(){return xc},get CreateFile(){return Ln},get DeleteFile(){return Pn},get Diagnostic(){return Di},get DiagnosticRelatedInformation(){return po},get DiagnosticSeverity(){return mc},get DiagnosticTag(){return gc},get DocumentHighlight(){return _c},get DocumentHighlightKind(){return Lc},get DocumentLink(){return Bc},get DocumentSymbol(){return Fc},get DocumentUri(){return cc},EOL:Cv,get FoldingRange(){return fc},get FoldingRangeKind(){return hc},get FormattingOptions(){return zc},get Hover(){return Nc},get InlayHint(){return Qc},get InlayHintKind(){return mo},get InlayHintLabelPart(){return go},get InlineCompletionContext(){return sl},get InlineCompletionItem(){return tl},get InlineCompletionList(){return rl},get InlineCompletionTriggerKind(){return nl},get InlineValueContext(){return Zc},get InlineValueEvaluatableExpression(){return Jc},get InlineValueText(){return Yc},get InlineValueVariableLookup(){return Xc},get InsertReplaceEdit(){return Sc},get InsertTextFormat(){return Ec},get InsertTextMode(){return Ac},get Location(){return Pi},get LocationLink(){return uc},get MarkedString(){return Fi},get MarkupContent(){return Dn},get MarkupKind(){return fo},get OptionalVersionedTextDocumentIdentifier(){return Mi},get ParameterInformation(){return wc},get Position(){return ee},get Range(){return X},get RenameFile(){return _n},get SelectedCompletionInfo(){return il},get SelectionRange(){return Kc},get SemanticTokenModifiers(){return Vc},get SemanticTokenTypes(){return Wc},get SemanticTokens(){return Hc},get SignatureInformation(){return Ic},get StringValue(){return el},get SymbolInformation(){return Oc},get SymbolKind(){return Pc},get SymbolTag(){return Dc},get TextDocument(){return al},get TextDocumentEdit(){return Oi},get TextDocumentIdentifier(){return Tc},get TextDocumentItem(){return Rc},get TextEdit(){return jt},get URI(){return lo},get VersionedTextDocumentIdentifier(){return vc},WorkspaceChange:bv,get WorkspaceEdit(){return ho},get WorkspaceFolder(){return ol},get WorkspaceSymbol(){return Mc},get integer(){return lc},get uinteger(){return _i}},Symbol.toStringTag,{value:"Module"}));class wv{constructor(){this.nodeStack=[]}get current(){return this.nodeStack[this.nodeStack.length-1]??this.rootNode}buildRootNode(e){return this.rootNode=new lf(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){const r=new Jl;return r.grammarSource=e,r.root=this.rootNode,this.current.content.push(r),this.nodeStack.push(r),r}buildLeafNode(e,r){const n=new cl(e.startOffset,e.image.length,Xa(e),e.tokenType,!r);return n.grammarSource=r,n.root=this.rootNode,this.current.content.push(n),n}removeNode(e){const r=e.container;if(r){const n=r.content.indexOf(e);n>=0&&r.content.splice(n,1)}}addHiddenNodes(e){const r=[];for(const s of e){const o=new cl(s.startOffset,s.image.length,Xa(s),s.tokenType,!0);o.root=this.rootNode,r.push(o)}let n=this.current,i=!1;if(n.content.length>0){n.content.push(...r);return}for(;n.container;){const s=n.container.content.indexOf(n);if(s>0){n.container.content.splice(s,0,...r),i=!0;break}n=n.container}i||this.rootNode.content.unshift(...r)}construct(e){const r=this.current;typeof e.$type=="string"&&!e.$infixName&&(this.current.astNode=e),e.$cstNode=r;const n=this.nodeStack.pop();(n==null?void 0:n.content.length)===0&&this.removeNode(n)}}class cf{get hidden(){return!1}get astNode(){var e,r;const n=typeof((e=this._astNode)==null?void 0:e.$type)=="string"?this._astNode:(r=this.container)==null?void 0:r.astNode;if(!n)throw new Error("This node has no associated AST element");return n}set astNode(e){this._astNode=e}get text(){return this.root.fullText.substring(this.offset,this.end)}}class cl extends cf{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,r,n,i,s=!1){super(),this._hidden=s,this._offset=e,this._tokenType=i,this._length=r,this._range=n}}class Jl extends cf{constructor(){super(...arguments),this.content=new Zl(this)}get offset(){var e;return((e=this.firstNonHiddenNode)==null?void 0:e.offset)??0}get length(){return this.end-this.offset}get end(){var e;return((e=this.lastNonHiddenNode)==null?void 0:e.end)??0}get range(){const e=this.firstNonHiddenNode,r=this.lastNonHiddenNode;if(e&&r){if(this._rangeCache===void 0){const{range:n}=e,{range:i}=r;this._rangeCache={start:n.start,end:i.end.line<n.start.line?n.start:i.end}}return this._rangeCache}else return{start:ee.create(0,0),end:ee.create(0,0)}}get firstNonHiddenNode(){for(const e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){const r=this.content[e];if(!r.hidden)return r}return this.content[this.content.length-1]}}class Zl extends Array{constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,Zl.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,r,...n){return this.addParents(n),super.splice(e,r,...n)}addParents(e){for(const r of e)r.container=this.parent}}class lf extends Jl{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e??""}}const ll=Symbol("Datatype");function ha(t){return t.$type===ll}const Xu="​",uf=t=>t.endsWith(Xu)?t:t+Xu;class df{constructor(e){var r;this._unorderedGroups=new Map,this.allRules=new Map,this.lexer=e.parser.Lexer;const n=this.lexer.definition,i=e.LanguageMetaData.mode==="production";(r=e.shared.profilers.LangiumProfiler)!=null&&r.isActive("parsing")?this.wrapper=new Dv(n,{...e.parser.ParserConfig,skipValidations:i,errorMessageProvider:e.parser.ParserErrorMessageProvider},e.shared.profilers.LangiumProfiler.createTask("parsing",e.LanguageMetaData.languageId)):this.wrapper=new hf(n,{...e.parser.ParserConfig,skipValidations:i,errorMessageProvider:e.parser.ParserErrorMessageProvider})}alternatives(e,r){this.wrapper.wrapOr(e,r)}optional(e,r){this.wrapper.wrapOption(e,r)}many(e,r){this.wrapper.wrapMany(e,r)}atLeastOne(e,r){this.wrapper.wrapAtLeastOne(e,r)}getRule(e){return this.allRules.get(e)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}}class Iv extends df{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new wv,this.stack=[],this.assignmentMap=new Map,this.operatorPrecedence=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,r){const n=this.computeRuleType(e);let i;Xs(e)&&(i=e.name,this.registerPrecedenceMap(e));const s=this.wrapper.DEFINE_RULE(uf(e.name),this.startImplementation(n,i,r).bind(this));return this.allRules.set(e.name,s),or(e)&&e.entry&&(this.mainRule=s),s}registerPrecedenceMap(e){const r=e.name,n=new Map;for(let i=0;i<e.operators.precedences.length;i++){const s=e.operators.precedences[i];for(const o of s.operators)n.set(o.value,{precedence:i,rightAssoc:s.associativity==="right"})}this.operatorPrecedence.set(r,n)}computeRuleType(e){return Xs(e)?Li(e):e.fragment?void 0:fh(e)?ll:Li(e)}parse(e,r={}){this.nodeBuilder.buildRootNode(e);const n=this.lexerResult=this.lexer.tokenize(e);this.wrapper.input=n.tokens;const i=r.rule?this.allRules.get(r.rule):this.mainRule;if(!i)throw new Error(r.rule?`No rule found with name '${r.rule}'`:"No main rule available.");const s=this.doParse(i);return this.nodeBuilder.addHiddenNodes(n.hidden),this.unorderedGroups.clear(),this.lexerResult=void 0,Ua(s,{deep:!0}),{value:s,lexerErrors:n.errors,lexerReport:n.report,parserErrors:this.wrapper.errors}}doParse(e){let r=this.wrapper.rule(e);if(this.stack.length>0&&(r=this.construct()),r===void 0)throw new Error("No result from parser");if(this.stack.length>0)throw new Error("Parser stack is not empty after parsing");return r}startImplementation(e,r,n){return i=>{const s=!this.isRecording()&&e!==void 0;if(s){const o={$type:e};this.stack.push(o),e===ll?o.value="":r!==void 0&&(o.$infixName=r)}return n(i),s?this.construct():void 0}}extractHiddenTokens(e){const r=this.lexerResult.hidden;if(!r.length)return[];const n=e.startOffset;for(let i=0;i<r.length;i++)if(r[i].startOffset>n)return r.splice(0,i);return r.splice(0,r.length)}consume(e,r,n){const i=this.wrapper.wrapConsume(e,r);if(!this.isRecording()&&this.isValidToken(i)){const s=this.extractHiddenTokens(i);this.nodeBuilder.addHiddenNodes(s);const o=this.nodeBuilder.buildLeafNode(i,n),{assignment:a,crossRef:c}=this.getAssignment(n),l=this.current;if(a){const d=Vr(n)?i.image:this.converter.convert(i.image,o);this.assign(a.operator,a.feature,d,o,c)}else if(ha(l)){let d=i.image;Vr(n)||(d=this.converter.convert(d,o).toString()),l.value+=d}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&typeof e.endOffset=="number"&&!isNaN(e.endOffset)}subrule(e,r,n,i,s){let o;!this.isRecording()&&!n&&(o=this.nodeBuilder.buildCompositeNode(i));let a;try{a=this.wrapper.wrapSubrule(e,r,s)}finally{this.isRecording()||(a===void 0&&!n&&(a=this.construct()),a!==void 0&&o&&o.length>0&&this.performSubruleAssignment(a,i,o))}}performSubruleAssignment(e,r,n){const{assignment:i,crossRef:s}=this.getAssignment(r);if(i)this.assign(i.operator,i.feature,e,n,s);else if(!i){const o=this.current;if(ha(o))o.value+=e.toString();else if(typeof e=="object"&&e){const a=this.assignWithoutOverride(e,o);this.stack.pop(),this.stack.push(a)}}}action(e,r){if(!this.isRecording()){let n=this.current;if(r.feature&&r.operator){n=this.construct(),this.nodeBuilder.removeNode(n.$cstNode),this.nodeBuilder.buildCompositeNode(r).content.push(n.$cstNode);const i={$type:e};this.stack.push(i),this.assign(r.operator,r.feature,n,n.$cstNode)}else n.$type=e}}construct(){if(this.isRecording())return;const e=this.stack.pop();return this.nodeBuilder.construct(e),"$infixName"in e?this.constructInfix(e,this.operatorPrecedence.get(e.$infixName)):ha(e)?this.converter.convert(e.value,e.$cstNode):(qm(this.astReflection,e),e)}constructInfix(e,r){const n=e.parts;if(!Array.isArray(n)||n.length===0)return;const i=e.operators;if(!Array.isArray(i)||n.length<2)return n[0];let s=0,o=-1;for(let b=0;b<i.length;b++){const F=i[b],L=r.get(F)??{precedence:1/0,rightAssoc:!1};L.precedence>o?(o=L.precedence,s=b):L.precedence===o&&(L.rightAssoc||(s=b))}const a=i.slice(0,s),c=i.slice(s+1),l=n.slice(0,s+1),d=n.slice(s+1),h={$infixName:e.$infixName,$type:e.$type,$cstNode:e.$cstNode,parts:l,operators:a},f={$infixName:e.$infixName,$type:e.$type,$cstNode:e.$cstNode,parts:d,operators:c},$=this.constructInfix(h,r),S=this.constructInfix(f,r);return{$type:e.$type,$cstNode:e.$cstNode,left:$,operator:i[s],right:S}}getAssignment(e){if(!this.assignmentMap.has(e)){const r=No(e,Wr);this.assignmentMap.set(e,{assignment:r,crossRef:r&&Io(r.terminal)?r.terminal.isMulti?"multi":"single":void 0})}return this.assignmentMap.get(e)}assign(e,r,n,i,s){const o=this.current;let a;switch(s==="single"&&typeof n=="string"?a=this.linker.buildReference(o,r,i,n):s==="multi"&&typeof n=="string"?a=this.linker.buildMultiReference(o,r,i,n):a=n,e){case"=":{o[r]=a;break}case"?=":{o[r]=!0;break}case"+=":Array.isArray(o[r])||(o[r]=[]),o[r].push(a)}}assignWithoutOverride(e,r){for(const[i,s]of Object.entries(r)){const o=e[i];o===void 0?e[i]=s:Array.isArray(o)&&Array.isArray(s)&&(s.push(...o),e[i]=s)}const n=e.$cstNode;return n&&(n.astNode=void 0,e.$cstNode=void 0),e}get definitionErrors(){return this.wrapper.definitionErrors}}class Lv{buildMismatchTokenMessage(e){return bn.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return bn.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return bn.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return bn.buildEarlyExitMessage(e)}}class pf extends Lv{buildMismatchTokenMessage({expected:e,actual:r}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${r.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}}class _v extends df{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();const r=this.lexer.tokenize(e,{mode:"partial"});return this.tokens=r.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,r){const n=this.wrapper.DEFINE_RULE(uf(e.name),this.startImplementation(r).bind(this));return this.allRules.set(e.name,n),e.entry&&(this.mainRule=n),n}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return r=>{const n=this.keepStackSize();try{e(r)}finally{this.resetStackSize(n)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,r,n){this.wrapper.wrapConsume(e,r),this.isRecording()||(this.lastElementStack=[...this.elementStack,n],this.nextTokenIndex=this.currIdx+1)}subrule(e,r,n,i,s){this.before(i),this.wrapper.wrapSubrule(e,r,s),this.after(i)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){const r=this.elementStack.lastIndexOf(e);r>=0&&this.elementStack.splice(r)}}get currIdx(){return this.wrapper.currIdx}}const Pv={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new pf};class hf extends qT{constructor(e,r){const n=r&&"maxLookahead"in r;super(e,{...Pv,lookaheadStrategy:n?new Kl({maxLookahead:r.maxLookahead}):new ov({logging:r.skipValidations?()=>{}:void 0}),...r})}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,r,n){return this.RULE(e,r,n)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,r){return this.consume(e,r,void 0)}wrapSubrule(e,r,n){return this.subrule(e,r,{ARGS:[n]})}wrapOr(e,r){this.or(e,r)}wrapOption(e,r){this.option(e,r)}wrapMany(e,r){this.many(e,r)}wrapAtLeastOne(e,r){this.atLeastOne(e,r)}rule(e){return e.call(this,{})}}class Dv extends hf{constructor(e,r,n){super(e,r),this.task=n}rule(e){this.task.start(),this.task.startSubTask(this.ruleName(e));try{return super.rule(e)}finally{this.task.stopSubTask(this.ruleName(e)),this.task.stop()}}ruleName(e){return e.ruleName}subrule(e,r,n){this.task.startSubTask(this.ruleName(r));try{return super.subrule(e,r,n)}finally{this.task.stopSubTask(this.ruleName(r))}}}function ff(t,e,r){return Ov({parser:e,tokens:r,ruleNames:new Map},t),e}function Ov(t,e){const r=lh(e,!1),n=fe(e.rules).filter(or).filter(s=>r.has(s));for(const s of n){const o={...t,consume:1,optional:1,subrule:1,many:1,or:1};t.parser.rule(s,Jr(o,s.definition))}const i=fe(e.rules).filter(Xs).filter(s=>r.has(s));for(const s of i)t.parser.rule(s,Mv(t,s))}function Mv(t,e){const r=e.call.rule.ref;if(!r)throw new Error("Could not resolve reference to infix operator rule: "+e.call.rule.$refText);if(ar(r))throw new Error("Cannot use terminal rule in infix expression");const n=e.operators.precedences.flatMap(h=>h.operators),i={$type:"Group",elements:[]},s={$container:i,$type:"Assignment",feature:"parts",operator:"+=",terminal:e.call},o={$container:i,$type:"Group",elements:[],cardinality:"*"};i.elements.push(s,o);const a={$container:o,$type:"Assignment",feature:"operators",operator:"+=",terminal:{$type:"Alternatives",elements:n}},c={...s,$container:o};o.elements.push(a,c);const l=n.map(h=>t.tokens[h.value]).map((h,f)=>({ALT:()=>t.parser.consume(f,h,a)}));let d;return h=>{d??(d=Ql(t,r)),t.parser.subrule(0,d,!1,s,h),t.parser.many(0,{DEF:()=>{t.parser.alternatives(0,l),t.parser.subrule(1,d,!1,c,h)}})}}function Jr(t,e,r=!1){let n;if(Vr(e))n=Bv(t,e);else if(wo(e))n=Fv(t,e);else if(Wr(e))n=Jr(t,e.terminal);else if(Io(e))n=mf(t,e);else if(Hr(e))n=qv(t,e);else if(th(e))n=Uv(t,e);else if(ih(e))n=Gv(t,e);else if(Ml(e))n=zv(t,e);else if(Km(e)){const i=t.consume++;n=()=>t.parser.consume(i,$r,e)}else throw new oh(e.$cstNode,`Unexpected element type: ${e.$type}`);return gf(t,r?void 0:yo(e),n,e.cardinality)}function Fv(t,e){const r=Li(e);return()=>t.parser.action(r,e)}function qv(t,e){const r=e.rule.ref;if(Hi(r)){const n=t.subrule++,i=or(r)&&r.fragment,s=e.arguments.length>0?jv(r,e.arguments):()=>({});let o;return a=>{o??(o=Ql(t,r)),t.parser.subrule(n,o,i,e,s(a))}}else if(ar(r)){const n=t.consume++,i=ul(t,r.name);return()=>t.parser.consume(n,i,e)}else if(r)Yi();else throw new oh(e.$cstNode,`Undefined rule: ${e.rule.$refText}`)}function jv(t,e){if(e.some(r=>r.calledByName)){const r=e.map(n=>{var i,s;return{parameterName:(s=(i=n.parameter)==null?void 0:i.ref)==null?void 0:s.name,predicate:Ft(n.value)}});return n=>{const i={};for(const{parameterName:s,predicate:o}of r)s&&(i[s]=o(n));return i}}else{const r=e.map(n=>Ft(n.value));return n=>{const i={};for(let s=0;s<r.length;s++)if(s<t.parameters.length){const o=t.parameters[s].name,a=r[s];i[o]=a(n)}return i}}}function Ft(t){if(Bm(t)){const e=Ft(t.left),r=Ft(t.right);return n=>e(n)||r(n)}else if(zm(t)){const e=Ft(t.left),r=Ft(t.right);return n=>e(n)&&r(n)}else if(Hm(t)){const e=Ft(t.value);return r=>!e(r)}else if(Ym(t)){const e=t.parameter.ref.name;return r=>r!==void 0&&r[e]===!0}else if(Um(t)){const e=!!t.true;return()=>e}Yi()}function Uv(t,e){if(e.elements.length===1)return Jr(t,e.elements[0]);{const r=[];for(const i of e.elements){const s={ALT:Jr(t,i,!0)},o=yo(i);o&&(s.GATE=Ft(o)),r.push(s)}const n=t.or++;return i=>t.parser.alternatives(n,r.map(s=>{const o={ALT:()=>s.ALT(i)},a=s.GATE;return a&&(o.GATE=()=>a(i)),o}))}}function Gv(t,e){if(e.elements.length===1)return Jr(t,e.elements[0]);const r=[];for(const a of e.elements){const c={ALT:Jr(t,a,!0)},l=yo(a);l&&(c.GATE=Ft(l)),r.push(c)}const n=t.or++,i=(a,c)=>{const l=c.getRuleStack().join("-");return`uGroup_${a}_${l}`},s=a=>t.parser.alternatives(n,r.map((c,l)=>{const d={ALT:()=>!0},h=t.parser;d.ALT=()=>{if(c.ALT(a),!h.isRecording()){const $=i(n,h);h.unorderedGroups.get($)||h.unorderedGroups.set($,[]);const S=h.unorderedGroups.get($);typeof(S==null?void 0:S[l])>"u"&&(S[l]=!0)}};const f=c.GATE;return f?d.GATE=()=>f(a):d.GATE=()=>{const $=h.unorderedGroups.get(i(n,h));return!($!=null&&$[l])},d})),o=gf(t,yo(e),s,"*");return a=>{o(a),t.parser.isRecording()||t.parser.unorderedGroups.delete(i(n,t.parser))}}function zv(t,e){const r=e.elements.map(n=>Jr(t,n));return n=>r.forEach(i=>i(n))}function yo(t){if(Ml(t))return t.guardCondition}function mf(t,e,r=e.terminal){if(r)if(Hr(r)&&or(r.rule.ref)){const n=r.rule.ref,i=t.subrule++;let s;return o=>{s??(s=Ql(t,n)),t.parser.subrule(i,s,!1,e,o)}}else if(Hr(r)&&ar(r.rule.ref)){const n=t.consume++,i=ul(t,r.rule.ref.name);return()=>t.parser.consume(n,i,e)}else if(Vr(r)){const n=t.consume++,i=ul(t,r.value);return()=>t.parser.consume(n,i,e)}else throw new Error("Could not build cross reference parser");else{if(!e.type.ref)throw new Error("Could not resolve reference to type: "+e.type.$refText);const n=ph(e.type.ref),i=n==null?void 0:n.terminal;if(!i)throw new Error("Could not find name assignment for type: "+Li(e.type.ref));return mf(t,e,i)}}function Bv(t,e){const r=t.consume++,n=t.tokens[e.value];if(!n)throw new Error("Could not find token for keyword: "+e.value);return()=>t.parser.consume(r,n,e)}function gf(t,e,r,n){const i=e&&Ft(e);if(!n)if(i){const s=t.or++;return o=>t.parser.alternatives(s,[{ALT:()=>r(o),GATE:()=>i(o)},{ALT:Ku(),GATE:()=>!i(o)}])}else return r;if(n==="*"){const s=t.many++;return o=>t.parser.many(s,{DEF:()=>r(o),GATE:i?()=>i(o):void 0})}else if(n==="+"){const s=t.many++;if(i){const o=t.or++;return a=>t.parser.alternatives(o,[{ALT:()=>t.parser.atLeastOne(s,{DEF:()=>r(a)}),GATE:()=>i(a)},{ALT:Ku(),GATE:()=>!i(a)}])}else return o=>t.parser.atLeastOne(s,{DEF:()=>r(o)})}else if(n==="?"){const s=t.optional++;return o=>t.parser.optional(s,{DEF:()=>r(o),GATE:i?()=>i(o):void 0})}else Yi()}function Ql(t,e){const r=Kv(t,e),n=t.parser.getRule(r);if(!n)throw new Error(`Rule "${r}" not found."`);return n}function Kv(t,e){if(Hi(e))return e.name;if(t.ruleNames.has(e))return t.ruleNames.get(e);{let r=e,n=r.$container,i=e.$type;for(;!or(n);)(Ml(n)||th(n)||ih(n))&&(i=n.elements.indexOf(r).toString()+":"+i),r=n,n=n.$container;return i=n.name+":"+i,t.ruleNames.set(e,i),i}}function ul(t,e){const r=t.tokens[e];if(!r)throw new Error(`Token "${e}" not found."`);return r}function Wv(t){const e=t.Grammar,r=t.parser.Lexer,n=new _v(t);return ff(e,n,r.definition),n.finalize(),n}function Vv(t){const e=Hv(t);return e.finalize(),e}function Hv(t){const e=t.Grammar,r=t.parser.Lexer,n=new Iv(t);return ff(e,n,r.definition)}class yf{constructor(){this.diagnostics=[]}buildTokens(e,r){const n=fe(lh(e,!1)),i=this.buildTerminalTokens(n),s=this.buildKeywordTokens(n,i,r);return s.push(...i),s}flushLexingReport(e){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){const e=[...this.diagnostics];return this.diagnostics=[],e}buildTerminalTokens(e){return e.filter(ar).filter(r=>!r.fragment).map(r=>this.buildTerminalToken(r)).toArray()}buildTerminalToken(e){const r=ql(e),n=this.requiresCustomPattern(r)?this.regexPatternFunction(r):r,i={name:e.name,PATTERN:n};return typeof n=="function"&&(i.LINE_BREAKS=!0),e.hidden&&(i.GROUP=ch(r)?st.SKIPPED:"hidden"),i}requiresCustomPattern(e){return!!(e.flags.includes("u")||e.flags.includes("s"))}regexPatternFunction(e){const r=new RegExp(e,e.flags+"y");return(n,i)=>(r.lastIndex=i,r.exec(n))}buildKeywordTokens(e,r,n){return e.filter(Hi).flatMap(i=>Vi(i).filter(Vr)).distinct(i=>i.value).toArray().sort((i,s)=>s.value.length-i.value.length).map(i=>this.buildKeywordToken(i,r,!!(n!=null&&n.caseInsensitive)))}buildKeywordToken(e,r,n){const i=this.buildKeywordPattern(e,n),s={name:e.value,PATTERN:i,LONGER_ALT:this.findLongerAlt(e,r)};return typeof i=="function"&&(s.LINE_BREAKS=!0),s}buildKeywordPattern(e,r){return r?new RegExp(_o(e.value),"i"):e.value}findLongerAlt(e,r){return r.reduce((n,i)=>{const s=i==null?void 0:i.PATTERN;return s!=null&&s.source&&Tg("^"+s.source+"$",e.value)&&n.push(i),n},[])}}class Tf{convert(e,r){let n=r.grammarSource;if(Io(n)&&(n=Eg(n)),Hr(n)){const i=n.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,e,r)}return e}runConverter(e,r,n){var i;switch(e.name.toUpperCase()){case"INT":return Ht.convertInt(r);case"STRING":return Ht.convertString(r);case"ID":return Ht.convertID(r)}switch((i=Ng(e))==null?void 0:i.toLowerCase()){case"number":return Ht.convertNumber(r);case"boolean":return Ht.convertBoolean(r);case"bigint":return Ht.convertBigint(r);case"date":return Ht.convertDate(r);default:return r}}}var Ht;(function(t){function e(l){let d="";for(let h=1;h<l.length-1;h++){const f=l.charAt(h);if(f==="\\"){const $=l.charAt(++h);d+=r($)}else d+=f}return d}t.convertString=e;function r(l){switch(l){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"0":return"\0";default:return l}}function n(l){return l.charAt(0)==="^"?l.substring(1):l}t.convertID=n;function i(l){return parseInt(l)}t.convertInt=i;function s(l){return BigInt(l)}t.convertBigint=s;function o(l){return new Date(l)}t.convertDate=o;function a(l){return Number(l)}t.convertNumber=a;function c(l){return l.toLowerCase()==="true"}t.convertBoolean=c})(Ht||(Ht={}));var kr={},cr={};Object.defineProperty(cr,"__esModule",{value:!0});let dl;function pl(){if(dl===void 0)throw new Error("No runtime abstraction layer installed");return dl}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");dl=r}t.install=e})(pl||(pl={}));cr.default=pl;var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.stringArray=xe.array=xe.func=xe.error=xe.number=xe.string=xe.boolean=void 0;function Yv(t){return t===!0||t===!1}xe.boolean=Yv;function vf(t){return typeof t=="string"||t instanceof String}xe.string=vf;function Xv(t){return typeof t=="number"||t instanceof Number}xe.number=Xv;function Jv(t){return t instanceof Error}xe.error=Jv;function Zv(t){return typeof t=="function"}xe.func=Zv;function Rf(t){return Array.isArray(t)}xe.array=Rf;function Qv(t){return Rf(t)&&t.every(e=>vf(e))}xe.stringArray=Qv;var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});var $f=Ut.Emitter=Ut.Event=void 0;const eR=cr;var Ju;(function(t){const e={dispose(){}};t.None=function(){return e}})(Ju||(Ut.Event=Ju={}));class tR{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=n.length;s<o;s++)try{r.push(n[s].apply(i[s],e))}catch(a){(0,eR.default)().console.error(a)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class Uo{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new tR),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);const i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=Uo._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}$f=Ut.Emitter=Uo;Uo._noop=function(){};var ge;Object.defineProperty(kr,"__esModule",{value:!0});var eu=kr.CancellationTokenSource=ge=kr.CancellationToken=void 0;const rR=cr,nR=xe,hl=Ut;var To;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:hl.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:hl.Event.None});function e(r){const n=r;return n&&(n===t.None||n===t.Cancelled||nR.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(To||(ge=kr.CancellationToken=To={}));const iR=Object.freeze(function(t,e){const r=(0,rR.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}});class Zu{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?iR:(this._emitter||(this._emitter=new hl.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class sR{get token(){return this._token||(this._token=new Zu),this._token}cancel(){this._token?this._token.cancel():this._token=To.Cancelled}dispose(){this._token?this._token instanceof Zu&&this._token.dispose():this._token=To.None}}eu=kr.CancellationTokenSource=sR;function oR(){return new Promise(t=>{typeof setImmediate>"u"?setTimeout(t,0):setImmediate(t)})}let Bs=0,aR=10;function cR(){return Bs=performance.now(),new eu}const Cn=Symbol("OperationCancelled");function Go(t){return t===Cn}async function Ze(t){if(t===ge.None)return;const e=performance.now();if(e-Bs>=aR&&(Bs=e,await oR(),Bs=performance.now()),t.isCancellationRequested)throw Cn}class tu{constructor(){this.promise=new Promise((e,r)=>{this.resolve=n=>(e(n),this),this.reject=n=>(r(n),this)})}}class ji{constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){const r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(const n of e)if(ji.isIncremental(n)){const i=kf(n.range),s=this.offsetAt(i.start),o=this.offsetAt(i.end);this._content=this._content.substring(0,s)+n.text+this._content.substring(o,this._content.length);const a=Math.max(i.start.line,0),c=Math.max(i.end.line,0);let l=this._lineOffsets;const d=Qu(n.text,!1,s);if(c-a===d.length)for(let f=0,$=d.length;f<$;f++)l[f+a+1]=d[f];else d.length<1e4?l.splice(a+1,c-a,...d):this._lineOffsets=l=l.slice(0,a+1).concat(d,l.slice(c+1));const h=n.text.length-(o-s);if(h!==0)for(let f=a+1+d.length,$=l.length;f<$;f++)l[f]=l[f]+h}else if(ji.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Qu(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const r=this.getLineOffsets();let n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){const o=Math.floor((n+i)/2);r[o]>e?i=o:n=o+1}const s=n-1;return e=this.ensureBeforeEOL(e,r[s]),{line:s,character:e-r[s]}}offsetAt(e){const r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;const n=r[e.line];if(e.character<=0)return n;const i=e.line+1<r.length?r[e.line+1]:this._content.length,s=Math.min(n+e.character,i);return this.ensureBeforeEOL(s,n)}ensureBeforeEOL(e,r){for(;e>r&&Ef(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){const r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){const r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}}var fl;(function(t){function e(i,s,o,a){return new ji(i,s,o,a)}t.create=e;function r(i,s,o){if(i instanceof ji)return i.update(s,o),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=r;function n(i,s){const o=i.getText(),a=ml(s.map(lR),(d,h)=>{const f=d.range.start.line-h.range.start.line;return f===0?d.range.start.character-h.range.start.character:f});let c=0;const l=[];for(const d of a){const h=i.offsetAt(d.range.start);if(h<c)throw new Error("Overlapping edit");h>c&&l.push(o.substring(c,h)),d.newText.length&&l.push(d.newText),c=i.offsetAt(d.range.end)}return l.push(o.substr(c)),l.join("")}t.applyEdits=n})(fl||(fl={}));function ml(t,e){if(t.length<=1)return t;const r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);ml(n,e),ml(i,e);let s=0,o=0,a=0;for(;s<n.length&&o<i.length;)e(n[s],i[o])<=0?t[a++]=n[s++]:t[a++]=i[o++];for(;s<n.length;)t[a++]=n[s++];for(;o<i.length;)t[a++]=i[o++];return t}function Qu(t,e,r=0){const n=e?[r]:[];for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);Ef(s)&&(s===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}function Ef(t){return t===13||t===10}function kf(t){const e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}function lR(t){const e=kf(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var Sf;(()=>{var t={975:A=>{function v(m){if(typeof m!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(m))}function y(m,g){for(var R,w="",P=0,I=-1,U=0,B=0;B<=m.length;++B){if(B<m.length)R=m.charCodeAt(B);else{if(R===47)break;R=47}if(R===47){if(!(I===B-1||U===1))if(I!==B-1&&U===2){if(w.length<2||P!==2||w.charCodeAt(w.length-1)!==46||w.charCodeAt(w.length-2)!==46){if(w.length>2){var se=w.lastIndexOf("/");if(se!==w.length-1){se===-1?(w="",P=0):P=(w=w.slice(0,se)).length-1-w.lastIndexOf("/"),I=B,U=0;continue}}else if(w.length===2||w.length===1){w="",P=0,I=B,U=0;continue}}g&&(w.length>0?w+="/..":w="..",P=2)}else w.length>0?w+="/"+m.slice(I+1,B):w=m.slice(I+1,B),P=B-I-1;I=B,U=0}else R===46&&U!==-1?++U:U=-1}return w}var k={resolve:function(){for(var m,g="",R=!1,w=arguments.length-1;w>=-1&&!R;w--){var P;w>=0?P=arguments[w]:(m===void 0&&(m=process.cwd()),P=m),v(P),P.length!==0&&(g=P+"/"+g,R=P.charCodeAt(0)===47)}return g=y(g,!R),R?g.length>0?"/"+g:"/":g.length>0?g:"."},normalize:function(m){if(v(m),m.length===0)return".";var g=m.charCodeAt(0)===47,R=m.charCodeAt(m.length-1)===47;return(m=y(m,!g)).length!==0||g||(m="."),m.length>0&&R&&(m+="/"),g?"/"+m:m},isAbsolute:function(m){return v(m),m.length>0&&m.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var m,g=0;g<arguments.length;++g){var R=arguments[g];v(R),R.length>0&&(m===void 0?m=R:m+="/"+R)}return m===void 0?".":k.normalize(m)},relative:function(m,g){if(v(m),v(g),m===g||(m=k.resolve(m))===(g=k.resolve(g)))return"";for(var R=1;R<m.length&&m.charCodeAt(R)===47;++R);for(var w=m.length,P=w-R,I=1;I<g.length&&g.charCodeAt(I)===47;++I);for(var U=g.length-I,B=P<U?P:U,se=-1,W=0;W<=B;++W){if(W===B){if(U>B){if(g.charCodeAt(I+W)===47)return g.slice(I+W+1);if(W===0)return g.slice(I+W)}else P>B&&(m.charCodeAt(R+W)===47?se=W:W===0&&(se=0));break}var Ie=m.charCodeAt(R+W);if(Ie!==g.charCodeAt(I+W))break;Ie===47&&(se=W)}var te="";for(W=R+se+1;W<=w;++W)W!==w&&m.charCodeAt(W)!==47||(te.length===0?te+="..":te+="/..");return te.length>0?te+g.slice(I+se):(I+=se,g.charCodeAt(I)===47&&++I,g.slice(I))},_makeLong:function(m){return m},dirname:function(m){if(v(m),m.length===0)return".";for(var g=m.charCodeAt(0),R=g===47,w=-1,P=!0,I=m.length-1;I>=1;--I)if((g=m.charCodeAt(I))===47){if(!P){w=I;break}}else P=!1;return w===-1?R?"/":".":R&&w===1?"//":m.slice(0,w)},basename:function(m,g){if(g!==void 0&&typeof g!="string")throw new TypeError('"ext" argument must be a string');v(m);var R,w=0,P=-1,I=!0;if(g!==void 0&&g.length>0&&g.length<=m.length){if(g.length===m.length&&g===m)return"";var U=g.length-1,B=-1;for(R=m.length-1;R>=0;--R){var se=m.charCodeAt(R);if(se===47){if(!I){w=R+1;break}}else B===-1&&(I=!1,B=R+1),U>=0&&(se===g.charCodeAt(U)?--U==-1&&(P=R):(U=-1,P=B))}return w===P?P=B:P===-1&&(P=m.length),m.slice(w,P)}for(R=m.length-1;R>=0;--R)if(m.charCodeAt(R)===47){if(!I){w=R+1;break}}else P===-1&&(I=!1,P=R+1);return P===-1?"":m.slice(w,P)},extname:function(m){v(m);for(var g=-1,R=0,w=-1,P=!0,I=0,U=m.length-1;U>=0;--U){var B=m.charCodeAt(U);if(B!==47)w===-1&&(P=!1,w=U+1),B===46?g===-1?g=U:I!==1&&(I=1):g!==-1&&(I=-1);else if(!P){R=U+1;break}}return g===-1||w===-1||I===0||I===1&&g===w-1&&g===R+1?"":m.slice(g,w)},format:function(m){if(m===null||typeof m!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof m);return function(g,R){var w=R.dir||R.root,P=R.base||(R.name||"")+(R.ext||"");return w?w===R.root?w+P:w+"/"+P:P}(0,m)},parse:function(m){v(m);var g={root:"",dir:"",base:"",ext:"",name:""};if(m.length===0)return g;var R,w=m.charCodeAt(0),P=w===47;P?(g.root="/",R=1):R=0;for(var I=-1,U=0,B=-1,se=!0,W=m.length-1,Ie=0;W>=R;--W)if((w=m.charCodeAt(W))!==47)B===-1&&(se=!1,B=W+1),w===46?I===-1?I=W:Ie!==1&&(Ie=1):I!==-1&&(Ie=-1);else if(!se){U=W+1;break}return I===-1||B===-1||Ie===0||Ie===1&&I===B-1&&I===U+1?B!==-1&&(g.base=g.name=U===0&&P?m.slice(1,B):m.slice(U,B)):(U===0&&P?(g.name=m.slice(1,I),g.base=m.slice(1,B)):(g.name=m.slice(U,I),g.base=m.slice(U,B)),g.ext=m.slice(I,B)),U>0?g.dir=m.slice(0,U-1):P&&(g.dir="/"),g},sep:"/",delimiter:":",win32:null,posix:null};k.posix=k,A.exports=k}},e={};function r(A){var v=e[A];if(v!==void 0)return v.exports;var y=e[A]={exports:{}};return t[A](y,y.exports,r),y.exports}r.d=(A,v)=>{for(var y in v)r.o(v,y)&&!r.o(A,y)&&Object.defineProperty(A,y,{enumerable:!0,get:v[y]})},r.o=(A,v)=>Object.prototype.hasOwnProperty.call(A,v),r.r=A=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>f,Utils:()=>we}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);const s=/^\w[\w\d+.-]*$/,o=/^\//,a=/^\/\//;function c(A,v){if(!A.scheme&&v)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${A.authority}", path: "${A.path}", query: "${A.query}", fragment: "${A.fragment}"}`);if(A.scheme&&!s.test(A.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(A.path){if(A.authority){if(!o.test(A.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(A.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}const l="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class f{constructor(v,y,k,m,g,R=!1){_r(this,"scheme"),_r(this,"authority"),_r(this,"path"),_r(this,"query"),_r(this,"fragment"),typeof v=="object"?(this.scheme=v.scheme||l,this.authority=v.authority||l,this.path=v.path||l,this.query=v.query||l,this.fragment=v.fragment||l):(this.scheme=function(w,P){return w||P?w:"file"}(v,R),this.authority=y||l,this.path=function(w,P){switch(w){case"https":case"http":case"file":P?P[0]!==d&&(P=d+P):P=d}return P}(this.scheme,k||l),this.query=m||l,this.fragment=g||l,c(this,R))}static isUri(v){return v instanceof f||!!v&&typeof v.authority=="string"&&typeof v.fragment=="string"&&typeof v.path=="string"&&typeof v.query=="string"&&typeof v.scheme=="string"&&typeof v.fsPath=="string"&&typeof v.with=="function"&&typeof v.toString=="function"}get fsPath(){return _(this,!1)}with(v){if(!v)return this;let{scheme:y,authority:k,path:m,query:g,fragment:R}=v;return y===void 0?y=this.scheme:y===null&&(y=l),k===void 0?k=this.authority:k===null&&(k=l),m===void 0?m=this.path:m===null&&(m=l),g===void 0?g=this.query:g===null&&(g=l),R===void 0?R=this.fragment:R===null&&(R=l),y===this.scheme&&k===this.authority&&m===this.path&&g===this.query&&R===this.fragment?this:new S(y,k,m,g,R)}static parse(v,y=!1){const k=h.exec(v);return k?new S(k[2]||l,ne(k[4]||l),ne(k[5]||l),ne(k[7]||l),ne(k[9]||l),y):new S(l,l,l,l,l)}static file(v){let y=l;if(i&&(v=v.replace(/\\/g,d)),v[0]===d&&v[1]===d){const k=v.indexOf(d,2);k===-1?(y=v.substring(2),v=d):(y=v.substring(2,k),v=v.substring(k)||d)}return new S("file",y,v,l,l)}static from(v){const y=new S(v.scheme,v.authority,v.path,v.query,v.fragment);return c(y,!0),y}toString(v=!1){return C(this,v)}toJSON(){return this}static revive(v){if(v){if(v instanceof f)return v;{const y=new S(v);return y._formatted=v.external,y._fsPath=v._sep===$?v.fsPath:null,y}}return v}}const $=i?1:void 0;class S extends f{constructor(){super(...arguments),_r(this,"_formatted",null),_r(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=_(this,!1)),this._fsPath}toString(v=!1){return v?C(this,!0):(this._formatted||(this._formatted=C(this,!1)),this._formatted)}toJSON(){const v={$mid:1};return this._fsPath&&(v.fsPath=this._fsPath,v._sep=$),this._formatted&&(v.external=this._formatted),this.path&&(v.path=this.path),this.scheme&&(v.scheme=this.scheme),this.authority&&(v.authority=this.authority),this.query&&(v.query=this.query),this.fragment&&(v.fragment=this.fragment),v}}const b={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function F(A,v,y){let k,m=-1;for(let g=0;g<A.length;g++){const R=A.charCodeAt(g);if(R>=97&&R<=122||R>=65&&R<=90||R>=48&&R<=57||R===45||R===46||R===95||R===126||v&&R===47||y&&R===91||y&&R===93||y&&R===58)m!==-1&&(k+=encodeURIComponent(A.substring(m,g)),m=-1),k!==void 0&&(k+=A.charAt(g));else{k===void 0&&(k=A.substr(0,g));const w=b[R];w!==void 0?(m!==-1&&(k+=encodeURIComponent(A.substring(m,g)),m=-1),k+=w):m===-1&&(m=g)}}return m!==-1&&(k+=encodeURIComponent(A.substring(m))),k!==void 0?k:A}function L(A){let v;for(let y=0;y<A.length;y++){const k=A.charCodeAt(y);k===35||k===63?(v===void 0&&(v=A.substr(0,y)),v+=b[k]):v!==void 0&&(v+=A[y])}return v!==void 0?v:A}function _(A,v){let y;return y=A.authority&&A.path.length>1&&A.scheme==="file"?`//${A.authority}${A.path}`:A.path.charCodeAt(0)===47&&(A.path.charCodeAt(1)>=65&&A.path.charCodeAt(1)<=90||A.path.charCodeAt(1)>=97&&A.path.charCodeAt(1)<=122)&&A.path.charCodeAt(2)===58?v?A.path.substr(1):A.path[1].toLowerCase()+A.path.substr(2):A.path,i&&(y=y.replace(/\//g,"\\")),y}function C(A,v){const y=v?L:F;let k="",{scheme:m,authority:g,path:R,query:w,fragment:P}=A;if(m&&(k+=m,k+=":"),(g||m==="file")&&(k+=d,k+=d),g){let I=g.indexOf("@");if(I!==-1){const U=g.substr(0,I);g=g.substr(I+1),I=U.lastIndexOf(":"),I===-1?k+=y(U,!1,!1):(k+=y(U.substr(0,I),!1,!1),k+=":",k+=y(U.substr(I+1),!1,!0)),k+="@"}g=g.toLowerCase(),I=g.lastIndexOf(":"),I===-1?k+=y(g,!1,!0):(k+=y(g.substr(0,I),!1,!0),k+=g.substr(I))}if(R){if(R.length>=3&&R.charCodeAt(0)===47&&R.charCodeAt(2)===58){const I=R.charCodeAt(1);I>=65&&I<=90&&(R=`/${String.fromCharCode(I+32)}:${R.substr(3)}`)}else if(R.length>=2&&R.charCodeAt(1)===58){const I=R.charCodeAt(0);I>=65&&I<=90&&(R=`${String.fromCharCode(I+32)}:${R.substr(2)}`)}k+=y(R,!0,!1)}return w&&(k+="?",k+=y(w,!1,!1)),P&&(k+="#",k+=v?P:F(P,!1,!1)),k}function D(A){try{return decodeURIComponent(A)}catch{return A.length>3?A.substr(0,3)+D(A.substr(3)):A}}const Q=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ne(A){return A.match(Q)?A.replace(Q,v=>D(v)):A}var ie=r(975);const be=ie.posix||ie,Ne="/";var we;(function(A){A.joinPath=function(v,...y){return v.with({path:be.join(v.path,...y)})},A.resolvePath=function(v,...y){let k=v.path,m=!1;k[0]!==Ne&&(k=Ne+k,m=!0);let g=be.resolve(k,...y);return m&&g[0]===Ne&&!v.authority&&(g=g.substring(1)),v.with({path:g})},A.dirname=function(v){if(v.path.length===0||v.path===Ne)return v;let y=be.dirname(v.path);return y.length===1&&y.charCodeAt(0)===46&&(y=""),v.with({path:y})},A.basename=function(v){return be.basename(v.path)},A.extname=function(v){return be.extname(v.path)}})(we||(we={})),Sf=n})();const{URI:wt,Utils:mi}=Sf;var pt;(function(t){t.basename=mi.basename,t.dirname=mi.dirname,t.extname=mi.extname,t.joinPath=mi.joinPath,t.resolvePath=mi.resolvePath;const e=typeof process=="object"&&(process==null?void 0:process.platform)==="win32";function r(o,a){return(o==null?void 0:o.toString())===(a==null?void 0:a.toString())}t.equals=r;function n(o,a){const c=typeof o=="string"?wt.parse(o).path:o.path,l=typeof a=="string"?wt.parse(a).path:a.path,d=c.split("/").filter(b=>b.length>0),h=l.split("/").filter(b=>b.length>0);if(e){const b=/^[A-Z]:$/;if(d[0]&&b.test(d[0])&&(d[0]=d[0].toLowerCase()),h[0]&&b.test(h[0])&&(h[0]=h[0].toLowerCase()),d[0]!==h[0])return l.substring(1)}let f=0;for(;f<d.length&&d[f]===h[f];f++);const $="../".repeat(d.length-f),S=h.slice(f).join("/");return $+S}t.relative=n;function i(o){return wt.parse(o.toString()).toString()}t.normalize=i;function s(o,a){let c=typeof o=="string"?o:o.path,l=typeof a=="string"?a:a.path;return l.charAt(l.length-1)==="/"&&(l=l.slice(0,-1)),c.charAt(c.length-1)==="/"&&(c=c.slice(0,-1)),l===c?!0:l.length<c.length||l.charAt(c.length)!=="/"?!1:l.startsWith(c)}t.contains=s})(pt||(pt={}));class uR{constructor(){this.root={name:"",children:new Map}}normalizeUri(e){return pt.normalize(e)}clear(){this.root.children.clear()}insert(e,r){const n=this.getNode(this.normalizeUri(e),!0);n.element=r}delete(e){const r=this.getNode(this.normalizeUri(e),!1);r!=null&&r.parent&&r.parent.children.delete(r.name)}has(e){var r;return((r=this.getNode(this.normalizeUri(e),!1))==null?void 0:r.element)!==void 0}hasNode(e){return this.getNode(this.normalizeUri(e),!1)!==void 0}find(e){var r;return(r=this.getNode(this.normalizeUri(e),!1))==null?void 0:r.element}findNode(e){const r=this.normalizeUri(e),n=this.getNode(r,!1);if(n)return{name:n.name,uri:pt.joinPath(wt.parse(r),n.name).toString(),element:n.element}}findChildren(e){const r=this.normalizeUri(e),n=this.getNode(r,!1);return n?Array.from(n.children.values()).map(i=>({name:i.name,uri:pt.joinPath(wt.parse(r),i.name).toString(),element:i.element})):[]}all(){return this.collectValues(this.root)}findAll(e){const r=this.getNode(pt.normalize(e),!1);return r?this.collectValues(r):[]}getNode(e,r){const n=e.split("/");e.charAt(e.length-1)==="/"&&n.pop();let i=this.root;for(const s of n){let o=i.children.get(s);if(!o)if(r)o={name:s,children:new Map,parent:i},i.children.set(s,o);else return;i=o}return i}collectValues(e){const r=[];e.element&&r.push(e.element);for(const n of e.children.values())r.push(...this.collectValues(n));return r}}var H;(function(t){t[t.Changed=0]="Changed",t[t.Parsed=1]="Parsed",t[t.IndexedContent=2]="IndexedContent",t[t.ComputedScopes=3]="ComputedScopes",t[t.Linked=4]="Linked",t[t.IndexedReferences=5]="IndexedReferences",t[t.Validated=6]="Validated"})(H||(H={}));class dR{constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,r=ge.None){const n=await this.fileSystemProvider.readFile(e);return this.createAsync(e,n,r)}fromTextDocument(e,r,n){return r=r??wt.parse(e.uri),ge.is(n)?this.createAsync(r,e,n):this.create(r,e,n)}fromString(e,r,n){return ge.is(n)?this.createAsync(r,e,n):this.create(r,e,n)}fromModel(e,r){return this.create(r,{$model:e})}create(e,r,n){if(typeof r=="string"){const i=this.parse(e,r,n);return this.createLangiumDocument(i,e,void 0,r)}else if("$model"in r){const i={value:r.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(i,e)}else{const i=this.parse(e,r.getText(),n);return this.createLangiumDocument(i,e,r)}}async createAsync(e,r,n){if(typeof r=="string"){const i=await this.parseAsync(e,r,n);return this.createLangiumDocument(i,e,void 0,r)}else{const i=await this.parseAsync(e,r.getText(),n);return this.createLangiumDocument(i,e,r)}}createLangiumDocument(e,r,n,i){let s;if(n)s={parseResult:e,uri:r,state:H.Parsed,references:[],textDocument:n};else{const o=this.createTextDocumentGetter(r,i);s={parseResult:e,uri:r,state:H.Parsed,references:[],get textDocument(){return o()}}}return e.value.$document=s,s}async update(e,r){var n,i;const s=(n=e.parseResult.value.$cstNode)==null?void 0:n.root.fullText,o=(i=this.textDocuments)==null?void 0:i.get(e.uri.toString()),a=o?o.getText():await this.fileSystemProvider.readFile(e.uri);if(o)Object.defineProperty(e,"textDocument",{value:o});else{const c=this.createTextDocumentGetter(e.uri,a);Object.defineProperty(e,"textDocument",{get:c})}return s!==a&&(e.parseResult=await this.parseAsync(e.uri,a,r),e.parseResult.value.$document=e),e.state=H.Parsed,e}parse(e,r,n){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(r,n)}parseAsync(e,r,n){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(r,n)}createTextDocumentGetter(e,r){const n=this.serviceRegistry;let i;return()=>i??(i=fl.create(e.toString(),n.getServices(e).LanguageMetaData.languageId,0,r??""))}}class pR{constructor(e){this.documentTrie=new uR,this.services=e,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.documentBuilder=()=>e.workspace.DocumentBuilder}get all(){return fe(this.documentTrie.all())}addDocument(e){const r=e.uri.toString();if(this.documentTrie.has(r))throw new Error(`A document with the URI '${r}' is already present.`);this.documentTrie.insert(r,e)}getDocument(e){const r=e.toString();return this.documentTrie.find(r)}getDocuments(e){const r=e.toString();return this.documentTrie.findAll(r)}async getOrCreateDocument(e,r){let n=this.getDocument(e);return n||(n=await this.langiumDocumentFactory.fromUri(e,r),this.addDocument(n),n)}createDocument(e,r,n){if(n)return this.langiumDocumentFactory.fromString(r,e,n).then(i=>(this.addDocument(i),i));{const i=this.langiumDocumentFactory.fromString(r,e);return this.addDocument(i),i}}hasDocument(e){return this.documentTrie.has(e.toString())}invalidateDocument(e){const r=e.toString(),n=this.documentTrie.find(r);return n&&this.documentBuilder().resetToState(n,H.Changed),n}deleteDocument(e){const r=e.toString(),n=this.documentTrie.find(r);return n&&(n.state=H.Changed,this.documentTrie.delete(r)),n}deleteDocuments(e){const r=e.toString(),n=this.documentTrie.findAll(r);for(const i of n)i.state=H.Changed;return this.documentTrie.delete(r),n}}const cn=Symbol("RefResolving");class hR{constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator,this.profiler=e.shared.profilers.LangiumProfiler,this.languageId=e.LanguageMetaData.languageId}async link(e,r=ge.None){var n;if((n=this.profiler)!=null&&n.isActive("linking")){const i=this.profiler.createTask("linking",this.languageId);i.start();try{for(const s of Qt(e.parseResult.value))await Ze(r),Ys(s).forEach(o=>{const a=`${s.$type}:${o.property}`;i.startSubTask(a);try{this.doLink(o,e)}finally{i.stopSubTask(a)}})}finally{i.stop()}}else for(const i of Qt(e.parseResult.value))await Ze(r),Ys(i).forEach(s=>this.doLink(s,e))}doLink(e,r){const n=e.reference;if("_ref"in n&&n._ref===void 0){n._ref=cn;try{const i=this.getCandidate(e);if(li(i))n._ref=i;else{n._nodeDescription=i;const s=this.loadAstNode(i);n._ref=s??this.createLinkingError(e,i)}}catch(i){console.error(`An error occurred while resolving reference to '${n.$refText}':`,i);const s=i.message??String(i);n._ref={info:e,message:`An error occurred while resolving reference to '${n.$refText}': ${s}`}}r.references.push(n)}else if("_items"in n&&n._items===void 0){n._items=cn;try{const i=this.getCandidates(e),s=[];if(li(i))n._linkingError=i;else for(const o of i){const a=this.loadAstNode(o);a&&s.push({ref:a,$nodeDescription:o})}n._items=s}catch(i){n._linkingError={info:e,message:`An error occurred while resolving reference to '${n.$refText}': ${i}`},n._items=[]}r.references.push(n)}}unlink(e){for(const r of e.references)"_ref"in r?(r._ref=void 0,delete r._nodeDescription):"_items"in r&&(r._items=void 0,delete r._linkingError);e.references=[]}getCandidate(e){return this.scopeProvider.getScope(e).getElement(e.reference.$refText)??this.createLinkingError(e)}getCandidates(e){const r=this.scopeProvider.getScope(e).getElements(e.reference.$refText).distinct(n=>`${n.documentUri}#${n.path}`).toArray();return r.length>0?r:this.createLinkingError(e)}buildReference(e,r,n,i){const s=this,o={$refNode:n,$refText:i,_ref:void 0,get ref(){if(He(this._ref))return this._ref;if(Mm(this._nodeDescription)){const a=s.loadAstNode(this._nodeDescription);this._ref=a??s.createLinkingError({reference:o,container:e,property:r},this._nodeDescription)}else if(this._ref===void 0){this._ref=cn;const a=Ls(e).$document,c=s.getLinkedNode({reference:o,container:e,property:r});if(c.error&&a&&a.state<H.ComputedScopes)return this._ref=void 0;this._ref=c.node??c.error,this._nodeDescription=c.descr,a==null||a.references.push(this)}else this._ref===cn&&s.throwCyclicReferenceError(e,r,i);return He(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return li(this._ref)?this._ref:void 0}};return o}buildMultiReference(e,r,n,i){const s=this,o={$refNode:n,$refText:i,_items:void 0,get items(){if(Array.isArray(this._items))return this._items;if(this._items===void 0){this._items=cn;const a=Ls(e).$document,c=s.getCandidates({reference:o,container:e,property:r}),l=[];if(li(c))this._linkingError=c;else for(const d of c){const h=s.loadAstNode(d);h&&l.push({ref:h,$nodeDescription:d})}this._items=l,a==null||a.references.push(this)}else this._items===cn&&s.throwCyclicReferenceError(e,r,i);return Array.isArray(this._items)?this._items:[]},get error(){if(this._linkingError)return this._linkingError;if(!(this.items.length>0))return this._linkingError=s.createLinkingError({reference:o,container:e,property:r})}};return o}throwCyclicReferenceError(e,r,n){throw new Error(`Cyclic reference resolution detected: ${this.astNodeLocator.getAstNodePath(e)}/${r} (symbol '${n}')`)}getLinkedNode(e){try{const r=this.getCandidate(e);if(li(r))return{error:r};const n=this.loadAstNode(r);return n?{node:n,descr:r}:{descr:r,error:this.createLinkingError(e,r)}}catch(r){console.error(`An error occurred while resolving reference to '${e.reference.$refText}':`,r);const n=r.message??String(r);return{error:{info:e,message:`An error occurred while resolving reference to '${e.reference.$refText}': ${n}`}}}}loadAstNode(e){if(e.node)return e.node;const r=this.langiumDocuments().getDocument(e.documentUri);if(r)return this.astNodeLocator.getAstNode(r.parseResult.value,e.path)}createLinkingError(e,r){const n=Ls(e.container).$document;n&&n.state<H.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${n.uri}).`);const i=this.reflection.getReferenceType(e);return{info:e,message:`Could not resolve reference to ${i} named '${e.reference.$refText}'.`,targetDescription:r}}}function fR(t){return typeof t.name=="string"}class mR{getName(e){if(fR(e))return e.name}getNameNode(e){return dh(e.$cstNode,"name")}}class gR{constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator,this.documents=e.shared.workspace.LangiumDocuments,this.hasMultiReference=Qt(e.Grammar).some(r=>Io(r)&&r.isMulti)}findDeclarations(e){if(e){const r=Cg(e),n=e.astNode;if(r&&n){const i=n[r.feature];if(Ct(i)||pr(i))return du(i);if(Array.isArray(i)){for(const s of i)if((Ct(s)||pr(s))&&s.$refNode&&s.$refNode.offset<=e.offset&&s.$refNode.end>=e.end)return du(s)}}if(n){const i=this.nameProvider.getNameNode(n);if(i&&(i===e||ig(e,i)))return this.getSelfNodes(n)}}return[]}getSelfNodes(e){if(this.hasMultiReference){const r=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e)),n=this.getNodeFromReferenceDescription(r.head());if(n){for(const i of Ys(n))if(pr(i.reference)&&i.reference.items.some(s=>s.ref===e))return i.reference.items.map(s=>s.ref)}return[e]}else return[e]}getNodeFromReferenceDescription(e){if(!e)return;const r=this.documents.getDocument(e.sourceUri);if(r)return this.nodeLocator.getAstNode(r.parseResult.value,e.sourcePath)}findDeclarationNodes(e){const r=this.findDeclarations(e),n=[];for(const i of r){const s=this.nameProvider.getNameNode(i)??i.$cstNode;s&&n.push(s)}return n}findReferences(e,r){const n=[];r.includeDeclaration&&n.push(...this.getSelfReferences(e));let i=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return r.documentUri&&(i=i.filter(s=>pt.equals(s.sourceUri,r.documentUri))),n.push(...i),fe(n)}getSelfReferences(e){const r=this.getSelfNodes(e),n=[];for(const i of r){const s=this.nameProvider.getNameNode(i);if(s){const o=Zt(i),a=this.nodeLocator.getAstNodePath(i);n.push({sourceUri:o.uri,sourcePath:a,targetUri:o.uri,targetPath:a,segment:Js(s),local:!0})}}return n}}class Ui{constructor(e){if(this.map=new Map,e)for(const[r,n]of e)this.add(r,n)}get size(){return ja.sum(fe(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(e,r){if(r===void 0)return this.map.delete(e);{const n=this.map.get(e);if(n){const i=n.indexOf(r);if(i>=0)return n.length===1?this.map.delete(e):n.splice(i,1),!0}return!1}}get(e){return this.map.get(e)??[]}getStream(e){const r=this.map.get(e);return r?fe(r):Qp}has(e,r){if(r===void 0)return this.map.has(e);{const n=this.map.get(e);return n?n.indexOf(r)>=0:!1}}add(e,r){return this.map.has(e)?this.map.get(e).push(r):this.map.set(e,[r]),this}addAll(e,r){return this.map.has(e)?this.map.get(e).push(...r):this.map.set(e,Array.from(r)),this}forEach(e){this.map.forEach((r,n)=>r.forEach(i=>e(i,n,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return fe(this.map.entries()).flatMap(([e,r])=>r.map(n=>[e,n]))}keys(){return fe(this.map.keys())}values(){return fe(this.map.values()).flat()}entriesGroupedByKey(){return fe(this.map.entries())}}class ed{get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(const[r,n]of e)this.set(r,n)}clear(){this.map.clear(),this.inverse.clear()}set(e,r){return this.map.set(e,r),this.inverse.set(r,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){const r=this.map.get(e);return r!==void 0?(this.map.delete(e),this.inverse.delete(r),!0):!1}}class yR{constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}async collectExportedSymbols(e,r=ge.None){return this.collectExportedSymbolsForNode(e.parseResult.value,e,void 0,r)}async collectExportedSymbolsForNode(e,r,n=Ol,i=ge.None){const s=[];this.addExportedSymbol(e,s,r);for(const o of n(e))await Ze(i),this.addExportedSymbol(o,s,r);return s}addExportedSymbol(e,r,n){const i=this.nameProvider.getName(e);i&&r.push(this.descriptions.createDescription(e,i,n))}async collectLocalSymbols(e,r=ge.None){const n=e.parseResult.value,i=new Ui;for(const s of Vi(n))await Ze(r),this.addLocalSymbol(s,e,i);return i}addLocalSymbol(e,r,n){const i=e.$container;if(i){const s=this.nameProvider.getName(e);s&&n.add(i,this.descriptions.createDescription(e,s,r))}}}class td{constructor(e,r,n){this.elements=e,this.outerScope=r,this.caseInsensitive=(n==null?void 0:n.caseInsensitive)??!1,this.concatOuterScope=(n==null?void 0:n.concatOuterScope)??!0}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){const r=this.caseInsensitive?e.toLowerCase():e,n=this.caseInsensitive?this.elements.find(i=>i.name.toLowerCase()===r):this.elements.find(i=>i.name===e);if(n)return n;if(this.outerScope)return this.outerScope.getElement(e)}getElements(e){const r=this.caseInsensitive?e.toLowerCase():e,n=this.caseInsensitive?this.elements.filter(i=>i.name.toLowerCase()===r):this.elements.filter(i=>i.name===e);return(this.concatOuterScope||n.isEmpty())&&this.outerScope?n.concat(this.outerScope.getElements(e)):n}}class TR{constructor(e,r,n){this.elements=new Ui,this.caseInsensitive=(n==null?void 0:n.caseInsensitive)??!1,this.concatOuterScope=(n==null?void 0:n.concatOuterScope)??!0;for(const i of e){const s=this.caseInsensitive?i.name.toLowerCase():i.name;this.elements.add(s,i)}this.outerScope=r}getElement(e){const r=this.caseInsensitive?e.toLowerCase():e,n=this.elements.get(r)[0];if(n)return n;if(this.outerScope)return this.outerScope.getElement(e)}getElements(e){const r=this.caseInsensitive?e.toLowerCase():e,n=this.elements.get(r);return(this.concatOuterScope||n.length===0)&&this.outerScope?fe(n).concat(this.outerScope.getElements(e)):fe(n)}getAllElements(){let e=fe(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}}class Af{constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}}class vR extends Af{constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,r){this.throwIfDisposed(),this.cache.set(e,r)}get(e,r){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(r){const n=r();return this.cache.set(e,n),n}else return}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}}class RR extends Af{constructor(e){super(),this.cache=new Map,this.converter=e??(r=>r)}has(e,r){return this.throwIfDisposed(),this.cacheForContext(e).has(r)}set(e,r,n){this.throwIfDisposed(),this.cacheForContext(e).set(r,n)}get(e,r,n){this.throwIfDisposed();const i=this.cacheForContext(e);if(i.has(r))return i.get(r);if(n){const s=n();return i.set(r,s),s}else return}delete(e,r){return this.throwIfDisposed(),this.cacheForContext(e).delete(r)}clear(e){if(this.throwIfDisposed(),e){const r=this.converter(e);this.cache.delete(r)}else this.cache.clear()}cacheForContext(e){const r=this.converter(e);let n=this.cache.get(r);return n||(n=new Map,this.cache.set(r,n)),n}}class $R extends vR{constructor(e,r){super(),r?(this.toDispose.push(e.workspace.DocumentBuilder.onBuildPhase(r,()=>{this.clear()})),this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((n,i)=>{i.length>0&&this.clear()}))):this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}class ER{constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new $R(e.shared)}getScope(e){const r=[],n=this.reflection.getReferenceType(e),i=Zt(e.container).localSymbols;if(i){let o=e.container;do i.has(o)&&r.push(i.getStream(o).filter(a=>this.reflection.isSubtype(a.type,n))),o=o.$container;while(o)}let s=this.getGlobalScope(n,e);for(let o=r.length-1;o>=0;o--)s=this.createScope(r[o],s);return s}createScope(e,r,n){return new td(fe(e),r,n)}createScopeForNodes(e,r,n){const i=fe(e).map(s=>{const o=this.nameProvider.getName(s);if(o)return this.descriptions.createDescription(s,o)}).nonNullable();return new td(i,r,n)}getGlobalScope(e,r){return this.globalScopeCache.get(e,()=>new TR(this.indexManager.allElements(e)))}}function kR(t){return typeof t.$comment=="string"}function rd(t){return typeof t=="object"&&!!t&&("$ref"in t||"$error"in t)}class SR{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,r){const n=r??{},i=r==null?void 0:r.replacer,s=(a,c)=>this.replacer(a,c,n),o=i?(a,c)=>i(a,c,s):s;try{return this.currentDocument=Zt(e),JSON.stringify(e,o,r==null?void 0:r.space)}finally{this.currentDocument=void 0}}deserialize(e,r){const n=r??{},i=JSON.parse(e);return this.linkNode(i,i,n),i}replacer(e,r,{refText:n,sourceText:i,textRegions:s,comments:o,uriConverter:a}){var c,l,d;if(!this.ignoreProperties.has(e))if(Ct(r)){const h=r.ref,f=n?r.$refText:void 0;if(h){const $=Zt(h);let S="";this.currentDocument&&this.currentDocument!==$&&(a?S=a($.uri,h):S=$.uri.toString());const b=this.astNodeLocator.getAstNodePath(h);return{$ref:`${S}#${b}`,$refText:f}}else return{$error:((c=r.error)==null?void 0:c.message)??"Could not resolve reference",$refText:f}}else if(pr(r)){const h=n?r.$refText:void 0,f=[];for(const $ of r.items){const S=$.ref,b=Zt($.ref);let F="";this.currentDocument&&this.currentDocument!==b&&(a?F=a(b.uri,S):F=b.uri.toString());const L=this.astNodeLocator.getAstNodePath(S);f.push(`${F}#${L}`)}return{$refs:f,$refText:h}}else if(He(r)){let h;if(s&&(h=this.addAstNodeRegionWithAssignmentsTo({...r}),(!e||r.$document)&&h!=null&&h.$textRegion&&(h.$textRegion.documentURI=(l=this.currentDocument)==null?void 0:l.uri.toString())),i&&!e&&(h??(h={...r}),h.$sourceText=(d=r.$cstNode)==null?void 0:d.text),o){h??(h={...r});const f=this.commentProvider.getComment(r);f&&(h.$comment=f.replace(/\r/g,""))}return h??r}else return r}addAstNodeRegionWithAssignmentsTo(e){const r=n=>({offset:n.offset,end:n.end,length:n.length,range:n.range});if(e.$cstNode){const n=e.$textRegion=r(e.$cstNode),i=n.assignments={};return Object.keys(e).filter(s=>!s.startsWith("$")).forEach(s=>{const o=Sg(e.$cstNode,s).map(r);o.length!==0&&(i[s]=o)}),e}}linkNode(e,r,n,i,s,o){for(const[c,l]of Object.entries(e))if(Array.isArray(l))for(let d=0;d<l.length;d++){const h=l[d];rd(h)?l[d]=this.reviveReference(e,c,r,h,n):He(h)&&this.linkNode(h,r,n,e,c,d)}else rd(l)?e[c]=this.reviveReference(e,c,r,l,n):He(l)&&this.linkNode(l,r,n,e,c);const a=e;a.$container=i,a.$containerProperty=s,a.$containerIndex=o}reviveReference(e,r,n,i,s){let o=i.$refText,a=i.$error,c;if(i.$ref){const l=this.getRefNode(n,i.$ref,s.uriConverter);if(He(l))return o||(o=this.nameProvider.getName(l)),{$refText:o??"",ref:l};a=l}else if(i.$refs){const l=[];for(const d of i.$refs){const h=this.getRefNode(n,d,s.uriConverter);He(h)&&l.push({ref:h})}if(l.length===0)c={$refText:o??"",items:l},a??(a="Could not resolve multi-reference");else return{$refText:o??"",items:l}}if(a)return c??(c={$refText:o??"",ref:void 0}),c.error={info:{container:e,property:r,reference:c},message:a},c}getRefNode(e,r,n){try{const i=r.indexOf("#");if(i===0)return this.astNodeLocator.getAstNode(e,r.substring(1))||"Could not resolve path: "+r;if(i<0){const c=n?n(r):wt.parse(r),l=this.langiumDocuments.getDocument(c);return l?l.parseResult.value:"Could not find document for URI: "+r}const s=n?n(r.substring(0,i)):wt.parse(r.substring(0,i)),o=this.langiumDocuments.getDocument(s);return o?i===r.length-1?o.parseResult.value:this.astNodeLocator.getAstNode(o.parseResult.value,r.substring(i+1))||"Could not resolve URI: "+r:"Could not find document for URI: "+r}catch(i){return String(i)}}}class AR{get map(){return this.fileExtensionMap}constructor(e){this.languageIdMap=new Map,this.fileExtensionMap=new Map,this.fileNameMap=new Map,this.textDocuments=e==null?void 0:e.workspace.TextDocuments}register(e){const r=e.LanguageMetaData;for(const n of r.fileExtensions)this.fileExtensionMap.has(n)&&console.warn(`The file extension ${n} is used by multiple languages. It is now assigned to '${r.languageId}'.`),this.fileExtensionMap.set(n,e);if(r.fileNames)for(const n of r.fileNames)this.fileNameMap.has(n)&&console.warn(`The file name ${n} is used by multiple languages. It is now assigned to '${r.languageId}'.`),this.fileNameMap.set(n,e);this.languageIdMap.set(r.languageId,e)}getServices(e){var r,n;if(this.languageIdMap.size===0)throw new Error("The service registry is empty. Use `register` to register the services of a language.");const i=(n=(r=this.textDocuments)==null?void 0:r.get(e))==null?void 0:n.languageId;if(i!==void 0){const c=this.languageIdMap.get(i);if(c)return c}const s=pt.extname(e),o=pt.basename(e),a=this.fileNameMap.get(o)??this.fileExtensionMap.get(s);if(!a)throw i?new Error(`The service registry contains no services for the extension '${s}' for language '${i}'.`):new Error(`The service registry contains no services for the extension '${s}'.`);return a}hasServices(e){try{return this.getServices(e),!0}catch{return!1}}get all(){return Array.from(this.languageIdMap.values())}}function Ai(t){return{code:t}}var gl;(function(t){t.defaults=["fast","slow","built-in"],t.all=t.defaults})(gl||(gl={}));class bR{constructor(e){this.entries=new Ui,this.knownCategories=new Set(gl.defaults),this.entriesBefore=[],this.entriesAfter=[],this.reflection=e.shared.AstReflection}register(e,r=this,n="fast"){if(n==="built-in")throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");this.knownCategories.add(n);for(const[i,s]of Object.entries(e)){const o=s;if(Array.isArray(o))for(const a of o){const c={check:this.wrapValidationException(a,r),category:n};this.addEntry(i,c)}else if(typeof o=="function"){const a={check:this.wrapValidationException(o,r),category:n};this.addEntry(i,a)}else Yi()}}wrapValidationException(e,r){return async(n,i,s)=>{await this.handleException(()=>e.call(r,n,i,s),"An error occurred during validation",i,n)}}async handleException(e,r,n,i){try{await e()}catch(s){if(Go(s))throw s;console.error(`${r}:`,s),s instanceof Error&&s.stack&&console.error(s.stack);const o=s instanceof Error?s.message:String(s);n("error",`${r}: ${o}`,{node:i})}}addEntry(e,r){if(e==="AstNode"){this.entries.add("AstNode",r);return}for(const n of this.reflection.getAllSubTypes(e))this.entries.add(n,r)}getChecks(e,r){let n=fe(this.entries.get(e)).concat(this.entries.get("AstNode"));return r&&(n=n.filter(i=>r.includes(i.category))),n.map(i=>i.check)}registerBeforeDocument(e,r=this){this.entriesBefore.push(this.wrapPreparationException(e,"An error occurred during set-up of the validation",r))}registerAfterDocument(e,r=this){this.entriesAfter.push(this.wrapPreparationException(e,"An error occurred during tear-down of the validation",r))}wrapPreparationException(e,r,n){return async(i,s,o,a)=>{await this.handleException(()=>e.call(n,i,s,o,a),r,s,i)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}getAllValidationCategories(e){return this.knownCategories}}const CR=Object.freeze({validateNode:!0,validateChildren:!0});class xR{constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData,this.profiler=e.shared.profilers.LangiumProfiler,this.languageId=e.LanguageMetaData.languageId}async validateDocument(e,r={},n=ge.None){const i=e.parseResult,s=[];if(await Ze(n),(!r.categories||r.categories.includes("built-in"))&&(this.processLexingErrors(i,s,r),r.stopAfterLexingErrors&&s.some(o=>{var a;return((a=o.data)==null?void 0:a.code)===bt.LexingError})||(this.processParsingErrors(i,s,r),r.stopAfterParsingErrors&&s.some(o=>{var a;return((a=o.data)==null?void 0:a.code)===bt.ParsingError}))||(this.processLinkingErrors(e,s,r),r.stopAfterLinkingErrors&&s.some(o=>{var a;return((a=o.data)==null?void 0:a.code)===bt.LinkingError}))))return s;try{s.push(...await this.validateAst(i.value,r,n))}catch(o){if(Go(o))throw o;console.error("An error occurred during validation:",o)}return await Ze(n),s}processLexingErrors(e,r,n){var i;const s=[...e.lexerErrors,...((i=e.lexerReport)==null?void 0:i.diagnostics)??[]];for(const o of s){const a=o.severity??"error",c={severity:fa(a),range:{start:{line:o.line-1,character:o.column-1},end:{line:o.line-1,character:o.column+o.length-1}},message:o.message,data:wR(a),source:this.getSource()};r.push(c)}}processParsingErrors(e,r,n){for(const i of e.parserErrors){let s;if(isNaN(i.token.startOffset)){if("previousToken"in i){const o=i.previousToken;if(isNaN(o.startOffset)){const a={line:0,character:0};s={start:a,end:a}}else{const a={line:o.endLine-1,character:o.endColumn};s={start:a,end:a}}}}else s=Xa(i.token);if(s){const o={severity:fa("error"),range:s,message:i.message,data:Ai(bt.ParsingError),source:this.getSource()};r.push(o)}}}processLinkingErrors(e,r,n){var i;for(const s of e.references){const o=s.error;if(o){const a={node:o.info.container,range:(i=s.$refNode)==null?void 0:i.range,property:o.info.property,index:o.info.index,data:{code:bt.LinkingError,containerType:o.info.container.$type,property:o.info.property,refText:o.info.reference.$refText}};r.push(this.toDiagnostic("error",o.message,a))}}}async validateAst(e,r,n=ge.None){const i=[],s=(o,a,c)=>{i.push(this.toDiagnostic(o,a,c))};return await this.validateAstBefore(e,r,s,n),await this.validateAstNodes(e,r,s,n),await this.validateAstAfter(e,r,s,n),i}async validateAstBefore(e,r,n,i=ge.None){const s=this.validationRegistry.checksBefore;for(const o of s)await Ze(i),await o(e,n,r.categories??[],i)}async validateAstNodes(e,r,n,i=ge.None){var s;if((s=this.profiler)!=null&&s.isActive("validating")){const o=this.profiler.createTask("validating",this.languageId);o.start();try{const a=Qt(e).iterator();for(const c of a){o.startSubTask(c.$type);const l=this.validateSingleNodeOptions(c,r);if(l.validateNode)try{const d=this.validationRegistry.getChecks(c.$type,r.categories);for(const h of d)await h(c,n,i)}finally{o.stopSubTask(c.$type)}l.validateChildren||a.prune()}}finally{o.stop()}}else{const o=Qt(e).iterator();for(const a of o){await Ze(i);const c=this.validateSingleNodeOptions(a,r);if(c.validateNode){const l=this.validationRegistry.getChecks(a.$type,r.categories);for(const d of l)await d(a,n,i)}c.validateChildren||o.prune()}}}validateSingleNodeOptions(e,r){return CR}async validateAstAfter(e,r,n,i=ge.None){const s=this.validationRegistry.checksAfter;for(const o of s)await Ze(i),await o(e,n,r.categories??[],i)}toDiagnostic(e,r,n){return{message:r,range:NR(n),severity:fa(e),code:n.code,codeDescription:n.codeDescription,tags:n.tags,relatedInformation:n.relatedInformation,data:n.data,source:this.getSource()}}getSource(){return this.metadata.languageId}}function NR(t){if(t.range)return t.range;let e;return typeof t.property=="string"?e=dh(t.node.$cstNode,t.property,t.index):typeof t.keyword=="string"&&(e=Ag(t.node.$cstNode,t.keyword,t.index)),e??(e=t.node.$cstNode),e?e.range:{start:{line:0,character:0},end:{line:0,character:0}}}function fa(t){switch(t){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+t)}}function wR(t){switch(t){case"error":return Ai(bt.LexingError);case"warning":return Ai(bt.LexingWarning);case"info":return Ai(bt.LexingInfo);case"hint":return Ai(bt.LexingHint);default:throw new Error("Invalid diagnostic severity: "+t)}}var bt;(function(t){t.LexingError="lexing-error",t.LexingWarning="lexing-warning",t.LexingInfo="lexing-info",t.LexingHint="lexing-hint",t.ParsingError="parsing-error",t.LinkingError="linking-error"})(bt||(bt={}));class IR{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,r,n){const i=n??Zt(e);r??(r=this.nameProvider.getName(e));const s=this.astNodeLocator.getAstNodePath(e);if(!r)throw new Error(`Node at path ${s} has no name.`);let o;const a=()=>o??(o=Js(this.nameProvider.getNameNode(e)??e.$cstNode));return{node:e,name:r,get nameSegment(){return a()},selectionSegment:Js(e.$cstNode),type:e.$type,documentUri:i.uri,path:s}}}class LR{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,r=ge.None){const n=[],i=e.parseResult.value;for(const s of Qt(i))await Ze(r),Ys(s).forEach(o=>{o.reference.error||n.push(...this.createInfoDescriptions(o))});return n}createInfoDescriptions(e){const r=e.reference;if(r.error||!r.$refNode)return[];let n=[];Ct(r)&&r.$nodeDescription?n=[r.$nodeDescription]:pr(r)&&(n=r.items.map(c=>c.$nodeDescription).filter(c=>c!==void 0));const i=Zt(e.container).uri,s=this.nodeLocator.getAstNodePath(e.container),o=[],a=Js(r.$refNode);for(const c of n)o.push({sourceUri:i,sourcePath:s,targetUri:c.documentUri,targetPath:c.path,segment:a,local:pt.equals(c.documentUri,i)});return o}}class _R{constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){const r=this.getAstNodePath(e.$container),n=this.getPathSegment(e);return r+this.segmentSeparator+n}return""}getPathSegment({$containerProperty:e,$containerIndex:r}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return r!==void 0?e+this.indexSeparator+r:e}getAstNode(e,r){return r.split(this.segmentSeparator).reduce((n,i)=>{if(!n||i.length===0)return n;const s=i.indexOf(this.indexSeparator);if(s>0){const o=i.substring(0,s),a=parseInt(i.substring(s+1)),c=n[o];return c==null?void 0:c[a]}return n[i]},e)}}class PR{constructor(e){this._ready=new tu,this.onConfigurationSectionUpdateEmitter=new $f,this.settings={},this.workspaceConfig=!1,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var r;this.workspaceConfig=((r=e.capabilities.workspace)==null?void 0:r.configuration)??!1}async initialized(e){if(this.workspaceConfig){if(e.register){const r=this.serviceRegistry.all;e.register({section:r.map(n=>this.toSectionName(n.LanguageMetaData.languageId))})}if(e.fetchConfiguration){const r=this.serviceRegistry.all.map(i=>({section:this.toSectionName(i.LanguageMetaData.languageId)})),n=await e.fetchConfiguration(r);r.forEach((i,s)=>{this.updateSectionConfiguration(i.section,n[s])})}}this._ready.resolve()}updateConfiguration(e){typeof e.settings!="object"||e.settings===null||Object.entries(e.settings).forEach(([r,n])=>{this.updateSectionConfiguration(r,n),this.onConfigurationSectionUpdateEmitter.fire({section:r,configuration:n})})}updateSectionConfiguration(e,r){this.settings[e]=r}async getConfiguration(e,r){await this.ready;const n=this.toSectionName(e);if(this.settings[n])return this.settings[n][r]}toSectionName(e){return`${e}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}}var bi={},en={},ru={},vo={},q={};Object.defineProperty(q,"__esModule",{value:!0});q.Message=q.NotificationType9=q.NotificationType8=q.NotificationType7=q.NotificationType6=q.NotificationType5=q.NotificationType4=q.NotificationType3=q.NotificationType2=q.NotificationType1=q.NotificationType0=q.NotificationType=q.RequestType9=q.RequestType8=q.RequestType7=q.RequestType6=q.RequestType5=q.RequestType4=q.RequestType3=q.RequestType2=q.RequestType1=q.RequestType=q.RequestType0=q.AbstractMessageSignature=q.ParameterStructures=q.ResponseError=q.ErrorCodes=void 0;const jr=xe;var yl;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(yl||(q.ErrorCodes=yl={}));class nu extends Error{constructor(e,r,n){super(r),this.code=jr.number(e)?e:yl.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,nu.prototype)}toJson(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}}q.ResponseError=nu;class Ye{constructor(e){this.kind=e}static is(e){return e===Ye.auto||e===Ye.byName||e===Ye.byPosition}toString(){return this.kind}}q.ParameterStructures=Ye;Ye.auto=new Ye("auto");Ye.byPosition=new Ye("byPosition");Ye.byName=new Ye("byName");class ye{constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return Ye.auto}}q.AbstractMessageSignature=ye;class DR extends ye{constructor(e){super(e,0)}}q.RequestType0=DR;class OR extends ye{constructor(e,r=Ye.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}}q.RequestType=OR;class MR extends ye{constructor(e,r=Ye.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}}q.RequestType1=MR;class FR extends ye{constructor(e){super(e,2)}}q.RequestType2=FR;class qR extends ye{constructor(e){super(e,3)}}q.RequestType3=qR;class jR extends ye{constructor(e){super(e,4)}}q.RequestType4=jR;class UR extends ye{constructor(e){super(e,5)}}q.RequestType5=UR;class GR extends ye{constructor(e){super(e,6)}}q.RequestType6=GR;class zR extends ye{constructor(e){super(e,7)}}q.RequestType7=zR;class BR extends ye{constructor(e){super(e,8)}}q.RequestType8=BR;class KR extends ye{constructor(e){super(e,9)}}q.RequestType9=KR;class WR extends ye{constructor(e,r=Ye.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}}q.NotificationType=WR;class VR extends ye{constructor(e){super(e,0)}}q.NotificationType0=VR;class HR extends ye{constructor(e,r=Ye.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}}q.NotificationType1=HR;class YR extends ye{constructor(e){super(e,2)}}q.NotificationType2=YR;class XR extends ye{constructor(e){super(e,3)}}q.NotificationType3=XR;class JR extends ye{constructor(e){super(e,4)}}q.NotificationType4=JR;class ZR extends ye{constructor(e){super(e,5)}}q.NotificationType5=ZR;class QR extends ye{constructor(e){super(e,6)}}q.NotificationType6=QR;class e$ extends ye{constructor(e){super(e,7)}}q.NotificationType7=e$;class t$ extends ye{constructor(e){super(e,8)}}q.NotificationType8=t$;class r$ extends ye{constructor(e){super(e,9)}}q.NotificationType9=r$;var nd;(function(t){function e(i){const s=i;return s&&jr.string(s.method)&&(jr.string(s.id)||jr.number(s.id))}t.isRequest=e;function r(i){const s=i;return s&&jr.string(s.method)&&i.id===void 0}t.isNotification=r;function n(i){const s=i;return s&&(s.result!==void 0||!!s.error)&&(jr.string(s.id)||jr.number(s.id)||s.id===null)}t.isResponse=n})(nd||(q.Message=nd={}));var tr={},id;Object.defineProperty(tr,"__esModule",{value:!0});tr.LRUCache=tr.LinkedMap=tr.Touch=void 0;var We;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(We||(tr.Touch=We={}));class bf{constructor(){this[id]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,r=We.None){const n=this._map.get(e);if(n)return r!==We.None&&this.touch(n,r),n.value}set(e,r,n=We.None){let i=this._map.get(e);if(i)i.value=r,n!==We.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case We.None:this.addItemLast(i);break;case We.First:this.addItemFirst(i);break;case We.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){const n=this._state;let i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}values(){const e=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}[(id=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==We.First&&r!==We.Last)){if(r===We.First){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===We.Last){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(const[r,n]of e)this.set(r,n)}}tr.LinkedMap=bf;class n$ extends bf{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=We.AsNew){return super.get(e,r)}peek(e){return super.get(e,We.None)}set(e,r){return super.set(e,r,We.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}tr.LRUCache=n$;var zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.Disposable=void 0;var sd;(function(t){function e(r){return{dispose:r}}t.create=e})(sd||(zo.Disposable=sd={}));var On={};Object.defineProperty(On,"__esModule",{value:!0});On.SharedArrayReceiverStrategy=On.SharedArraySenderStrategy=void 0;const i$=kr;var Gi;(function(t){t.Continue=0,t.Cancelled=1})(Gi||(Gi={}));class s${constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;const r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=Gi.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){const n=this.buffers.get(r);if(n===void 0)return;const i=new Int32Array(n,0,1);Atomics.store(i,0,Gi.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}}On.SharedArraySenderStrategy=s$;class o${constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Gi.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class a${constructor(e){this.token=new o$(e)}cancel(){}dispose(){}}class c${constructor(){this.kind="request"}createCancellationTokenSource(e){const r=e.$cancellationData;return r===void 0?new i$.CancellationTokenSource:new a$(r)}}On.SharedArrayReceiverStrategy=c$;var hr={},ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.Semaphore=void 0;const l$=cr;class u${constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,l$.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}}ts.Semaphore=u$;Object.defineProperty(hr,"__esModule",{value:!0});hr.ReadableStreamMessageReader=hr.AbstractMessageReader=hr.MessageReader=void 0;const Tl=cr,Rn=xe,ma=Ut,d$=ts;var od;(function(t){function e(r){let n=r;return n&&Rn.func(n.listen)&&Rn.func(n.dispose)&&Rn.func(n.onError)&&Rn.func(n.onClose)&&Rn.func(n.onPartialMessage)}t.is=e})(od||(hr.MessageReader=od={}));class Cf{constructor(){this.errorEmitter=new ma.Emitter,this.closeEmitter=new ma.Emitter,this.partialMessageEmitter=new ma.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Rn.string(e.message)?e.message:"unknown"}`)}}hr.AbstractMessageReader=Cf;var vl;(function(t){function e(r){let n,i;const s=new Map;let o;const a=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(i=r.contentDecoder,s.set(i.name,i)),r.contentDecoders!==void 0)for(const c of r.contentDecoders)s.set(c.name,c);if(r.contentTypeDecoder!==void 0&&(o=r.contentTypeDecoder,a.set(o.name,o)),r.contentTypeDecoders!==void 0)for(const c of r.contentTypeDecoders)a.set(c.name,c)}return o===void 0&&(o=(0,Tl.default)().applicationJson.decoder,a.set(o.name,o)),{charset:n,contentDecoder:i,contentDecoders:s,contentTypeDecoder:o,contentTypeDecoders:a}}t.fromOptions=e})(vl||(vl={}));class p$ extends Cf{constructor(e,r){super(),this.readable=e,this.options=vl.fromOptions(r),this.buffer=(0,Tl.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new d$.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){const n=this.buffer.tryReadHeaders(!0);if(!n)return;const i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}const s=parseInt(i);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=s}const r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{const n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Tl.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}hr.ReadableStreamMessageReader=p$;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.WriteableStreamMessageWriter=fr.AbstractMessageWriter=fr.MessageWriter=void 0;const ad=cr,Ci=xe,h$=ts,cd=Ut,f$="Content-Length: ",ld=`\r
`;var ud;(function(t){function e(r){let n=r;return n&&Ci.func(n.dispose)&&Ci.func(n.onClose)&&Ci.func(n.onError)&&Ci.func(n.write)}t.is=e})(ud||(fr.MessageWriter=ud={}));class xf{constructor(){this.errorEmitter=new cd.Emitter,this.closeEmitter=new cd.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Ci.string(e.message)?e.message:"unknown"}`)}}fr.AbstractMessageWriter=xf;var Rl;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,ad.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,ad.default)().applicationJson.encoder}}t.fromOptions=e})(Rl||(Rl={}));class m$ extends xf{constructor(e,r){super(),this.writable=e,this.options=Rl.fromOptions(r),this.errorCount=0,this.writeSemaphore=new h$.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{const n=[];return n.push(f$,r.byteLength.toString(),ld),n.push(ld),this.doWrite(e,n,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}}fr.WriteableStreamMessageWriter=m$;var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.AbstractMessageBuffer=void 0;const g$=13,y$=10,T$=`\r
`;class v${constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,s=0;e:for(;n<this._chunks.length;){const l=this._chunks[n];for(i=0;i<l.length;){switch(l[i]){case g$:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case y$:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}s+=l.byteLength,n++}if(r!==4)return;const o=this._read(s+i),a=new Map,c=this.toString(o,"ascii").split(T$);if(c.length<2)return a;for(let l=0;l<c.length-2;l++){const d=c[l],h=d.indexOf(":");if(h===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);const f=d.substr(0,h),$=d.substr(h+1).trim();a.set(e?f.toLowerCase():f,$)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){const s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}const r=this.allocNative(e);let n=0,i=0;for(;e>0;){const s=this._chunks[i];if(s.byteLength>e){const o=s.slice(0,e);r.set(o,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return r}}Bo.AbstractMessageBuffer=v$;var Nf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.RequestCancellationReceiverStrategy=t.IdCancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const e=cr,r=xe,n=q,i=tr,s=Ut,o=kr;var a;(function(y){y.type=new n.NotificationType("$/cancelRequest")})(a||(a={}));var c;(function(y){function k(m){return typeof m=="string"||typeof m=="number"}y.is=k})(c||(t.ProgressToken=c={}));var l;(function(y){y.type=new n.NotificationType("$/progress")})(l||(l={}));class d{constructor(){}}t.ProgressType=d;var h;(function(y){function k(m){return r.func(m)}y.is=k})(h||(h={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var f;(function(y){y[y.Off=0]="Off",y[y.Messages=1]="Messages",y[y.Compact=2]="Compact",y[y.Verbose=3]="Verbose"})(f||(t.Trace=f={}));var $;(function(y){y.Off="off",y.Messages="messages",y.Compact="compact",y.Verbose="verbose"})($||(t.TraceValues=$={})),function(y){function k(g){if(!r.string(g))return y.Off;switch(g=g.toLowerCase(),g){case"off":return y.Off;case"messages":return y.Messages;case"compact":return y.Compact;case"verbose":return y.Verbose;default:return y.Off}}y.fromString=k;function m(g){switch(g){case y.Off:return"off";case y.Messages:return"messages";case y.Compact:return"compact";case y.Verbose:return"verbose";default:return"off"}}y.toString=m}(f||(t.Trace=f={}));var S;(function(y){y.Text="text",y.JSON="json"})(S||(t.TraceFormat=S={})),function(y){function k(m){return r.string(m)?(m=m.toLowerCase(),m==="json"?y.JSON:y.Text):y.Text}y.fromString=k}(S||(t.TraceFormat=S={}));var b;(function(y){y.type=new n.NotificationType("$/setTrace")})(b||(t.SetTraceNotification=b={}));var F;(function(y){y.type=new n.NotificationType("$/logTrace")})(F||(t.LogTraceNotification=F={}));var L;(function(y){y[y.Closed=1]="Closed",y[y.Disposed=2]="Disposed",y[y.AlreadyListening=3]="AlreadyListening"})(L||(t.ConnectionErrors=L={}));class _ extends Error{constructor(k,m){super(m),this.code=k,Object.setPrototypeOf(this,_.prototype)}}t.ConnectionError=_;var C;(function(y){function k(m){const g=m;return g&&r.func(g.cancelUndispatched)}y.is=k})(C||(t.ConnectionStrategy=C={}));var D;(function(y){function k(m){const g=m;return g&&(g.kind===void 0||g.kind==="id")&&r.func(g.createCancellationTokenSource)&&(g.dispose===void 0||r.func(g.dispose))}y.is=k})(D||(t.IdCancellationReceiverStrategy=D={}));var Q;(function(y){function k(m){const g=m;return g&&g.kind==="request"&&r.func(g.createCancellationTokenSource)&&(g.dispose===void 0||r.func(g.dispose))}y.is=k})(Q||(t.RequestCancellationReceiverStrategy=Q={}));var ne;(function(y){y.Message=Object.freeze({createCancellationTokenSource(m){return new o.CancellationTokenSource}});function k(m){return D.is(m)||Q.is(m)}y.is=k})(ne||(t.CancellationReceiverStrategy=ne={}));var ie;(function(y){y.Message=Object.freeze({sendCancellation(m,g){return m.sendNotification(a.type,{id:g})},cleanup(m){}});function k(m){const g=m;return g&&r.func(g.sendCancellation)&&r.func(g.cleanup)}y.is=k})(ie||(t.CancellationSenderStrategy=ie={}));var be;(function(y){y.Message=Object.freeze({receiver:ne.Message,sender:ie.Message});function k(m){const g=m;return g&&ne.is(g.receiver)&&ie.is(g.sender)}y.is=k})(be||(t.CancellationStrategy=be={}));var Ne;(function(y){function k(m){const g=m;return g&&r.func(g.handleMessage)}y.is=k})(Ne||(t.MessageStrategy=Ne={}));var we;(function(y){function k(m){const g=m;return g&&(be.is(g.cancellationStrategy)||C.is(g.connectionStrategy)||Ne.is(g.messageStrategy))}y.is=k})(we||(t.ConnectionOptions=we={}));var A;(function(y){y[y.New=1]="New",y[y.Listening=2]="Listening",y[y.Closed=3]="Closed",y[y.Disposed=4]="Disposed"})(A||(A={}));function v(y,k,m,g){const R=m!==void 0?m:t.NullLogger;let w=0,P=0,I=0;const U="2.0";let B;const se=new Map;let W;const Ie=new Map,te=new Map;let Le,Fe=new i.LinkedMap,de=new Map,qe=new Set,Ee=new Map,V=f.Off,De=S.Text,ce,nt=A.New;const nn=new s.Emitter,Zn=new s.Emitter,Qn=new s.Emitter,ei=new s.Emitter,ti=new s.Emitter,kt=g&&g.cancellationStrategy?g.cancellationStrategy:be.Message;function ri(p){if(p===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+p.toString()}function rs(p){return p===null?"res-unknown-"+(++I).toString():"res-"+p.toString()}function ns(){return"not-"+(++P).toString()}function is(p,E){n.Message.isRequest(E)?p.set(ri(E.id),E):n.Message.isResponse(E)?p.set(rs(E.id),E):p.set(ns(),E)}function ss(p){}function ni(){return nt===A.Listening}function ii(){return nt===A.Closed}function Bt(){return nt===A.Disposed}function si(){(nt===A.New||nt===A.Listening)&&(nt=A.Closed,Zn.fire(void 0))}function os(p){nn.fire([p,void 0,void 0])}function as(p){nn.fire(p)}y.onClose(si),y.onError(os),k.onClose(si),k.onError(as);function oi(){Le||Fe.size===0||(Le=(0,e.default)().timer.setImmediate(()=>{Le=void 0,cs()}))}function ai(p){n.Message.isRequest(p)?us(p):n.Message.isNotification(p)?ps(p):n.Message.isResponse(p)?ds(p):hs(p)}function cs(){if(Fe.size===0)return;const p=Fe.shift();try{const E=g==null?void 0:g.messageStrategy;Ne.is(E)?E.handleMessage(p,ai):ai(p)}finally{oi()}}const ls=p=>{try{if(n.Message.isNotification(p)&&p.method===a.type.method){const E=p.params.id,N=ri(E),M=Fe.get(N);if(n.Message.isRequest(M)){const oe=g==null?void 0:g.connectionStrategy,pe=oe&&oe.cancelUndispatched?oe.cancelUndispatched(M,ss):void 0;if(pe&&(pe.error!==void 0||pe.result!==void 0)){Fe.delete(N),Ee.delete(E),pe.id=M.id,wr(pe,p.method,Date.now()),k.write(pe).catch(()=>R.error("Sending response for canceled message failed."));return}}const le=Ee.get(E);if(le!==void 0){le.cancel(),sn(p);return}else qe.add(E)}is(Fe,p)}finally{oi()}};function us(p){if(Bt())return;function E(J,he,re){const _e={jsonrpc:U,id:p.id};J instanceof n.ResponseError?_e.error=J.toJson():_e.result=J===void 0?null:J,wr(_e,he,re),k.write(_e).catch(()=>R.error("Sending response failed."))}function N(J,he,re){const _e={jsonrpc:U,id:p.id,error:J.toJson()};wr(_e,he,re),k.write(_e).catch(()=>R.error("Sending response failed."))}function M(J,he,re){J===void 0&&(J=null);const _e={jsonrpc:U,id:p.id,result:J};wr(_e,he,re),k.write(_e).catch(()=>R.error("Sending response failed."))}gs(p);const le=se.get(p.method);let oe,pe;le&&(oe=le.type,pe=le.handler);const Ae=Date.now();if(pe||B){const J=p.id??String(Date.now()),he=D.is(kt.receiver)?kt.receiver.createCancellationTokenSource(J):kt.receiver.createCancellationTokenSource(p);p.id!==null&&qe.has(p.id)&&he.cancel(),p.id!==null&&Ee.set(J,he);try{let re;if(pe)if(p.params===void 0){if(oe!==void 0&&oe.numberOfParams!==0){N(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${p.method} defines ${oe.numberOfParams} params but received none.`),p.method,Ae);return}re=pe(he.token)}else if(Array.isArray(p.params)){if(oe!==void 0&&oe.parameterStructures===n.ParameterStructures.byName){N(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${p.method} defines parameters by name but received parameters by position`),p.method,Ae);return}re=pe(...p.params,he.token)}else{if(oe!==void 0&&oe.parameterStructures===n.ParameterStructures.byPosition){N(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${p.method} defines parameters by position but received parameters by name`),p.method,Ae);return}re=pe(p.params,he.token)}else B&&(re=B(p.method,p.params,he.token));const _e=re;re?_e.then?_e.then(Je=>{Ee.delete(J),E(Je,p.method,Ae)},Je=>{Ee.delete(J),Je instanceof n.ResponseError?N(Je,p.method,Ae):Je&&r.string(Je.message)?N(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${p.method} failed with message: ${Je.message}`),p.method,Ae):N(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${p.method} failed unexpectedly without providing any details.`),p.method,Ae)}):(Ee.delete(J),E(re,p.method,Ae)):(Ee.delete(J),M(re,p.method,Ae))}catch(re){Ee.delete(J),re instanceof n.ResponseError?E(re,p.method,Ae):re&&r.string(re.message)?N(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${p.method} failed with message: ${re.message}`),p.method,Ae):N(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${p.method} failed unexpectedly without providing any details.`),p.method,Ae)}}else N(new n.ResponseError(n.ErrorCodes.MethodNotFound,`Unhandled method ${p.method}`),p.method,Ae)}function ds(p){if(!Bt())if(p.id===null)p.error?R.error(`Received response message without id: Error is: 
${JSON.stringify(p.error,void 0,4)}`):R.error("Received response message without id. No further error information provided.");else{const E=p.id,N=de.get(E);if(ys(p,N),N!==void 0){de.delete(E);try{if(p.error){const M=p.error;N.reject(new n.ResponseError(M.code,M.message,M.data))}else if(p.result!==void 0)N.resolve(p.result);else throw new Error("Should never happen.")}catch(M){M.message?R.error(`Response handler '${N.method}' failed with message: ${M.message}`):R.error(`Response handler '${N.method}' failed unexpectedly.`)}}}}function ps(p){if(Bt())return;let E,N;if(p.method===a.type.method){const M=p.params.id;qe.delete(M),sn(p);return}else{const M=Ie.get(p.method);M&&(N=M.handler,E=M.type)}if(N||W)try{if(sn(p),N)if(p.params===void 0)E!==void 0&&E.numberOfParams!==0&&E.parameterStructures!==n.ParameterStructures.byName&&R.error(`Notification ${p.method} defines ${E.numberOfParams} params but received none.`),N();else if(Array.isArray(p.params)){const M=p.params;p.method===l.type.method&&M.length===2&&c.is(M[0])?N({token:M[0],value:M[1]}):(E!==void 0&&(E.parameterStructures===n.ParameterStructures.byName&&R.error(`Notification ${p.method} defines parameters by name but received parameters by position`),E.numberOfParams!==p.params.length&&R.error(`Notification ${p.method} defines ${E.numberOfParams} params but received ${M.length} arguments`)),N(...M))}else E!==void 0&&E.parameterStructures===n.ParameterStructures.byPosition&&R.error(`Notification ${p.method} defines parameters by position but received parameters by name`),N(p.params);else W&&W(p.method,p.params)}catch(M){M.message?R.error(`Notification handler '${p.method}' failed with message: ${M.message}`):R.error(`Notification handler '${p.method}' failed unexpectedly.`)}else Qn.fire(p)}function hs(p){if(!p){R.error("Received empty message.");return}R.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(p,null,4)}`);const E=p;if(r.string(E.id)||r.number(E.id)){const N=E.id,M=de.get(N);M&&M.reject(new Error("The received response has neither a result nor an error property."))}}function St(p){if(p!=null)switch(V){case f.Verbose:return JSON.stringify(p,null,4);case f.Compact:return JSON.stringify(p);default:return}}function fs(p){if(!(V===f.Off||!ce))if(De===S.Text){let E;(V===f.Verbose||V===f.Compact)&&p.params&&(E=`Params: ${St(p.params)}

`),ce.log(`Sending request '${p.method} - (${p.id})'.`,E)}else Kt("send-request",p)}function ms(p){if(!(V===f.Off||!ce))if(De===S.Text){let E;(V===f.Verbose||V===f.Compact)&&(p.params?E=`Params: ${St(p.params)}

`:E=`No parameters provided.

`),ce.log(`Sending notification '${p.method}'.`,E)}else Kt("send-notification",p)}function wr(p,E,N){if(!(V===f.Off||!ce))if(De===S.Text){let M;(V===f.Verbose||V===f.Compact)&&(p.error&&p.error.data?M=`Error data: ${St(p.error.data)}

`:p.result?M=`Result: ${St(p.result)}

`:p.error===void 0&&(M=`No result returned.

`)),ce.log(`Sending response '${E} - (${p.id})'. Processing request took ${Date.now()-N}ms`,M)}else Kt("send-response",p)}function gs(p){if(!(V===f.Off||!ce))if(De===S.Text){let E;(V===f.Verbose||V===f.Compact)&&p.params&&(E=`Params: ${St(p.params)}

`),ce.log(`Received request '${p.method} - (${p.id})'.`,E)}else Kt("receive-request",p)}function sn(p){if(!(V===f.Off||!ce||p.method===F.type.method))if(De===S.Text){let E;(V===f.Verbose||V===f.Compact)&&(p.params?E=`Params: ${St(p.params)}

`:E=`No parameters provided.

`),ce.log(`Received notification '${p.method}'.`,E)}else Kt("receive-notification",p)}function ys(p,E){if(!(V===f.Off||!ce))if(De===S.Text){let N;if((V===f.Verbose||V===f.Compact)&&(p.error&&p.error.data?N=`Error data: ${St(p.error.data)}

`:p.result?N=`Result: ${St(p.result)}

`:p.error===void 0&&(N=`No result returned.

`)),E){const M=p.error?` Request failed: ${p.error.message} (${p.error.code}).`:"";ce.log(`Received response '${E.method} - (${p.id})' in ${Date.now()-E.timerStart}ms.${M}`,N)}else ce.log(`Received response ${p.id} without active response promise.`,N)}else Kt("receive-response",p)}function Kt(p,E){if(!ce||V===f.Off)return;const N={isLSPMessage:!0,type:p,message:E,timestamp:Date.now()};ce.log(N)}function lr(){if(ii())throw new _(L.Closed,"Connection is closed.");if(Bt())throw new _(L.Disposed,"Connection is disposed.")}function Ts(){if(ni())throw new _(L.AlreadyListening,"Connection is already listening")}function vs(){if(!ni())throw new Error("Call listen() first.")}function ur(p){return p===void 0?null:p}function ci(p){if(p!==null)return p}function u(p){return p!=null&&!Array.isArray(p)&&typeof p=="object"}function ke(p,E){switch(p){case n.ParameterStructures.auto:return u(E)?ci(E):[ur(E)];case n.ParameterStructures.byName:if(!u(E))throw new Error("Received parameters by name but param is not an object literal.");return ci(E);case n.ParameterStructures.byPosition:return[ur(E)];default:throw new Error(`Unknown parameter structure ${p.toString()}`)}}function Se(p,E){let N;const M=p.numberOfParams;switch(M){case 0:N=void 0;break;case 1:N=ke(p.parameterStructures,E[0]);break;default:N=[];for(let le=0;le<E.length&&le<M;le++)N.push(ur(E[le]));if(E.length<M)for(let le=E.length;le<M;le++)N.push(null);break}return N}const K={sendNotification:(p,...E)=>{lr();let N,M;if(r.string(p)){N=p;const oe=E[0];let pe=0,Ae=n.ParameterStructures.auto;n.ParameterStructures.is(oe)&&(pe=1,Ae=oe);let J=E.length;const he=J-pe;switch(he){case 0:M=void 0;break;case 1:M=ke(Ae,E[pe]);break;default:if(Ae===n.ParameterStructures.byName)throw new Error(`Received ${he} parameters for 'by Name' notification parameter structure.`);M=E.slice(pe,J).map(re=>ur(re));break}}else{const oe=E;N=p.method,M=Se(p,oe)}const le={jsonrpc:U,method:N,params:M};return ms(le),k.write(le).catch(oe=>{throw R.error("Sending notification failed."),oe})},onNotification:(p,E)=>{lr();let N;return r.func(p)?W=p:E&&(r.string(p)?(N=p,Ie.set(p,{type:void 0,handler:E})):(N=p.method,Ie.set(p.method,{type:p,handler:E}))),{dispose:()=>{N!==void 0?Ie.delete(N):W=void 0}}},onProgress:(p,E,N)=>{if(te.has(E))throw new Error(`Progress handler for token ${E} already registered`);return te.set(E,N),{dispose:()=>{te.delete(E)}}},sendProgress:(p,E,N)=>K.sendNotification(l.type,{token:E,value:N}),onUnhandledProgress:ei.event,sendRequest:(p,...E)=>{lr(),vs();let N,M,le;if(r.string(p)){N=p;const J=E[0],he=E[E.length-1];let re=0,_e=n.ParameterStructures.auto;n.ParameterStructures.is(J)&&(re=1,_e=J);let Je=E.length;o.CancellationToken.is(he)&&(Je=Je-1,le=he);const Pt=Je-re;switch(Pt){case 0:M=void 0;break;case 1:M=ke(_e,E[re]);break;default:if(_e===n.ParameterStructures.byName)throw new Error(`Received ${Pt} parameters for 'by Name' request parameter structure.`);M=E.slice(re,Je).map(Kf=>ur(Kf));break}}else{const J=E;N=p.method,M=Se(p,J);const he=p.numberOfParams;le=o.CancellationToken.is(J[he])?J[he]:void 0}const oe=w++;let pe;le&&(pe=le.onCancellationRequested(()=>{const J=kt.sender.sendCancellation(K,oe);return J===void 0?(R.log(`Received no promise from cancellation strategy when cancelling id ${oe}`),Promise.resolve()):J.catch(()=>{R.log(`Sending cancellation messages for id ${oe} failed`)})}));const Ae={jsonrpc:U,id:oe,method:N,params:M};return fs(Ae),typeof kt.sender.enableCancellation=="function"&&kt.sender.enableCancellation(Ae),new Promise(async(J,he)=>{const re=Pt=>{J(Pt),kt.sender.cleanup(oe),pe==null||pe.dispose()},_e=Pt=>{he(Pt),kt.sender.cleanup(oe),pe==null||pe.dispose()},Je={method:N,timerStart:Date.now(),resolve:re,reject:_e};try{await k.write(Ae),de.set(oe,Je)}catch(Pt){throw R.error("Sending request failed."),Je.reject(new n.ResponseError(n.ErrorCodes.MessageWriteError,Pt.message?Pt.message:"Unknown reason")),Pt}})},onRequest:(p,E)=>{lr();let N=null;return h.is(p)?(N=void 0,B=p):r.string(p)?(N=null,E!==void 0&&(N=p,se.set(p,{handler:E,type:void 0}))):E!==void 0&&(N=p.method,se.set(p.method,{type:p,handler:E})),{dispose:()=>{N!==null&&(N!==void 0?se.delete(N):B=void 0)}}},hasPendingResponse:()=>de.size>0,trace:async(p,E,N)=>{let M=!1,le=S.Text;N!==void 0&&(r.boolean(N)?M=N:(M=N.sendNotification||!1,le=N.traceFormat||S.Text)),V=p,De=le,V===f.Off?ce=void 0:ce=E,M&&!ii()&&!Bt()&&await K.sendNotification(b.type,{value:f.toString(p)})},onError:nn.event,onClose:Zn.event,onUnhandledNotification:Qn.event,onDispose:ti.event,end:()=>{k.end()},dispose:()=>{if(Bt())return;nt=A.Disposed,ti.fire(void 0);const p=new n.ResponseError(n.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const E of de.values())E.reject(p);de=new Map,Ee=new Map,qe=new Set,Fe=new i.LinkedMap,r.func(k.dispose)&&k.dispose(),r.func(y.dispose)&&y.dispose()},listen:()=>{lr(),Ts(),nt=A.Listening,y.listen(ls)},inspect:()=>{(0,e.default)().console.log("inspect")}};return K.onNotification(F.type,p=>{if(V===f.Off||!ce)return;const E=V===f.Verbose||V===f.Compact;ce.log(p.message,E?p.verbose:void 0)}),K.onNotification(l.type,p=>{const E=te.get(p.token);E?E(p.value):ei.fire(p)}),K}t.createMessageConnection=v})(Nf);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.AbstractMessageBuffer=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=void 0;const e=q;Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return e.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return e.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return e.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return e.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return e.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return e.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return e.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return e.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return e.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return e.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return e.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return e.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return e.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return e.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return e.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return e.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return e.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return e.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return e.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return e.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return e.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return e.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return e.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return e.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return e.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return e.ParameterStructures}});const r=tr;Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return r.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return r.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return r.Touch}});const n=zo;Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return n.Disposable}});const i=Ut;Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return i.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return i.Emitter}});const s=kr;Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return s.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return s.CancellationToken}});const o=On;Object.defineProperty(t,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return o.SharedArraySenderStrategy}}),Object.defineProperty(t,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return o.SharedArrayReceiverStrategy}});const a=hr;Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return a.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return a.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a.ReadableStreamMessageReader}});const c=fr;Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});const l=Bo;Object.defineProperty(t,"AbstractMessageBuffer",{enumerable:!0,get:function(){return l.AbstractMessageBuffer}});const d=Nf;Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return d.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return d.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return d.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return d.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return d.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return d.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return d.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return d.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return d.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return d.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return d.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return d.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return d.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return d.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return d.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return d.CancellationStrategy}}),Object.defineProperty(t,"MessageStrategy",{enumerable:!0,get:function(){return d.MessageStrategy}});const h=cr;t.RAL=h.default})(vo);Object.defineProperty(ru,"__esModule",{value:!0});const qt=vo;class Ko extends qt.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return Ko.emptyBuffer}fromString(e,r){return new TextEncoder().encode(e)}toString(e,r){return r==="ascii"?this.asciiDecoder.decode(e):new TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e:e.slice(0,r)}allocNative(e){return new Uint8Array(e)}}Ko.emptyBuffer=new Uint8Array(0);class R${constructor(e){this.socket=e,this._onData=new qt.Emitter,this._messageListener=r=>{r.data.arrayBuffer().then(n=>{this._onData.fire(new Uint8Array(n))},()=>{(0,qt.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),qt.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),qt.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),qt.Disposable.create(()=>this.socket.removeEventListener("end",e))}onData(e){return this._onData.event(e)}}class $${constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),qt.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),qt.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),qt.Disposable.create(()=>this.socket.removeEventListener("end",e))}write(e,r){if(typeof e=="string"){if(r!==void 0&&r!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${r}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const E$=new TextEncoder,wf=Object.freeze({messageBuffer:Object.freeze({create:t=>new Ko(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{if(e.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${e.charset}`);return Promise.resolve(E$.encode(JSON.stringify(t,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{if(!(t instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(e.charset).decode(t)))}})}),stream:Object.freeze({asReadableStream:t=>new R$(t),asWritableStream:t=>new $$(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){const n=setTimeout(t,e,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(t,...e){const r=setTimeout(t,0,...e);return{dispose:()=>clearTimeout(r)}},setInterval(t,e,...r){const n=setInterval(t,e,...r);return{dispose:()=>clearInterval(n)}}})});function $l(){return wf}(function(t){function e(){qt.RAL.install(wf)}t.install=e})($l||($l={}));ru.default=$l;(function(t){var e=Rt&&Rt.__createBinding||(Object.create?function(a,c,l,d){d===void 0&&(d=l);var h=Object.getOwnPropertyDescriptor(c,l);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[l]}}),Object.defineProperty(a,d,h)}:function(a,c,l,d){d===void 0&&(d=l),a[d]=c[l]}),r=Rt&&Rt.__exportStar||function(a,c){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(c,l)&&e(c,a,l)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0,ru.default.install();const n=vo;r(vo,t);class i extends n.AbstractMessageReader{constructor(c){super(),this._onData=new n.Emitter,this._messageListener=l=>{this._onData.fire(l.data)},c.addEventListener("error",l=>this.fireError(l)),c.onmessage=this._messageListener}listen(c){return this._onData.event(c)}}t.BrowserMessageReader=i;class s extends n.AbstractMessageWriter{constructor(c){super(),this.port=c,this.errorCount=0,c.addEventListener("error",l=>this.fireError(l))}write(c){try{return this.port.postMessage(c),Promise.resolve()}catch(l){return this.handleError(l,c),Promise.reject(l)}}handleError(c,l){this.errorCount++,this.fireError(c,l,this.errorCount)}end(){}}t.BrowserMessageWriter=s;function o(a,c,l,d){return l===void 0&&(l=n.NullLogger),n.ConnectionStrategy.is(d)&&(d={connectionStrategy:d}),(0,n.createMessageConnection)(a,c,l,d)}t.createMessageConnection=o})(en);var dd=en,If={};const iu=Jf(Nv);var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.ProtocolNotificationType=Y.ProtocolNotificationType0=Y.ProtocolRequestType=Y.ProtocolRequestType0=Y.RegistrationType=Y.MessageDirection=void 0;const Mn=en;var pd;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(pd||(Y.MessageDirection=pd={}));class k${constructor(e){this.method=e}}Y.RegistrationType=k$;class S$ extends Mn.RequestType0{constructor(e){super(e)}}Y.ProtocolRequestType0=S$;class A$ extends Mn.RequestType{constructor(e){super(e,Mn.ParameterStructures.byName)}}Y.ProtocolRequestType=A$;class b$ extends Mn.NotificationType0{constructor(e){super(e)}}Y.ProtocolNotificationType0=b$;class C$ extends Mn.NotificationType{constructor(e){super(e,Mn.ParameterStructures.byName)}}Y.ProtocolNotificationType=C$;var Lf={},ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.objectLiteral=ve.typedArray=ve.stringArray=ve.array=ve.func=ve.error=ve.number=ve.string=ve.boolean=void 0;function x$(t){return t===!0||t===!1}ve.boolean=x$;function _f(t){return typeof t=="string"||t instanceof String}ve.string=_f;function N$(t){return typeof t=="number"||t instanceof Number}ve.number=N$;function w$(t){return t instanceof Error}ve.error=w$;function I$(t){return typeof t=="function"}ve.func=I$;function Pf(t){return Array.isArray(t)}ve.array=Pf;function L$(t){return Pf(t)&&t.every(e=>_f(e))}ve.stringArray=L$;function _$(t,e){return Array.isArray(t)&&t.every(e)}ve.typedArray=_$;function P$(t){return t!==null&&typeof t=="object"}ve.objectLiteral=P$;var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.ImplementationRequest=void 0;const hd=Y;var fd;(function(t){t.method="textDocument/implementation",t.messageDirection=hd.MessageDirection.clientToServer,t.type=new hd.ProtocolRequestType(t.method)})(fd||(Wo.ImplementationRequest=fd={}));var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.TypeDefinitionRequest=void 0;const md=Y;var gd;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=md.MessageDirection.clientToServer,t.type=new md.ProtocolRequestType(t.method)})(gd||(Vo.TypeDefinitionRequest=gd={}));var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.DidChangeWorkspaceFoldersNotification=Fn.WorkspaceFoldersRequest=void 0;const Ro=Y;var yd;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=Ro.MessageDirection.serverToClient,t.type=new Ro.ProtocolRequestType0(t.method)})(yd||(Fn.WorkspaceFoldersRequest=yd={}));var Td;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=Ro.MessageDirection.clientToServer,t.type=new Ro.ProtocolNotificationType(t.method)})(Td||(Fn.DidChangeWorkspaceFoldersNotification=Td={}));var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.ConfigurationRequest=void 0;const vd=Y;var Rd;(function(t){t.method="workspace/configuration",t.messageDirection=vd.MessageDirection.serverToClient,t.type=new vd.ProtocolRequestType(t.method)})(Rd||(Ho.ConfigurationRequest=Rd={}));var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.ColorPresentationRequest=qn.DocumentColorRequest=void 0;const $o=Y;var $d;(function(t){t.method="textDocument/documentColor",t.messageDirection=$o.MessageDirection.clientToServer,t.type=new $o.ProtocolRequestType(t.method)})($d||(qn.DocumentColorRequest=$d={}));var Ed;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=$o.MessageDirection.clientToServer,t.type=new $o.ProtocolRequestType(t.method)})(Ed||(qn.ColorPresentationRequest=Ed={}));var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.FoldingRangeRefreshRequest=jn.FoldingRangeRequest=void 0;const Eo=Y;var kd;(function(t){t.method="textDocument/foldingRange",t.messageDirection=Eo.MessageDirection.clientToServer,t.type=new Eo.ProtocolRequestType(t.method)})(kd||(jn.FoldingRangeRequest=kd={}));var Sd;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=Eo.MessageDirection.serverToClient,t.type=new Eo.ProtocolRequestType0(t.method)})(Sd||(jn.FoldingRangeRefreshRequest=Sd={}));var Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.DeclarationRequest=void 0;const Ad=Y;var bd;(function(t){t.method="textDocument/declaration",t.messageDirection=Ad.MessageDirection.clientToServer,t.type=new Ad.ProtocolRequestType(t.method)})(bd||(Yo.DeclarationRequest=bd={}));var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.SelectionRangeRequest=void 0;const Cd=Y;var xd;(function(t){t.method="textDocument/selectionRange",t.messageDirection=Cd.MessageDirection.clientToServer,t.type=new Cd.ProtocolRequestType(t.method)})(xd||(Xo.SelectionRangeRequest=xd={}));var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.WorkDoneProgressCancelNotification=mr.WorkDoneProgressCreateRequest=mr.WorkDoneProgress=void 0;const D$=en,ko=Y;var Nd;(function(t){t.type=new D$.ProgressType;function e(r){return r===t.type}t.is=e})(Nd||(mr.WorkDoneProgress=Nd={}));var wd;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=ko.MessageDirection.serverToClient,t.type=new ko.ProtocolRequestType(t.method)})(wd||(mr.WorkDoneProgressCreateRequest=wd={}));var Id;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=ko.MessageDirection.clientToServer,t.type=new ko.ProtocolNotificationType(t.method)})(Id||(mr.WorkDoneProgressCancelNotification=Id={}));var gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.CallHierarchyOutgoingCallsRequest=gr.CallHierarchyIncomingCallsRequest=gr.CallHierarchyPrepareRequest=void 0;const Un=Y;var Ld;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Un.MessageDirection.clientToServer,t.type=new Un.ProtocolRequestType(t.method)})(Ld||(gr.CallHierarchyPrepareRequest=Ld={}));var _d;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Un.MessageDirection.clientToServer,t.type=new Un.ProtocolRequestType(t.method)})(_d||(gr.CallHierarchyIncomingCallsRequest=_d={}));var Pd;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Un.MessageDirection.clientToServer,t.type=new Un.ProtocolRequestType(t.method)})(Pd||(gr.CallHierarchyOutgoingCallsRequest=Pd={}));var it={};Object.defineProperty(it,"__esModule",{value:!0});it.SemanticTokensRefreshRequest=it.SemanticTokensRangeRequest=it.SemanticTokensDeltaRequest=it.SemanticTokensRequest=it.SemanticTokensRegistrationType=it.TokenFormat=void 0;const sr=Y;var Dd;(function(t){t.Relative="relative"})(Dd||(it.TokenFormat=Dd={}));var zi;(function(t){t.method="textDocument/semanticTokens",t.type=new sr.RegistrationType(t.method)})(zi||(it.SemanticTokensRegistrationType=zi={}));var Od;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=sr.MessageDirection.clientToServer,t.type=new sr.ProtocolRequestType(t.method),t.registrationMethod=zi.method})(Od||(it.SemanticTokensRequest=Od={}));var Md;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=sr.MessageDirection.clientToServer,t.type=new sr.ProtocolRequestType(t.method),t.registrationMethod=zi.method})(Md||(it.SemanticTokensDeltaRequest=Md={}));var Fd;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=sr.MessageDirection.clientToServer,t.type=new sr.ProtocolRequestType(t.method),t.registrationMethod=zi.method})(Fd||(it.SemanticTokensRangeRequest=Fd={}));var qd;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=sr.MessageDirection.serverToClient,t.type=new sr.ProtocolRequestType0(t.method)})(qd||(it.SemanticTokensRefreshRequest=qd={}));var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.ShowDocumentRequest=void 0;const jd=Y;var Ud;(function(t){t.method="window/showDocument",t.messageDirection=jd.MessageDirection.serverToClient,t.type=new jd.ProtocolRequestType(t.method)})(Ud||(Jo.ShowDocumentRequest=Ud={}));var Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.LinkedEditingRangeRequest=void 0;const Gd=Y;var zd;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Gd.MessageDirection.clientToServer,t.type=new Gd.ProtocolRequestType(t.method)})(zd||(Zo.LinkedEditingRangeRequest=zd={}));var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.WillDeleteFilesRequest=Ve.DidDeleteFilesNotification=Ve.DidRenameFilesNotification=Ve.WillRenameFilesRequest=Ve.DidCreateFilesNotification=Ve.WillCreateFilesRequest=Ve.FileOperationPatternKind=void 0;const Et=Y;var Bd;(function(t){t.file="file",t.folder="folder"})(Bd||(Ve.FileOperationPatternKind=Bd={}));var Kd;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Et.MessageDirection.clientToServer,t.type=new Et.ProtocolRequestType(t.method)})(Kd||(Ve.WillCreateFilesRequest=Kd={}));var Wd;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Et.MessageDirection.clientToServer,t.type=new Et.ProtocolNotificationType(t.method)})(Wd||(Ve.DidCreateFilesNotification=Wd={}));var Vd;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Et.MessageDirection.clientToServer,t.type=new Et.ProtocolRequestType(t.method)})(Vd||(Ve.WillRenameFilesRequest=Vd={}));var Hd;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Et.MessageDirection.clientToServer,t.type=new Et.ProtocolNotificationType(t.method)})(Hd||(Ve.DidRenameFilesNotification=Hd={}));var Yd;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Et.MessageDirection.clientToServer,t.type=new Et.ProtocolNotificationType(t.method)})(Yd||(Ve.DidDeleteFilesNotification=Yd={}));var Xd;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Et.MessageDirection.clientToServer,t.type=new Et.ProtocolRequestType(t.method)})(Xd||(Ve.WillDeleteFilesRequest=Xd={}));var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.MonikerRequest=yr.MonikerKind=yr.UniquenessLevel=void 0;const Jd=Y;var Zd;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Zd||(yr.UniquenessLevel=Zd={}));var Qd;(function(t){t.$import="import",t.$export="export",t.local="local"})(Qd||(yr.MonikerKind=Qd={}));var ep;(function(t){t.method="textDocument/moniker",t.messageDirection=Jd.MessageDirection.clientToServer,t.type=new Jd.ProtocolRequestType(t.method)})(ep||(yr.MonikerRequest=ep={}));var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.TypeHierarchySubtypesRequest=Tr.TypeHierarchySupertypesRequest=Tr.TypeHierarchyPrepareRequest=void 0;const Gn=Y;var tp;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=Gn.MessageDirection.clientToServer,t.type=new Gn.ProtocolRequestType(t.method)})(tp||(Tr.TypeHierarchyPrepareRequest=tp={}));var rp;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=Gn.MessageDirection.clientToServer,t.type=new Gn.ProtocolRequestType(t.method)})(rp||(Tr.TypeHierarchySupertypesRequest=rp={}));var np;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=Gn.MessageDirection.clientToServer,t.type=new Gn.ProtocolRequestType(t.method)})(np||(Tr.TypeHierarchySubtypesRequest=np={}));var zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.InlineValueRefreshRequest=zn.InlineValueRequest=void 0;const So=Y;var ip;(function(t){t.method="textDocument/inlineValue",t.messageDirection=So.MessageDirection.clientToServer,t.type=new So.ProtocolRequestType(t.method)})(ip||(zn.InlineValueRequest=ip={}));var sp;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=So.MessageDirection.serverToClient,t.type=new So.ProtocolRequestType0(t.method)})(sp||(zn.InlineValueRefreshRequest=sp={}));var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.InlayHintRefreshRequest=vr.InlayHintResolveRequest=vr.InlayHintRequest=void 0;const Bn=Y;var op;(function(t){t.method="textDocument/inlayHint",t.messageDirection=Bn.MessageDirection.clientToServer,t.type=new Bn.ProtocolRequestType(t.method)})(op||(vr.InlayHintRequest=op={}));var ap;(function(t){t.method="inlayHint/resolve",t.messageDirection=Bn.MessageDirection.clientToServer,t.type=new Bn.ProtocolRequestType(t.method)})(ap||(vr.InlayHintResolveRequest=ap={}));var cp;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=Bn.MessageDirection.serverToClient,t.type=new Bn.ProtocolRequestType0(t.method)})(cp||(vr.InlayHintRefreshRequest=cp={}));var vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.DiagnosticRefreshRequest=vt.WorkspaceDiagnosticRequest=vt.DocumentDiagnosticRequest=vt.DocumentDiagnosticReportKind=vt.DiagnosticServerCancellationData=void 0;const Df=en,O$=ve,Kn=Y;var lp;(function(t){function e(r){const n=r;return n&&O$.boolean(n.retriggerRequest)}t.is=e})(lp||(vt.DiagnosticServerCancellationData=lp={}));var up;(function(t){t.Full="full",t.Unchanged="unchanged"})(up||(vt.DocumentDiagnosticReportKind=up={}));var dp;(function(t){t.method="textDocument/diagnostic",t.messageDirection=Kn.MessageDirection.clientToServer,t.type=new Kn.ProtocolRequestType(t.method),t.partialResult=new Df.ProgressType})(dp||(vt.DocumentDiagnosticRequest=dp={}));var pp;(function(t){t.method="workspace/diagnostic",t.messageDirection=Kn.MessageDirection.clientToServer,t.type=new Kn.ProtocolRequestType(t.method),t.partialResult=new Df.ProgressType})(pp||(vt.WorkspaceDiagnosticRequest=pp={}));var hp;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=Kn.MessageDirection.serverToClient,t.type=new Kn.ProtocolRequestType0(t.method)})(hp||(vt.DiagnosticRefreshRequest=hp={}));var Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.DidCloseNotebookDocumentNotification=Te.DidSaveNotebookDocumentNotification=Te.DidChangeNotebookDocumentNotification=Te.NotebookCellArrayChange=Te.DidOpenNotebookDocumentNotification=Te.NotebookDocumentSyncRegistrationType=Te.NotebookDocument=Te.NotebookCell=Te.ExecutionSummary=Te.NotebookCellKind=void 0;const Bi=iu,xt=ve,Gt=Y;var El;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}t.is=e})(El||(Te.NotebookCellKind=El={}));var kl;(function(t){function e(i,s){const o={executionOrder:i};return(s===!0||s===!1)&&(o.success=s),o}t.create=e;function r(i){const s=i;return xt.objectLiteral(s)&&Bi.uinteger.is(s.executionOrder)&&(s.success===void 0||xt.boolean(s.success))}t.is=r;function n(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}t.equals=n})(kl||(Te.ExecutionSummary=kl={}));var Ao;(function(t){function e(s,o){return{kind:s,document:o}}t.create=e;function r(s){const o=s;return xt.objectLiteral(o)&&El.is(o.kind)&&Bi.DocumentUri.is(o.document)&&(o.metadata===void 0||xt.objectLiteral(o.metadata))}t.is=r;function n(s,o){const a=new Set;return s.document!==o.document&&a.add("document"),s.kind!==o.kind&&a.add("kind"),s.executionSummary!==o.executionSummary&&a.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!i(s.metadata,o.metadata)&&a.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!kl.equals(s.executionSummary,o.executionSummary)&&a.add("executionSummary"),a}t.diff=n;function i(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;const a=Array.isArray(s),c=Array.isArray(o);if(a!==c)return!1;if(a&&c){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++)if(!i(s[l],o[l]))return!1}if(xt.objectLiteral(s)&&xt.objectLiteral(o)){const l=Object.keys(s),d=Object.keys(o);if(l.length!==d.length||(l.sort(),d.sort(),!i(l,d)))return!1;for(let h=0;h<l.length;h++){const f=l[h];if(!i(s[f],o[f]))return!1}}return!0}})(Ao||(Te.NotebookCell=Ao={}));var fp;(function(t){function e(n,i,s,o){return{uri:n,notebookType:i,version:s,cells:o}}t.create=e;function r(n){const i=n;return xt.objectLiteral(i)&&xt.string(i.uri)&&Bi.integer.is(i.version)&&xt.typedArray(i.cells,Ao.is)}t.is=r})(fp||(Te.NotebookDocument=fp={}));var Wn;(function(t){t.method="notebookDocument/sync",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.RegistrationType(t.method)})(Wn||(Te.NotebookDocumentSyncRegistrationType=Wn={}));var mp;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method),t.registrationMethod=Wn.method})(mp||(Te.DidOpenNotebookDocumentNotification=mp={}));var gp;(function(t){function e(n){const i=n;return xt.objectLiteral(i)&&Bi.uinteger.is(i.start)&&Bi.uinteger.is(i.deleteCount)&&(i.cells===void 0||xt.typedArray(i.cells,Ao.is))}t.is=e;function r(n,i,s){const o={start:n,deleteCount:i};return s!==void 0&&(o.cells=s),o}t.create=r})(gp||(Te.NotebookCellArrayChange=gp={}));var yp;(function(t){t.method="notebookDocument/didChange",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method),t.registrationMethod=Wn.method})(yp||(Te.DidChangeNotebookDocumentNotification=yp={}));var Tp;(function(t){t.method="notebookDocument/didSave",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method),t.registrationMethod=Wn.method})(Tp||(Te.DidSaveNotebookDocumentNotification=Tp={}));var vp;(function(t){t.method="notebookDocument/didClose",t.messageDirection=Gt.MessageDirection.clientToServer,t.type=new Gt.ProtocolNotificationType(t.method),t.registrationMethod=Wn.method})(vp||(Te.DidCloseNotebookDocumentNotification=vp={}));var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.InlineCompletionRequest=void 0;const Rp=Y;var $p;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=Rp.MessageDirection.clientToServer,t.type=new Rp.ProtocolRequestType(t.method)})($p||(Qo.InlineCompletionRequest=$p={}));(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0,t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRefreshRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangesFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0,t.InlineCompletionRequest=t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=void 0;const e=Y,r=iu,n=ve,i=Wo;Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return i.ImplementationRequest}});const s=Vo;Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return s.TypeDefinitionRequest}});const o=Fn;Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return o.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return o.DidChangeWorkspaceFoldersNotification}});const a=Ho;Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});const c=qn;Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return c.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return c.ColorPresentationRequest}});const l=jn;Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return l.FoldingRangeRequest}}),Object.defineProperty(t,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return l.FoldingRangeRefreshRequest}});const d=Yo;Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return d.DeclarationRequest}});const h=Xo;Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return h.SelectionRangeRequest}});const f=mr;Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return f.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return f.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return f.WorkDoneProgressCancelNotification}});const $=gr;Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return $.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return $.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return $.CallHierarchyPrepareRequest}});const S=it;Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return S.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return S.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return S.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return S.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return S.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return S.SemanticTokensRegistrationType}});const b=Jo;Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return b.ShowDocumentRequest}});const F=Zo;Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return F.LinkedEditingRangeRequest}});const L=Ve;Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return L.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return L.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return L.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return L.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return L.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return L.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return L.WillDeleteFilesRequest}});const _=yr;Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return _.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return _.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return _.MonikerRequest}});const C=Tr;Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return C.TypeHierarchyPrepareRequest}}),Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return C.TypeHierarchySubtypesRequest}}),Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return C.TypeHierarchySupertypesRequest}});const D=zn;Object.defineProperty(t,"InlineValueRequest",{enumerable:!0,get:function(){return D.InlineValueRequest}}),Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return D.InlineValueRefreshRequest}});const Q=vr;Object.defineProperty(t,"InlayHintRequest",{enumerable:!0,get:function(){return Q.InlayHintRequest}}),Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Q.InlayHintResolveRequest}}),Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Q.InlayHintRefreshRequest}});const ne=vt;Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return ne.DiagnosticServerCancellationData}}),Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return ne.DocumentDiagnosticReportKind}}),Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return ne.DocumentDiagnosticRequest}}),Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return ne.WorkspaceDiagnosticRequest}}),Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return ne.DiagnosticRefreshRequest}});const ie=Te;Object.defineProperty(t,"NotebookCellKind",{enumerable:!0,get:function(){return ie.NotebookCellKind}}),Object.defineProperty(t,"ExecutionSummary",{enumerable:!0,get:function(){return ie.ExecutionSummary}}),Object.defineProperty(t,"NotebookCell",{enumerable:!0,get:function(){return ie.NotebookCell}}),Object.defineProperty(t,"NotebookDocument",{enumerable:!0,get:function(){return ie.NotebookDocument}}),Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return ie.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return ie.DidOpenNotebookDocumentNotification}}),Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:!0,get:function(){return ie.NotebookCellArrayChange}}),Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return ie.DidChangeNotebookDocumentNotification}}),Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return ie.DidSaveNotebookDocumentNotification}}),Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return ie.DidCloseNotebookDocumentNotification}});const be=Qo;Object.defineProperty(t,"InlineCompletionRequest",{enumerable:!0,get:function(){return be.InlineCompletionRequest}});var Ne;(function(u){function ke(Se){const K=Se;return n.string(K)||n.string(K.language)||n.string(K.scheme)||n.string(K.pattern)}u.is=ke})(Ne||(t.TextDocumentFilter=Ne={}));var we;(function(u){function ke(Se){const K=Se;return n.objectLiteral(K)&&(n.string(K.notebookType)||n.string(K.scheme)||n.string(K.pattern))}u.is=ke})(we||(t.NotebookDocumentFilter=we={}));var A;(function(u){function ke(Se){const K=Se;return n.objectLiteral(K)&&(n.string(K.notebook)||we.is(K.notebook))&&(K.language===void 0||n.string(K.language))}u.is=ke})(A||(t.NotebookCellTextDocumentFilter=A={}));var v;(function(u){function ke(Se){if(!Array.isArray(Se))return!1;for(let K of Se)if(!n.string(K)&&!Ne.is(K)&&!A.is(K))return!1;return!0}u.is=ke})(v||(t.DocumentSelector=v={}));var y;(function(u){u.method="client/registerCapability",u.messageDirection=e.MessageDirection.serverToClient,u.type=new e.ProtocolRequestType(u.method)})(y||(t.RegistrationRequest=y={}));var k;(function(u){u.method="client/unregisterCapability",u.messageDirection=e.MessageDirection.serverToClient,u.type=new e.ProtocolRequestType(u.method)})(k||(t.UnregistrationRequest=k={}));var m;(function(u){u.Create="create",u.Rename="rename",u.Delete="delete"})(m||(t.ResourceOperationKind=m={}));var g;(function(u){u.Abort="abort",u.Transactional="transactional",u.TextOnlyTransactional="textOnlyTransactional",u.Undo="undo"})(g||(t.FailureHandlingKind=g={}));var R;(function(u){u.UTF8="utf-8",u.UTF16="utf-16",u.UTF32="utf-32"})(R||(t.PositionEncodingKind=R={}));var w;(function(u){function ke(Se){const K=Se;return K&&n.string(K.id)&&K.id.length>0}u.hasId=ke})(w||(t.StaticRegistrationOptions=w={}));var P;(function(u){function ke(Se){const K=Se;return K&&(K.documentSelector===null||v.is(K.documentSelector))}u.is=ke})(P||(t.TextDocumentRegistrationOptions=P={}));var I;(function(u){function ke(K){const p=K;return n.objectLiteral(p)&&(p.workDoneProgress===void 0||n.boolean(p.workDoneProgress))}u.is=ke;function Se(K){const p=K;return p&&n.boolean(p.workDoneProgress)}u.hasWorkDoneProgress=Se})(I||(t.WorkDoneProgressOptions=I={}));var U;(function(u){u.method="initialize",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(U||(t.InitializeRequest=U={}));var B;(function(u){u.unknownProtocolVersion=1})(B||(t.InitializeErrorCodes=B={}));var se;(function(u){u.method="initialized",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolNotificationType(u.method)})(se||(t.InitializedNotification=se={}));var W;(function(u){u.method="shutdown",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType0(u.method)})(W||(t.ShutdownRequest=W={}));var Ie;(function(u){u.method="exit",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolNotificationType0(u.method)})(Ie||(t.ExitNotification=Ie={}));var te;(function(u){u.method="workspace/didChangeConfiguration",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolNotificationType(u.method)})(te||(t.DidChangeConfigurationNotification=te={}));var Le;(function(u){u.Error=1,u.Warning=2,u.Info=3,u.Log=4,u.Debug=5})(Le||(t.MessageType=Le={}));var Fe;(function(u){u.method="window/showMessage",u.messageDirection=e.MessageDirection.serverToClient,u.type=new e.ProtocolNotificationType(u.method)})(Fe||(t.ShowMessageNotification=Fe={}));var de;(function(u){u.method="window/showMessageRequest",u.messageDirection=e.MessageDirection.serverToClient,u.type=new e.ProtocolRequestType(u.method)})(de||(t.ShowMessageRequest=de={}));var qe;(function(u){u.method="window/logMessage",u.messageDirection=e.MessageDirection.serverToClient,u.type=new e.ProtocolNotificationType(u.method)})(qe||(t.LogMessageNotification=qe={}));var Ee;(function(u){u.method="telemetry/event",u.messageDirection=e.MessageDirection.serverToClient,u.type=new e.ProtocolNotificationType(u.method)})(Ee||(t.TelemetryEventNotification=Ee={}));var V;(function(u){u.None=0,u.Full=1,u.Incremental=2})(V||(t.TextDocumentSyncKind=V={}));var De;(function(u){u.method="textDocument/didOpen",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolNotificationType(u.method)})(De||(t.DidOpenTextDocumentNotification=De={}));var ce;(function(u){function ke(K){let p=K;return p!=null&&typeof p.text=="string"&&p.range!==void 0&&(p.rangeLength===void 0||typeof p.rangeLength=="number")}u.isIncremental=ke;function Se(K){let p=K;return p!=null&&typeof p.text=="string"&&p.range===void 0&&p.rangeLength===void 0}u.isFull=Se})(ce||(t.TextDocumentContentChangeEvent=ce={}));var nt;(function(u){u.method="textDocument/didChange",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolNotificationType(u.method)})(nt||(t.DidChangeTextDocumentNotification=nt={}));var nn;(function(u){u.method="textDocument/didClose",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolNotificationType(u.method)})(nn||(t.DidCloseTextDocumentNotification=nn={}));var Zn;(function(u){u.method="textDocument/didSave",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolNotificationType(u.method)})(Zn||(t.DidSaveTextDocumentNotification=Zn={}));var Qn;(function(u){u.Manual=1,u.AfterDelay=2,u.FocusOut=3})(Qn||(t.TextDocumentSaveReason=Qn={}));var ei;(function(u){u.method="textDocument/willSave",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolNotificationType(u.method)})(ei||(t.WillSaveTextDocumentNotification=ei={}));var ti;(function(u){u.method="textDocument/willSaveWaitUntil",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(ti||(t.WillSaveTextDocumentWaitUntilRequest=ti={}));var kt;(function(u){u.method="workspace/didChangeWatchedFiles",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolNotificationType(u.method)})(kt||(t.DidChangeWatchedFilesNotification=kt={}));var ri;(function(u){u.Created=1,u.Changed=2,u.Deleted=3})(ri||(t.FileChangeType=ri={}));var rs;(function(u){function ke(Se){const K=Se;return n.objectLiteral(K)&&(r.URI.is(K.baseUri)||r.WorkspaceFolder.is(K.baseUri))&&n.string(K.pattern)}u.is=ke})(rs||(t.RelativePattern=rs={}));var ns;(function(u){u.Create=1,u.Change=2,u.Delete=4})(ns||(t.WatchKind=ns={}));var is;(function(u){u.method="textDocument/publishDiagnostics",u.messageDirection=e.MessageDirection.serverToClient,u.type=new e.ProtocolNotificationType(u.method)})(is||(t.PublishDiagnosticsNotification=is={}));var ss;(function(u){u.Invoked=1,u.TriggerCharacter=2,u.TriggerForIncompleteCompletions=3})(ss||(t.CompletionTriggerKind=ss={}));var ni;(function(u){u.method="textDocument/completion",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(ni||(t.CompletionRequest=ni={}));var ii;(function(u){u.method="completionItem/resolve",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(ii||(t.CompletionResolveRequest=ii={}));var Bt;(function(u){u.method="textDocument/hover",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(Bt||(t.HoverRequest=Bt={}));var si;(function(u){u.Invoked=1,u.TriggerCharacter=2,u.ContentChange=3})(si||(t.SignatureHelpTriggerKind=si={}));var os;(function(u){u.method="textDocument/signatureHelp",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(os||(t.SignatureHelpRequest=os={}));var as;(function(u){u.method="textDocument/definition",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(as||(t.DefinitionRequest=as={}));var oi;(function(u){u.method="textDocument/references",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(oi||(t.ReferencesRequest=oi={}));var ai;(function(u){u.method="textDocument/documentHighlight",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(ai||(t.DocumentHighlightRequest=ai={}));var cs;(function(u){u.method="textDocument/documentSymbol",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(cs||(t.DocumentSymbolRequest=cs={}));var ls;(function(u){u.method="textDocument/codeAction",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(ls||(t.CodeActionRequest=ls={}));var us;(function(u){u.method="codeAction/resolve",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(us||(t.CodeActionResolveRequest=us={}));var ds;(function(u){u.method="workspace/symbol",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(ds||(t.WorkspaceSymbolRequest=ds={}));var ps;(function(u){u.method="workspaceSymbol/resolve",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(ps||(t.WorkspaceSymbolResolveRequest=ps={}));var hs;(function(u){u.method="textDocument/codeLens",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(hs||(t.CodeLensRequest=hs={}));var St;(function(u){u.method="codeLens/resolve",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(St||(t.CodeLensResolveRequest=St={}));var fs;(function(u){u.method="workspace/codeLens/refresh",u.messageDirection=e.MessageDirection.serverToClient,u.type=new e.ProtocolRequestType0(u.method)})(fs||(t.CodeLensRefreshRequest=fs={}));var ms;(function(u){u.method="textDocument/documentLink",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(ms||(t.DocumentLinkRequest=ms={}));var wr;(function(u){u.method="documentLink/resolve",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(wr||(t.DocumentLinkResolveRequest=wr={}));var gs;(function(u){u.method="textDocument/formatting",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(gs||(t.DocumentFormattingRequest=gs={}));var sn;(function(u){u.method="textDocument/rangeFormatting",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(sn||(t.DocumentRangeFormattingRequest=sn={}));var ys;(function(u){u.method="textDocument/rangesFormatting",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(ys||(t.DocumentRangesFormattingRequest=ys={}));var Kt;(function(u){u.method="textDocument/onTypeFormatting",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(Kt||(t.DocumentOnTypeFormattingRequest=Kt={}));var lr;(function(u){u.Identifier=1})(lr||(t.PrepareSupportDefaultBehavior=lr={}));var Ts;(function(u){u.method="textDocument/rename",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(Ts||(t.RenameRequest=Ts={}));var vs;(function(u){u.method="textDocument/prepareRename",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(vs||(t.PrepareRenameRequest=vs={}));var ur;(function(u){u.method="workspace/executeCommand",u.messageDirection=e.MessageDirection.clientToServer,u.type=new e.ProtocolRequestType(u.method)})(ur||(t.ExecuteCommandRequest=ur={}));var ci;(function(u){u.method="workspace/applyEdit",u.messageDirection=e.MessageDirection.serverToClient,u.type=new e.ProtocolRequestType("workspace/applyEdit")})(ci||(t.ApplyWorkspaceEditRequest=ci={}))})(Lf);var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.createProtocolConnection=void 0;const Ep=en;function M$(t,e,r,n){return Ep.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Ep.createMessageConnection)(t,e,r,n)}ea.createProtocolConnection=M$;(function(t){var e=Rt&&Rt.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,c,l)}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),r=Rt&&Rt.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,s,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,r(en,t),r(iu,t),r(Y,t),r(Lf,t);var n=ea;Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return n.createProtocolConnection}});var i;(function(s){s.lspReservedErrorRangeStart=-32899,s.RequestFailed=-32803,s.ServerCancelled=-32802,s.ContentModified=-32801,s.RequestCancelled=-32800,s.lspReservedErrorRangeEnd=-32800})(i||(t.LSPErrorCodes=i={}))})(If);(function(t){var e=Rt&&Rt.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,c,l)}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),r=Rt&&Rt.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,s,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const n=dd;r(dd,t),r(If,t);function i(s,o,a,c){return(0,n.createMessageConnection)(s,o,a,c)}t.createProtocolConnection=i})(bi);var Ni;(function(t){function e(r){return{dispose:async()=>await r()}}t.create=e})(Ni||(Ni={}));class F${constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new Ui,this.documentPhaseListeners=new Ui,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=H.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.textDocuments=e.workspace.TextDocuments,this.indexManager=e.workspace.IndexManager,this.fileSystemProvider=e.workspace.FileSystemProvider,this.workspaceManager=()=>e.workspace.WorkspaceManager,this.serviceRegistry=e.ServiceRegistry}async build(e,r={},n=ge.None){var i;for(const s of e){const o=s.uri.toString();if(s.state===H.Validated){if(typeof r.validation=="boolean"&&r.validation)this.resetToState(s,H.IndexedReferences);else if(typeof r.validation=="object"){const a=this.findMissingValidationCategories(s,r);a.length>0&&(this.buildState.set(o,{completed:!1,options:{validation:{categories:a}},result:(i=this.buildState.get(o))==null?void 0:i.result}),s.state=H.IndexedReferences)}}else this.buildState.delete(o)}this.currentState=H.Changed,await this.emitUpdate(e.map(s=>s.uri),[]),await this.buildDocuments(e,r,n)}async update(e,r,n=ge.None){this.currentState=H.Changed;const i=[];for(const c of r){const l=this.langiumDocuments.deleteDocuments(c);for(const d of l)i.push(d.uri),this.cleanUpDeleted(d)}const s=(await Promise.all(e.map(c=>this.findChangedUris(c)))).flat();for(const c of s){let l=this.langiumDocuments.getDocument(c);l===void 0&&(l=this.langiumDocumentFactory.fromModel({$type:"INVALID"},c),l.state=H.Changed,this.langiumDocuments.addDocument(l)),this.resetToState(l,H.Changed)}const o=fe(s).concat(i).map(c=>c.toString()).toSet();this.langiumDocuments.all.filter(c=>!o.has(c.uri.toString())&&this.shouldRelink(c,o)).forEach(c=>this.resetToState(c,H.ComputedScopes)),await this.emitUpdate(s,i),await Ze(n);const a=this.sortDocuments(this.langiumDocuments.all.filter(c=>{var l;return c.state<H.Validated||!((l=this.buildState.get(c.uri.toString()))!=null&&l.completed)||this.resultsAreIncomplete(c,this.updateBuildOptions)}).toArray());await this.buildDocuments(a,this.updateBuildOptions,n)}resultsAreIncomplete(e,r){return this.findMissingValidationCategories(e,r).length>=1}findMissingValidationCategories(e,r){var n,i;const s=this.buildState.get(e.uri.toString()),o=this.serviceRegistry.getServices(e.uri).validation.ValidationRegistry.getAllValidationCategories(e),a=(n=s==null?void 0:s.result)!=null&&n.validationChecks?new Set((i=s==null?void 0:s.result)==null?void 0:i.validationChecks):s!=null&&s.completed?o:new Set,c=r===void 0||r.validation===!0?o:typeof r.validation=="object"?r.validation.categories??o:[];return fe(c).filter(l=>!a.has(l)).toArray()}async findChangedUris(e){var r;if(this.langiumDocuments.getDocument(e)??((r=this.textDocuments)==null?void 0:r.get(e)))return[e];try{const n=await this.fileSystemProvider.stat(e);if(n.isDirectory)return await this.workspaceManager().searchFolder(e);if(this.workspaceManager().shouldIncludeEntry(n))return[e]}catch{}return[]}async emitUpdate(e,r){await Promise.all(this.updateListeners.map(n=>n(e,r)))}sortDocuments(e){let r=0,n=e.length-1;for(;r<n;){for(;r<e.length&&this.hasTextDocument(e[r]);)r++;for(;n>=0&&!this.hasTextDocument(e[n]);)n--;r<n&&([e[r],e[n]]=[e[n],e[r]])}return e}hasTextDocument(e){var r;return!!((r=this.textDocuments)!=null&&r.get(e.uri))}shouldRelink(e,r){return e.references.some(n=>n.error!==void 0)?!0:this.indexManager.isAffected(e,r)}onUpdate(e){return this.updateListeners.push(e),Ni.create(()=>{const r=this.updateListeners.indexOf(e);r>=0&&this.updateListeners.splice(r,1)})}resetToState(e,r){switch(r){case H.Changed:case H.Parsed:this.indexManager.removeContent(e.uri);case H.IndexedContent:e.localSymbols=void 0;case H.ComputedScopes:this.serviceRegistry.getServices(e.uri).references.Linker.unlink(e);case H.Linked:this.indexManager.removeReferences(e.uri);case H.IndexedReferences:e.diagnostics=void 0,this.buildState.delete(e.uri.toString());case H.Validated:}e.state>r&&(e.state=r)}cleanUpDeleted(e){this.buildState.delete(e.uri.toString()),this.indexManager.remove(e.uri),e.state=H.Changed}async buildDocuments(e,r,n){this.prepareBuild(e,r),await this.runCancelable(e,H.Parsed,n,o=>this.langiumDocumentFactory.update(o,n)),await this.runCancelable(e,H.IndexedContent,n,o=>this.indexManager.updateContent(o,n)),await this.runCancelable(e,H.ComputedScopes,n,async o=>{const a=this.serviceRegistry.getServices(o.uri).references.ScopeComputation;o.localSymbols=await a.collectLocalSymbols(o,n)});const i=e.filter(o=>this.shouldLink(o));await this.runCancelable(i,H.Linked,n,o=>this.serviceRegistry.getServices(o.uri).references.Linker.link(o,n)),await this.runCancelable(i,H.IndexedReferences,n,o=>this.indexManager.updateReferences(o,n));const s=e.filter(o=>this.shouldValidate(o)?!0:(this.markAsCompleted(o),!1));await this.runCancelable(s,H.Validated,n,async o=>{await this.validate(o,n),this.markAsCompleted(o)})}markAsCompleted(e){const r=this.buildState.get(e.uri.toString());r&&(r.completed=!0)}prepareBuild(e,r){for(const n of e){const i=n.uri.toString(),s=this.buildState.get(i);(!s||s.completed)&&this.buildState.set(i,{completed:!1,options:r,result:s==null?void 0:s.result})}}async runCancelable(e,r,n,i){for(const o of e)o.state<r&&(await Ze(n),await i(o),o.state=r,await this.notifyDocumentPhase(o,r,n));const s=e.filter(o=>o.state===r);await this.notifyBuildPhase(s,r,n),this.currentState=r}onBuildPhase(e,r){return this.buildPhaseListeners.add(e,r),Ni.create(()=>{this.buildPhaseListeners.delete(e,r)})}onDocumentPhase(e,r){return this.documentPhaseListeners.add(e,r),Ni.create(()=>{this.documentPhaseListeners.delete(e,r)})}waitUntil(e,r,n){let i;return r&&"path"in r?i=r:n=r,n??(n=ge.None),i?this.awaitDocumentState(e,i,n):this.awaitBuilderState(e,n)}awaitDocumentState(e,r,n){const i=this.langiumDocuments.getDocument(r);if(i){if(i.state>=e)return Promise.resolve(r);if(n.isCancellationRequested)return Promise.reject(Cn);if(this.currentState>=e&&e>i.state)return Promise.reject(new bi.ResponseError(bi.LSPErrorCodes.RequestFailed,`Document state of ${r.toString()} is ${H[i.state]}, requiring ${H[e]}, but workspace state is already ${H[this.currentState]}. Returning undefined.`))}else return Promise.reject(new bi.ResponseError(bi.LSPErrorCodes.ServerCancelled,`No document found for URI: ${r.toString()}`));return new Promise((s,o)=>{const a=this.onDocumentPhase(e,l=>{pt.equals(l.uri,r)&&(a.dispose(),c.dispose(),s(l.uri))}),c=n.onCancellationRequested(()=>{a.dispose(),c.dispose(),o(Cn)})})}awaitBuilderState(e,r){return this.currentState>=e?Promise.resolve():r.isCancellationRequested?Promise.reject(Cn):new Promise((n,i)=>{const s=this.onBuildPhase(e,()=>{s.dispose(),o.dispose(),n()}),o=r.onCancellationRequested(()=>{s.dispose(),o.dispose(),i(Cn)})})}async notifyDocumentPhase(e,r,n){const i=this.documentPhaseListeners.get(r).slice();for(const s of i)try{await Ze(n),await s(e,n)}catch(o){if(!Go(o))throw o}}async notifyBuildPhase(e,r,n){if(e.length===0)return;const i=this.buildPhaseListeners.get(r).slice();for(const s of i)await Ze(n),await s(e,n)}shouldLink(e){return this.getBuildOptions(e).eagerLinking??!0}shouldValidate(e){return!!this.getBuildOptions(e).validation}async validate(e,r){const n=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,i=this.getBuildOptions(e),s=typeof i.validation=="object"?{...i.validation}:{};s.categories=this.findMissingValidationCategories(e,i);const o=await n.validateDocument(e,s,r);e.diagnostics?e.diagnostics.push(...o):e.diagnostics=o;const a=this.buildState.get(e.uri.toString());a&&(a.result??(a.result={}),a.result.validationChecks?a.result.validationChecks=fe(a.result.validationChecks).concat(s.categories).distinct().toArray():a.result.validationChecks=[...s.categories])}getBuildOptions(e){var r;return((r=this.buildState.get(e.uri.toString()))==null?void 0:r.options)??{}}}class q${constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new RR,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,r){const n=Zt(e).uri,i=[];return this.referenceIndex.forEach(s=>{s.forEach(o=>{pt.equals(o.targetUri,n)&&o.targetPath===r&&i.push(o)})}),fe(i)}allElements(e,r){let n=fe(this.symbolIndex.keys());return r&&(n=n.filter(i=>!r||r.has(i))),n.map(i=>this.getFileDescriptions(i,e)).flat()}getFileDescriptions(e,r){return r?this.symbolByTypeIndex.get(e,r,()=>(this.symbolIndex.get(e)??[]).filter(n=>this.astReflection.isSubtype(n.type,r))):this.symbolIndex.get(e)??[]}remove(e){this.removeContent(e),this.removeReferences(e)}removeContent(e){const r=e.toString();this.symbolIndex.delete(r),this.symbolByTypeIndex.clear(r)}removeReferences(e){const r=e.toString();this.referenceIndex.delete(r)}async updateContent(e,r=ge.None){const n=await this.serviceRegistry.getServices(e.uri).references.ScopeComputation.collectExportedSymbols(e,r),i=e.uri.toString();this.symbolIndex.set(i,n),this.symbolByTypeIndex.clear(i)}async updateReferences(e,r=ge.None){const n=await this.serviceRegistry.getServices(e.uri).workspace.ReferenceDescriptionProvider.createDescriptions(e,r);this.referenceIndex.set(e.uri.toString(),n)}isAffected(e,r){const n=this.referenceIndex.get(e.uri.toString());return n?n.some(i=>!i.local&&r.has(i.targetUri.toString())):!1}}class j${constructor(e){this.initialBuildOptions={},this._ready=new tu,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(e){this.folders=e.workspaceFolders??void 0}initialized(e){return this.mutex.write(r=>this.initializeWorkspace(this.folders??[],r))}async initializeWorkspace(e,r=ge.None){const n=await this.performStartup(e);await Ze(r),await this.documentBuilder.build(n,this.initialBuildOptions,r)}async performStartup(e){const r=[],n=o=>{r.push(o),this.langiumDocuments.hasDocument(o.uri)||this.langiumDocuments.addDocument(o)};await this.loadAdditionalDocuments(e,n);const i=[];await Promise.all(e.map(o=>this.getRootFolder(o)).map(async o=>this.traverseFolder(o,i)));const s=fe(i).distinct(o=>o.toString()).filter(o=>!this.langiumDocuments.hasDocument(o));return await this.loadWorkspaceDocuments(s,n),this._ready.resolve(),r}async loadWorkspaceDocuments(e,r){await Promise.all(e.map(async n=>{const i=await this.langiumDocuments.getOrCreateDocument(n);r(i)}))}loadAdditionalDocuments(e,r){return Promise.resolve()}getRootFolder(e){return wt.parse(e.uri)}async traverseFolder(e,r){try{const n=await this.fileSystemProvider.readDirectory(e);await Promise.all(n.map(async i=>{this.shouldIncludeEntry(i)&&(i.isDirectory?await this.traverseFolder(i.uri,r):i.isFile&&r.push(i.uri))}))}catch(n){console.error("Failure to read directory content of "+e.toString(!0),n)}}async searchFolder(e){const r=[];return await this.traverseFolder(e,r),r}shouldIncludeEntry(e){const r=pt.basename(e.uri);return r.startsWith(".")?!1:e.isDirectory?r!=="node_modules"&&r!=="out":e.isFile?this.serviceRegistry.hasServices(e.uri):!1}}class U${buildUnexpectedCharactersMessage(e,r,n,i,s){return ec.buildUnexpectedCharactersMessage(e,r,n,i,s)}buildUnableToPopLexerModeMessage(e){return ec.buildUnableToPopLexerModeMessage(e)}}const G$={mode:"full"};class z${constructor(e){this.errorMessageProvider=e.parser.LexerErrorMessageProvider,this.tokenBuilder=e.parser.TokenBuilder;const r=this.tokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(r);const n=kp(r)?Object.values(r):r,i=e.LanguageMetaData.mode==="production";this.chevrotainLexer=new st(n,{positionTracking:"full",skipValidations:i,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(e,r=G$){var n,i;const s=this.chevrotainLexer.tokenize(e);return{tokens:s.tokens,errors:s.errors,hidden:s.groups.hidden??[],report:(i=(n=this.tokenBuilder).flushLexingReport)==null?void 0:i.call(n,e)}}toTokenTypeDictionary(e){if(kp(e))return e;const r=Of(e)?Object.values(e.modes).flat():e,n={};return r.forEach(i=>n[i.name]=i),n}}function B$(t){return Array.isArray(t)&&(t.length===0||"name"in t[0])}function Of(t){return t&&"modes"in t&&"defaultMode"in t}function kp(t){return!B$(t)&&!Of(t)}function K$(t,e,r){let n,i;typeof t=="string"?(i=e,n=r):(i=t.range.start,n=e),i||(i=ee.create(0,0));const s=Mf(t),o=su(n),a=H$({lines:s,position:i,options:o});return Q$({index:0,tokens:a,position:i})}function W$(t,e){const r=su(e),n=Mf(t);if(n.length===0)return!1;const i=n[0],s=n[n.length-1],o=r.start,a=r.end;return!!(o!=null&&o.exec(i))&&!!(a!=null&&a.exec(s))}function Mf(t){let e="";return typeof t=="string"?e=t:e=t.text,e.split(hg)}const Sp=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,V$=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function H$(t){var e,r,n;const i=[];let s=t.position.line,o=t.position.character;for(let a=0;a<t.lines.length;a++){const c=a===0,l=a===t.lines.length-1;let d=t.lines[a],h=0;if(c&&t.options.start){const f=(e=t.options.start)==null?void 0:e.exec(d);f&&(h=f.index+f[0].length)}else{const f=(r=t.options.line)==null?void 0:r.exec(d);f&&(h=f.index+f[0].length)}if(l){const f=(n=t.options.end)==null?void 0:n.exec(d);f&&(d=d.substring(0,f.index))}if(d=d.substring(0,Z$(d)),Sl(d,h)>=d.length){if(i.length>0){const f=ee.create(s,o);i.push({type:"break",content:"",range:X.create(f,f)})}}else{Sp.lastIndex=h;const f=Sp.exec(d);if(f){const $=f[0],S=f[1],b=ee.create(s,o+h),F=ee.create(s,o+h+$.length);i.push({type:"tag",content:S,range:X.create(b,F)}),h+=$.length,h=Sl(d,h)}if(h<d.length){const $=d.substring(h),S=Array.from($.matchAll(V$));i.push(...Y$(S,$,s,o+h))}}s++,o=0}return i.length>0&&i[i.length-1].type==="break"?i.slice(0,-1):i}function Y$(t,e,r,n){const i=[];if(t.length===0){const s=ee.create(r,n),o=ee.create(r,n+e.length);i.push({type:"text",content:e,range:X.create(s,o)})}else{let s=0;for(const a of t){const c=a.index,l=e.substring(s,c);l.length>0&&i.push({type:"text",content:e.substring(s,c),range:X.create(ee.create(r,s+n),ee.create(r,c+n))});let d=l.length+1;const h=a[1];if(i.push({type:"inline-tag",content:h,range:X.create(ee.create(r,s+d+n),ee.create(r,s+d+h.length+n))}),d+=h.length,a.length===4){d+=a[2].length;const f=a[3];i.push({type:"text",content:f,range:X.create(ee.create(r,s+d+n),ee.create(r,s+d+f.length+n))})}else i.push({type:"text",content:"",range:X.create(ee.create(r,s+d+n),ee.create(r,s+d+n))});s=c+a[0].length}const o=e.substring(s);o.length>0&&i.push({type:"text",content:o,range:X.create(ee.create(r,s+n),ee.create(r,s+n+o.length))})}return i}const X$=/\S/,J$=/\s*$/;function Sl(t,e){const r=t.substring(e).match(X$);return r?e+r.index:t.length}function Z$(t){const e=t.match(J$);if(e&&typeof e.index=="number")return e.index}function Q$(t){var e,r;const n=ee.create(t.position.line,t.position.character);if(t.tokens.length===0)return new Ap([],X.create(n,n));const i=[];for(;t.index<t.tokens.length;){const a=eE(t,i[i.length-1]);a&&i.push(a)}const s=((e=i[0])==null?void 0:e.range.start)??n,o=((r=i[i.length-1])==null?void 0:r.range.end)??n;return new Ap(i,X.create(s,o))}function eE(t,e){const r=t.tokens[t.index];if(r.type==="tag")return qf(t,!1);if(r.type==="text"||r.type==="inline-tag")return Ff(t);tE(r,e),t.index++}function tE(t,e){if(e){const r=new Uf("",t.range);"inlines"in e?e.inlines.push(r):e.content.inlines.push(r)}}function Ff(t){let e=t.tokens[t.index];const r=e;let n=e;const i=[];for(;e&&e.type!=="break"&&e.type!=="tag";)i.push(rE(t)),n=e,e=t.tokens[t.index];return new Al(i,X.create(r.range.start,n.range.end))}function rE(t){return t.tokens[t.index].type==="inline-tag"?qf(t,!0):jf(t)}function qf(t,e){const r=t.tokens[t.index++],n=r.content.substring(1),i=t.tokens[t.index];if((i==null?void 0:i.type)==="text")if(e){const s=jf(t);return new ya(n,new Al([s],s.range),e,X.create(r.range.start,s.range.end))}else{const s=Ff(t);return new ya(n,s,e,X.create(r.range.start,s.range.end))}else{const s=r.range;return new ya(n,new Al([],s),e,s)}}function jf(t){const e=t.tokens[t.index++];return new Uf(e.content,e.range)}function su(t){if(!t)return su({start:"/**",end:"*/",line:"*"});const{start:e,end:r,line:n}=t;return{start:ga(e,!0),end:ga(r,!1),line:ga(n,!0)}}function ga(t,e){if(typeof t=="string"||typeof t=="object"){const r=typeof t=="string"?_o(t):t.source;return e?new RegExp(`^\\s*${r}`):new RegExp(`\\s*${r}\\s*$`)}else return t}class Ap{constructor(e,r){this.elements=e,this.range=r}getTag(e){return this.getAllTags().find(r=>r.name===e)}getTags(e){return this.getAllTags().filter(r=>r.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(const r of this.elements)if(e.length===0)e=r.toString();else{const n=r.toString();e+=bp(e)+n}return e.trim()}toMarkdown(e){let r="";for(const n of this.elements)if(r.length===0)r=n.toMarkdown(e);else{const i=n.toMarkdown(e);r+=bp(r)+i}return r.trim()}}class ya{constructor(e,r,n,i){this.name=e,this.content=r,this.inline=n,this.range=i}toString(){let e=`@${this.name}`;const r=this.content.toString();return this.content.inlines.length===1?e=`${e} ${r}`:this.content.inlines.length>1&&(e=`${e}
${r}`),this.inline?`{${e}}`:e}toMarkdown(e){var r;return((r=e==null?void 0:e.renderTag)==null?void 0:r.call(e,this))??this.toMarkdownDefault(e)}toMarkdownDefault(e){const r=this.content.toMarkdown(e);if(this.inline){const s=nE(this.name,r,e??{});if(typeof s=="string")return s}let n="";(e==null?void 0:e.tag)==="italic"||(e==null?void 0:e.tag)===void 0?n="*":(e==null?void 0:e.tag)==="bold"?n="**":(e==null?void 0:e.tag)==="bold-italic"&&(n="***");let i=`${n}@${this.name}${n}`;return this.content.inlines.length===1?i=`${i} — ${r}`:this.content.inlines.length>1&&(i=`${i}
${r}`),this.inline?`{${i}}`:i}}function nE(t,e,r){var n;if(t==="linkplain"||t==="linkcode"||t==="link"){const i=e.indexOf(" ");let s=e;if(i>0){const o=Sl(e,i);s=e.substring(o),e=e.substring(0,i)}return(t==="linkcode"||t==="link"&&r.link==="code")&&(s=`\`${s}\``),((n=r.renderLink)==null?void 0:n.call(r,e,s))??iE(e,s)}}function iE(t,e){try{return wt.parse(t,!0),`[${e}](${t})`}catch{return t}}class Al{constructor(e,r){this.inlines=e,this.range=r}toString(){let e="";for(let r=0;r<this.inlines.length;r++){const n=this.inlines[r],i=this.inlines[r+1];e+=n.toString(),i&&i.range.start.line>n.range.start.line&&(e+=`
`)}return e}toMarkdown(e){let r="";for(let n=0;n<this.inlines.length;n++){const i=this.inlines[n],s=this.inlines[n+1];r+=i.toMarkdown(e),s&&s.range.start.line>i.range.start.line&&(r+=`
`)}return r}}class Uf{constructor(e,r){this.text=e,this.range=r}toString(){return this.text}toMarkdown(){return this.text}}function bp(t){return t.endsWith(`
`)?`
`:`

`}class sE{constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){const r=this.commentProvider.getComment(e);if(r&&W$(r))return K$(r).toMarkdown({renderLink:(n,i)=>this.documentationLinkRenderer(e,n,i),renderTag:n=>this.documentationTagRenderer(e,n)})}documentationLinkRenderer(e,r,n){const i=this.findNameInLocalSymbols(e,r)??this.findNameInGlobalScope(e,r);if(i&&i.nameSegment){const s=i.nameSegment.range.start.line+1,o=i.nameSegment.range.start.character+1,a=i.documentUri.with({fragment:`L${s},${o}`});return`[${n}](${a.toString()})`}else return}documentationTagRenderer(e,r){}findNameInLocalSymbols(e,r){const n=Zt(e).localSymbols;if(!n)return;let i=e;do{const s=n.getStream(i).find(o=>o.name===r);if(s)return s;i=i.$container}while(i)}findNameInGlobalScope(e,r){return this.indexManager.allElements().find(n=>n.name===r)}}class oE{constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var r;return kR(e)?e.$comment:(r=cg(e.$cstNode,this.grammarConfig().multilineCommentRules))==null?void 0:r.text}}class aE{constructor(e){this.syncParser=e.parser.LangiumParser}parse(e,r){return Promise.resolve(this.syncParser.parse(e))}}class cE{constructor(){this.previousTokenSource=new eu,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();const r=cR();return this.previousTokenSource=r,this.enqueue(this.writeQueue,e,r.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,r,n=ge.None){const i=new tu,s={action:r,deferred:i,cancellationToken:n};return e.push(s),this.performNextOperation(),i.promise}async performNextOperation(){if(!this.done)return;const e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else if(this.readQueue.length>0)e.push(...this.readQueue.splice(0,this.readQueue.length));else return;this.done=!1,await Promise.all(e.map(async({action:r,deferred:n,cancellationToken:i})=>{try{const s=await Promise.resolve().then(()=>r(i));n.resolve(s)}catch(s){Go(s)?n.resolve(void 0):n.reject(s)}})),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}}class lE{constructor(e){this.grammarElementIdMap=new ed,this.tokenTypeIdMap=new ed,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport?this.dehydrateLexerReport(e.lexerReport):void 0,parserErrors:e.parserErrors.map(r=>({...r,message:r.message})),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}dehydrateLexerReport(e){return e}createDehyrationContext(e){const r=new Map,n=new Map;for(const i of Qt(e))r.set(i,{});if(e.$cstNode)for(const i of Ya(e.$cstNode))n.set(i,{});return{astNodes:r,cstNodes:n}}dehydrateAstNode(e,r){const n=r.astNodes.get(e);n.$type=e.$type,n.$containerIndex=e.$containerIndex,n.$containerProperty=e.$containerProperty,e.$cstNode!==void 0&&(n.$cstNode=this.dehydrateCstNode(e.$cstNode,r));for(const[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){const o=[];n[i]=o;for(const a of s)He(a)?o.push(this.dehydrateAstNode(a,r)):Ct(a)?o.push(this.dehydrateReference(a,r)):o.push(a)}else He(s)?n[i]=this.dehydrateAstNode(s,r):Ct(s)?n[i]=this.dehydrateReference(s,r):s!==void 0&&(n[i]=s);return n}dehydrateReference(e,r){const n={};return n.$refText=e.$refText,e.$refNode&&(n.$refNode=r.cstNodes.get(e.$refNode)),n}dehydrateCstNode(e,r){const n=r.cstNodes.get(e);return Zp(e)?n.fullText=e.fullText:n.grammarSource=this.getGrammarElementId(e.grammarSource),n.hidden=e.hidden,n.astNode=r.astNodes.get(e.astNode),Ii(e)?n.content=e.content.map(i=>this.dehydrateCstNode(i,r)):Jp(e)&&(n.tokenType=e.tokenType.name,n.offset=e.offset,n.length=e.length,n.startLine=e.range.start.line,n.startColumn=e.range.start.character,n.endLine=e.range.end.line,n.endColumn=e.range.end.character),n}hydrate(e){const r=e.value,n=this.createHydrationContext(r);return"$cstNode"in r&&this.hydrateCstNode(r.$cstNode,n),{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport,parserErrors:e.parserErrors,value:this.hydrateAstNode(r,n)}}createHydrationContext(e){const r=new Map,n=new Map;for(const s of Qt(e))r.set(s,{});let i;if(e.$cstNode)for(const s of Ya(e.$cstNode)){let o;"fullText"in s?(o=new lf(s.fullText),i=o):"content"in s?o=new Jl:"tokenType"in s&&(o=this.hydrateCstLeafNode(s)),o&&(n.set(s,o),o.root=i)}return{astNodes:r,cstNodes:n}}hydrateAstNode(e,r){const n=r.astNodes.get(e);n.$type=e.$type,n.$containerIndex=e.$containerIndex,n.$containerProperty=e.$containerProperty,e.$cstNode&&(n.$cstNode=r.cstNodes.get(e.$cstNode));for(const[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){const o=[];n[i]=o;for(const a of s)He(a)?o.push(this.setParent(this.hydrateAstNode(a,r),n)):Ct(a)?o.push(this.hydrateReference(a,n,i,r)):o.push(a)}else He(s)?n[i]=this.setParent(this.hydrateAstNode(s,r),n):Ct(s)?n[i]=this.hydrateReference(s,n,i,r):s!==void 0&&(n[i]=s);return n}setParent(e,r){return e.$container=r,e}hydrateReference(e,r,n,i){return this.linker.buildReference(r,n,i.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,r,n=0){const i=r.cstNodes.get(e);if(typeof e.grammarSource=="number"&&(i.grammarSource=this.getGrammarElement(e.grammarSource)),i.astNode=r.astNodes.get(e.astNode),Ii(i))for(const s of e.content){const o=this.hydrateCstNode(s,r,n++);i.content.push(o)}return i}hydrateCstLeafNode(e){const r=this.getTokenType(e.tokenType),n=e.offset,i=e.length,s=e.startLine,o=e.startColumn,a=e.endLine,c=e.endColumn,l=e.hidden;return new cl(n,i,{start:{line:s,character:o},end:{line:a,character:c}},r,l)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){if(e)return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.getKey(e)}createGrammarElementIdMap(){let e=0;for(const r of Qt(this.grammar))jm(r)&&this.grammarElementIdMap.set(r,e++)}}function br(t){return{documentation:{CommentProvider:e=>new oE(e),DocumentationProvider:e=>new sE(e)},parser:{AsyncParser:e=>new aE(e),GrammarConfig:e=>Dg(e),LangiumParser:e=>Vv(e),CompletionParser:e=>Wv(e),ValueConverter:()=>new Tf,TokenBuilder:()=>new yf,Lexer:e=>new z$(e),ParserErrorMessageProvider:()=>new pf,LexerErrorMessageProvider:()=>new U$},workspace:{AstNodeLocator:()=>new _R,AstNodeDescriptionProvider:e=>new IR(e),ReferenceDescriptionProvider:e=>new LR(e)},references:{Linker:e=>new hR(e),NameProvider:()=>new mR,ScopeProvider:e=>new ER(e),ScopeComputation:e=>new yR(e),References:e=>new gR(e)},serializer:{Hydrator:e=>new lE(e),JsonSerializer:e=>new SR(e)},validation:{DocumentValidator:e=>new xR(e),ValidationRegistry:e=>new bR(e)},shared:()=>t.shared}}function Cr(t){return{ServiceRegistry:e=>new AR(e),workspace:{LangiumDocuments:e=>new pR(e),LangiumDocumentFactory:e=>new dR(e),DocumentBuilder:e=>new F$(e),IndexManager:e=>new q$(e),WorkspaceManager:e=>new j$(e),FileSystemProvider:e=>t.fileSystemProvider(e),WorkspaceLock:()=>new cE,ConfigurationProvider:e=>new PR(e)},profilers:{}}}var Cp;(function(t){t.merge=(e,r)=>Ki(Ki({},e),r)})(Cp||(Cp={}));function Xe(t,e,r,n,i,s,o,a,c){const l=[t,e,r,n,i,s,o,a,c].reduce(Ki,{});return Gf(l)}const uE=Symbol("isProxy");function Gf(t,e){const r=new Proxy({},{deleteProperty:()=>!1,set:()=>{throw new Error("Cannot set property on injected service container")},get:(n,i)=>i===uE?!0:Np(n,i,t,e||r),getOwnPropertyDescriptor:(n,i)=>(Np(n,i,t,e||r),Object.getOwnPropertyDescriptor(n,i)),has:(n,i)=>i in t,ownKeys:()=>[...Object.getOwnPropertyNames(t)]});return r}const xp=Symbol();function Np(t,e,r,n){if(e in t){if(t[e]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable. Cause: "+t[e]);if(t[e]===xp)throw new Error('Cycle detected. Please make "'+String(e)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies');return t[e]}else if(e in r){const i=r[e];t[e]=xp;try{t[e]=typeof i=="function"?i(n):Gf(i,n)}catch(s){throw t[e]=s instanceof Error?s:void 0,s}return t[e]}else return}function Ki(t,e){if(e){for(const[r,n]of Object.entries(e))if(n!=null)if(typeof n=="object"){const i=t[r];typeof i=="object"&&i!==null?t[r]=Ki(i,n):t[r]=Ki({},n)}else t[r]=n}return t}class dE{stat(e){throw new Error("No file system is available.")}statSync(e){throw new Error("No file system is available.")}async exists(){return!1}existsSync(){return!1}readBinary(){throw new Error("No file system is available.")}readBinarySync(){throw new Error("No file system is available.")}readFile(){throw new Error("No file system is available.")}readFileSync(){throw new Error("No file system is available.")}async readDirectory(){return[]}readDirectorySync(){return[]}}const xr={fileSystemProvider:()=>new dE},pE={Grammar:()=>{},LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})},hE={AstReflection:()=>new sh};function fE(){const t=Xe(Cr(xr),hE),e=Xe(br({shared:t}),pE);return t.ServiceRegistry.register(e),e}function tn(t){const e=fE(),r=e.serializer.JsonSerializer.deserialize(t);return e.shared.workspace.LangiumDocumentFactory.fromModel(r,wt.parse(`memory:/${r.name??"grammar"}.langium`)),r}var mE=Object.defineProperty,x=(t,e)=>mE(t,"name",{value:e,configurable:!0}),bl;(t=>{t.Terminals={ARROW_DIRECTION:/L|R|T|B/,ARROW_GROUP:/\{group\}/,ARROW_INTO:/<|>/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,ID:/[\w]([-\w]*\w)?/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/,ARCH_ICON:/\([\w-:]+\)/,ARCH_TITLE:/\[[\w ]+\]/}})(bl||(bl={}));var Cl;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,INT:/0|[1-9][0-9]*(?!\.)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/,REFERENCE:/\w([-\./\w]*[-\w])?/}})(Cl||(Cl={}));var xl;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(xl||(xl={}));var Nl;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,INT:/0|[1-9][0-9]*(?!\.)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(Nl||(Nl={}));var wl;(t=>{t.Terminals={NUMBER_PIE:/(?:-?[0-9]+\.[0-9]+(?!\.))|(?:-?(0|[1-9][0-9]*)(?!\.))/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(wl||(wl={}));var Il;(t=>{t.Terminals={GRATICULE:/circle|polygon/,BOOLEAN:/true|false/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,NUMBER:/(?:[0-9]+\.[0-9]+(?!\.))|(?:0|[1-9][0-9]*(?!\.))/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,ID:/[\w]([-\w]*\w)?/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(Il||(Il={}));var Ll;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,TREEMAP_KEYWORD:/treemap-beta|treemap/,CLASS_DEF:/classDef\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\s+([^;\r\n]*))?(?:;)?/,STYLE_SEPARATOR:/:::/,SEPARATOR:/:/,COMMA:/,/,INDENTATION:/[ \t]{1,}/,WS:/[ \t]+/,ML_COMMENT:/\%\%[^\n]*/,NL:/\r?\n/,ID2:/[a-zA-Z_][a-zA-Z0-9_]*/,NUMBER2:/[0-9_\.\,]+/,STRING2:/"[^"]*"|'[^']*'/}})(Ll||(Ll={}));({...bl.Terminals,...Cl.Terminals,...xl.Terminals,...Nl.Terminals,...wl.Terminals,...Il.Terminals,...Ll.Terminals});var Vt={$type:"Architecture",accDescr:"accDescr",accTitle:"accTitle",edges:"edges",groups:"groups",junctions:"junctions",services:"services",title:"title"};function gE(t){return _t.isInstance(t,Vt.$type)}x(gE,"isArchitecture");var xs={$type:"Axis",label:"label",name:"name"},Ks={$type:"Branch",name:"name",order:"order"};function yE(t){return _t.isInstance(t,Ks.$type)}x(yE,"isBranch");var wp={$type:"Checkout",branch:"branch"},Ns={$type:"CherryPicking",id:"id",parent:"parent",tags:"tags"},Ta={$type:"ClassDefStatement",className:"className",styleText:"styleText"},$n={$type:"Commit",id:"id",message:"message",tags:"tags",type:"type"};function TE(t){return _t.isInstance(t,$n.$type)}x(TE,"isCommit");var ws={$type:"Curve",entries:"entries",label:"label",name:"name"},ln={$type:"Direction",accDescr:"accDescr",accTitle:"accTitle",dir:"dir",statements:"statements",title:"title"},Dt={$type:"Edge",lhsDir:"lhsDir",lhsGroup:"lhsGroup",lhsId:"lhsId",lhsInto:"lhsInto",rhsDir:"rhsDir",rhsGroup:"rhsGroup",rhsId:"rhsId",rhsInto:"rhsInto",title:"title"},va={$type:"Entry",axis:"axis",value:"value"},Ur={$type:"GitGraph",accDescr:"accDescr",accTitle:"accTitle",statements:"statements",title:"title"};function vE(t){return _t.isInstance(t,Ur.$type)}x(vE,"isGitGraph");var gi={$type:"Group",icon:"icon",id:"id",in:"in",title:"title"},xi={$type:"Info",accDescr:"accDescr",accTitle:"accTitle",title:"title"};function RE(t){return _t.isInstance(t,xi.$type)}x(RE,"isInfo");var yi={$type:"Item",classSelector:"classSelector",name:"name"},Ra={$type:"Junction",id:"id",in:"in"},Is={$type:"Leaf",classSelector:"classSelector",name:"name",value:"value"},En={$type:"Merge",branch:"branch",id:"id",tags:"tags",type:"type"};function $E(t){return _t.isInstance(t,En.$type)}x($E,"isMerge");var $a={$type:"Option",name:"name",value:"value"},kn={$type:"Packet",accDescr:"accDescr",accTitle:"accTitle",blocks:"blocks",title:"title"};function EE(t){return _t.isInstance(t,kn.$type)}x(EE,"isPacket");var Sn={$type:"PacketBlock",bits:"bits",end:"end",label:"label",start:"start"};function kE(t){return _t.isInstance(t,Sn.$type)}x(kE,"isPacketBlock");var Gr={$type:"Pie",accDescr:"accDescr",accTitle:"accTitle",sections:"sections",showData:"showData",title:"title"};function SE(t){return _t.isInstance(t,Gr.$type)}x(SE,"isPie");var Ws={$type:"PieSection",label:"label",value:"value"};function AE(t){return _t.isInstance(t,Ws.$type)}x(AE,"isPieSection");var Dr={$type:"Radar",accDescr:"accDescr",accTitle:"accTitle",axes:"axes",curves:"curves",options:"options",title:"title"},Ea={$type:"Section",classSelector:"classSelector",name:"name"},un={$type:"Service",icon:"icon",iconText:"iconText",id:"id",in:"in",title:"title"},dn={$type:"Statement"},An={$type:"Treemap",accDescr:"accDescr",accTitle:"accTitle",title:"title",TreemapRows:"TreemapRows"};function bE(t){return _t.isInstance(t,An.$type)}x(bE,"isTreemap");var ka={$type:"TreemapRow",indent:"indent",item:"item"},Sa,zf=(Sa=class extends Xp{constructor(){super(...arguments),this.types={Architecture:{name:Vt.$type,properties:{accDescr:{name:Vt.accDescr},accTitle:{name:Vt.accTitle},edges:{name:Vt.edges,defaultValue:[]},groups:{name:Vt.groups,defaultValue:[]},junctions:{name:Vt.junctions,defaultValue:[]},services:{name:Vt.services,defaultValue:[]},title:{name:Vt.title}},superTypes:[]},Axis:{name:xs.$type,properties:{label:{name:xs.label},name:{name:xs.name}},superTypes:[]},Branch:{name:Ks.$type,properties:{name:{name:Ks.name},order:{name:Ks.order}},superTypes:[dn.$type]},Checkout:{name:wp.$type,properties:{branch:{name:wp.branch}},superTypes:[dn.$type]},CherryPicking:{name:Ns.$type,properties:{id:{name:Ns.id},parent:{name:Ns.parent},tags:{name:Ns.tags,defaultValue:[]}},superTypes:[dn.$type]},ClassDefStatement:{name:Ta.$type,properties:{className:{name:Ta.className},styleText:{name:Ta.styleText}},superTypes:[]},Commit:{name:$n.$type,properties:{id:{name:$n.id},message:{name:$n.message},tags:{name:$n.tags,defaultValue:[]},type:{name:$n.type}},superTypes:[dn.$type]},Curve:{name:ws.$type,properties:{entries:{name:ws.entries,defaultValue:[]},label:{name:ws.label},name:{name:ws.name}},superTypes:[]},Direction:{name:ln.$type,properties:{accDescr:{name:ln.accDescr},accTitle:{name:ln.accTitle},dir:{name:ln.dir},statements:{name:ln.statements,defaultValue:[]},title:{name:ln.title}},superTypes:[Ur.$type]},Edge:{name:Dt.$type,properties:{lhsDir:{name:Dt.lhsDir},lhsGroup:{name:Dt.lhsGroup,defaultValue:!1},lhsId:{name:Dt.lhsId},lhsInto:{name:Dt.lhsInto,defaultValue:!1},rhsDir:{name:Dt.rhsDir},rhsGroup:{name:Dt.rhsGroup,defaultValue:!1},rhsId:{name:Dt.rhsId},rhsInto:{name:Dt.rhsInto,defaultValue:!1},title:{name:Dt.title}},superTypes:[]},Entry:{name:va.$type,properties:{axis:{name:va.axis,referenceType:xs.$type},value:{name:va.value}},superTypes:[]},GitGraph:{name:Ur.$type,properties:{accDescr:{name:Ur.accDescr},accTitle:{name:Ur.accTitle},statements:{name:Ur.statements,defaultValue:[]},title:{name:Ur.title}},superTypes:[]},Group:{name:gi.$type,properties:{icon:{name:gi.icon},id:{name:gi.id},in:{name:gi.in},title:{name:gi.title}},superTypes:[]},Info:{name:xi.$type,properties:{accDescr:{name:xi.accDescr},accTitle:{name:xi.accTitle},title:{name:xi.title}},superTypes:[]},Item:{name:yi.$type,properties:{classSelector:{name:yi.classSelector},name:{name:yi.name}},superTypes:[]},Junction:{name:Ra.$type,properties:{id:{name:Ra.id},in:{name:Ra.in}},superTypes:[]},Leaf:{name:Is.$type,properties:{classSelector:{name:Is.classSelector},name:{name:Is.name},value:{name:Is.value}},superTypes:[yi.$type]},Merge:{name:En.$type,properties:{branch:{name:En.branch},id:{name:En.id},tags:{name:En.tags,defaultValue:[]},type:{name:En.type}},superTypes:[dn.$type]},Option:{name:$a.$type,properties:{name:{name:$a.name},value:{name:$a.value,defaultValue:!1}},superTypes:[]},Packet:{name:kn.$type,properties:{accDescr:{name:kn.accDescr},accTitle:{name:kn.accTitle},blocks:{name:kn.blocks,defaultValue:[]},title:{name:kn.title}},superTypes:[]},PacketBlock:{name:Sn.$type,properties:{bits:{name:Sn.bits},end:{name:Sn.end},label:{name:Sn.label},start:{name:Sn.start}},superTypes:[]},Pie:{name:Gr.$type,properties:{accDescr:{name:Gr.accDescr},accTitle:{name:Gr.accTitle},sections:{name:Gr.sections,defaultValue:[]},showData:{name:Gr.showData,defaultValue:!1},title:{name:Gr.title}},superTypes:[]},PieSection:{name:Ws.$type,properties:{label:{name:Ws.label},value:{name:Ws.value}},superTypes:[]},Radar:{name:Dr.$type,properties:{accDescr:{name:Dr.accDescr},accTitle:{name:Dr.accTitle},axes:{name:Dr.axes,defaultValue:[]},curves:{name:Dr.curves,defaultValue:[]},options:{name:Dr.options,defaultValue:[]},title:{name:Dr.title}},superTypes:[]},Section:{name:Ea.$type,properties:{classSelector:{name:Ea.classSelector},name:{name:Ea.name}},superTypes:[yi.$type]},Service:{name:un.$type,properties:{icon:{name:un.icon},iconText:{name:un.iconText},id:{name:un.id},in:{name:un.in},title:{name:un.title}},superTypes:[]},Statement:{name:dn.$type,properties:{},superTypes:[]},Treemap:{name:An.$type,properties:{accDescr:{name:An.accDescr},accTitle:{name:An.accTitle},title:{name:An.title},TreemapRows:{name:An.TreemapRows,defaultValue:[]}},superTypes:[]},TreemapRow:{name:ka.$type,properties:{indent:{name:ka.indent},item:{name:ka.item}},superTypes:[]}}}},x(Sa,"MermaidAstReflection"),Sa),_t=new zf,Ip,CE=x(()=>Ip??(Ip=tn(`{"$type":"Grammar","isDeclared":true,"name":"ArchitectureGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Architecture","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"},"parenthesized":false}],"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"},"parenthesized":false}],"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@18"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@19"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[],"types":[]}`)),"ArchitectureGrammarGrammar"),Lp,xE=x(()=>Lp??(Lp=tn(`{"$type":"Grammar","isDeclared":true,"name":"GitGraphGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@14"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","name":"REFERENCE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[],"types":[]}`)),"GitGraphGrammarGrammar"),_p,NE=x(()=>_p??(_p=tn(`{"$type":"Grammar","isDeclared":true,"name":"InfoGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Info","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"?"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@7"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"InfoGrammarGrammar"),Pp,wE=x(()=>Pp??(Pp=tn(`{"$type":"Grammar","isDeclared":true,"name":"PacketGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Packet","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"packet"},{"$type":"Keyword","value":"packet-beta"}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}],"cardinality":"?"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"+"},{"$type":"Assignment","feature":"bits","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]}]},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@9"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"PacketGrammarGrammar"),Dp,IE=x(()=>Dp??(Dp=tn(`{"$type":"Grammar","isDeclared":true,"name":"PieGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Pie","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"FLOAT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?(0|[1-9][0-9]*)(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@2"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@3"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@11"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@12"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"PieGrammarGrammar"),Op,LE=x(()=>Op??(Op=tn(`{"$type":"Grammar","isDeclared":true,"name":"RadarGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Radar","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":"radar-beta:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Keyword","value":"axis"},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"curve"},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Label","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}},{"$type":"Keyword","value":"]"}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"Axis","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Curve","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"},{"$type":"Keyword","value":"{"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Keyword","value":"}"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Entries","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"DetailedEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"axis","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@2"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},"deprecatedSyntax":false,"isMulti":false}},{"$type":"Keyword","value":":","cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"NumberEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Option","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"showLegend"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"ticks"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"max"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"min"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"graticule"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"GRATICULE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"circle"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"polygon"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@16"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[{"$type":"Interface","name":"Entry","attributes":[{"$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"$type":"ReferenceType","referenceType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@2"}},"isMulti":false}},{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"types":[]}`)),"RadarGrammarGrammar"),Mp,_E=x(()=>Mp??(Mp=tn(`{"$type":"Grammar","isDeclared":true,"name":"TreemapGrammar","rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","entry":true,"name":"Treemap","returnType":{"$ref":"#/interfaces@4"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"TreemapRows","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"TREEMAP_KEYWORD","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap-beta"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"CLASS_DEF","definition":{"$type":"RegexToken","regex":"/classDef\\\\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\\\\s+([^;\\\\r\\\\n]*))?(?:;)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STYLE_SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":::"},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":"},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"COMMA","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":","},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INDENTATION","definition":{"$type":"RegexToken","regex":"/[ \\\\t]{1,}/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WS","definition":{"$type":"RegexToken","regex":"/[ \\\\t]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"ML_COMMENT","definition":{"$type":"RegexToken","regex":"/\\\\%\\\\%[^\\\\n]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"NL","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false},{"$type":"ParserRule","name":"TreemapRow","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"indent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"item","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"ClassDef","dataType":"string","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Item","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Section","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Leaf","returnType":{"$ref":"#/interfaces@2"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"ID2","definition":{"$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9_]*/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER2","definition":{"$type":"RegexToken","regex":"/[0-9_\\\\.\\\\,]+/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"MyNumber","dataType":"number","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"STRING2","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[{"$type":"Interface","name":"Item","attributes":[{"$type":"TypeAttribute","name":"name","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"classSelector","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"$type":"Interface","name":"Section","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[]},{"$type":"Interface","name":"Leaf","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}]},{"$type":"Interface","name":"ClassDefStatement","attributes":[{"$type":"TypeAttribute","name":"className","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"styleText","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false}],"superTypes":[]},{"$type":"Interface","name":"Treemap","attributes":[{"$type":"TypeAttribute","name":"TreemapRows","type":{"$type":"ArrayType","elementType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@15"}}},"isOptional":false},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"imports":[],"types":[],"$comment":"/**\\n * Treemap grammar for Langium\\n * Converted from mindmap grammar\\n *\\n * The ML_COMMENT and NL hidden terminals handle whitespace, comments, and newlines\\n * before the treemap keyword, allowing for empty lines and comments before the\\n * treemap declaration.\\n */"}`)),"TreemapGrammarGrammar"),PE={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},DE={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},OE={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},ME={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},FE={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},qE={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},jE={languageId:"treemap",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},rn={AstReflection:x(()=>new zf,"AstReflection")},UE={Grammar:x(()=>CE(),"Grammar"),LanguageMetaData:x(()=>PE,"LanguageMetaData"),parser:{}},GE={Grammar:x(()=>xE(),"Grammar"),LanguageMetaData:x(()=>DE,"LanguageMetaData"),parser:{}},zE={Grammar:x(()=>NE(),"Grammar"),LanguageMetaData:x(()=>OE,"LanguageMetaData"),parser:{}},BE={Grammar:x(()=>wE(),"Grammar"),LanguageMetaData:x(()=>ME,"LanguageMetaData"),parser:{}},KE={Grammar:x(()=>IE(),"Grammar"),LanguageMetaData:x(()=>FE,"LanguageMetaData"),parser:{}},WE={Grammar:x(()=>LE(),"Grammar"),LanguageMetaData:x(()=>qE,"LanguageMetaData"),parser:{}},VE={Grammar:x(()=>_E(),"Grammar"),LanguageMetaData:x(()=>jE,"LanguageMetaData"),parser:{}},HE=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,YE=/accTitle[\t ]*:([^\n\r]*)/,XE=/title([\t ][^\n\r]*|)/,JE={ACC_DESCR:HE,ACC_TITLE:YE,TITLE:XE},Aa,ta=(Aa=class extends Tf{runConverter(t,e,r){let n=this.runCommonConverter(t,e,r);return n===void 0&&(n=this.runCustomConverter(t,e,r)),n===void 0?super.runConverter(t,e,r):n}runCommonConverter(t,e,r){const n=JE[t.name];if(n===void 0)return;const i=n.exec(e);if(i!==null){if(i[1]!==void 0)return i[1].trim().replace(/[\t ]{2,}/gm," ");if(i[2]!==void 0)return i[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},x(Aa,"AbstractMermaidValueConverter"),Aa),ba,ra=(ba=class extends ta{runCustomConverter(t,e,r){}},x(ba,"CommonValueConverter"),ba),Ca,Nr=(Ca=class extends yf{constructor(t){super(),this.keywords=new Set(t)}buildKeywordTokens(t,e,r){const n=super.buildKeywordTokens(t,e,r);return n.forEach(i=>{this.keywords.has(i.name)&&i.PATTERN!==void 0&&(i.PATTERN=new RegExp(i.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),n}},x(Ca,"AbstractMermaidTokenBuilder"),Ca),Fp;Fp=class extends Nr{},x(Fp,"CommonTokenBuilder");var xa,ZE=(xa=class extends Nr{constructor(){super(["gitGraph"])}},x(xa,"GitGraphTokenBuilder"),xa),QE={parser:{TokenBuilder:x(()=>new ZE,"TokenBuilder"),ValueConverter:x(()=>new ra,"ValueConverter")}};function ek(t=xr){const e=Xe(Cr(t),rn),r=Xe(br({shared:e}),GE,QE);return e.ServiceRegistry.register(r),{shared:e,GitGraph:r}}x(ek,"createGitGraphServices");var Na,tk=(Na=class extends Nr{constructor(){super(["info","showInfo"])}},x(Na,"InfoTokenBuilder"),Na),rk={parser:{TokenBuilder:x(()=>new tk,"TokenBuilder"),ValueConverter:x(()=>new ra,"ValueConverter")}};function nk(t=xr){const e=Xe(Cr(t),rn),r=Xe(br({shared:e}),zE,rk);return e.ServiceRegistry.register(r),{shared:e,Info:r}}x(nk,"createInfoServices");var wa,ik=(wa=class extends Nr{constructor(){super(["packet"])}},x(wa,"PacketTokenBuilder"),wa),sk={parser:{TokenBuilder:x(()=>new ik,"TokenBuilder"),ValueConverter:x(()=>new ra,"ValueConverter")}};function ok(t=xr){const e=Xe(Cr(t),rn),r=Xe(br({shared:e}),BE,sk);return e.ServiceRegistry.register(r),{shared:e,Packet:r}}x(ok,"createPacketServices");var Ia,ak=(Ia=class extends Nr{constructor(){super(["pie","showData"])}},x(Ia,"PieTokenBuilder"),Ia),La,ck=(La=class extends ta{runCustomConverter(t,e,r){if(t.name==="PIE_SECTION_LABEL")return e.replace(/"/g,"").trim()}},x(La,"PieValueConverter"),La),lk={parser:{TokenBuilder:x(()=>new ak,"TokenBuilder"),ValueConverter:x(()=>new ck,"ValueConverter")}};function uk(t=xr){const e=Xe(Cr(t),rn),r=Xe(br({shared:e}),KE,lk);return e.ServiceRegistry.register(r),{shared:e,Pie:r}}x(uk,"createPieServices");var _a,dk=(_a=class extends Nr{constructor(){super(["architecture"])}},x(_a,"ArchitectureTokenBuilder"),_a),Pa,pk=(Pa=class extends ta{runCustomConverter(t,e,r){if(t.name==="ARCH_ICON")return e.replace(/[()]/g,"").trim();if(t.name==="ARCH_TEXT_ICON")return e.replace(/["()]/g,"");if(t.name==="ARCH_TITLE")return e.replace(/[[\]]/g,"").trim()}},x(Pa,"ArchitectureValueConverter"),Pa),hk={parser:{TokenBuilder:x(()=>new dk,"TokenBuilder"),ValueConverter:x(()=>new pk,"ValueConverter")}};function fk(t=xr){const e=Xe(Cr(t),rn),r=Xe(br({shared:e}),UE,hk);return e.ServiceRegistry.register(r),{shared:e,Architecture:r}}x(fk,"createArchitectureServices");var Da,mk=(Da=class extends Nr{constructor(){super(["radar-beta"])}},x(Da,"RadarTokenBuilder"),Da),gk={parser:{TokenBuilder:x(()=>new mk,"TokenBuilder"),ValueConverter:x(()=>new ra,"ValueConverter")}};function yk(t=xr){const e=Xe(Cr(t),rn),r=Xe(br({shared:e}),WE,gk);return e.ServiceRegistry.register(r),{shared:e,Radar:r}}x(yk,"createRadarServices");var Oa,Tk=(Oa=class extends Nr{constructor(){super(["treemap"])}},x(Oa,"TreemapTokenBuilder"),Oa),vk=/classDef\s+([A-Z_a-z]\w+)(?:\s+([^\n\r;]*))?;?/,Ma,Rk=(Ma=class extends ta{runCustomConverter(t,e,r){if(t.name==="NUMBER2")return parseFloat(e.replace(/,/g,""));if(t.name==="SEPARATOR"||t.name==="STRING2")return e.substring(1,e.length-1);if(t.name==="INDENTATION")return e.length;if(t.name==="ClassDef"){if(typeof e!="string")return e;const n=vk.exec(e);if(n)return{$type:"ClassDefStatement",className:n[1],styleText:n[2]||void 0}}}},x(Ma,"TreemapValueConverter"),Ma);function Bf(t){const e=t.validation.TreemapValidator,r=t.validation.ValidationRegistry;if(r){const n={Treemap:e.checkSingleRoot.bind(e)};r.register(n,e)}}x(Bf,"registerValidationChecks");var Fa,$k=(Fa=class{checkSingleRoot(t,e){let r;for(const n of t.TreemapRows)n.item&&(r===void 0&&n.indent===void 0?r=0:n.indent===void 0?e("error","Multiple root nodes are not allowed in a treemap.",{node:n,property:"item"}):r!==void 0&&r>=parseInt(n.indent,10)&&e("error","Multiple root nodes are not allowed in a treemap.",{node:n,property:"item"}))}},x(Fa,"TreemapValidator"),Fa),Ek={parser:{TokenBuilder:x(()=>new Tk,"TokenBuilder"),ValueConverter:x(()=>new Rk,"ValueConverter")},validation:{TreemapValidator:x(()=>new $k,"TreemapValidator")}};function kk(t=xr){const e=Xe(Cr(t),rn),r=Xe(br({shared:e}),VE,Ek);return e.ServiceRegistry.register(r),Bf(r),{shared:e,Treemap:r}}x(kk,"createTreemapServices");var Yt={},Sk={info:x(async()=>{const{createInfoServices:t}=await Ir(()=>Lr(()=>import("./info-VBDWY6EO-46dbfd35-952674e0.js"),["assets/info-VBDWY6EO-46dbfd35-952674e0.js","assets/index-1e9f51e4.js","assets/index-882006b9.css","assets/_baseUniq-b0a170bc-42a6419c.js","assets/_basePickBy-2460efa6-bfe75f17.js","assets/clone-6771fede-644de875.js"]),["info-VBDWY6EO-46dbfd35.js","project-1c1f83c8.js","project-18828690.css","_baseUniq-b0a170bc.js","_basePickBy-2460efa6.js","clone-6771fede.js"]),e=t().Info.parser.LangiumParser;Yt.info=e},"info"),packet:x(async()=>{const{createPacketServices:t}=await Ir(()=>Lr(()=>import("./packet-DYOGHKS2-2b74a0a2-0a41f737.js"),["assets/packet-DYOGHKS2-2b74a0a2-0a41f737.js","assets/index-1e9f51e4.js","assets/index-882006b9.css","assets/_baseUniq-b0a170bc-42a6419c.js","assets/_basePickBy-2460efa6-bfe75f17.js","assets/clone-6771fede-644de875.js"]),["packet-DYOGHKS2-2b74a0a2.js","project-1c1f83c8.js","project-18828690.css","_baseUniq-b0a170bc.js","_basePickBy-2460efa6.js","clone-6771fede.js"]),e=t().Packet.parser.LangiumParser;Yt.packet=e},"packet"),pie:x(async()=>{const{createPieServices:t}=await Ir(()=>Lr(()=>import("./pie-VRWISCQL-c4784503-d90e6bca.js"),["assets/pie-VRWISCQL-c4784503-d90e6bca.js","assets/index-1e9f51e4.js","assets/index-882006b9.css","assets/_baseUniq-b0a170bc-42a6419c.js","assets/_basePickBy-2460efa6-bfe75f17.js","assets/clone-6771fede-644de875.js"]),["pie-VRWISCQL-c4784503.js","project-1c1f83c8.js","project-18828690.css","_baseUniq-b0a170bc.js","_basePickBy-2460efa6.js","clone-6771fede.js"]),e=t().Pie.parser.LangiumParser;Yt.pie=e},"pie"),architecture:x(async()=>{const{createArchitectureServices:t}=await Ir(()=>Lr(()=>import("./architecture-7HQA4BMR-aa977409-bfd31acd.js"),["assets/architecture-7HQA4BMR-aa977409-bfd31acd.js","assets/index-1e9f51e4.js","assets/index-882006b9.css","assets/_baseUniq-b0a170bc-42a6419c.js","assets/_basePickBy-2460efa6-bfe75f17.js","assets/clone-6771fede-644de875.js"]),["architecture-7HQA4BMR-aa977409.js","project-1c1f83c8.js","project-18828690.css","_baseUniq-b0a170bc.js","_basePickBy-2460efa6.js","clone-6771fede.js"]),e=t().Architecture.parser.LangiumParser;Yt.architecture=e},"architecture"),gitGraph:x(async()=>{const{createGitGraphServices:t}=await Ir(()=>Lr(()=>import("./gitGraph-G5XIXVHT-7b68c415-64f528d5.js"),["assets/gitGraph-G5XIXVHT-7b68c415-64f528d5.js","assets/index-1e9f51e4.js","assets/index-882006b9.css","assets/_baseUniq-b0a170bc-42a6419c.js","assets/_basePickBy-2460efa6-bfe75f17.js","assets/clone-6771fede-644de875.js"]),["gitGraph-G5XIXVHT-7b68c415.js","project-1c1f83c8.js","project-18828690.css","_baseUniq-b0a170bc.js","_basePickBy-2460efa6.js","clone-6771fede.js"]),e=t().GitGraph.parser.LangiumParser;Yt.gitGraph=e},"gitGraph"),radar:x(async()=>{const{createRadarServices:t}=await Ir(()=>Lr(()=>import("./radar-ZZBFDIW7-7f4e2fd8-b4c6b46c.js"),["assets/radar-ZZBFDIW7-7f4e2fd8-b4c6b46c.js","assets/index-1e9f51e4.js","assets/index-882006b9.css","assets/_baseUniq-b0a170bc-42a6419c.js","assets/_basePickBy-2460efa6-bfe75f17.js","assets/clone-6771fede-644de875.js"]),["radar-ZZBFDIW7-7f4e2fd8.js","project-1c1f83c8.js","project-18828690.css","_baseUniq-b0a170bc.js","_basePickBy-2460efa6.js","clone-6771fede.js"]),e=t().Radar.parser.LangiumParser;Yt.radar=e},"radar"),treemap:x(async()=>{const{createTreemapServices:t}=await Ir(()=>Lr(()=>import("./treemap-GDKQZRPO-501445d9-3d7c1731.js"),["assets/treemap-GDKQZRPO-501445d9-3d7c1731.js","assets/index-1e9f51e4.js","assets/index-882006b9.css","assets/_baseUniq-b0a170bc-42a6419c.js","assets/_basePickBy-2460efa6-bfe75f17.js","assets/clone-6771fede-644de875.js"]),["treemap-GDKQZRPO-501445d9.js","project-1c1f83c8.js","project-18828690.css","_baseUniq-b0a170bc.js","_basePickBy-2460efa6.js","clone-6771fede.js"]),e=t().Treemap.parser.LangiumParser;Yt.treemap=e},"treemap")};async function Ak(t,e){const r=Sk[t];if(!r)throw new Error(`Unknown diagram type: ${t}`);Yt[t]||await r();const n=Yt[t].parse(e);if(n.lexerErrors.length>0||n.parserErrors.length>0)throw new bk(n);return n.value}x(Ak,"parse");var qa,bk=(qa=class extends Error{constructor(t){const e=t.lexerErrors.map(n=>n.message).join(`
`),r=t.parserErrors.map(n=>n.message).join(`
`);super(`Parsing failed: ${e} ${r}`),this.result=t}},x(qa,"MermaidParseError"),qa);export{kk as $,Ek as E,QE as Q,Ak as S,ek as Z,lk as c,hk as f,yk as g,fk as h,sk as i,uk as l,gk as m,nk as n,ok as s,rk as t};
