import{bc as Lh,bd as Mh,be as wp,bf as Fh,aB as qh,ap as jh,b4 as Vl,bg as Hl,bh as Uh,b6 as ae,a as yt,bi as xr,bj as Nr,av as Ip,au as Ge,bk as Gh,b5 as Yr,aq as _p,at as Yl,bl as Op,bm as Pp,ay as zh}from"./index-51dab561.js";import{O as bn,c as Dp,b as Lp,E as Bh,M as j,D as tr,k as Kh,e as Wh,S as Vh,W as De,F as Oe,m as Xe,L as Gn,V as Mp,N as Fp,f as Hh,g as Yh,R as pt,Z as $l,T as Xh,I as Zh}from"./_baseUniq-40c863a3-ba4bbca3.js";import{u as Tt,o as M,x as G,v as An,g as Gr,Z as Ro,h as El,I as Jh,m as Qh}from"./_basePickBy-085c36dd-77a779c7.js";import{a as Be}from"./clone-a6e1a53e-ea0866c6.js";var em=Object.defineProperty,tm=(t,e,r)=>e in t?em(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wr=(t,e,r)=>(tm(t,typeof e!="symbol"?e+"":e,r),r),rm=Object.prototype,nm=rm.hasOwnProperty,im=Lh(function(t,e){if(Mh(e)||wp(e)){Fh(e,bn(e),t);return}for(var r in e)nm.call(e,r)&&qh(t,r,e[r])});const dt=im;function qp(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=t[n+e];return s}function Gi(t){for(var e=-1,r=t==null?0:t.length,n=0,i=[];++e<r;){var s=t[e];s&&(i[n++]=s)}return i}function sm(t,e,r,n){for(var i=-1,s=t==null?0:t.length;++i<s;){var o=t[i];e(n,o,r(o),t)}return n}function om(t,e,r,n){return $l(t,function(i,s,o){e(n,i,r(i),o)}),n}function am(t,e){return function(r,n){var i=Ge(r)?sm:om,s=e?e():{};return i(r,t,Gn(n),s)}}var cm=200;function lm(t,e,r,n){var i=-1,s=Kh,o=!0,a=t.length,c=[],l=e.length;if(!a)return c;r&&(e=Lp(e,Ip(r))),n?(s=Wh,o=!1):e.length>=cm&&(s=Vh,o=!1,e=new Bh(e));e:for(;++i<a;){var u=t[i],p=r==null?u:r(u);if(u=n||u!==0?u:0,o&&p===p){for(var h=l;h--;)if(e[h]===p)continue e;c.push(u)}else s(e,p,n)||c.push(u)}return c}var um=jh(function(t,e){return Vl(t)?lm(t,Dp(e,1,Vl,!0)):[]});const $o=um;function qe(t,e,r){var n=t==null?0:t.length;return n?(e=r||e===void 0?1:Ro(e),qp(t,e<0?0:e,n)):[]}function Ci(t,e,r){var n=t==null?0:t.length;return n?(e=r||e===void 0?1:Ro(e),e=n-e,qp(t,0,e<0?0:e)):[]}function dm(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function pm(t,e){var r=!0;return $l(t,function(n,i,s){return r=!!e(n,i,s),r}),r}function At(t,e,r){var n=Ge(t)?dm:pm;return r&&_p(t,e,r)&&(e=void 0),n(t,Gn(e))}function xt(t){return t&&t.length?t[0]:void 0}function ut(t,e){return Dp(M(t,e),1)}var fm=Object.prototype,hm=fm.hasOwnProperty,mm=am(function(t,e,r){hm.call(t,r)?t[r].push(e):zh(t,r,[e])});const gm=mm;var ym="[object String]";function nt(t){return typeof t=="string"||!Ge(t)&&Op(t)&&Pp(t)==ym}var Tm=Math.max;function Qe(t,e,r,n){t=wp(t)?t:Oe(t),r=r&&!n?Ro(r):0;var i=t.length;return r<0&&(r=Tm(i+r,0)),nt(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&Mp(t,e,r)>-1}var vm=Math.max;function Xl(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Ro(r);return i<0&&(i=vm(n+i,0)),Mp(t,e,i)}var Rm="[object RegExp]";function $m(t){return Op(t)&&Pp(t)==Rm}var Zl=Hl&&Hl.isRegExp,Em=Zl?Ip(Zl):$m;const rr=Em;var km="Expected a function";function Sm(t){if(typeof t!="function")throw new TypeError(km);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Nt(t,e){if(t==null)return{};var r=Lp(Hh(t),function(n){return[n]});return e=Gn(e),Jh(t,r,function(n,i){return e(n,i[0])})}function Eo(t,e){var r=Ge(t)?Xh:Zh;return r(t,Sm(Gn(e)))}function bm(t,e){var r;return $l(t,function(n,i,s){return r=e(n,i,s),!r}),!!r}function jp(t,e,r){var n=Ge(t)?Yh:bm;return r&&_p(t,e,r)&&(e=void 0),n(t,Gn(e))}function kl(t){return t&&t.length?Fp(t):[]}function Am(t,e){return t&&t.length?Fp(t,Gn(e)):[]}function We(t){return typeof t=="object"&&t!==null&&typeof t.$type=="string"}function St(t){return typeof t=="object"&&t!==null&&typeof t.$refText=="string"&&"ref"in t}function dr(t){return typeof t=="object"&&t!==null&&typeof t.$refText=="string"&&"items"in t}function Cm(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.type=="string"&&typeof t.path=="string"}function ii(t){return typeof t=="object"&&t!==null&&typeof t.info=="object"&&typeof t.message=="string"}class Up{constructor(){this.subtypes={},this.allSubtypes={}}getAllTypes(){return Object.keys(this.types)}getReferenceType(e){var r;const n=this.types[e.container.$type];if(!n)throw new Error(`Type ${e.container.$type||"undefined"} not found.`);const i=(r=n.properties[e.property])==null?void 0:r.referenceType;if(!i)throw new Error(`Property ${e.property||"undefined"} of type ${e.container.$type} is not a reference.`);return i}getTypeMetaData(e){return this.types[e]||{name:e,properties:{},superTypes:[]}}isInstance(e,r){return We(e)&&this.isSubtype(e.$type,r)}isSubtype(e,r){if(e===r)return!0;let n=this.subtypes[e];n||(n=this.subtypes[e]={});const i=n[r];if(i!==void 0)return i;{const s=this.types[e],o=s?s.superTypes.some(a=>this.isSubtype(a,r)):!1;return n[r]=o,o}}getAllSubTypes(e){const r=this.allSubtypes[e];if(r)return r;{const n=this.getAllTypes(),i=[];for(const s of n)this.isSubtype(s,e)&&i.push(s);return this.allSubtypes[e]=i,i}}}function xi(t){return typeof t=="object"&&t!==null&&Array.isArray(t.content)}function Gp(t){return typeof t=="object"&&t!==null&&typeof t.tokenType=="object"}function zp(t){return xi(t)&&typeof t.fullText=="string"}class je{constructor(e,r){this.startFn=e,this.nextFn=r}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){const e=this.iterator();let r=0,n=e.next();for(;!n.done;)r++,n=e.next();return r}toArray(){const e=[],r=this.iterator();let n;do n=r.next(),n.value!==void 0&&e.push(n.value);while(!n.done);return e}toSet(){return new Set(this)}toMap(e,r){const n=this.map(i=>[e?e(i):i,r?r(i):i]);return new Map(n)}toString(){return this.join()}concat(e){return new je(()=>({first:this.startFn(),firstDone:!1,iterator:e[Symbol.iterator]()}),r=>{let n;if(!r.firstDone){do if(n=this.nextFn(r.first),!n.done)return n;while(!n.done);r.firstDone=!0}do if(n=r.iterator.next(),!n.done)return n;while(!n.done);return ct})}join(e=","){const r=this.iterator();let n="",i,s=!1;do i=r.next(),i.done||(s&&(n+=e),n+=xm(i.value)),s=!0;while(!i.done);return n}indexOf(e,r=0){const n=this.iterator();let i=0,s=n.next();for(;!s.done;){if(i>=r&&s.value===e)return i;s=n.next(),i++}return-1}every(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(!e(n.value))return!1;n=r.next()}return!0}some(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(e(n.value))return!0;n=r.next()}return!1}forEach(e){const r=this.iterator();let n=0,i=r.next();for(;!i.done;)e(i.value,n),i=r.next(),n++}map(e){return new je(this.startFn,r=>{const{done:n,value:i}=this.nextFn(r);return n?ct:{done:!1,value:e(i)}})}filter(e){return new je(this.startFn,r=>{let n;do if(n=this.nextFn(r),!n.done&&e(n.value))return n;while(!n.done);return ct})}nonNullable(){return this.filter(e=>e!=null)}reduce(e,r){const n=this.iterator();let i=r,s=n.next();for(;!s.done;)i===void 0?i=s.value:i=e(i,s.value),s=n.next();return i}reduceRight(e,r){return this.recursiveReduce(this.iterator(),e,r)}recursiveReduce(e,r,n){const i=e.next();if(i.done)return n;const s=this.recursiveReduce(e,r,n);return s===void 0?i.value:r(s,i.value)}find(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(e(n.value))return n.value;n=r.next()}}findIndex(e){const r=this.iterator();let n=0,i=r.next();for(;!i.done;){if(e(i.value))return n;i=r.next(),n++}return-1}includes(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(n.value===e)return!0;n=r.next()}return!1}flatMap(e){return new je(()=>({this:this.startFn()}),r=>{do{if(r.iterator){const s=r.iterator.next();if(s.done)r.iterator=void 0;else return s}const{done:n,value:i}=this.nextFn(r.this);if(!n){const s=e(i);if(Gs(s))r.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}}while(r.iterator);return ct})}flat(e){if(e===void 0&&(e=1),e<=0)return this;const r=e>1?this.flat(e-1):this;return new je(()=>({this:r.startFn()}),n=>{do{if(n.iterator){const o=n.iterator.next();if(o.done)n.iterator=void 0;else return o}const{done:i,value:s}=r.nextFn(n.this);if(!i)if(Gs(s))n.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}while(n.iterator);return ct})}head(){const e=this.iterator().next();if(!e.done)return e.value}tail(e=1){return new je(()=>{const r=this.startFn();for(let n=0;n<e;n++)if(this.nextFn(r).done)return r;return r},this.nextFn)}limit(e){return new je(()=>({size:0,state:this.startFn()}),r=>(r.size++,r.size>e?ct:this.nextFn(r.state)))}distinct(e){return new je(()=>({set:new Set,internalState:this.startFn()}),r=>{let n;do if(n=this.nextFn(r.internalState),!n.done){const i=e?e(n.value):n.value;if(!r.set.has(i))return r.set.add(i),n}while(!n.done);return ct})}exclude(e,r){const n=new Set;for(const i of e){const s=r?r(i):i;n.add(s)}return this.filter(i=>{const s=r?r(i):i;return!n.has(s)})}}function xm(t){return typeof t=="string"?t:typeof t>"u"?"undefined":typeof t.toString=="function"?t.toString():Object.prototype.toString.call(t)}function Gs(t){return!!t&&typeof t[Symbol.iterator]=="function"}const Bp=new je(()=>{},()=>ct),ct=Object.freeze({done:!0,value:void 0});function he(...t){if(t.length===1){const e=t[0];if(e instanceof je)return e;if(Gs(e))return new je(()=>e[Symbol.iterator](),r=>r.next());if(typeof e.length=="number")return new je(()=>({index:0}),r=>r.index<e.length?{done:!1,value:e[r.index++]}:ct)}return t.length>1?new je(()=>({collIndex:0,arrIndex:0}),e=>{do{if(e.iterator){const r=e.iterator.next();if(!r.done)return r;e.iterator=void 0}if(e.array){if(e.arrIndex<e.array.length)return{done:!1,value:e.array[e.arrIndex++]};e.array=void 0,e.arrIndex=0}if(e.collIndex<t.length){const r=t[e.collIndex++];Gs(r)?e.iterator=r[Symbol.iterator]():r&&typeof r.length=="number"&&(e.array=r)}}while(e.iterator||e.array||e.collIndex<t.length);return ct}):Bp}class zs extends je{constructor(e,r,n){super(()=>({iterators:n!=null&&n.includeRoot?[[e][Symbol.iterator]()]:[r(e)[Symbol.iterator]()],pruned:!1}),i=>{for(i.pruned&&(i.iterators.pop(),i.pruned=!1);i.iterators.length>0;){const s=i.iterators[i.iterators.length-1].next();if(s.done)i.iterators.pop();else return i.iterators.push(r(s.value)[Symbol.iterator]()),s}return ct})}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}}var Ia;(function(t){function e(s){return s.reduce((o,a)=>o+a,0)}t.sum=e;function r(s){return s.reduce((o,a)=>o*a,0)}t.product=r;function n(s){return s.reduce((o,a)=>Math.min(o,a))}t.min=n;function i(s){return s.reduce((o,a)=>Math.max(o,a))}t.max=i})(Ia||(Ia={}));function _a(t,e={}){for(const[r,n]of Object.entries(t))r.startsWith("$")||(Array.isArray(n)?n.forEach((i,s)=>{We(i)&&(i.$container=t,i.$containerProperty=r,i.$containerIndex=s,e.deep&&_a(i,e))}):We(n)&&(n.$container=t,n.$containerProperty=r,e.deep&&_a(n,e)))}function ko(t,e){let r=t;for(;r;){if(e(r))return r;r=r.$container}}function Jt(t){const e=Cs(t).$document;if(!e)throw new Error("AST node has no document.");return e}function Cs(t){for(;t.$container;)t=t.$container;return t}function Jl(t){return St(t)?t.ref?[t.ref]:[]:dr(t)?t.items.map(e=>e.ref):[]}function Sl(t,e){if(!t)throw new Error("Node must be an AstNode.");const r=e==null?void 0:e.range;return new je(()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0}),n=>{for(;n.keyIndex<n.keys.length;){const i=n.keys[n.keyIndex];if(!i.startsWith("$")){const s=t[i];if(We(s)){if(n.keyIndex++,Oa(s,r))return{done:!1,value:s}}else if(Array.isArray(s)){for(;n.arrayIndex<s.length;){const o=n.arrayIndex++,a=s[o];if(We(a)&&Oa(a,r))return{done:!1,value:a}}n.arrayIndex=0}}n.keyIndex++}return ct})}function zi(t,e){if(!t)throw new Error("Root node must be an AstNode.");return new zs(t,r=>Sl(r,e))}function Qt(t,e){if(t){if(e!=null&&e.range&&!Oa(t,e.range))return new zs(t,()=>[])}else throw new Error("Root node must be an AstNode.");return new zs(t,r=>Sl(r,e),{includeRoot:!0})}function Oa(t,e){var r;if(!e)return!0;const n=(r=t.$cstNode)==null?void 0:r.range;return n?Xm(n,e):!1}function Bs(t){return new je(()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0}),e=>{for(;e.keyIndex<e.keys.length;){const r=e.keys[e.keyIndex];if(!r.startsWith("$")){const n=t[r];if(St(n)||dr(n))return e.keyIndex++,{done:!1,value:{reference:n,container:t,property:r}};if(Array.isArray(n)){for(;e.arrayIndex<n.length;){const i=e.arrayIndex++,s=n[i];if(St(s)||dr(n))return{done:!1,value:{reference:s,container:t,property:r,index:i}}}e.arrayIndex=0}}e.keyIndex++}return ct})}function Nm(t,e){const r=t.getTypeMetaData(e.$type),n=e;for(const i of Object.values(r.properties))i.defaultValue!==void 0&&n[i.name]===void 0&&(n[i.name]=Kp(i.defaultValue))}function Kp(t){return Array.isArray(t)?[...t.map(Kp)]:t}const at={$type:"AbstractElement",cardinality:"cardinality"};function wm(t){return Q.isInstance(t,at.$type)}const xs={$type:"AbstractParserRule"};function Bi(t){return Q.isInstance(t,xs.$type)}const ms={$type:"AbstractRule"},Et={$type:"AbstractType"},Pr={$type:"Action",cardinality:"cardinality",feature:"feature",inferredType:"inferredType",operator:"operator",type:"type"};function So(t){return Q.isInstance(t,Pr.$type)}const Ns={$type:"Alternatives",cardinality:"cardinality",elements:"elements"};function Wp(t){return Q.isInstance(t,Ns.$type)}const Ql={$type:"ArrayLiteral",elements:"elements"},eu={$type:"ArrayType",elementType:"elementType"},Dr={$type:"Assignment",cardinality:"cardinality",feature:"feature",operator:"operator",predicate:"predicate",terminal:"terminal"};function zr(t){return Q.isInstance(t,Dr.$type)}const Pa={$type:"BooleanLiteral",true:"true"};function Im(t){return Q.isInstance(t,Pa.$type)}const Lr={$type:"CharacterRange",cardinality:"cardinality",left:"left",lookahead:"lookahead",parenthesized:"parenthesized",right:"right"};function _m(t){return Q.isInstance(t,Lr.$type)}const rn={$type:"Condition"},ws={$type:"Conjunction",left:"left",right:"right"};function Om(t){return Q.isInstance(t,ws.$type)}const Mr={$type:"CrossReference",cardinality:"cardinality",deprecatedSyntax:"deprecatedSyntax",isMulti:"isMulti",terminal:"terminal",type:"type"};function bo(t){return Q.isInstance(t,Mr.$type)}const Is={$type:"Disjunction",left:"left",right:"right"};function Pm(t){return Q.isInstance(t,Is.$type)}const Da={$type:"EndOfFile",cardinality:"cardinality"};function Dm(t){return Q.isInstance(t,Da.$type)}const Ir={$type:"Grammar",imports:"imports",interfaces:"interfaces",isDeclared:"isDeclared",name:"name",rules:"rules",types:"types"},tu={$type:"GrammarImport",path:"path"},ln={$type:"Group",cardinality:"cardinality",elements:"elements",guardCondition:"guardCondition",predicate:"predicate"};function bl(t){return Q.isInstance(t,ln.$type)}const La={$type:"InferredType",name:"name"};function Vp(t){return Q.isInstance(t,La.$type)}const Wt={$type:"InfixRule",call:"call",dataType:"dataType",inferredType:"inferredType",name:"name",operators:"operators",parameters:"parameters",returnType:"returnType"};function Ks(t){return Q.isInstance(t,Wt.$type)}const Yo={$type:"InfixRuleOperatorList",associativity:"associativity",operators:"operators"},ru={$type:"InfixRuleOperators",precedences:"precedences"},gi={$type:"Interface",attributes:"attributes",name:"name",superTypes:"superTypes"};function Lm(t){return Q.isInstance(t,gi.$type)}const yi={$type:"Keyword",cardinality:"cardinality",predicate:"predicate",value:"value"};function Br(t){return Q.isInstance(t,yi.$type)}const gs={$type:"NamedArgument",calledByName:"calledByName",parameter:"parameter",value:"value"},un={$type:"NegatedToken",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",terminal:"terminal"};function Mm(t){return Q.isInstance(t,un.$type)}const Ma={$type:"Negation",value:"value"};function Fm(t){return Q.isInstance(t,Ma.$type)}const nu={$type:"NumberLiteral",value:"value"},ys={$type:"Parameter",name:"name"},Fa={$type:"ParameterReference",parameter:"parameter"};function qm(t){return Q.isInstance(t,Fa.$type)}const Ot={$type:"ParserRule",dataType:"dataType",definition:"definition",entry:"entry",fragment:"fragment",inferredType:"inferredType",name:"name",parameters:"parameters",returnType:"returnType"};function sr(t){return Q.isInstance(t,Ot.$type)}const Xo={$type:"ReferenceType",isMulti:"isMulti",referenceType:"referenceType"},dn={$type:"RegexToken",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",regex:"regex"};function jm(t){return Q.isInstance(t,dn.$type)}const qa={$type:"ReturnType",name:"name"};function Um(t){return Q.isInstance(t,qa.$type)}const pn={$type:"RuleCall",arguments:"arguments",cardinality:"cardinality",predicate:"predicate",rule:"rule"};function Kr(t){return Q.isInstance(t,pn.$type)}const Ti={$type:"SimpleType",primitiveType:"primitiveType",stringType:"stringType",typeRef:"typeRef"};function Gm(t){return Q.isInstance(t,Ti.$type)}const iu={$type:"StringLiteral",value:"value"},fn={$type:"TerminalAlternatives",cardinality:"cardinality",elements:"elements",lookahead:"lookahead",parenthesized:"parenthesized"};function zm(t){return Q.isInstance(t,fn.$type)}const mt={$type:"TerminalElement",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized"},hn={$type:"TerminalGroup",cardinality:"cardinality",elements:"elements",lookahead:"lookahead",parenthesized:"parenthesized"};function Bm(t){return Q.isInstance(t,hn.$type)}const ur={$type:"TerminalRule",definition:"definition",fragment:"fragment",hidden:"hidden",name:"name",type:"type"};function or(t){return Q.isInstance(t,ur.$type)}const mn={$type:"TerminalRuleCall",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",rule:"rule"};function Hp(t){return Q.isInstance(t,mn.$type)}const _s={$type:"Type",name:"name",type:"type"};function Km(t){return Q.isInstance(t,_s.$type)}const si={$type:"TypeAttribute",defaultValue:"defaultValue",isOptional:"isOptional",name:"name",type:"type"},oi={$type:"TypeDefinition"},su={$type:"UnionType",types:"types"},Os={$type:"UnorderedGroup",cardinality:"cardinality",elements:"elements"};function Yp(t){return Q.isInstance(t,Os.$type)}const gn={$type:"UntilToken",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized",terminal:"terminal"};function Wm(t){return Q.isInstance(t,gn.$type)}const ai={$type:"ValueLiteral"},vi={$type:"Wildcard",cardinality:"cardinality",lookahead:"lookahead",parenthesized:"parenthesized"};function Vm(t){return Q.isInstance(t,vi.$type)}class Xp extends Up{constructor(){super(...arguments),this.types={AbstractElement:{name:at.$type,properties:{cardinality:{name:at.cardinality}},superTypes:[]},AbstractParserRule:{name:xs.$type,properties:{},superTypes:[ms.$type,Et.$type]},AbstractRule:{name:ms.$type,properties:{},superTypes:[]},AbstractType:{name:Et.$type,properties:{},superTypes:[]},Action:{name:Pr.$type,properties:{cardinality:{name:Pr.cardinality},feature:{name:Pr.feature},inferredType:{name:Pr.inferredType},operator:{name:Pr.operator},type:{name:Pr.type,referenceType:Et.$type}},superTypes:[at.$type]},Alternatives:{name:Ns.$type,properties:{cardinality:{name:Ns.cardinality},elements:{name:Ns.elements,defaultValue:[]}},superTypes:[at.$type]},ArrayLiteral:{name:Ql.$type,properties:{elements:{name:Ql.elements,defaultValue:[]}},superTypes:[ai.$type]},ArrayType:{name:eu.$type,properties:{elementType:{name:eu.elementType}},superTypes:[oi.$type]},Assignment:{name:Dr.$type,properties:{cardinality:{name:Dr.cardinality},feature:{name:Dr.feature},operator:{name:Dr.operator},predicate:{name:Dr.predicate},terminal:{name:Dr.terminal}},superTypes:[at.$type]},BooleanLiteral:{name:Pa.$type,properties:{true:{name:Pa.true,defaultValue:!1}},superTypes:[rn.$type,ai.$type]},CharacterRange:{name:Lr.$type,properties:{cardinality:{name:Lr.cardinality},left:{name:Lr.left},lookahead:{name:Lr.lookahead},parenthesized:{name:Lr.parenthesized,defaultValue:!1},right:{name:Lr.right}},superTypes:[mt.$type]},Condition:{name:rn.$type,properties:{},superTypes:[]},Conjunction:{name:ws.$type,properties:{left:{name:ws.left},right:{name:ws.right}},superTypes:[rn.$type]},CrossReference:{name:Mr.$type,properties:{cardinality:{name:Mr.cardinality},deprecatedSyntax:{name:Mr.deprecatedSyntax,defaultValue:!1},isMulti:{name:Mr.isMulti,defaultValue:!1},terminal:{name:Mr.terminal},type:{name:Mr.type,referenceType:Et.$type}},superTypes:[at.$type]},Disjunction:{name:Is.$type,properties:{left:{name:Is.left},right:{name:Is.right}},superTypes:[rn.$type]},EndOfFile:{name:Da.$type,properties:{cardinality:{name:Da.cardinality}},superTypes:[at.$type]},Grammar:{name:Ir.$type,properties:{imports:{name:Ir.imports,defaultValue:[]},interfaces:{name:Ir.interfaces,defaultValue:[]},isDeclared:{name:Ir.isDeclared,defaultValue:!1},name:{name:Ir.name},rules:{name:Ir.rules,defaultValue:[]},types:{name:Ir.types,defaultValue:[]}},superTypes:[]},GrammarImport:{name:tu.$type,properties:{path:{name:tu.path}},superTypes:[]},Group:{name:ln.$type,properties:{cardinality:{name:ln.cardinality},elements:{name:ln.elements,defaultValue:[]},guardCondition:{name:ln.guardCondition},predicate:{name:ln.predicate}},superTypes:[at.$type]},InferredType:{name:La.$type,properties:{name:{name:La.name}},superTypes:[Et.$type]},InfixRule:{name:Wt.$type,properties:{call:{name:Wt.call},dataType:{name:Wt.dataType},inferredType:{name:Wt.inferredType},name:{name:Wt.name},operators:{name:Wt.operators},parameters:{name:Wt.parameters,defaultValue:[]},returnType:{name:Wt.returnType,referenceType:Et.$type}},superTypes:[xs.$type]},InfixRuleOperatorList:{name:Yo.$type,properties:{associativity:{name:Yo.associativity},operators:{name:Yo.operators,defaultValue:[]}},superTypes:[]},InfixRuleOperators:{name:ru.$type,properties:{precedences:{name:ru.precedences,defaultValue:[]}},superTypes:[]},Interface:{name:gi.$type,properties:{attributes:{name:gi.attributes,defaultValue:[]},name:{name:gi.name},superTypes:{name:gi.superTypes,defaultValue:[],referenceType:Et.$type}},superTypes:[Et.$type]},Keyword:{name:yi.$type,properties:{cardinality:{name:yi.cardinality},predicate:{name:yi.predicate},value:{name:yi.value}},superTypes:[at.$type]},NamedArgument:{name:gs.$type,properties:{calledByName:{name:gs.calledByName,defaultValue:!1},parameter:{name:gs.parameter,referenceType:ys.$type},value:{name:gs.value}},superTypes:[]},NegatedToken:{name:un.$type,properties:{cardinality:{name:un.cardinality},lookahead:{name:un.lookahead},parenthesized:{name:un.parenthesized,defaultValue:!1},terminal:{name:un.terminal}},superTypes:[mt.$type]},Negation:{name:Ma.$type,properties:{value:{name:Ma.value}},superTypes:[rn.$type]},NumberLiteral:{name:nu.$type,properties:{value:{name:nu.value}},superTypes:[ai.$type]},Parameter:{name:ys.$type,properties:{name:{name:ys.name}},superTypes:[]},ParameterReference:{name:Fa.$type,properties:{parameter:{name:Fa.parameter,referenceType:ys.$type}},superTypes:[rn.$type]},ParserRule:{name:Ot.$type,properties:{dataType:{name:Ot.dataType},definition:{name:Ot.definition},entry:{name:Ot.entry,defaultValue:!1},fragment:{name:Ot.fragment,defaultValue:!1},inferredType:{name:Ot.inferredType},name:{name:Ot.name},parameters:{name:Ot.parameters,defaultValue:[]},returnType:{name:Ot.returnType,referenceType:Et.$type}},superTypes:[xs.$type]},ReferenceType:{name:Xo.$type,properties:{isMulti:{name:Xo.isMulti,defaultValue:!1},referenceType:{name:Xo.referenceType}},superTypes:[oi.$type]},RegexToken:{name:dn.$type,properties:{cardinality:{name:dn.cardinality},lookahead:{name:dn.lookahead},parenthesized:{name:dn.parenthesized,defaultValue:!1},regex:{name:dn.regex}},superTypes:[mt.$type]},ReturnType:{name:qa.$type,properties:{name:{name:qa.name}},superTypes:[]},RuleCall:{name:pn.$type,properties:{arguments:{name:pn.arguments,defaultValue:[]},cardinality:{name:pn.cardinality},predicate:{name:pn.predicate},rule:{name:pn.rule,referenceType:ms.$type}},superTypes:[at.$type]},SimpleType:{name:Ti.$type,properties:{primitiveType:{name:Ti.primitiveType},stringType:{name:Ti.stringType},typeRef:{name:Ti.typeRef,referenceType:Et.$type}},superTypes:[oi.$type]},StringLiteral:{name:iu.$type,properties:{value:{name:iu.value}},superTypes:[ai.$type]},TerminalAlternatives:{name:fn.$type,properties:{cardinality:{name:fn.cardinality},elements:{name:fn.elements,defaultValue:[]},lookahead:{name:fn.lookahead},parenthesized:{name:fn.parenthesized,defaultValue:!1}},superTypes:[mt.$type]},TerminalElement:{name:mt.$type,properties:{cardinality:{name:mt.cardinality},lookahead:{name:mt.lookahead},parenthesized:{name:mt.parenthesized,defaultValue:!1}},superTypes:[at.$type]},TerminalGroup:{name:hn.$type,properties:{cardinality:{name:hn.cardinality},elements:{name:hn.elements,defaultValue:[]},lookahead:{name:hn.lookahead},parenthesized:{name:hn.parenthesized,defaultValue:!1}},superTypes:[mt.$type]},TerminalRule:{name:ur.$type,properties:{definition:{name:ur.definition},fragment:{name:ur.fragment,defaultValue:!1},hidden:{name:ur.hidden,defaultValue:!1},name:{name:ur.name},type:{name:ur.type}},superTypes:[ms.$type]},TerminalRuleCall:{name:mn.$type,properties:{cardinality:{name:mn.cardinality},lookahead:{name:mn.lookahead},parenthesized:{name:mn.parenthesized,defaultValue:!1},rule:{name:mn.rule,referenceType:ur.$type}},superTypes:[mt.$type]},Type:{name:_s.$type,properties:{name:{name:_s.name},type:{name:_s.type}},superTypes:[Et.$type]},TypeAttribute:{name:si.$type,properties:{defaultValue:{name:si.defaultValue},isOptional:{name:si.isOptional,defaultValue:!1},name:{name:si.name},type:{name:si.type}},superTypes:[]},TypeDefinition:{name:oi.$type,properties:{},superTypes:[]},UnionType:{name:su.$type,properties:{types:{name:su.types,defaultValue:[]}},superTypes:[oi.$type]},UnorderedGroup:{name:Os.$type,properties:{cardinality:{name:Os.cardinality},elements:{name:Os.elements,defaultValue:[]}},superTypes:[at.$type]},UntilToken:{name:gn.$type,properties:{cardinality:{name:gn.cardinality},lookahead:{name:gn.lookahead},parenthesized:{name:gn.parenthesized,defaultValue:!1},terminal:{name:gn.terminal}},superTypes:[mt.$type]},ValueLiteral:{name:ai.$type,properties:{},superTypes:[]},Wildcard:{name:vi.$type,properties:{cardinality:{name:vi.cardinality},lookahead:{name:vi.lookahead},parenthesized:{name:vi.parenthesized,defaultValue:!1}},superTypes:[mt.$type]}}}}const Q=new Xp;function ja(t){return new zs(t,e=>xi(e)?e.content:[],{includeRoot:!0})}function Hm(t,e){for(;t.container;)if(t=t.container,t===e)return!0;return!1}function Ua(t){return{start:{character:t.startColumn-1,line:t.startLine-1},end:{character:t.endColumn,line:t.endLine-1}}}function Ws(t){if(!t)return;const{offset:e,end:r,range:n}=t;return{range:n,offset:e,end:r,length:r-e}}var Xt;(function(t){t[t.Before=0]="Before",t[t.After=1]="After",t[t.OverlapFront=2]="OverlapFront",t[t.OverlapBack=3]="OverlapBack",t[t.Inside=4]="Inside",t[t.Outside=5]="Outside"})(Xt||(Xt={}));function Ym(t,e){if(t.end.line<e.start.line||t.end.line===e.start.line&&t.end.character<=e.start.character)return Xt.Before;if(t.start.line>e.end.line||t.start.line===e.end.line&&t.start.character>=e.end.character)return Xt.After;const r=t.start.line>e.start.line||t.start.line===e.start.line&&t.start.character>=e.start.character,n=t.end.line<e.end.line||t.end.line===e.end.line&&t.end.character<=e.end.character;return r&&n?Xt.Inside:r?Xt.OverlapBack:n?Xt.OverlapFront:Xt.Outside}function Xm(t,e){return Ym(t,e)>Xt.After}const Zm=/^[\w\p{L}]$/u;function Jm(t,e){if(t){const r=Qm(t,!0);if(r&&ou(r,e))return r;if(zp(t)){const n=t.content.findIndex(i=>!i.hidden);for(let i=n-1;i>=0;i--){const s=t.content[i];if(ou(s,e))return s}}}}function ou(t,e){return Gp(t)&&e.includes(t.tokenType.name)}function Qm(t,e=!0){for(;t.container;){const r=t.container;let n=r.content.indexOf(t);for(;n>0;){n--;const i=r.content[n];if(e||!i.hidden)return i}t=r}}class Zp extends Error{constructor(e,r){super(e?`${r} at ${e.range.start.line}:${e.range.start.character}`:r)}}function Ki(t,e="Error: Got unexpected value."){throw new Error(e)}function z(t){return t.charCodeAt(0)}function Zo(t,e){Array.isArray(t)?t.forEach(function(r){e.push(r)}):e.push(t)}function ci(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}function nn(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function eg(){throw Error("Internal Error - Should never get here!")}function au(t){return t.type==="Character"}const Vs=[];for(let t=z("0");t<=z("9");t++)Vs.push(t);const Hs=[z("_")].concat(Vs);for(let t=z("a");t<=z("z");t++)Hs.push(t);for(let t=z("A");t<=z("Z");t++)Hs.push(t);const cu=[z(" "),z("\f"),z(`
`),z("\r"),z("	"),z("\v"),z("	"),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z(" "),z("\u2028"),z("\u2029"),z(" "),z(" "),z("　"),z("\uFEFF")],tg=/[0-9a-fA-F]/,Ts=/[0-9]/,rg=/[1-9]/;class Jp{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const r=this.disjunction();this.consumeChar("/");const n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":ci(n,"global");break;case"i":ci(n,"ignoreCase");break;case"m":ci(n,"multiLine");break;case"u":ci(n,"unicode");break;case"y":ci(n,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:r,loc:this.loc(0)}}disjunction(){const e=[],r=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(r)}}alternative(){const e=[],r=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let r;switch(this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":r="Lookbehind";break;case"!":r="NegativeLookbehind"}break}}nn(r);const n=this.disjunction();return this.consumeChar(")"),{type:r,value:n,loc:this.loc(e)}}return eg()}quantifier(e=!1){let r;const n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:i,atMost:i};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),r={atLeast:i,atMost:s}):r={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&r===void 0)return;nn(r);break}if(!(e===!0&&r===void 0)&&nn(r))return this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(n),r}atom(){let e;const r=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),nn(e))return e.loc=this.loc(r),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[z(`
`),z("\r"),z("\u2028"),z("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,r=!1;switch(this.popChar()){case"d":e=Vs;break;case"D":e=Vs,r=!0;break;case"s":e=cu;break;case"S":e=cu,r=!0;break;case"w":e=Hs;break;case"W":e=Hs,r=!0;break}if(nn(e))return{type:"Set",value:e,complement:r}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=z("\f");break;case"n":e=z(`
`);break;case"r":e=z("\r");break;case"t":e=z("	");break;case"v":e=z("\v");break}if(nn(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:z("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:z(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:z(e)}}}characterClass(){const e=[];let r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){const n=this.classAtom();if(n.type,au(n)&&this.isRangeDash()){this.consumeChar("-");const i=this.classAtom();if(i.type,au(i)){if(i.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:i.value})}else Zo(n.value,e),e.push(z("-")),Zo(i.value,e)}else Zo(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:r,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:z("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const r=this.disjunction();this.consumeChar(")");const n={type:"Group",capturing:e,value:r};return e&&(n.idx=this.groupIdx),n}positiveInteger(){let e=this.popChar();if(rg.test(e)===!1)throw Error("Expecting a positive integer");for(;Ts.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Ts.test(e)===!1)throw Error("Expecting an integer");for(;Ts.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:z(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Ts.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let r="";for(let n=0;n<e;n++){const i=this.popChar();if(tg.test(i)===!1)throw Error("Expecting a HexDecimal digits");r+=i}return{type:"Character",value:parseInt(r,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class Ao{visitChildren(e){for(const r in e){const n=e[r];e.hasOwnProperty(r)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}const ng=/\r?\n/gm,ig=new Jp;class sg extends Ao{constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){const r=String.fromCharCode(e.value);if(!this.multiline&&r===`
`&&(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const n=Co(r);this.endRegexpStack.push(n),this.isStarting&&(this.startRegexp+=n)}}visitSet(e){if(!this.multiline){const r=this.regex.substring(e.loc.begin,e.loc.end),n=new RegExp(r);this.multiline=!!`
`.match(n)}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const r=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(r),this.isStarting&&(this.startRegexp+=r)}}visitChildren(e){e.type==="Group"&&e.quantifier||super.visitChildren(e)}}const Jo=new sg;function og(t){try{return typeof t=="string"&&(t=new RegExp(t)),t=t.toString(),Jo.reset(t),Jo.visit(ig.pattern(t)),Jo.multiline}catch{return!1}}const ag=`\f
\r	\v              \u2028\u2029  　\uFEFF`.split("");function Qp(t){const e=typeof t=="string"?new RegExp(t):t;return ag.some(r=>e.test(r))}function Co(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function cg(t,e){const r=lg(t),n=e.match(r);return!!n&&n[0].length>0}function lg(t){typeof t=="string"&&(t=new RegExp(t));const e=t,r=t.source;let n=0;function i(){let s="",o;function a(l){s+=r.substr(n,l),n+=l}function c(l){s+="(?:"+r.substr(n,l)+"|$)",n+=l}for(;n<r.length;)switch(r[n]){case"\\":switch(r[n+1]){case"c":c(3);break;case"x":c(4);break;case"u":e.unicode?r[n+2]==="{"?c(r.indexOf("}",n)-n+1):c(6):c(2);break;case"p":case"P":e.unicode?c(r.indexOf("}",n)-n+1):c(2);break;case"k":c(r.indexOf(">",n)-n+1);break;default:c(2);break}break;case"[":o=/\[(?:\\.|.)*?\]/g,o.lastIndex=n,o=o.exec(r)||[],c(o[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":a(1);break;case"{":o=/\{\d+,?\d*\}/g,o.lastIndex=n,o=o.exec(r),o?a(o[0].length):c(1);break;case"(":if(r[n+1]==="?")switch(r[n+2]){case":":s+="(?:",n+=3,s+=i()+"|$)";break;case"=":s+="(?=",n+=3,s+=i()+")";break;case"!":o=n,n+=3,i(),s+=r.substr(o,n-o);break;case"<":switch(r[n+3]){case"=":case"!":o=n,n+=4,i(),s+=r.substr(o,n-o);break;default:a(r.indexOf(">",n)-n+1),s+=i()+"|$)";break}break}else a(1),s+=i()+"|$)";break;case")":return++n,s;default:c(1);break}return s}return new RegExp(i(),t.flags)}function ug(t){return t.rules.find(e=>sr(e)&&e.entry)}function dg(t){return t.rules.filter(e=>or(e)&&e.hidden)}function ef(t,e){const r=new Set,n=ug(t);if(!n)return new Set(t.rules);const i=[n].concat(dg(t));for(const o of i)tf(o,r,e);const s=new Set;for(const o of t.rules)(r.has(o.name)||or(o)&&o.hidden)&&s.add(o);return s}function tf(t,e,r){e.add(t.name),zi(t).forEach(n=>{if(Kr(n)||r&&Hp(n)){const i=n.rule.ref;i&&!e.has(i.name)&&tf(i,e,r)}})}function pg(t){if(t.terminal)return t.terminal;if(t.type.ref){const e=nf(t.type.ref);return e==null?void 0:e.terminal}}function fg(t){return t.hidden&&!Qp(Cl(t))}function hg(t,e){return!t||!e?[]:Al(t,e,t.astNode,!0)}function rf(t,e,r){if(!t||!e)return;const n=Al(t,e,t.astNode,!0);if(n.length!==0)return r!==void 0?r=Math.max(0,Math.min(r,n.length-1)):r=0,n[r]}function Al(t,e,r,n){if(!n){const i=ko(t.grammarSource,zr);if(i&&i.feature===e)return[t]}return xi(t)&&t.astNode===r?t.content.flatMap(i=>Al(i,e,r,!1)):[]}function mg(t,e,r){if(!t)return;const n=gg(t,e,t==null?void 0:t.astNode);if(n.length!==0)return r!==void 0?r=Math.max(0,Math.min(r,n.length-1)):r=0,n[r]}function gg(t,e,r){if(t.astNode!==r)return[];if(Br(t.grammarSource)&&t.grammarSource.value===e)return[t];const n=ja(t).iterator();let i;const s=[];do if(i=n.next(),!i.done){const o=i.value;o.astNode===r?Br(o.grammarSource)&&o.grammarSource.value===e&&s.push(o):n.prune()}while(!i.done);return s}function yg(t){var e;const r=t.astNode;for(;r===((e=t.container)==null?void 0:e.astNode);){const n=ko(t.grammarSource,zr);if(n)return n;t=t.container}}function nf(t){let e=t;return Vp(e)&&(So(e.$container)?e=e.$container.$container:Bi(e.$container)?e=e.$container:Ki(e.$container)),sf(t,e,new Map)}function sf(t,e,r){var n;function i(s,o){let a;return ko(s,zr)||(a=sf(o,o,r)),r.set(t,a),a}if(r.has(t))return r.get(t);r.set(t,void 0);for(const s of zi(e)){if(zr(s)&&s.feature.toLowerCase()==="name")return r.set(t,s),s;if(Kr(s)&&sr(s.rule.ref))return i(s,s.rule.ref);if(Gm(s)&&(n=s.typeRef)!=null&&n.ref)return i(s,s.typeRef.ref)}}function of(t){return af(t,new Set)}function af(t,e){if(e.has(t))return!0;e.add(t);for(const r of zi(t))if(Kr(r)){if(!r.rule.ref||sr(r.rule.ref)&&!af(r.rule.ref,e)||Ks(r.rule.ref))return!1}else if(zr(r)||So(r))return!1;return!!t.definition}function cf(t){if(!or(t)){if(t.inferredType)return t.inferredType.name;if(t.dataType)return t.dataType;if(t.returnType){const e=t.returnType.ref;if(e)return e.name}}}function Ni(t){if(Bi(t))return sr(t)&&of(t)?t.name:cf(t)??t.name;if(Lm(t)||Km(t)||Um(t))return t.name;if(So(t)){const e=Tg(t);if(e)return e}else if(Vp(t))return t.name;throw new Error("Cannot get name of Unknown Type")}function Tg(t){var e;if(t.inferredType)return t.inferredType.name;if((e=t.type)!=null&&e.ref)return Ni(t.type.ref)}function vg(t){var e;return or(t)?((e=t.type)==null?void 0:e.name)??"string":cf(t)??t.name}function Cl(t){const e={s:!1,i:!1,u:!1},r=zn(t.definition,e),n=Object.entries(e).filter(([,i])=>i).map(([i])=>i).join("");return new RegExp(r,n)}const xl=/[\s\S]/.source;function zn(t,e){var r;if(zm(t))return Rg(t);if(Bm(t))return $g(t);if(_m(t))return Sg(t);if(Hp(t)){const n=t.rule.ref;if(!n)throw new Error("Missing rule reference.");return er(zn(n.definition),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized})}else{if(Mm(t))return kg(t);if(Wm(t))return Eg(t);if(jm(t)){const n=t.regex.lastIndexOf("/"),i=t.regex.substring(1,n),s=t.regex.substring(n+1);return e&&(e.i=s.includes("i"),e.s=s.includes("s"),e.u=s.includes("u")),er(i,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}else{if(Vm(t))return er(xl,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized});throw new Error(`Invalid terminal element: ${t==null?void 0:t.$type}, ${(r=t==null?void 0:t.$cstNode)==null?void 0:r.text}`)}}}function Rg(t){return er(t.elements.map(e=>zn(e)).join("|"),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}function $g(t){return er(t.elements.map(e=>zn(e)).join(""),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}function Eg(t){return er(`${xl}*?${zn(t.terminal)}`,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized})}function kg(t){return er(`(?!${zn(t.terminal)})${xl}*?`,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized})}function Sg(t){return t.right?er(`[${Qo(t.left)}-${Qo(t.right)}]`,{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1}):er(Qo(t.left),{cardinality:t.cardinality,lookahead:t.lookahead,parenthesized:t.parenthesized,wrap:!1})}function Qo(t){return Co(t.value)}function er(t,e){return(e.parenthesized||e.lookahead||e.wrap!==!1)&&(t=`(${e.lookahead??(e.parenthesized?"":"?:")}${t})`),e.cardinality?`${t}${e.cardinality}`:t}function bg(t){const e=[],r=t.Grammar;for(const n of r.rules)or(n)&&fg(n)&&og(Cl(n))&&e.push(n.name);return{multilineCommentRules:e,nameRegexp:Zm}}function Ga(t){console&&console.error&&console.error(`Error: ${t}`)}function lf(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function uf(t){const e=new Date().getTime(),r=t();return{time:new Date().getTime()-e,value:r}}function df(t){function e(){}e.prototype=t;const r=new e;function n(){return typeof r.bar}return n(),n(),t}function Ag(t){return Cg(t)?t.LABEL:t.name}function Cg(t){return nt(t.LABEL)&&t.LABEL!==""}class jt{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),j(this.definition,r=>{r.accept(e)})}}class Ze extends jt{constructor(e){super([]),this.idx=1,dt(this,Nt(e,r=>r!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Bn extends jt{constructor(e){super(e.definition),this.orgText="",dt(this,Nt(e,r=>r!==void 0))}}class it extends jt{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,dt(this,Nt(e,r=>r!==void 0))}}let ze=class extends jt{constructor(t){super(t.definition),this.idx=1,dt(this,Nt(t,e=>e!==void 0))}};class ft extends jt{constructor(e){super(e.definition),this.idx=1,dt(this,Nt(e,r=>r!==void 0))}}class ht extends jt{constructor(e){super(e.definition),this.idx=1,dt(this,Nt(e,r=>r!==void 0))}}class Re extends jt{constructor(e){super(e.definition),this.idx=1,dt(this,Nt(e,r=>r!==void 0))}}class st extends jt{constructor(e){super(e.definition),this.idx=1,dt(this,Nt(e,r=>r!==void 0))}}class ot extends jt{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,dt(this,Nt(e,r=>r!==void 0))}}class ue{constructor(e){this.idx=1,dt(this,Nt(e,r=>r!==void 0))}accept(e){e.visit(this)}}function xg(t){return M(t,Ps)}function Ps(t){function e(r){return M(r,Ps)}if(t instanceof Ze){const r={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return nt(t.label)&&(r.label=t.label),r}else{if(t instanceof it)return{type:"Alternative",definition:e(t.definition)};if(t instanceof ze)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof ft)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof ht)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Ps(new ue({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof st)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Ps(new ue({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Re)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof ot)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof ue){const r={type:"Terminal",name:t.terminalType.name,label:Ag(t.terminalType),idx:t.idx};nt(t.label)&&(r.terminalLabel=t.label);const n=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(r.pattern=rr(n)?n.source:n),r}else{if(t instanceof Bn)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}class Kn{visit(e){const r=e;switch(r.constructor){case Ze:return this.visitNonTerminal(r);case it:return this.visitAlternative(r);case ze:return this.visitOption(r);case ft:return this.visitRepetitionMandatory(r);case ht:return this.visitRepetitionMandatoryWithSeparator(r);case st:return this.visitRepetitionWithSeparator(r);case Re:return this.visitRepetition(r);case ot:return this.visitAlternation(r);case ue:return this.visitTerminal(r);case Bn:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function Ng(t){return t instanceof it||t instanceof ze||t instanceof Re||t instanceof ft||t instanceof ht||t instanceof st||t instanceof ue||t instanceof Bn}function Ys(t,e=[]){return t instanceof ze||t instanceof Re||t instanceof st?!0:t instanceof ot?jp(t.definition,r=>Ys(r,e)):t instanceof Ze&&Qe(e,t)?!1:t instanceof jt?(t instanceof Ze&&e.push(t),At(t.definition,r=>Ys(r,e))):!1}function wg(t){return t instanceof ot}function Pt(t){if(t instanceof Ze)return"SUBRULE";if(t instanceof ze)return"OPTION";if(t instanceof ot)return"OR";if(t instanceof ft)return"AT_LEAST_ONE";if(t instanceof ht)return"AT_LEAST_ONE_SEP";if(t instanceof st)return"MANY_SEP";if(t instanceof Re)return"MANY";if(t instanceof ue)return"CONSUME";throw Error("non exhaustive match")}class xo{walk(e,r=[]){j(e.definition,(n,i)=>{const s=qe(e.definition,i+1);if(n instanceof Ze)this.walkProdRef(n,s,r);else if(n instanceof ue)this.walkTerminal(n,s,r);else if(n instanceof it)this.walkFlat(n,s,r);else if(n instanceof ze)this.walkOption(n,s,r);else if(n instanceof ft)this.walkAtLeastOne(n,s,r);else if(n instanceof ht)this.walkAtLeastOneSep(n,s,r);else if(n instanceof st)this.walkManySep(n,s,r);else if(n instanceof Re)this.walkMany(n,s,r);else if(n instanceof ot)this.walkOr(n,s,r);else throw Error("non exhaustive match")})}walkTerminal(e,r,n){}walkProdRef(e,r,n){}walkFlat(e,r,n){const i=r.concat(n);this.walk(e,i)}walkOption(e,r,n){const i=r.concat(n);this.walk(e,i)}walkAtLeastOne(e,r,n){const i=[new ze({definition:e.definition})].concat(r,n);this.walk(e,i)}walkAtLeastOneSep(e,r,n){const i=lu(e,r,n);this.walk(e,i)}walkMany(e,r,n){const i=[new ze({definition:e.definition})].concat(r,n);this.walk(e,i)}walkManySep(e,r,n){const i=lu(e,r,n);this.walk(e,i)}walkOr(e,r,n){const i=r.concat(n);j(e.definition,s=>{const o=new it({definition:[s]});this.walk(o,i)})}}function lu(t,e,r){return[new ze({definition:[new ue({terminalType:t.separator})].concat(t.definition)})].concat(e,r)}function Wi(t){if(t instanceof Ze)return Wi(t.referencedRule);if(t instanceof ue)return Og(t);if(Ng(t))return Ig(t);if(wg(t))return _g(t);throw Error("non exhaustive match")}function Ig(t){let e=[];const r=t.definition;let n=0,i=r.length>n,s,o=!0;for(;i&&o;)s=r[n],o=Ys(s),e=e.concat(Wi(s)),n=n+1,i=r.length>n;return kl(e)}function _g(t){const e=M(t.definition,r=>Wi(r));return kl(Tt(e))}function Og(t){return[t.terminalType]}const pf="_~IN~_";class Pg extends xo{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,r,n){}walkProdRef(e,r,n){const i=Lg(e.referencedRule,e.idx)+this.topProd.name,s=r.concat(n),o=new it({definition:s}),a=Wi(o);this.follows[i]=a}}function Dg(t){const e={};return j(t,r=>{const n=new Pg(r).startWalking();dt(e,n)}),e}function Lg(t,e){return t.name+e+pf}let Ds={};const Mg=new Jp;function No(t){const e=t.toString();if(Ds.hasOwnProperty(e))return Ds[e];{const r=Mg.pattern(e);return Ds[e]=r,r}}function Fg(){Ds={}}const ff="Complement Sets are not supported for first char optimization",Xs=`Unable to use "first char" lexer optimizations:
`;function qg(t,e=!1){try{const r=No(t);return za(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===ff)e&&lf(`${Xs}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";e&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Ga(`${Xs}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function za(t,e,r){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)za(t.value[i],e,r);break;case"Alternative":const n=t.value;for(let i=0;i<n.length;i++){const s=n[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const o=s;switch(o.type){case"Character":vs(o.value,e,r);break;case"Set":if(o.complement===!0)throw Error(ff);j(o.value,c=>{if(typeof c=="number")vs(c,e,r);else{const l=c;if(r===!0)for(let u=l.from;u<=l.to;u++)vs(u,e,r);else{for(let u=l.from;u<=l.to&&u<$i;u++)vs(u,e,r);if(l.to>=$i){const u=l.from>=$i?l.from:$i,p=l.to,h=yr(u),R=yr(p);for(let E=h;E<=R;E++)e[E]=E}}}});break;case"Group":za(o.value,e,r);break;default:throw Error("Non Exhaustive Match")}const a=o.quantifier!==void 0&&o.quantifier.atLeast===0;if(o.type==="Group"&&Ba(o)===!1||o.type!=="Group"&&a===!1)break}break;default:throw Error("non exhaustive match!")}return Oe(e)}function vs(t,e,r){const n=yr(t);e[n]=n,r===!0&&jg(t,e)}function jg(t,e){const r=String.fromCharCode(t),n=r.toUpperCase();if(n!==r){const i=yr(n.charCodeAt(0));e[i]=i}else{const i=r.toLowerCase();if(i!==r){const s=yr(i.charCodeAt(0));e[s]=s}}}function uu(t,e){return An(t.value,r=>{if(typeof r=="number")return Qe(e,r);{const n=r;return An(e,i=>n.from<=i&&i<=n.to)!==void 0}})}function Ba(t){const e=t.quantifier;return e&&e.atLeast===0?!0:t.value?Ge(t.value)?At(t.value,Ba):Ba(t.value):!1}class Ug extends Ao{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){Qe(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?uu(e,this.targetCharCodes)===void 0&&(this.found=!0):uu(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Nl(t,e){if(e instanceof RegExp){const r=No(e),n=new Ug(t);return n.visit(r),n.found}else return An(e,r=>Qe(t,r.charCodeAt(0)))!==void 0}const Wr="PATTERN",Ri="defaultMode",Rs="modes";let hf=typeof new RegExp("(?:)").sticky=="boolean";function Gg(t,e){e=El(e,{useSticky:hf,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(O,C)=>C()});const r=e.tracer;r("initCharCodeToOptimizedIndexMap",()=>{py()});let n;r("Reject Lexer.NA",()=>{n=Eo(t,O=>O[Wr]===rt.NA)});let i=!1,s;r("Transform Patterns",()=>{i=!1,s=M(n,O=>{const C=O[Wr];if(rr(C)){const L=C.source;return L.length===1&&L!=="^"&&L!=="$"&&L!=="."&&!C.ignoreCase?L:L.length===2&&L[0]==="\\"&&!Qe(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],L[1])?L[1]:e.useSticky?pu(C):du(C)}else{if(Yr(C))return i=!0,{exec:C};if(typeof C=="object")return i=!0,C;if(typeof C=="string"){if(C.length===1)return C;{const L=C.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),Z=new RegExp(L);return e.useSticky?pu(Z):du(Z)}}else throw Error("non exhaustive match")}})});let o,a,c,l,u;r("misc mapping",()=>{o=M(n,O=>O.tokenTypeIdx),a=M(n,O=>{const C=O.GROUP;if(C!==rt.SKIPPED){if(nt(C))return C;if(tr(C))return!1;throw Error("non exhaustive match")}}),c=M(n,O=>{const C=O.LONGER_ALT;if(C)return Ge(C)?M(C,L=>Xl(n,L)):[Xl(n,C)]}),l=M(n,O=>O.PUSH_MODE),u=M(n,O=>G(O,"POP_MODE"))});let p;r("Line Terminator Handling",()=>{const O=yf(e.lineTerminatorCharacters);p=M(n,C=>!1),e.positionTracking!=="onlyOffset"&&(p=M(n,C=>G(C,"LINE_BREAKS")?!!C.LINE_BREAKS:gf(C,O)===!1&&Nl(O,C.PATTERN)))});let h,R,E,A;r("Misc Mapping #2",()=>{h=M(n,mf),R=M(s,ly),E=Xe(n,(O,C)=>{const L=C.GROUP;return nt(L)&&L!==rt.SKIPPED&&(O[L]=[]),O},{}),A=M(s,(O,C)=>({pattern:s[C],longerAlt:c[C],canLineTerminator:p[C],isCustom:h[C],short:R[C],group:a[C],push:l[C],pop:u[C],tokenTypeIdx:o[C],tokenType:n[C]}))});let P=!0,N=[];return e.safeMode||r("First Char Optimization",()=>{N=Xe(n,(O,C,L)=>{if(typeof C.PATTERN=="string"){const Z=C.PATTERN.charCodeAt(0),re=yr(Z);ea(O,re,A[L])}else if(Ge(C.START_CHARS_HINT)){let Z;j(C.START_CHARS_HINT,re=>{const ne=typeof re=="string"?re.charCodeAt(0):re,ye=yr(ne);Z!==ye&&(Z=ye,ea(O,ye,A[L]))})}else if(rr(C.PATTERN))if(C.PATTERN.unicode)P=!1,e.ensureOptimizations&&Ga(`${Xs}	Unable to analyze < ${C.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const Z=qg(C.PATTERN,e.ensureOptimizations);ae(Z)&&(P=!1),j(Z,re=>{ea(O,re,A[L])})}else e.ensureOptimizations&&Ga(`${Xs}	TokenType: <${C.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),P=!1;return O},[])}),{emptyGroups:E,patternIdxToConfig:A,charCodeToPatternIdxToConfig:N,hasCustom:i,canBeOptimized:P}}function zg(t,e){let r=[];const n=Kg(t);r=r.concat(n.errors);const i=Wg(n.valid),s=i.valid;return r=r.concat(i.errors),r=r.concat(Bg(s)),r=r.concat(ey(s)),r=r.concat(ty(s,e)),r=r.concat(ry(s)),r}function Bg(t){let e=[];const r=pt(t,n=>rr(n[Wr]));return e=e.concat(Hg(r)),e=e.concat(Zg(r)),e=e.concat(Jg(r)),e=e.concat(Qg(r)),e=e.concat(Yg(r)),e}function Kg(t){const e=pt(t,i=>!G(i,Wr)),r=M(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:$e.MISSING_PATTERN,tokenTypes:[i]})),n=$o(t,e);return{errors:r,valid:n}}function Wg(t){const e=pt(t,i=>{const s=i[Wr];return!rr(s)&&!Yr(s)&&!G(s,"exec")&&!nt(s)}),r=M(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:$e.INVALID_PATTERN,tokenTypes:[i]})),n=$o(t,e);return{errors:r,valid:n}}const Vg=/[^\\][$]/;function Hg(t){class e extends Ao{constructor(){super(...arguments),this.found=!1}visitEndAnchor(i){this.found=!0}}const r=pt(t,n=>{const i=n.PATTERN;try{const s=No(i),o=new e;return o.visit(s),o.found}catch{return Vg.test(i.source)}});return M(r,n=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+n.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:$e.EOI_ANCHOR_FOUND,tokenTypes:[n]}))}function Yg(t){const e=pt(t,r=>r.PATTERN.test(""));return M(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:$e.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}const Xg=/[^\\[][\^]|^\^/;function Zg(t){class e extends Ao{constructor(){super(...arguments),this.found=!1}visitStartAnchor(i){this.found=!0}}const r=pt(t,n=>{const i=n.PATTERN;try{const s=No(i),o=new e;return o.visit(s),o.found}catch{return Xg.test(i.source)}});return M(r,n=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+n.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:$e.SOI_ANCHOR_FOUND,tokenTypes:[n]}))}function Jg(t){const e=pt(t,r=>{const n=r[Wr];return n instanceof RegExp&&(n.multiline||n.global)});return M(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:$e.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function Qg(t){const e=[];let r=M(t,i=>Xe(t,(s,o)=>(i.PATTERN.source===o.PATTERN.source&&!Qe(e,o)&&o.PATTERN!==rt.NA&&(e.push(o),s.push(o)),s),[]));r=Gi(r);const n=pt(r,i=>i.length>1);return M(n,i=>{const s=M(i,o=>o.name);return{message:`The same RegExp pattern ->${xt(i).PATTERN}<-has been used in all of the following Token Types: ${s.join(", ")} <-`,type:$e.DUPLICATE_PATTERNS_FOUND,tokenTypes:i}})}function ey(t){const e=pt(t,r=>{if(!G(r,"GROUP"))return!1;const n=r.GROUP;return n!==rt.SKIPPED&&n!==rt.NA&&!nt(n)});return M(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:$e.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function ty(t,e){const r=pt(t,n=>n.PUSH_MODE!==void 0&&!Qe(e,n.PUSH_MODE));return M(r,n=>({message:`Token Type: ->${n.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${n.PUSH_MODE}<-which does not exist`,type:$e.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[n]}))}function ry(t){const e=[],r=Xe(t,(n,i,s)=>{const o=i.PATTERN;return o===rt.NA||(nt(o)?n.push({str:o,idx:s,tokenType:i}):rr(o)&&iy(o)&&n.push({str:o.source,idx:s,tokenType:i})),n},[]);return j(t,(n,i)=>{j(r,({str:s,idx:o,tokenType:a})=>{if(i<o&&ny(s,n.PATTERN)){const c=`Token: ->${a.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:$e.UNREACHABLE_PATTERN,tokenTypes:[n,a]})}})}),e}function ny(t,e){if(rr(e)){if(sy(e))return!1;const r=e.exec(t);return r!==null&&r.index===0}else{if(Yr(e))return e(t,0,[],{});if(G(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function iy(t){return An([".","\\","[","]","|","^","$","(",")","?","*","+","{"],e=>t.source.indexOf(e)!==-1)===void 0}function sy(t){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(t.source)}function du(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function pu(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function oy(t,e,r){const n=[];return G(t,Ri)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+Ri+`> property in its definition
`,type:$e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),G(t,Rs)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+Rs+`> property in its definition
`,type:$e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),G(t,Rs)&&G(t,Ri)&&!G(t.modes,t.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${Ri}: <${t.defaultMode}>which does not exist
`,type:$e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),G(t,Rs)&&j(t.modes,(i,s)=>{j(i,(o,a)=>{if(tr(o))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${a}>
`,type:$e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(G(o,"LONGER_ALT")){const c=Ge(o.LONGER_ALT)?o.LONGER_ALT:[o.LONGER_ALT];j(c,l=>{!tr(l)&&!Qe(i,l)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${o.name}> outside of mode <${s}>
`,type:$e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),n}function ay(t,e,r){const n=[];let i=!1;const s=Gi(Tt(Oe(t.modes))),o=Eo(s,c=>c[Wr]===rt.NA),a=yf(r);return e&&j(o,c=>{const l=gf(c,a);if(l!==!1){const u={message:dy(c,l),type:l.issue,tokenType:c};n.push(u)}else G(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(i=!0):Nl(a,c.PATTERN)&&(i=!0)}),e&&!i&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:$e.NO_LINE_BREAKS_FLAGS}),n}function cy(t){const e={},r=bn(t);return j(r,n=>{const i=t[n];if(Ge(i))e[n]=[];else throw Error("non exhaustive match")}),e}function mf(t){const e=t.PATTERN;if(rr(e))return!1;if(Yr(e)||G(e,"exec"))return!0;if(nt(e))return!1;throw Error("non exhaustive match")}function ly(t){return nt(t)&&t.length===1?t.charCodeAt(0):!1}const uy={test:function(t){const e=t.length;for(let r=this.lastIndex;r<e;r++){const n=t.charCodeAt(r);if(n===10)return this.lastIndex=r+1,!0;if(n===13)return t.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function gf(t,e){if(G(t,"LINE_BREAKS"))return!1;if(rr(t.PATTERN)){try{Nl(e,t.PATTERN)}catch(r){return{issue:$e.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(nt(t.PATTERN))return!1;if(mf(t))return{issue:$e.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function dy(t,e){if(e.issue===$e.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===$e.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function yf(t){return M(t,e=>nt(e)?e.charCodeAt(0):e)}function ea(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}const $i=256;let Ls=[];function yr(t){return t<$i?t:Ls[t]}function py(){if(ae(Ls)){Ls=new Array(65536);for(let t=0;t<65536;t++)Ls[t]=t>255?255+~~(t/255):t}}function Vi(t,e){const r=t.tokenTypeIdx;return r===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[r]===!0}function Zs(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let fu=1;const Tf={};function Hi(t){const e=fy(t);hy(e),gy(e),my(e),j(e,r=>{r.isParent=r.categoryMatches.length>0})}function fy(t){let e=Be(t),r=t,n=!0;for(;n;){r=Gi(Tt(M(r,s=>s.CATEGORIES)));const i=$o(r,e);e=e.concat(i),ae(i)?n=!1:r=i}return e}function hy(t){j(t,e=>{Rf(e)||(Tf[fu]=e,e.tokenTypeIdx=fu++),hu(e)&&!Ge(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),hu(e)||(e.CATEGORIES=[]),yy(e)||(e.categoryMatches=[]),Ty(e)||(e.categoryMatchesMap={})})}function my(t){j(t,e=>{e.categoryMatches=[],j(e.categoryMatchesMap,(r,n)=>{e.categoryMatches.push(Tf[n].tokenTypeIdx)})})}function gy(t){j(t,e=>{vf([],e)})}function vf(t,e){j(t,r=>{e.categoryMatchesMap[r.tokenTypeIdx]=!0}),j(e.CATEGORIES,r=>{const n=t.concat(e);Qe(n,r)||vf(n,r)})}function Rf(t){return G(t,"tokenTypeIdx")}function hu(t){return G(t,"CATEGORIES")}function yy(t){return G(t,"categoryMatches")}function Ty(t){return G(t,"categoryMatchesMap")}function vy(t){return G(t,"tokenTypeIdx")}const Ka={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,r,n,i,s){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${r} characters.`}};var $e;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})($e||($e={}));const Ei={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Ka,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Ei);class rt{constructor(e,r=Ei){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const o=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${o}--> <${i}>`);const{time:a,value:c}=uf(s),l=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${o}<-- <${i}> time: ${a}ms`),this.traceInitIndent--,c}else return s()},typeof r=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=dt({},Ei,r);const n=this.config.traceInitPerf;n===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof n=="number"&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Ei.lineTerminatorsPattern)this.config.lineTerminatorsPattern=uy;else if(this.config.lineTerminatorCharacters===Ei.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),Ge(e)?i={modes:{defaultMode:Be(e)},defaultMode:Ri}:(s=!1,i=Be(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(oy(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(ay(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},j(i.modes,(a,c)=>{i.modes[c]=Eo(a,l=>tr(l))});const o=bn(i.modes);if(j(i.modes,(a,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(zg(a,o))}),ae(this.lexerDefinitionErrors)){Hi(a);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=Gg(a,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=l.charCodeToPatternIdxToConfig,this.emptyGroups=dt({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=l.canBeOptimized}})}),this.defaultMode=i.defaultMode,!ae(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const a=M(this.lexerDefinitionErrors,c=>c.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+a)}j(this.lexerDefinitionWarning,a=>{lf(a.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(hf?(this.chopInput=Yl,this.match=this.matchWithTest):(this.updateLastIndex=De,this.match=this.matchWithExec),s&&(this.handleModes=De),this.trackStartLines===!1&&(this.computeNewColumn=Yl),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=De),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const a=Xe(this.canModeBeOptimized,(c,l,u)=>(l===!1&&c.push(u),c),[]);if(r.ensureOptimizations&&!ae(a))throw Error(`Lexer Modes: < ${a.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{Fg()}),this.TRACE_INIT("toFastProperties",()=>{df(this)})})}tokenize(e,r=this.defaultMode){if(!ae(this.lexerDefinitionErrors)){const n=M(this.lexerDefinitionErrors,i=>i.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+n)}return this.tokenizeInternal(e,r)}tokenizeInternal(e,r){let n,i,s,o,a,c,l,u,p,h,R,E,A,P,N;const O=e,C=O.length;let L=0,Z=0;const re=this.hasCustom?0:Math.floor(e.length/10),ne=new Array(re),ye=[];let Ee=this.trackStartLines?1:void 0,ke=this.trackStartLines?1:void 0;const b=cy(this.emptyGroups),y=this.trackStartLines,m=this.config.lineTerminatorsPattern;let k=0,g=[],T=[];const $=[],I=[];Object.freeze(I);let D;function _(){return g}function U(te){const Ie=yr(te),Me=T[Ie];return Me===void 0?I:Me}const B=te=>{if($.length===1&&te.tokenType.PUSH_MODE===void 0){const Ie=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(te);ye.push({offset:te.startOffset,line:te.startLine,column:te.startColumn,length:te.image.length,message:Ie})}else{$.pop();const Ie=Gr($);g=this.patternIdxToConfig[Ie],T=this.charCodeToPatternIdxToConfig[Ie],k=g.length;const Me=this.canModeBeOptimized[Ie]&&this.config.safeMode===!1;T&&Me?D=U:D=_}};function se(te){$.push(te),T=this.charCodeToPatternIdxToConfig[te],g=this.patternIdxToConfig[te],k=g.length,k=g.length;const Ie=this.canModeBeOptimized[te]&&this.config.safeMode===!1;T&&Ie?D=U:D=_}se.call(this,r);let W;const we=this.config.recoveryEnabled;for(;L<C;){c=null;const te=O.charCodeAt(L),Ie=D(te),Me=Ie.length;for(n=0;n<Me;n++){W=Ie[n];const de=W.pattern;l=null;const Fe=W.short;if(Fe!==!1?te===Fe&&(c=de):W.isCustom===!0?(N=de.exec(O,L,ne,b),N!==null?(c=N[0],N.payload!==void 0&&(l=N.payload)):c=null):(this.updateLastIndex(de,L),c=this.match(de,e,L)),c!==null){if(a=W.longerAlt,a!==void 0){const Se=a.length;for(s=0;s<Se;s++){const V=g[a[s]],Pe=V.pattern;if(u=null,V.isCustom===!0?(N=Pe.exec(O,L,ne,b),N!==null?(o=N[0],N.payload!==void 0&&(u=N.payload)):o=null):(this.updateLastIndex(Pe,L),o=this.match(Pe,e,L)),o&&o.length>c.length){c=o,l=u,W=V;break}}}break}}if(c!==null){if(p=c.length,h=W.group,h!==void 0&&(R=W.tokenTypeIdx,E=this.createTokenInstance(c,L,R,W.tokenType,Ee,ke,p),this.handlePayload(E,l),h===!1?Z=this.addToken(ne,Z,E):b[h].push(E)),e=this.chopInput(e,p),L=L+p,ke=this.computeNewColumn(ke,p),y===!0&&W.canLineTerminator===!0){let de=0,Fe,Se;m.lastIndex=0;do Fe=m.test(c),Fe===!0&&(Se=m.lastIndex-1,de++);while(Fe===!0);de!==0&&(Ee=Ee+de,ke=p-Se,this.updateTokenEndLineColumnLocation(E,h,Se,de,Ee,ke,p))}this.handleModes(W,B,se,E)}else{const de=L,Fe=Ee,Se=ke;let V=we===!1;for(;V===!1&&L<C;)for(e=this.chopInput(e,1),L++,i=0;i<k;i++){const Pe=g[i],ce=Pe.pattern,et=Pe.short;if(et!==!1?O.charCodeAt(L)===et&&(V=!0):Pe.isCustom===!0?V=ce.exec(O,L,ne,b)!==null:(this.updateLastIndex(ce,L),V=ce.exec(e)!==null),V===!0)break}if(A=L-de,ke=this.computeNewColumn(ke,A),P=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(O,de,A,Fe,Se,Gr($)),ye.push({offset:de,line:Fe,column:Se,length:A,message:P}),we===!1)break}}return this.hasCustom||(ne.length=Z),{tokens:ne,groups:b,errors:ye}}handleModes(e,r,n,i){if(e.pop===!0){const s=e.push;r(i),s!==void 0&&n.call(this,s)}else e.push!==void 0&&n.call(this,e.push)}chopInput(e,r){return e.substring(r)}updateLastIndex(e,r){e.lastIndex=r}updateTokenEndLineColumnLocation(e,r,n,i,s,o,a){let c,l;r!==void 0&&(c=n===a-1,l=c?-1:0,i===1&&c===!0||(e.endLine=s+l,e.endColumn=o-1+-l))}computeNewColumn(e,r){return e+r}createOffsetOnlyToken(e,r,n,i){return{image:e,startOffset:r,tokenTypeIdx:n,tokenType:i}}createStartOnlyToken(e,r,n,i,s,o){return{image:e,startOffset:r,startLine:s,startColumn:o,tokenTypeIdx:n,tokenType:i}}createFullToken(e,r,n,i,s,o,a){return{image:e,startOffset:r,endOffset:r+a-1,startLine:s,endLine:s,startColumn:o,endColumn:o+a-1,tokenTypeIdx:n,tokenType:i}}addTokenUsingPush(e,r,n){return e.push(n),r}addTokenUsingMemberAccess(e,r,n){return e[r]=n,r++,r}handlePayloadNoCustom(e,r){}handlePayloadWithCustom(e,r){r!==null&&(e.payload=r)}matchWithTest(e,r,n){return e.test(r)===!0?r.substring(n,e.lastIndex):null}matchWithExec(e,r){const n=e.exec(r);return n!==null?n[0]:null}}rt.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";rt.NA=/NOT_APPLICABLE/;function Sn(t){return $f(t)?t.LABEL:t.name}function $f(t){return nt(t.LABEL)&&t.LABEL!==""}const Ry="parent",mu="categories",gu="label",yu="group",Tu="push_mode",vu="pop_mode",Ru="longer_alt",$u="line_breaks",Eu="start_chars_hint";function Ef(t){return $y(t)}function $y(t){const e=t.pattern,r={};if(r.name=t.name,tr(e)||(r.PATTERN=e),G(t,Ry))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return G(t,mu)&&(r.CATEGORIES=t[mu]),Hi([r]),G(t,gu)&&(r.LABEL=t[gu]),G(t,yu)&&(r.GROUP=t[yu]),G(t,vu)&&(r.POP_MODE=t[vu]),G(t,Tu)&&(r.PUSH_MODE=t[Tu]),G(t,Ru)&&(r.LONGER_ALT=t[Ru]),G(t,$u)&&(r.LINE_BREAKS=t[$u]),G(t,Eu)&&(r.START_CHARS_HINT=t[Eu]),r}const Tr=Ef({name:"EOF",pattern:rt.NA});Hi([Tr]);function wl(t,e,r,n,i,s,o,a){return{image:e,startOffset:r,endOffset:n,startLine:i,endLine:s,startColumn:o,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function kf(t,e){return Vi(t,e)}const En={buildMismatchTokenMessage({expected:t,actual:e,previous:r,ruleName:n}){return`Expecting ${$f(t)?`--> ${Sn(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:r,customUserDescription:n,ruleName:i}){const s="Expecting: ",o=`
but found: '`+xt(e).image+"'";if(n)return s+n+o;{const a=Xe(t,(u,p)=>u.concat(p),[]),c=M(a,u=>`[${M(u,p=>Sn(p)).join(", ")}]`),l=`one of these possible Token sequences:
${M(c,(u,p)=>`  ${p+1}. ${u}`).join(`
`)}`;return s+l+o}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:r,ruleName:n}){const i="Expecting: ",s=`
but found: '`+xt(e).image+"'";if(r)return i+r+s;{const o=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${M(t,a=>`[${M(a,c=>Sn(c)).join(",")}]`).join(" ,")}>`;return i+o+s}}};Object.freeze(En);const Ey={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},jr={buildDuplicateFoundError(t,e){function r(u){return u instanceof ue?u.terminalType.name:u instanceof Ze?u.nonTerminalName:""}const n=t.name,i=xt(e),s=i.idx,o=Pt(i),a=r(i),c=s>0;let l=`->${o}${c?s:""}<- ${a?`with argument: ->${a}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){const e=M(t.prefixPath,n=>Sn(n)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=M(t.prefixPath,i=>Sn(i)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx;let n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(t){let e=Pt(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){const e=t.topLevelRule.name,r=M(t.leftRecursionPath,i=>i.name),n=`${e} --> ${r.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof Bn?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function ky(t,e){const r=new Sy(t,e);return r.resolveRefs(),r.errors}class Sy extends Kn{constructor(e,r){super(),this.nameToTopRule=e,this.errMsgProvider=r,this.errors=[]}resolveRefs(){j(Oe(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const r=this.nameToTopRule[e.nonTerminalName];if(r)e.referencedRule=r;else{const n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:Je.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class by extends xo{constructor(e,r){super(),this.topProd=e,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Be(this.path.ruleStack).reverse(),this.occurrenceStack=Be(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,r=[]){this.found||super.walk(e,r)}walkProdRef(e,r,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const i=r.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){ae(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class Ay extends by{constructor(e,r){super(e,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,r,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const i=r.concat(n),s=new it({definition:i});this.possibleTokTypes=Wi(s),this.found=!0}}}class wo extends xo{constructor(e,r){super(),this.topRule=e,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class Cy extends wo{walkMany(e,r,n){if(e.idx===this.occurrence){const i=xt(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof ue&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,r,n)}}class ku extends wo{walkManySep(e,r,n){if(e.idx===this.occurrence){const i=xt(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof ue&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,r,n)}}class xy extends wo{walkAtLeastOne(e,r,n){if(e.idx===this.occurrence){const i=xt(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof ue&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,r,n)}}class Su extends wo{walkAtLeastOneSep(e,r,n){if(e.idx===this.occurrence){const i=xt(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof ue&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,r,n)}}function Wa(t,e,r=[]){r=Be(r);let n=[],i=0;function s(a){return a.concat(qe(t,i+1))}function o(a){const c=Wa(s(a),e,r);return n.concat(c)}for(;r.length<e&&i<t.length;){const a=t[i];if(a instanceof it||a instanceof Ze)return o(a.definition);if(a instanceof ze)n=o(a.definition);else if(a instanceof ft){const c=a.definition.concat([new Re({definition:a.definition})]);return o(c)}else if(a instanceof ht){const c=[new it({definition:a.definition}),new Re({definition:[new ue({terminalType:a.separator})].concat(a.definition)})];return o(c)}else if(a instanceof st){const c=a.definition.concat([new Re({definition:[new ue({terminalType:a.separator})].concat(a.definition)})]);n=o(c)}else if(a instanceof Re){const c=a.definition.concat([new Re({definition:a.definition})]);n=o(c)}else{if(a instanceof ot)return j(a.definition,c=>{ae(c.definition)===!1&&(n=o(c.definition))}),n;if(a instanceof ue)r.push(a.terminalType);else throw Error("non exhaustive match")}i++}return n.push({partialPath:r,suffixDef:qe(t,i)}),n}function Sf(t,e,r,n){const i="EXIT_NONE_TERMINAL",s=[i],o="EXIT_ALTERNATIVE";let a=!1;const c=e.length,l=c-n-1,u=[],p=[];for(p.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!ae(p);){const h=p.pop();if(h===o){a&&Gr(p).idx<=l&&p.pop();continue}const R=h.def,E=h.idx,A=h.ruleStack,P=h.occurrenceStack;if(ae(R))continue;const N=R[0];if(N===i){const O={idx:E,def:qe(R),ruleStack:Ci(A),occurrenceStack:Ci(P)};p.push(O)}else if(N instanceof ue)if(E<c-1){const O=E+1,C=e[O];if(r(C,N.terminalType)){const L={idx:O,def:qe(R),ruleStack:A,occurrenceStack:P};p.push(L)}}else if(E===c-1)u.push({nextTokenType:N.terminalType,nextTokenOccurrence:N.idx,ruleStack:A,occurrenceStack:P}),a=!0;else throw Error("non exhaustive match");else if(N instanceof Ze){const O=Be(A);O.push(N.nonTerminalName);const C=Be(P);C.push(N.idx);const L={idx:E,def:N.definition.concat(s,qe(R)),ruleStack:O,occurrenceStack:C};p.push(L)}else if(N instanceof ze){const O={idx:E,def:qe(R),ruleStack:A,occurrenceStack:P};p.push(O),p.push(o);const C={idx:E,def:N.definition.concat(qe(R)),ruleStack:A,occurrenceStack:P};p.push(C)}else if(N instanceof ft){const O=new Re({definition:N.definition,idx:N.idx}),C=N.definition.concat([O],qe(R)),L={idx:E,def:C,ruleStack:A,occurrenceStack:P};p.push(L)}else if(N instanceof ht){const O=new ue({terminalType:N.separator}),C=new Re({definition:[O].concat(N.definition),idx:N.idx}),L=N.definition.concat([C],qe(R)),Z={idx:E,def:L,ruleStack:A,occurrenceStack:P};p.push(Z)}else if(N instanceof st){const O={idx:E,def:qe(R),ruleStack:A,occurrenceStack:P};p.push(O),p.push(o);const C=new ue({terminalType:N.separator}),L=new Re({definition:[C].concat(N.definition),idx:N.idx}),Z=N.definition.concat([L],qe(R)),re={idx:E,def:Z,ruleStack:A,occurrenceStack:P};p.push(re)}else if(N instanceof Re){const O={idx:E,def:qe(R),ruleStack:A,occurrenceStack:P};p.push(O),p.push(o);const C=new Re({definition:N.definition,idx:N.idx}),L=N.definition.concat([C],qe(R)),Z={idx:E,def:L,ruleStack:A,occurrenceStack:P};p.push(Z)}else if(N instanceof ot)for(let O=N.definition.length-1;O>=0;O--){const C=N.definition[O],L={idx:E,def:C.definition.concat(qe(R)),ruleStack:A,occurrenceStack:P};p.push(L),p.push(o)}else if(N instanceof it)p.push({idx:E,def:N.definition.concat(qe(R)),ruleStack:A,occurrenceStack:P});else if(N instanceof Bn)p.push(Ny(N,E,A,P));else throw Error("non exhaustive match")}return u}function Ny(t,e,r,n){const i=Be(r);i.push(t.name);const s=Be(n);return s.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:s}}var me;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(me||(me={}));function Il(t){if(t instanceof ze||t==="Option")return me.OPTION;if(t instanceof Re||t==="Repetition")return me.REPETITION;if(t instanceof ft||t==="RepetitionMandatory")return me.REPETITION_MANDATORY;if(t instanceof ht||t==="RepetitionMandatoryWithSeparator")return me.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof st||t==="RepetitionWithSeparator")return me.REPETITION_WITH_SEPARATOR;if(t instanceof ot||t==="Alternation")return me.ALTERNATION;throw Error("non exhaustive match")}function bu(t){const{occurrence:e,rule:r,prodType:n,maxLookahead:i}=t,s=Il(n);return s===me.ALTERNATION?Io(e,r,i):_o(e,r,s,i)}function wy(t,e,r,n,i,s){const o=Io(t,e,r),a=Cf(o)?Zs:Vi;return s(o,n,a,i)}function Iy(t,e,r,n,i,s){const o=_o(t,e,i,r),a=Cf(o)?Zs:Vi;return s(o[0],a,n)}function _y(t,e,r,n){const i=t.length,s=At(t,o=>At(o,a=>a.length===1));if(e)return function(o){const a=M(o,c=>c.GATE);for(let c=0;c<i;c++){const l=t[c],u=l.length,p=a[c];if(!(p!==void 0&&p.call(this)===!1))e:for(let h=0;h<u;h++){const R=l[h],E=R.length;for(let A=0;A<E;A++){const P=this.LA(A+1);if(r(P,R[A])===!1)continue e}return c}}};if(s&&!n){const o=M(t,c=>Tt(c)),a=Xe(o,(c,l,u)=>(j(l,p=>{G(c,p.tokenTypeIdx)||(c[p.tokenTypeIdx]=u),j(p.categoryMatches,h=>{G(c,h)||(c[h]=u)})}),c),{});return function(){const c=this.LA(1);return a[c.tokenTypeIdx]}}else return function(){for(let o=0;o<i;o++){const a=t[o],c=a.length;e:for(let l=0;l<c;l++){const u=a[l],p=u.length;for(let h=0;h<p;h++){const R=this.LA(h+1);if(r(R,u[h])===!1)continue e}return o}}}}function Oy(t,e,r){const n=At(t,s=>s.length===1),i=t.length;if(n&&!r){const s=Tt(t);if(s.length===1&&ae(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const o=Xe(s,(a,c,l)=>(a[c.tokenTypeIdx]=!0,j(c.categoryMatches,u=>{a[u]=!0}),a),[]);return function(){const a=this.LA(1);return o[a.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<i;s++){const o=t[s],a=o.length;for(let c=0;c<a;c++){const l=this.LA(c+1);if(e(l,o[c])===!1)continue e}return!0}return!1}}class Py extends xo{constructor(e,r,n){super(),this.topProd=e,this.targetOccurrence=r,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,r,n,i){return e.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=n.concat(i),!0):!1}walkOption(e,r,n){this.checkIsTarget(e,me.OPTION,r,n)||super.walkOption(e,r,n)}walkAtLeastOne(e,r,n){this.checkIsTarget(e,me.REPETITION_MANDATORY,r,n)||super.walkOption(e,r,n)}walkAtLeastOneSep(e,r,n){this.checkIsTarget(e,me.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}walkMany(e,r,n){this.checkIsTarget(e,me.REPETITION,r,n)||super.walkOption(e,r,n)}walkManySep(e,r,n){this.checkIsTarget(e,me.REPETITION_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}}class bf extends Kn{constructor(e,r,n){super(),this.targetOccurrence=e,this.targetProdType=r,this.targetRef=n,this.result=[]}checkIsTarget(e,r){e.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,me.OPTION)}visitRepetition(e){this.checkIsTarget(e,me.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,me.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,me.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,me.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,me.ALTERNATION)}}function Au(t){const e=new Array(t);for(let r=0;r<t;r++)e[r]=[];return e}function ta(t){let e=[""];for(let r=0;r<t.length;r++){const n=t[r],i=[];for(let s=0;s<e.length;s++){const o=e[s];i.push(o+"_"+n.tokenTypeIdx);for(let a=0;a<n.categoryMatches.length;a++){const c="_"+n.categoryMatches[a];i.push(o+c)}}e=i}return e}function Dy(t,e,r){for(let n=0;n<t.length;n++){if(n===r)continue;const i=t[n];for(let s=0;s<e.length;s++){const o=e[s];if(i[o]===!0)return!1}}return!0}function Af(t,e){const r=M(t,o=>Wa([o],1)),n=Au(r.length),i=M(r,o=>{const a={};return j(o,c=>{const l=ta(c.partialPath);j(l,u=>{a[u]=!0})}),a});let s=r;for(let o=1;o<=e;o++){const a=s;s=Au(a.length);for(let c=0;c<a.length;c++){const l=a[c];for(let u=0;u<l.length;u++){const p=l[u].partialPath,h=l[u].suffixDef,R=ta(p);if(Dy(i,R,c)||ae(h)||p.length===e){const E=n[c];if(Va(E,p)===!1){E.push(p);for(let A=0;A<R.length;A++){const P=R[A];i[c][P]=!0}}}else{const E=Wa(h,o+1,p);s[c]=s[c].concat(E),j(E,A=>{const P=ta(A.partialPath);j(P,N=>{i[c][N]=!0})})}}}}return n}function Io(t,e,r,n){const i=new bf(t,me.ALTERNATION,n);return e.accept(i),Af(i.result,r)}function _o(t,e,r,n){const i=new bf(t,r);e.accept(i);const s=i.result,o=new Py(e,t,r).startWalking(),a=new it({definition:s}),c=new it({definition:o});return Af([a,c],n)}function Va(t,e){e:for(let r=0;r<t.length;r++){const n=t[r];if(n.length===e.length){for(let i=0;i<n.length;i++){const s=e[i],o=n[i];if(!(s===o||o.categoryMatchesMap[s.tokenTypeIdx]!==void 0))continue e}return!0}}return!1}function Ly(t,e){return t.length<e.length&&At(t,(r,n)=>{const i=e[n];return r===i||i.categoryMatchesMap[r.tokenTypeIdx]})}function Cf(t){return At(t,e=>At(e,r=>At(r,n=>ae(n.categoryMatches))))}function My(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return M(e,r=>Object.assign({type:Je.CUSTOM_LOOKAHEAD_VALIDATION},r))}function Fy(t,e,r,n){const i=ut(t,c=>qy(c,r)),s=Zy(t,e,r),o=ut(t,c=>Vy(c,r)),a=ut(t,c=>Gy(c,t,n,r));return i.concat(s,o,a)}function qy(t,e){const r=new Uy;t.accept(r);const n=r.allProductions,i=gm(n,jy),s=Nt(i,o=>o.length>1);return M(Oe(s),o=>{const a=xt(o),c=e.buildDuplicateFoundError(t,o),l=Pt(a),u={message:c,type:Je.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:l,occurrence:a.idx},p=xf(a);return p&&(u.parameter=p),u})}function jy(t){return`${Pt(t)}_#_${t.idx}_#_${xf(t)}`}function xf(t){return t instanceof ue?t.terminalType.name:t instanceof Ze?t.nonTerminalName:""}class Uy extends Kn{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function Gy(t,e,r,n){const i=[];if(Xe(e,(s,o)=>o.name===t.name?s+1:s,0)>1){const s=n.buildDuplicateRuleNameError({topLevelRule:t,grammarName:r});i.push({message:s,type:Je.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function zy(t,e,r){const n=[];let i;return Qe(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:i,type:Je.INVALID_RULE_OVERRIDE,ruleName:t})),n}function Nf(t,e,r,n=[]){const i=[],s=Ms(e.definition);if(ae(s))return[];{const o=t.name;Qe(s,t)&&i.push({message:r.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:n}),type:Je.LEFT_RECURSION,ruleName:o});const a=$o(s,n.concat([t])),c=ut(a,l=>{const u=Be(n);return u.push(l),Nf(t,l,r,u)});return i.concat(c)}}function Ms(t){let e=[];if(ae(t))return e;const r=xt(t);if(r instanceof Ze)e.push(r.referencedRule);else if(r instanceof it||r instanceof ze||r instanceof ft||r instanceof ht||r instanceof st||r instanceof Re)e=e.concat(Ms(r.definition));else if(r instanceof ot)e=Tt(M(r.definition,s=>Ms(s.definition)));else if(!(r instanceof ue))throw Error("non exhaustive match");const n=Ys(r),i=t.length>1;if(n&&i){const s=qe(t);return e.concat(Ms(s))}else return e}class _l extends Kn{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function By(t,e){const r=new _l;t.accept(r);const n=r.alternations;return ut(n,i=>{const s=Ci(i.definition);return ut(s,(o,a)=>{const c=Sf([o],[],Vi,1);return ae(c)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:i,emptyChoiceIdx:a}),type:Je.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:i.idx,alternative:a+1}]:[]})})}function Ky(t,e,r){const n=new _l;t.accept(n);let i=n.alternations;return i=Eo(i,s=>s.ignoreAmbiguities===!0),ut(i,s=>{const o=s.idx,a=s.maxLookahead||e,c=Io(o,t,a,s),l=Yy(c,s,t,r),u=Xy(c,s,t,r);return l.concat(u)})}class Wy extends Kn{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function Vy(t,e){const r=new _l;t.accept(r);const n=r.alternations;return ut(n,i=>i.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:i}),type:Je.TOO_MANY_ALTS,ruleName:t.name,occurrence:i.idx}]:[])}function Hy(t,e,r){const n=[];return j(t,i=>{const s=new Wy;i.accept(s);const o=s.allProductions;j(o,a=>{const c=Il(a),l=a.maxLookahead||e,u=a.idx,p=_o(u,i,c,l)[0];if(ae(Tt(p))){const h=r.buildEmptyRepetitionError({topLevelRule:i,repetition:a});n.push({message:h,type:Je.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),n}function Yy(t,e,r,n){const i=[],s=Xe(t,(o,a,c)=>(e.definition[c].ignoreAmbiguities===!0||j(a,l=>{const u=[c];j(t,(p,h)=>{c!==h&&Va(p,l)&&e.definition[h].ignoreAmbiguities!==!0&&u.push(h)}),u.length>1&&!Va(i,l)&&(i.push(l),o.push({alts:u,path:l}))}),o),[]);return M(s,o=>{const a=M(o.alts,c=>c+1);return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:a,prefixPath:o.path}),type:Je.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:e.idx,alternatives:o.alts}})}function Xy(t,e,r,n){const i=Xe(t,(s,o,a)=>{const c=M(o,l=>({idx:a,path:l}));return s.concat(c)},[]);return Gi(ut(i,s=>{if(e.definition[s.idx].ignoreAmbiguities===!0)return[];const o=s.idx,a=s.path,c=pt(i,l=>e.definition[l.idx].ignoreAmbiguities!==!0&&l.idx<o&&Ly(l.path,a));return M(c,l=>{const u=[l.idx+1,o+1],p=e.idx===0?"":e.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:u,prefixPath:l.path}),type:Je.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:p,alternatives:u}})}))}function Zy(t,e,r){const n=[],i=M(e,s=>s.name);return j(t,s=>{const o=s.name;if(Qe(i,o)){const a=r.buildNamespaceConflictError(s);n.push({message:a,type:Je.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:o})}}),n}function Jy(t){const e=El(t,{errMsgProvider:Ey}),r={};return j(t.rules,n=>{r[n.name]=n}),ky(r,e.errMsgProvider)}function Qy(t){return t=El(t,{errMsgProvider:jr}),Fy(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}const wf="MismatchedTokenException",If="NoViableAltException",_f="EarlyExitException",Of="NotAllInputParsedException",Pf=[wf,If,_f,Of];Object.freeze(Pf);function Js(t){return Qe(Pf,t.name)}class Oo extends Error{constructor(e,r){super(e),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class Df extends Oo{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=wf}}class eT extends Oo{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=If}}class tT extends Oo{constructor(e,r){super(e,r),this.name=Of}}class rT extends Oo{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=_f}}const ra={},Lf="InRuleRecoveryException";class nT extends Error{constructor(e){super(e),this.name=Lf}}class iT{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=G(e,"recoveryEnabled")?e.recoveryEnabled:nr.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=sT)}getTokenToInsert(e){const r=wl(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,r,n,i){const s=this.findReSyncTokenType(),o=this.exportLexerState(),a=[];let c=!1;const l=this.LA(1);let u=this.LA(1);const p=()=>{const h=this.LA(0),R=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:h,ruleName:this.getCurrRuleFullName()}),E=new Df(R,l,this.LA(0));E.resyncedTokens=Ci(a),this.SAVE_ERROR(E)};for(;!c;)if(this.tokenMatcher(u,i)){p();return}else if(n.call(this)){p(),e.apply(this,r);return}else this.tokenMatcher(u,s)?c=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,a));this.importLexerState(o)}shouldInRepetitionRecoveryBeTried(e,r,n){return!(n===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,r)))}getFollowsForInRuleRecovery(e,r){const n=this.getCurrentGrammarPath(e,r);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(e,r){if(this.canRecoverWithSingleTokenInsertion(e,r))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new nT("sad sad panda")}canPerformInRuleRecovery(e,r){return this.canRecoverWithSingleTokenInsertion(e,r)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,r){if(!this.canTokenTypeBeInsertedInRecovery(e)||ae(r))return!1;const n=this.LA(1);return An(r,i=>this.tokenMatcher(n,i))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const r=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(r);return Qe(n,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let r=this.LA(1),n=2;for(;;){const i=An(e,s=>kf(r,s));if(i!==void 0)return i;r=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return ra;const e=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return M(e,(n,i)=>i===0?ra:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:r[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){const e=M(this.buildFullFollowKeyStack(),r=>this.getFollowSetFromFollowKey(r));return Tt(e)}getFollowSetFromFollowKey(e){if(e===ra)return[Tr];const r=e.ruleName+e.idxInCallingRule+pf+e.inRule;return this.resyncFollows[r]}addToResyncTokens(e,r){return this.tokenMatcher(e,Tr)||r.push(e),r}reSyncTo(e){const r=[];let n=this.LA(1);for(;this.tokenMatcher(n,e)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,r);return Ci(r)}attemptInRepetitionRecovery(e,r,n,i,s,o,a){}getCurrentGrammarPath(e,r){const n=this.getHumanReadableRuleStack(),i=Be(this.RULE_OCCURRENCE_STACK);return{ruleStack:n,occurrenceStack:i,lastTok:e,lastTokOccurrence:r}}getHumanReadableRuleStack(){return M(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function sT(t,e,r,n,i,s,o){const a=this.getKeyForAutomaticLookahead(n,i);let c=this.firstAfterRepMap[a];if(c===void 0){const h=this.getCurrRuleFullName(),R=this.getGAstProductions()[h];c=new s(R,i).startWalking(),this.firstAfterRepMap[a]=c}let l=c.token,u=c.occurrence;const p=c.isEndOfRule;this.RULE_STACK.length===1&&p&&l===void 0&&(l=Tr,u=1),!(l===void 0||u===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,u,o)&&this.tryInRepetitionRecovery(t,e,r,l)}const oT=4,$r=8,Mf=1<<$r,Ff=2<<$r,Ha=3<<$r,Ya=4<<$r,Xa=5<<$r,Fs=6<<$r;function na(t,e,r){return r|e|t}class Ol{constructor(e){var r;this.maxLookahead=(r=e==null?void 0:e.maxLookahead)!==null&&r!==void 0?r:nr.maxLookahead}validate(e){const r=this.validateNoLeftRecursion(e.rules);if(ae(r)){const n=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...r,...n,...i,...s]}return r}validateNoLeftRecursion(e){return ut(e,r=>Nf(r,r,jr))}validateEmptyOrAlternatives(e){return ut(e,r=>By(r,jr))}validateAmbiguousAlternationAlternatives(e,r){return ut(e,n=>Ky(n,r,jr))}validateSomeNonEmptyLookaheadPath(e,r){return Hy(e,r,jr)}buildLookaheadForAlternation(e){return wy(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,_y)}buildLookaheadForOptional(e){return Iy(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Il(e.prodType),Oy)}}class aT{initLooksAhead(e){this.dynamicTokensEnabled=G(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:nr.dynamicTokensEnabled,this.maxLookahead=G(e,"maxLookahead")?e.maxLookahead:nr.maxLookahead,this.lookaheadStrategy=G(e,"lookaheadStrategy")?e.lookaheadStrategy:new Ol({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){j(e,r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,()=>{const{alternation:n,repetition:i,option:s,repetitionMandatory:o,repetitionMandatoryWithSeparator:a,repetitionWithSeparator:c}=lT(r);j(n,l=>{const u=l.idx===0?"":l.idx;this.TRACE_INIT(`${Pt(l)}${u}`,()=>{const p=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:r,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),h=na(this.fullRuleNameToShort[r.name],Mf,l.idx);this.setLaFuncCache(h,p)})}),j(i,l=>{this.computeLookaheadFunc(r,l.idx,Ha,"Repetition",l.maxLookahead,Pt(l))}),j(s,l=>{this.computeLookaheadFunc(r,l.idx,Ff,"Option",l.maxLookahead,Pt(l))}),j(o,l=>{this.computeLookaheadFunc(r,l.idx,Ya,"RepetitionMandatory",l.maxLookahead,Pt(l))}),j(a,l=>{this.computeLookaheadFunc(r,l.idx,Fs,"RepetitionMandatoryWithSeparator",l.maxLookahead,Pt(l))}),j(c,l=>{this.computeLookaheadFunc(r,l.idx,Xa,"RepetitionWithSeparator",l.maxLookahead,Pt(l))})})})}computeLookaheadFunc(e,r,n,i,s,o){this.TRACE_INIT(`${o}${r===0?"":r}`,()=>{const a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),c=na(this.fullRuleNameToShort[e.name],n,r);this.setLaFuncCache(c,a)})}getKeyForAutomaticLookahead(e,r){const n=this.getLastExplicitRuleShortName();return na(n,e,r)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,r){this.lookAheadFuncsCache.set(e,r)}}class cT extends Kn{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const $s=new cT;function lT(t){$s.reset(),t.accept($s);const e=$s.dslMethods;return $s.reset(),e}function Cu(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function xu(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function uT(t,e,r){t.children[r]===void 0?t.children[r]=[e]:t.children[r].push(e)}function dT(t,e,r){t.children[e]===void 0?t.children[e]=[r]:t.children[e].push(r)}const pT="name";function qf(t,e){Object.defineProperty(t,pT,{enumerable:!1,configurable:!0,writable:!1,value:e})}function fT(t,e){const r=bn(t),n=r.length;for(let i=0;i<n;i++){const s=r[i],o=t[s],a=o.length;for(let c=0;c<a;c++){const l=o[c];l.tokenTypeIdx===void 0&&this[l.name](l.children,e)}}}function hT(t,e){const r=function(){};qf(r,t+"BaseSemantics");const n={visit:function(i,s){if(Ge(i)&&(i=i[0]),!tr(i))return this[i.name](i.children,s)},validateVisitor:function(){const i=gT(this,e);if(!ae(i)){const s=M(i,o=>o.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=e,r}function mT(t,e,r){const n=function(){};qf(n,t+"BaseSemanticsWithDefaults");const i=Object.create(r.prototype);return j(e,s=>{i[s]=fT}),n.prototype=i,n.prototype.constructor=n,n}var Za;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(Za||(Za={}));function gT(t,e){return yT(t,e)}function yT(t,e){const r=pt(e,i=>Yr(t[i])===!1),n=M(r,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:Za.MISSING_METHOD,methodName:i}));return Gi(n)}class TT{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=G(e,"nodeLocationTracking")?e.nodeLocationTracking:nr.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=De,this.cstFinallyStateUpdate=De,this.cstPostTerminal=De,this.cstPostNonTerminal=De,this.cstPostRule=De;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=xu,this.setNodeLocationFromNode=xu,this.cstPostRule=De,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=De,this.setNodeLocationFromNode=De,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Cu,this.setNodeLocationFromNode=Cu,this.cstPostRule=De,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=De,this.setNodeLocationFromNode=De,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=De,this.setNodeLocationFromNode=De,this.cstPostRule=De,this.setInitialNodeLocation=De;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const r=this.LA(1);e.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const r={name:e,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?(n.endOffset=r.endOffset,n.endLine=r.endLine,n.endColumn=r.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(e){const r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?n.endOffset=r.endOffset:n.startOffset=NaN}cstPostTerminal(e,r){const n=this.CST_STACK[this.CST_STACK.length-1];uT(n,r,e),this.setNodeLocationFromToken(n.location,r)}cstPostNonTerminal(e,r){const n=this.CST_STACK[this.CST_STACK.length-1];dT(n,r,e),this.setNodeLocationFromNode(n.location,e.location)}getBaseCstVisitorConstructor(){if(tr(this.baseCstVisitorConstructor)){const e=hT(this.className,bn(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(tr(this.baseCstVisitorWithDefaultsConstructor)){const e=mT(this.className,bn(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class vT{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):eo}LA(e){const r=this.currIdx+e;return r<0||this.tokVectorLength<=r?eo:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class RT{ACTION(e){return e.call(this)}consume(e,r,n){return this.consumeInternal(r,e,n)}subrule(e,r,n){return this.subruleInternal(r,e,n)}option(e,r){return this.optionInternal(r,e)}or(e,r){return this.orInternal(r,e)}many(e,r){return this.manyInternal(e,r)}atLeastOne(e,r){return this.atLeastOneInternal(e,r)}CONSUME(e,r){return this.consumeInternal(e,0,r)}CONSUME1(e,r){return this.consumeInternal(e,1,r)}CONSUME2(e,r){return this.consumeInternal(e,2,r)}CONSUME3(e,r){return this.consumeInternal(e,3,r)}CONSUME4(e,r){return this.consumeInternal(e,4,r)}CONSUME5(e,r){return this.consumeInternal(e,5,r)}CONSUME6(e,r){return this.consumeInternal(e,6,r)}CONSUME7(e,r){return this.consumeInternal(e,7,r)}CONSUME8(e,r){return this.consumeInternal(e,8,r)}CONSUME9(e,r){return this.consumeInternal(e,9,r)}SUBRULE(e,r){return this.subruleInternal(e,0,r)}SUBRULE1(e,r){return this.subruleInternal(e,1,r)}SUBRULE2(e,r){return this.subruleInternal(e,2,r)}SUBRULE3(e,r){return this.subruleInternal(e,3,r)}SUBRULE4(e,r){return this.subruleInternal(e,4,r)}SUBRULE5(e,r){return this.subruleInternal(e,5,r)}SUBRULE6(e,r){return this.subruleInternal(e,6,r)}SUBRULE7(e,r){return this.subruleInternal(e,7,r)}SUBRULE8(e,r){return this.subruleInternal(e,8,r)}SUBRULE9(e,r){return this.subruleInternal(e,9,r)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,r,n=to){if(Qe(this.definedRulesNames,e)){const s={message:jr.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:Je.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(s)}this.definedRulesNames.push(e);const i=this.defineRule(e,r,n);return this[e]=i,i}OVERRIDE_RULE(e,r,n=to){const i=zy(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const s=this.defineRule(e,r,n);return this[e]=s,s}BACKTRACK(e,r){return function(){this.isBackTrackingStack.push(1);const n=this.saveRecogState();try{return e.apply(this,r),!0}catch(i){if(Js(i))return!1;throw i}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return xg(Oe(this.gastProductionsCache))}}class $T{initRecognizerEngine(e,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Zs,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},G(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(Ge(e)){if(ae(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(Ge(e))this.tokensMap=Xe(e,(s,o)=>(s[o.name]=o,s),{});else if(G(e,"modes")&&At(Tt(Oe(e.modes)),vy)){const s=Tt(Oe(e.modes)),o=kl(s);this.tokensMap=Xe(o,(a,c)=>(a[c.name]=c,a),{})}else if(Gh(e))this.tokensMap=Be(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Tr;const n=G(e,"modes")?Tt(Oe(e.modes)):Oe(e),i=At(n,s=>ae(s.categoryMatches));this.tokenMatcher=i?Zs:Vi,Hi(Oe(this.tokensMap))}defineRule(e,r,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=G(n,"resyncEnabled")?n.resyncEnabled:to.resyncEnabled,s=G(n,"recoveryValueFunc")?n.recoveryValueFunc:to.recoveryValueFunc,o=this.ruleShortNameIdx<<oT+$r;this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=e,this.fullRuleNameToShort[e]=o;let a;return this.outputCst===!0?a=function(...c){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx),r.apply(this,c);const l=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(l),l}catch(l){return this.invokeRuleCatch(l,i,s)}finally{this.ruleFinallyStateUpdate()}}:a=function(...c){try{return this.ruleInvocationStateUpdate(o,e,this.subruleIdx),r.apply(this,c)}catch(l){return this.invokeRuleCatch(l,i,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(a,{ruleName:e,originalGrammarAction:r})}invokeRuleCatch(e,r,n){const i=this.RULE_STACK.length===1,s=r&&!this.isBackTracking()&&this.recoveryEnabled;if(Js(e)){const o=e;if(s){const a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a))if(o.resyncedTokens=this.reSyncTo(a),this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return n(e);else{if(this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,o.partialCstResult=c}throw o}}else{if(i)return this.moveToTerminatedState(),n(e);throw o}}else throw e}optionInternal(e,r){const n=this.getKeyForAutomaticLookahead(Ff,r);return this.optionInternalLogic(e,r,n)}optionInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),s;if(typeof e!="function"){s=e.DEF;const o=e.GATE;if(o!==void 0){const a=i;i=()=>o.call(this)&&a.call(this)}}else s=e;if(i.call(this)===!0)return s.call(this)}atLeastOneInternal(e,r){const n=this.getKeyForAutomaticLookahead(Ya,e);return this.atLeastOneInternalLogic(e,r,n)}atLeastOneInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),s;if(typeof r!="function"){s=r.DEF;const o=r.GATE;if(o!==void 0){const a=i;i=()=>o.call(this)&&a.call(this)}}else s=r;if(i.call(this)===!0){let o=this.doSingleRepetition(s);for(;i.call(this)===!0&&o===!0;)o=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,me.REPETITION_MANDATORY,r.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,r],i,Ya,e,xy)}atLeastOneSepFirstInternal(e,r){const n=this.getKeyForAutomaticLookahead(Fs,e);this.atLeastOneSepFirstInternalLogic(e,r,n)}atLeastOneSepFirstInternalLogic(e,r,n){const i=r.DEF,s=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,Su],o,Fs,e,Su)}else throw this.raiseEarlyExitException(e,me.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG)}manyInternal(e,r){const n=this.getKeyForAutomaticLookahead(Ha,e);return this.manyInternalLogic(e,r,n)}manyInternalLogic(e,r,n){let i=this.getLaFuncFromCache(n),s;if(typeof r!="function"){s=r.DEF;const a=r.GATE;if(a!==void 0){const c=i;i=()=>a.call(this)&&c.call(this)}}else s=r;let o=!0;for(;i.call(this)===!0&&o===!0;)o=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,r],i,Ha,e,Cy,o)}manySepFirstInternal(e,r){const n=this.getKeyForAutomaticLookahead(Xa,e);this.manySepFirstInternalLogic(e,r,n)}manySepFirstInternalLogic(e,r,n){const i=r.DEF,s=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,ku],o,Xa,e,ku)}}repetitionSepSecondInternal(e,r,n,i,s){for(;n();)this.CONSUME(r),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,r,n,i,s],n,Fs,e,s)}doSingleRepetition(e){const r=this.getLexerPosition();return e.call(this),this.getLexerPosition()>r}orInternal(e,r){const n=this.getKeyForAutomaticLookahead(Mf,r),i=Ge(e)?e:e.DEF,s=this.getLaFuncFromCache(n).call(this,i);if(s!==void 0)return i[s].ALT.call(this);this.raiseNoAltException(r,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new tT(r,e))}}subruleInternal(e,r,n){let i;try{const s=n!==void 0?n.ARGS:void 0;return this.subruleIdx=r,i=e.apply(this,s),this.cstPostNonTerminal(i,n!==void 0&&n.LABEL!==void 0?n.LABEL:e.ruleName),i}catch(s){throw this.subruleInternalError(s,n,e.ruleName)}}subruleInternalError(e,r,n){throw Js(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:n),delete e.partialCstResult),e}consumeInternal(e,r,n){let i;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),i=s):this.consumeInternalError(e,s,n)}catch(s){i=this.consumeInternalRecovery(e,r,s)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:e.name,i),i}consumeInternalError(e,r,n){let i;const s=this.LA(0);throw n!==void 0&&n.ERR_MSG?i=n.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:r,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Df(i,r,s))}consumeInternalRecovery(e,r,n){if(this.recoveryEnabled&&n.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(e,r);try{return this.tryInRuleRecovery(e,i)}catch(s){throw s.name===Lf?n:s}}else throw n}saveRecogState(){const e=this.errors,r=Be(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,r,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Tr)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class ET{initErrorHandler(e){this._errors=[],this.errorMessageProvider=G(e,"errorMessageProvider")?e.errorMessageProvider:nr.errorMessageProvider}SAVE_ERROR(e){if(Js(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Be(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Be(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,r,n){const i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],o=_o(e,s,r,this.maxLookahead)[0],a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));const c=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:a,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new rT(c,this.LA(1),this.LA(0)))}raiseNoAltException(e,r){const n=this.getCurrRuleFullName(),i=this.getGAstProductions()[n],s=Io(e,i,this.maxLookahead),o=[];for(let l=1;l<=this.maxLookahead;l++)o.push(this.LA(l));const a=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:o,previous:a,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new eT(c,this.LA(1),a))}}class kT{initContentAssist(){}computeContentAssist(e,r){const n=this.gastProductionsCache[e];if(tr(n))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Sf([n],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const r=xt(e.ruleStack),n=this.getGAstProductions()[r];return new Ay(n,e).startWalking()}}const Po={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Po);const Nu=!0,wu=Math.pow(2,$r)-1,jf=Ef({name:"RECORDING_PHASE_TOKEN",pattern:rt.NA});Hi([jf]);const Uf=wl(jf,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Uf);const ST={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class bT{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const r=e>0?e:"";this[`CONSUME${r}`]=function(n,i){return this.consumeInternalRecord(n,e,i)},this[`SUBRULE${r}`]=function(n,i){return this.subruleInternalRecord(n,e,i)},this[`OPTION${r}`]=function(n){return this.optionInternalRecord(n,e)},this[`OR${r}`]=function(n){return this.orInternalRecord(n,e)},this[`MANY${r}`]=function(n){this.manyInternalRecord(e,n)},this[`MANY_SEP${r}`]=function(n){this.manySepFirstInternalRecord(e,n)},this[`AT_LEAST_ONE${r}`]=function(n){this.atLeastOneInternalRecord(e,n)},this[`AT_LEAST_ONE_SEP${r}`]=function(n){this.atLeastOneSepFirstInternalRecord(e,n)}}this.consume=function(e,r,n){return this.consumeInternalRecord(r,e,n)},this.subrule=function(e,r,n){return this.subruleInternalRecord(r,e,n)},this.option=function(e,r){return this.optionInternalRecord(r,e)},this.or=function(e,r){return this.orInternalRecord(r,e)},this.many=function(e,r){this.manyInternalRecord(e,r)},this.atLeastOne=function(e,r){this.atLeastOneInternalRecord(e,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let r=0;r<10;r++){const n=r>0?r:"";delete e[`CONSUME${n}`],delete e[`SUBRULE${n}`],delete e[`OPTION${n}`],delete e[`OR${n}`],delete e[`MANY${n}`],delete e[`MANY_SEP${n}`],delete e[`AT_LEAST_ONE${n}`],delete e[`AT_LEAST_ONE_SEP${n}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,r){return()=>!0}LA_RECORD(e){return eo}topLevelRuleRecord(e,r){try{const n=new Bn({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),r.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(e,r){return li.call(this,ze,e,r)}atLeastOneInternalRecord(e,r){li.call(this,ft,r,e)}atLeastOneSepFirstInternalRecord(e,r){li.call(this,ht,r,e,Nu)}manyInternalRecord(e,r){li.call(this,Re,r,e)}manySepFirstInternalRecord(e,r){li.call(this,st,r,e,Nu)}orInternalRecord(e,r){return AT.call(this,e,r)}subruleInternalRecord(e,r,n){if(Qs(r),!e||G(e,"ruleName")===!1){const a=new Error(`<SUBRULE${Iu(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const i=Gr(this.recordingProdStack),s=e.ruleName,o=new Ze({idx:r,nonTerminalName:s,label:n==null?void 0:n.LABEL,referencedRule:void 0});return i.definition.push(o),this.outputCst?ST:Po}consumeInternalRecord(e,r,n){if(Qs(r),!Rf(e)){const o=new Error(`<CONSUME${Iu(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=Gr(this.recordingProdStack),s=new ue({idx:r,terminalType:e,label:n==null?void 0:n.LABEL});return i.definition.push(s),Uf}}function li(t,e,r,n=!1){Qs(r);const i=Gr(this.recordingProdStack),s=Yr(e)?e:e.DEF,o=new t({definition:[],idx:r});return n&&(o.separator=e.SEP),G(e,"MAX_LOOKAHEAD")&&(o.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(o),s.call(this),i.definition.push(o),this.recordingProdStack.pop(),Po}function AT(t,e){Qs(e);const r=Gr(this.recordingProdStack),n=Ge(t)===!1,i=n===!1?t:t.DEF,s=new ot({definition:[],idx:e,ignoreAmbiguities:n&&t.IGNORE_AMBIGUITIES===!0});G(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);const o=jp(i,a=>Yr(a.GATE));return s.hasPredicates=o,r.definition.push(s),j(i,a=>{const c=new it({definition:[]});s.definition.push(c),G(a,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=a.IGNORE_AMBIGUITIES:G(a,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),a.ALT.call(this),this.recordingProdStack.pop()}),Po}function Iu(t){return t===0?"":`${t}`}function Qs(t){if(t<0||t>wu){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${wu+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class CT{initPerformanceTracer(e){if(G(e,"traceInitPerf")){const r=e.traceInitPerf,n=typeof r=="number";this.traceInitMaxIdent=n?r:1/0,this.traceInitPerf=n?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=nr.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,r){if(this.traceInitPerf===!0){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${e}>`);const{time:i,value:s}=uf(r),o=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o(`${n}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,s}else return r()}}function xT(t,e){e.forEach(r=>{const n=r.prototype;Object.getOwnPropertyNames(n).forEach(i=>{if(i==="constructor")return;const s=Object.getOwnPropertyDescriptor(n,i);s&&(s.get||s.set)?Object.defineProperty(t.prototype,i,s):t.prototype[i]=r.prototype[i]})})}const eo=wl(Tr,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(eo);const nr=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:En,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),to=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var Je;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(Je||(Je={}));function _u(t=void 0){return function(){return t}}class Yi{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const r=this.className;this.TRACE_INIT("toFastProps",()=>{df(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),j(this.definedRulesNames,i=>{const s=this[i].originalGrammarAction;let o;this.TRACE_INIT(`${i} Rule`,()=>{o=this.topLevelRuleRecord(i,s)}),this.gastProductionsCache[i]=o})}finally{this.disableRecording()}});let n=[];if(this.TRACE_INIT("Grammar Resolving",()=>{n=Jy({rules:Oe(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)}),this.TRACE_INIT("Grammar Validations",()=>{if(ae(n)&&this.skipValidations===!1){const i=Qy({rules:Oe(this.gastProductionsCache),tokenTypes:Oe(this.tokensMap),errMsgProvider:jr,grammarName:r}),s=My({lookaheadStrategy:this.lookaheadStrategy,rules:Oe(this.gastProductionsCache),tokenTypes:Oe(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(i,s)}}),ae(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=Dg(Oe(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,s;(s=(i=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(i,{rules:Oe(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(Oe(this.gastProductionsCache))})),!Yi.DEFER_DEFINITION_ERRORS_HANDLING&&!ae(this.definitionErrors))throw e=M(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,r){this.definitionErrors=[],this.selfAnalysisDone=!1;const n=this;if(n.initErrorHandler(r),n.initLexerAdapter(),n.initLooksAhead(r),n.initRecognizerEngine(e,r),n.initRecoverable(r),n.initTreeBuilder(r),n.initContentAssist(),n.initGastRecorder(r),n.initPerformanceTracer(r),G(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=G(r,"skipValidations")?r.skipValidations:nr.skipValidations}}Yi.DEFER_DEFINITION_ERRORS_HANDLING=!1;xT(Yi,[iT,aT,TT,vT,$T,RT,ET,kT,bT,CT]);class NT extends Yi{constructor(e,r=nr){const n=Be(r);n.outputCst=!1,super(e,n)}}function Cn(t,e,r){return`${t.name}_${e}_${r}`}const vr=1,wT=2,Gf=4,zf=5,Xi=7,IT=8,_T=9,OT=10,PT=11,Bf=12;class Pl{constructor(e){this.target=e}isEpsilon(){return!1}}class Dl extends Pl{constructor(e,r){super(e),this.tokenType=r}}class Kf extends Pl{constructor(e){super(e)}isEpsilon(){return!0}}class Ll extends Pl{constructor(e,r,n){super(e),this.rule=r,this.followState=n}isEpsilon(){return!0}}function DT(t){const e={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};LT(e,t);const r=t.length;for(let n=0;n<r;n++){const i=t[n],s=Xr(e,i,i);s!==void 0&&VT(e,i,s)}return e}function LT(t,e){const r=e.length;for(let n=0;n<r;n++){const i=e[n],s=Le(t,i,void 0,{type:wT}),o=Le(t,i,void 0,{type:Xi});s.stop=o,t.ruleToStartState.set(i,s),t.ruleToStopState.set(i,o)}}function Wf(t,e,r){return r instanceof ue?Ml(t,e,r.terminalType,r):r instanceof Ze?WT(t,e,r):r instanceof ot?UT(t,e,r):r instanceof ze?GT(t,e,r):r instanceof Re?MT(t,e,r):r instanceof st?FT(t,e,r):r instanceof ft?qT(t,e,r):r instanceof ht?jT(t,e,r):Xr(t,e,r)}function MT(t,e,r){const n=Le(t,e,r,{type:zf});Er(t,n);const i=Wn(t,e,n,r,Xr(t,e,r));return Hf(t,e,r,i)}function FT(t,e,r){const n=Le(t,e,r,{type:zf});Er(t,n);const i=Wn(t,e,n,r,Xr(t,e,r)),s=Ml(t,e,r.separator,r);return Hf(t,e,r,i,s)}function qT(t,e,r){const n=Le(t,e,r,{type:Gf});Er(t,n);const i=Wn(t,e,n,r,Xr(t,e,r));return Vf(t,e,r,i)}function jT(t,e,r){const n=Le(t,e,r,{type:Gf});Er(t,n);const i=Wn(t,e,n,r,Xr(t,e,r)),s=Ml(t,e,r.separator,r);return Vf(t,e,r,i,s)}function UT(t,e,r){const n=Le(t,e,r,{type:vr});Er(t,n);const i=M(r.definition,s=>Wf(t,e,s));return Wn(t,e,n,r,...i)}function GT(t,e,r){const n=Le(t,e,r,{type:vr});Er(t,n);const i=Wn(t,e,n,r,Xr(t,e,r));return zT(t,e,r,i)}function Xr(t,e,r){const n=pt(M(r.definition,i=>Wf(t,e,i)),i=>i!==void 0);return n.length===1?n[0]:n.length===0?void 0:KT(t,n)}function Vf(t,e,r,n,i){const s=n.left,o=n.right,a=Le(t,e,r,{type:PT});Er(t,a);const c=Le(t,e,r,{type:Bf});return s.loopback=a,c.loopback=a,t.decisionMap[Cn(e,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",r.idx)]=a,xe(o,a),i===void 0?(xe(a,s),xe(a,c)):(xe(a,c),xe(a,i.left),xe(i.right,s)),{left:s,right:c}}function Hf(t,e,r,n,i){const s=n.left,o=n.right,a=Le(t,e,r,{type:OT});Er(t,a);const c=Le(t,e,r,{type:Bf}),l=Le(t,e,r,{type:_T});return a.loopback=l,c.loopback=l,xe(a,s),xe(a,c),xe(o,l),i!==void 0?(xe(l,c),xe(l,i.left),xe(i.right,s)):xe(l,a),t.decisionMap[Cn(e,i?"RepetitionWithSeparator":"Repetition",r.idx)]=a,{left:a,right:c}}function zT(t,e,r,n){const i=n.left,s=n.right;return xe(i,s),t.decisionMap[Cn(e,"Option",r.idx)]=i,n}function Er(t,e){return t.decisionStates.push(e),e.decision=t.decisionStates.length-1,e.decision}function Wn(t,e,r,n,...i){const s=Le(t,e,n,{type:IT,start:r});r.end=s;for(const a of i)a!==void 0?(xe(r,a.left),xe(a.right,s)):xe(r,s);const o={left:r,right:s};return t.decisionMap[Cn(e,BT(n),n.idx)]=r,o}function BT(t){if(t instanceof ot)return"Alternation";if(t instanceof ze)return"Option";if(t instanceof Re)return"Repetition";if(t instanceof st)return"RepetitionWithSeparator";if(t instanceof ft)return"RepetitionMandatory";if(t instanceof ht)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function KT(t,e){const r=e.length;for(let s=0;s<r-1;s++){const o=e[s];let a;o.left.transitions.length===1&&(a=o.left.transitions[0]);const c=a instanceof Ll,l=a,u=e[s+1].left;o.left.type===vr&&o.right.type===vr&&a!==void 0&&(c&&l.followState===o.right||a.target===o.right)?(c?l.followState=u:a.target=u,HT(t,o.right)):xe(o.right,u)}const n=e[0],i=e[r-1];return{left:n.left,right:i.right}}function Ml(t,e,r,n){const i=Le(t,e,n,{type:vr}),s=Le(t,e,n,{type:vr});return Fl(i,new Dl(s,r)),{left:i,right:s}}function WT(t,e,r){const n=r.referencedRule,i=t.ruleToStartState.get(n),s=Le(t,e,r,{type:vr}),o=Le(t,e,r,{type:vr}),a=new Ll(i,n,o);return Fl(s,a),{left:s,right:o}}function VT(t,e,r){const n=t.ruleToStartState.get(e);xe(n,r.left);const i=t.ruleToStopState.get(e);return xe(r.right,i),{left:n,right:i}}function xe(t,e){const r=new Kf(e);Fl(t,r)}function Le(t,e,r,n){const i=Object.assign({atn:t,production:r,epsilonOnlyTransitions:!1,rule:e,transitions:[],nextTokenWithinRule:[],stateNumber:t.states.length},n);return t.states.push(i),i}function Fl(t,e){t.transitions.length===0&&(t.epsilonOnlyTransitions=e.isEpsilon()),t.transitions.push(e)}function HT(t,e){t.states.splice(t.states.indexOf(e),1)}const ro={};class Ja{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const r=Yf(e);r in this.map||(this.map[r]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return M(this.configs,e=>e.alt)}get key(){let e="";for(const r in this.map)e+=r+":";return e}}function Yf(t,e=!0){return`${e?`a${t.alt}`:""}s${t.state.stateNumber}:${t.stack.map(r=>r.stateNumber.toString()).join("_")}`}function YT(t,e){const r={};return n=>{const i=n.toString();let s=r[i];return s!==void 0||(s={atnStartState:t,decision:e,states:{}},r[i]=s),s}}class Xf{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,r){this.predicates[e]=r}toString(){let e="";const r=this.predicates.length;for(let n=0;n<r;n++)e+=this.predicates[n]===!0?"1":"0";return e}}const Ou=new Xf;class XT extends Ol{constructor(e){var r;super(),this.logging=(r=e==null?void 0:e.logging)!==null&&r!==void 0?r:n=>console.log(n)}initialize(e){this.atn=DT(e.rules),this.dfas=ZT(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){const{prodOccurrence:r,rule:n,hasPredicates:i,dynamicTokensEnabled:s}=e,o=this.dfas,a=this.logging,c=Cn(n,"Alternation",r),l=this.atn.decisionMap[c].decision,u=M(bu({maxLookahead:1,occurrence:r,prodType:"Alternation",rule:n}),p=>M(p,h=>h[0]));if(Pu(u,!1)&&!s){const p=Xe(u,(h,R,E)=>(j(R,A=>{A&&(h[A.tokenTypeIdx]=E,j(A.categoryMatches,P=>{h[P]=E}))}),h),{});return i?function(h){var R;const E=this.LA(1),A=p[E.tokenTypeIdx];if(h!==void 0&&A!==void 0){const P=(R=h[A])===null||R===void 0?void 0:R.GATE;if(P!==void 0&&P.call(this)===!1)return}return A}:function(){const h=this.LA(1);return p[h.tokenTypeIdx]}}else return i?function(p){const h=new Xf,R=p===void 0?0:p.length;for(let A=0;A<R;A++){const P=p==null?void 0:p[A].GATE;h.set(A,P===void 0||P.call(this))}const E=ia.call(this,o,l,h,a);return typeof E=="number"?E:void 0}:function(){const p=ia.call(this,o,l,Ou,a);return typeof p=="number"?p:void 0}}buildLookaheadForOptional(e){const{prodOccurrence:r,rule:n,prodType:i,dynamicTokensEnabled:s}=e,o=this.dfas,a=this.logging,c=Cn(n,i,r),l=this.atn.decisionMap[c].decision,u=M(bu({maxLookahead:1,occurrence:r,prodType:i,rule:n}),p=>M(p,h=>h[0]));if(Pu(u)&&u[0][0]&&!s){const p=u[0],h=Tt(p);if(h.length===1&&ae(h[0].categoryMatches)){const R=h[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===R}}else{const R=Xe(h,(E,A)=>(A!==void 0&&(E[A.tokenTypeIdx]=!0,j(A.categoryMatches,P=>{E[P]=!0})),E),{});return function(){const E=this.LA(1);return R[E.tokenTypeIdx]===!0}}}return function(){const p=ia.call(this,o,l,Ou,a);return typeof p=="object"?!1:p===0}}}function Pu(t,e=!0){const r=new Set;for(const n of t){const i=new Set;for(const s of n){if(s===void 0){if(e)break;return!1}const o=[s.tokenTypeIdx].concat(s.categoryMatches);for(const a of o)if(r.has(a)){if(!i.has(a))return!1}else r.add(a),i.add(a)}}return!0}function ZT(t){const e=t.decisionStates.length,r=Array(e);for(let n=0;n<e;n++)r[n]=YT(t.decisionStates[n],n);return r}function ia(t,e,r,n){const i=t[e](r);let s=i.start;if(s===void 0){const o=cv(i.atnStartState);s=Jf(i,Zf(o)),i.start=s}return JT.apply(this,[i,s,r,n])}function JT(t,e,r,n){let i=e,s=1;const o=[];let a=this.LA(s++);for(;;){let c=iv(i,a);if(c===void 0&&(c=QT.apply(this,[t,i,a,s,r,n])),c===ro)return nv(o,i,a);if(c.isAcceptState===!0)return c.prediction;i=c,o.push(a),a=this.LA(s++)}}function QT(t,e,r,n,i,s){const o=sv(e.configs,r,i);if(o.size===0)return Du(t,e,r,ro),ro;let a=Zf(o);const c=av(o,i);if(c!==void 0)a.isAcceptState=!0,a.prediction=c,a.configs.uniqueAlt=c;else if(pv(o)){const l=Qh(o.alts);a.isAcceptState=!0,a.prediction=l,a.configs.uniqueAlt=l,ev.apply(this,[t,n,o.alts,s])}return a=Du(t,e,r,a),a}function ev(t,e,r,n){const i=[];for(let l=1;l<=e;l++)i.push(this.LA(l).tokenType);const s=t.atnStartState,o=s.rule,a=s.production,c=tv({topLevelRule:o,ambiguityIndices:r,production:a,prefixPath:i});n(c)}function tv(t){const e=M(t.prefixPath,i=>Sn(i)).join(", "),r=t.production.idx===0?"":t.production.idx;let n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(", ")}> in <${rv(t.production)}${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n}function rv(t){if(t instanceof Ze)return"SUBRULE";if(t instanceof ze)return"OPTION";if(t instanceof ot)return"OR";if(t instanceof ft)return"AT_LEAST_ONE";if(t instanceof ht)return"AT_LEAST_ONE_SEP";if(t instanceof st)return"MANY_SEP";if(t instanceof Re)return"MANY";if(t instanceof ue)return"CONSUME";throw Error("non exhaustive match")}function nv(t,e,r){const n=ut(e.configs.elements,s=>s.state.transitions),i=Am(n.filter(s=>s instanceof Dl).map(s=>s.tokenType),s=>s.tokenTypeIdx);return{actualToken:r,possibleTokenTypes:i,tokenPath:t}}function iv(t,e){return t.edges[e.tokenTypeIdx]}function sv(t,e,r){const n=new Ja,i=[];for(const o of t.elements){if(r.is(o.alt)===!1)continue;if(o.state.type===Xi){i.push(o);continue}const a=o.state.transitions.length;for(let c=0;c<a;c++){const l=o.state.transitions[c],u=ov(l,e);u!==void 0&&n.add({state:u,alt:o.alt,stack:o.stack})}}let s;if(i.length===0&&n.size===1&&(s=n),s===void 0){s=new Ja;for(const o of n.elements)no(o,s)}if(i.length>0&&!uv(s))for(const o of i)s.add(o);return s}function ov(t,e){if(t instanceof Dl&&kf(e,t.tokenType))return t.target}function av(t,e){let r;for(const n of t.elements)if(e.is(n.alt)===!0){if(r===void 0)r=n.alt;else if(r!==n.alt)return}return r}function Zf(t){return{configs:t,edges:{},isAcceptState:!1,prediction:-1}}function Du(t,e,r,n){return n=Jf(t,n),e.edges[r.tokenTypeIdx]=n,n}function Jf(t,e){if(e===ro)return e;const r=e.configs.key,n=t.states[r];return n!==void 0?n:(e.configs.finalize(),t.states[r]=e,e)}function cv(t){const e=new Ja,r=t.transitions.length;for(let n=0;n<r;n++){const i={state:t.transitions[n].target,alt:n,stack:[]};no(i,e)}return e}function no(t,e){const r=t.state;if(r.type===Xi){if(t.stack.length>0){const i=[...t.stack],s={state:i.pop(),alt:t.alt,stack:i};no(s,e)}else e.add(t);return}r.epsilonOnlyTransitions||e.add(t);const n=r.transitions.length;for(let i=0;i<n;i++){const s=r.transitions[i],o=lv(t,s);o!==void 0&&no(o,e)}}function lv(t,e){if(e instanceof Kf)return{state:e.target,alt:t.alt,stack:t.stack};if(e instanceof Ll){const r=[...t.stack,e.followState];return{state:e.target,alt:t.alt,stack:r}}}function uv(t){for(const e of t.elements)if(e.state.type===Xi)return!0;return!1}function dv(t){for(const e of t.elements)if(e.state.type!==Xi)return!1;return!0}function pv(t){if(dv(t))return!0;const e=fv(t.elements);return hv(e)&&!mv(e)}function fv(t){const e=new Map;for(const r of t){const n=Yf(r,!1);let i=e.get(n);i===void 0&&(i={},e.set(n,i)),i[r.alt]=!0}return e}function hv(t){for(const e of Array.from(t.values()))if(Object.keys(e).length>1)return!0;return!1}function mv(t){for(const e of Array.from(t.values()))if(Object.keys(e).length===1)return!0;return!1}var Qa;(function(t){function e(r){return typeof r=="string"}t.is=e})(Qa||(Qa={}));var io;(function(t){function e(r){return typeof r=="string"}t.is=e})(io||(io={}));var ec;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}t.is=e})(ec||(ec={}));var wi;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}t.is=e})(wi||(wi={}));var ee;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=wi.MAX_VALUE),i===Number.MAX_VALUE&&(i=wi.MAX_VALUE),{line:n,character:i}}t.create=e;function r(n){let i=n;return v.objectLiteral(i)&&v.uinteger(i.line)&&v.uinteger(i.character)}t.is=r})(ee||(ee={}));var X;(function(t){function e(n,i,s,o){if(v.uinteger(n)&&v.uinteger(i)&&v.uinteger(s)&&v.uinteger(o))return{start:ee.create(n,i),end:ee.create(s,o)};if(ee.is(n)&&ee.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${s}, ${o}]`)}t.create=e;function r(n){let i=n;return v.objectLiteral(i)&&ee.is(i.start)&&ee.is(i.end)}t.is=r})(X||(X={}));var Ii;(function(t){function e(n,i){return{uri:n,range:i}}t.create=e;function r(n){let i=n;return v.objectLiteral(i)&&X.is(i.range)&&(v.string(i.uri)||v.undefined(i.uri))}t.is=r})(Ii||(Ii={}));var tc;(function(t){function e(n,i,s,o){return{targetUri:n,targetRange:i,targetSelectionRange:s,originSelectionRange:o}}t.create=e;function r(n){let i=n;return v.objectLiteral(i)&&X.is(i.targetRange)&&v.string(i.targetUri)&&X.is(i.targetSelectionRange)&&(X.is(i.originSelectionRange)||v.undefined(i.originSelectionRange))}t.is=r})(tc||(tc={}));var so;(function(t){function e(n,i,s,o){return{red:n,green:i,blue:s,alpha:o}}t.create=e;function r(n){const i=n;return v.objectLiteral(i)&&v.numberRange(i.red,0,1)&&v.numberRange(i.green,0,1)&&v.numberRange(i.blue,0,1)&&v.numberRange(i.alpha,0,1)}t.is=r})(so||(so={}));var rc;(function(t){function e(n,i){return{range:n,color:i}}t.create=e;function r(n){const i=n;return v.objectLiteral(i)&&X.is(i.range)&&so.is(i.color)}t.is=r})(rc||(rc={}));var nc;(function(t){function e(n,i,s){return{label:n,textEdit:i,additionalTextEdits:s}}t.create=e;function r(n){const i=n;return v.objectLiteral(i)&&v.string(i.label)&&(v.undefined(i.textEdit)||Mt.is(i))&&(v.undefined(i.additionalTextEdits)||v.typedArray(i.additionalTextEdits,Mt.is))}t.is=r})(nc||(nc={}));var ic;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(ic||(ic={}));var sc;(function(t){function e(n,i,s,o,a,c){const l={startLine:n,endLine:i};return v.defined(s)&&(l.startCharacter=s),v.defined(o)&&(l.endCharacter=o),v.defined(a)&&(l.kind=a),v.defined(c)&&(l.collapsedText=c),l}t.create=e;function r(n){const i=n;return v.objectLiteral(i)&&v.uinteger(i.startLine)&&v.uinteger(i.startLine)&&(v.undefined(i.startCharacter)||v.uinteger(i.startCharacter))&&(v.undefined(i.endCharacter)||v.uinteger(i.endCharacter))&&(v.undefined(i.kind)||v.string(i.kind))}t.is=r})(sc||(sc={}));var oo;(function(t){function e(n,i){return{location:n,message:i}}t.create=e;function r(n){let i=n;return v.defined(i)&&Ii.is(i.location)&&v.string(i.message)}t.is=r})(oo||(oo={}));var oc;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(oc||(oc={}));var ac;(function(t){t.Unnecessary=1,t.Deprecated=2})(ac||(ac={}));var cc;(function(t){function e(r){const n=r;return v.objectLiteral(n)&&v.string(n.href)}t.is=e})(cc||(cc={}));var _i;(function(t){function e(n,i,s,o,a,c){let l={range:n,message:i};return v.defined(s)&&(l.severity=s),v.defined(o)&&(l.code=o),v.defined(a)&&(l.source=a),v.defined(c)&&(l.relatedInformation=c),l}t.create=e;function r(n){var i;let s=n;return v.defined(s)&&X.is(s.range)&&v.string(s.message)&&(v.number(s.severity)||v.undefined(s.severity))&&(v.integer(s.code)||v.string(s.code)||v.undefined(s.code))&&(v.undefined(s.codeDescription)||v.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(v.string(s.source)||v.undefined(s.source))&&(v.undefined(s.relatedInformation)||v.typedArray(s.relatedInformation,oo.is))}t.is=r})(_i||(_i={}));var Vr;(function(t){function e(n,i,...s){let o={title:n,command:i};return v.defined(s)&&s.length>0&&(o.arguments=s),o}t.create=e;function r(n){let i=n;return v.defined(i)&&v.string(i.title)&&v.string(i.command)}t.is=r})(Vr||(Vr={}));var Mt;(function(t){function e(s,o){return{range:s,newText:o}}t.replace=e;function r(s,o){return{range:{start:s,end:s},newText:o}}t.insert=r;function n(s){return{range:s,newText:""}}t.del=n;function i(s){const o=s;return v.objectLiteral(o)&&v.string(o.newText)&&X.is(o.range)}t.is=i})(Mt||(Mt={}));var Ur;(function(t){function e(n,i,s){const o={label:n};return i!==void 0&&(o.needsConfirmation=i),s!==void 0&&(o.description=s),o}t.create=e;function r(n){const i=n;return v.objectLiteral(i)&&v.string(i.label)&&(v.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(v.string(i.description)||i.description===void 0)}t.is=r})(Ur||(Ur={}));var Ue;(function(t){function e(r){const n=r;return v.string(n)}t.is=e})(Ue||(Ue={}));var Zt;(function(t){function e(s,o,a){return{range:s,newText:o,annotationId:a}}t.replace=e;function r(s,o,a){return{range:{start:s,end:s},newText:o,annotationId:a}}t.insert=r;function n(s,o){return{range:s,newText:"",annotationId:o}}t.del=n;function i(s){const o=s;return Mt.is(o)&&(Ur.is(o.annotationId)||Ue.is(o.annotationId))}t.is=i})(Zt||(Zt={}));var Oi;(function(t){function e(n,i){return{textDocument:n,edits:i}}t.create=e;function r(n){let i=n;return v.defined(i)&&Pi.is(i.textDocument)&&Array.isArray(i.edits)}t.is=r})(Oi||(Oi={}));var xn;(function(t){function e(n,i,s){let o={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&v.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||v.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||v.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Ue.is(i.annotationId))}t.is=r})(xn||(xn={}));var Nn;(function(t){function e(n,i,s,o){let a={kind:"rename",oldUri:n,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(a.options=s),o!==void 0&&(a.annotationId=o),a}t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&v.string(i.oldUri)&&v.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||v.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||v.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Ue.is(i.annotationId))}t.is=r})(Nn||(Nn={}));var wn;(function(t){function e(n,i,s){let o={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&v.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||v.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||v.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Ue.is(i.annotationId))}t.is=r})(wn||(wn={}));var ao;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>v.string(i.kind)?xn.is(i)||Nn.is(i)||wn.is(i):Oi.is(i)))}t.is=e})(ao||(ao={}));class Es{constructor(e,r){this.edits=e,this.changeAnnotations=r}insert(e,r,n){let i,s;if(n===void 0?i=Mt.insert(e,r):Ue.is(n)?(s=n,i=Zt.insert(e,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),i=Zt.insert(e,r,s)),this.edits.push(i),s!==void 0)return s}replace(e,r,n){let i,s;if(n===void 0?i=Mt.replace(e,r):Ue.is(n)?(s=n,i=Zt.replace(e,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),i=Zt.replace(e,r,s)),this.edits.push(i),s!==void 0)return s}delete(e,r){let n,i;if(r===void 0?n=Mt.del(e):Ue.is(r)?(i=r,n=Zt.del(e,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=Zt.del(e,i)),this.edits.push(n),i!==void 0)return i}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")}}class Lu{constructor(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,r){let n;if(Ue.is(e)?n=e:(n=this.nextId(),r=e),this._annotations[n]!==void 0)throw new Error(`Id ${n} is already in use.`);if(r===void 0)throw new Error(`No annotation provided for id ${n}`);return this._annotations[n]=r,this._size++,n}nextId(){return this._counter++,this._counter.toString()}}class gv{constructor(e){this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Lu(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(r=>{if(Oi.is(r)){const n=new Es(r.edits,this._changeAnnotations);this._textEditChanges[r.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach(r=>{const n=new Es(e.changes[r]);this._textEditChanges[r]=n})):this._workspaceEdit={}}get edit(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(Pi.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");const r={uri:e.uri,version:e.version};let n=this._textEditChanges[r.uri];if(!n){const i=[],s={textDocument:r,edits:i};this._workspaceEdit.documentChanges.push(s),n=new Es(i,this._changeAnnotations),this._textEditChanges[r.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");let r=this._textEditChanges[e];if(!r){let n=[];this._workspaceEdit.changes[e]=n,r=new Es(n),this._textEditChanges[e]=r}return r}}initDocumentChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Lu,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;Ur.is(r)||Ue.is(r)?i=r:n=r;let s,o;if(i===void 0?s=xn.create(e,n):(o=Ue.is(i)?i:this._changeAnnotations.manage(i),s=xn.create(e,n,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o}renameFile(e,r,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let s;Ur.is(n)||Ue.is(n)?s=n:i=n;let o,a;if(s===void 0?o=Nn.create(e,r,i):(a=Ue.is(s)?s:this._changeAnnotations.manage(s),o=Nn.create(e,r,i,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a}deleteFile(e,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;Ur.is(r)||Ue.is(r)?i=r:n=r;let s,o;if(i===void 0?s=wn.create(e,n):(o=Ue.is(i)?i:this._changeAnnotations.manage(i),s=wn.create(e,n,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o}}var lc;(function(t){function e(n){return{uri:n}}t.create=e;function r(n){let i=n;return v.defined(i)&&v.string(i.uri)}t.is=r})(lc||(lc={}));var uc;(function(t){function e(n,i){return{uri:n,version:i}}t.create=e;function r(n){let i=n;return v.defined(i)&&v.string(i.uri)&&v.integer(i.version)}t.is=r})(uc||(uc={}));var Pi;(function(t){function e(n,i){return{uri:n,version:i}}t.create=e;function r(n){let i=n;return v.defined(i)&&v.string(i.uri)&&(i.version===null||v.integer(i.version))}t.is=r})(Pi||(Pi={}));var dc;(function(t){function e(n,i,s,o){return{uri:n,languageId:i,version:s,text:o}}t.create=e;function r(n){let i=n;return v.defined(i)&&v.string(i.uri)&&v.string(i.languageId)&&v.integer(i.version)&&v.string(i.text)}t.is=r})(dc||(dc={}));var co;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){const n=r;return n===t.PlainText||n===t.Markdown}t.is=e})(co||(co={}));var In;(function(t){function e(r){const n=r;return v.objectLiteral(r)&&co.is(n.kind)&&v.string(n.value)}t.is=e})(In||(In={}));var pc;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(pc||(pc={}));var fc;(function(t){t.PlainText=1,t.Snippet=2})(fc||(fc={}));var hc;(function(t){t.Deprecated=1})(hc||(hc={}));var mc;(function(t){function e(n,i,s){return{newText:n,insert:i,replace:s}}t.create=e;function r(n){const i=n;return i&&v.string(i.newText)&&X.is(i.insert)&&X.is(i.replace)}t.is=r})(mc||(mc={}));var gc;(function(t){t.asIs=1,t.adjustIndentation=2})(gc||(gc={}));var yc;(function(t){function e(r){const n=r;return n&&(v.string(n.detail)||n.detail===void 0)&&(v.string(n.description)||n.description===void 0)}t.is=e})(yc||(yc={}));var Tc;(function(t){function e(r){return{label:r}}t.create=e})(Tc||(Tc={}));var vc;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}t.create=e})(vc||(vc={}));var Di;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function r(n){const i=n;return v.string(i)||v.objectLiteral(i)&&v.string(i.language)&&v.string(i.value)}t.is=r})(Di||(Di={}));var Rc;(function(t){function e(r){let n=r;return!!n&&v.objectLiteral(n)&&(In.is(n.contents)||Di.is(n.contents)||v.typedArray(n.contents,Di.is))&&(r.range===void 0||X.is(r.range))}t.is=e})(Rc||(Rc={}));var $c;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}t.create=e})($c||($c={}));var Ec;(function(t){function e(r,n,...i){let s={label:r};return v.defined(n)&&(s.documentation=n),v.defined(i)?s.parameters=i:s.parameters=[],s}t.create=e})(Ec||(Ec={}));var kc;(function(t){t.Text=1,t.Read=2,t.Write=3})(kc||(kc={}));var Sc;(function(t){function e(r,n){let i={range:r};return v.number(n)&&(i.kind=n),i}t.create=e})(Sc||(Sc={}));var bc;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(bc||(bc={}));var Ac;(function(t){t.Deprecated=1})(Ac||(Ac={}));var Cc;(function(t){function e(r,n,i,s,o){let a={name:r,kind:n,location:{uri:s,range:i}};return o&&(a.containerName=o),a}t.create=e})(Cc||(Cc={}));var xc;(function(t){function e(r,n,i,s){return s!==void 0?{name:r,kind:n,location:{uri:i,range:s}}:{name:r,kind:n,location:{uri:i}}}t.create=e})(xc||(xc={}));var Nc;(function(t){function e(n,i,s,o,a,c){let l={name:n,detail:i,kind:s,range:o,selectionRange:a};return c!==void 0&&(l.children=c),l}t.create=e;function r(n){let i=n;return i&&v.string(i.name)&&v.number(i.kind)&&X.is(i.range)&&X.is(i.selectionRange)&&(i.detail===void 0||v.string(i.detail))&&(i.deprecated===void 0||v.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=r})(Nc||(Nc={}));var wc;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(wc||(wc={}));var Li;(function(t){t.Invoked=1,t.Automatic=2})(Li||(Li={}));var Ic;(function(t){function e(n,i,s){let o={diagnostics:n};return i!=null&&(o.only=i),s!=null&&(o.triggerKind=s),o}t.create=e;function r(n){let i=n;return v.defined(i)&&v.typedArray(i.diagnostics,_i.is)&&(i.only===void 0||v.typedArray(i.only,v.string))&&(i.triggerKind===void 0||i.triggerKind===Li.Invoked||i.triggerKind===Li.Automatic)}t.is=r})(Ic||(Ic={}));var _c;(function(t){function e(n,i,s){let o={title:n},a=!0;return typeof i=="string"?(a=!1,o.kind=i):Vr.is(i)?o.command=i:o.edit=i,a&&s!==void 0&&(o.kind=s),o}t.create=e;function r(n){let i=n;return i&&v.string(i.title)&&(i.diagnostics===void 0||v.typedArray(i.diagnostics,_i.is))&&(i.kind===void 0||v.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Vr.is(i.command))&&(i.isPreferred===void 0||v.boolean(i.isPreferred))&&(i.edit===void 0||ao.is(i.edit))}t.is=r})(_c||(_c={}));var Oc;(function(t){function e(n,i){let s={range:n};return v.defined(i)&&(s.data=i),s}t.create=e;function r(n){let i=n;return v.defined(i)&&X.is(i.range)&&(v.undefined(i.command)||Vr.is(i.command))}t.is=r})(Oc||(Oc={}));var Pc;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}t.create=e;function r(n){let i=n;return v.defined(i)&&v.uinteger(i.tabSize)&&v.boolean(i.insertSpaces)}t.is=r})(Pc||(Pc={}));var Dc;(function(t){function e(n,i,s){return{range:n,target:i,data:s}}t.create=e;function r(n){let i=n;return v.defined(i)&&X.is(i.range)&&(v.undefined(i.target)||v.string(i.target))}t.is=r})(Dc||(Dc={}));var Lc;(function(t){function e(n,i){return{range:n,parent:i}}t.create=e;function r(n){let i=n;return v.objectLiteral(i)&&X.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=r})(Lc||(Lc={}));var Mc;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(Mc||(Mc={}));var Fc;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Fc||(Fc={}));var qc;(function(t){function e(r){const n=r;return v.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}t.is=e})(qc||(qc={}));var jc;(function(t){function e(n,i){return{range:n,text:i}}t.create=e;function r(n){const i=n;return i!=null&&X.is(i.range)&&v.string(i.text)}t.is=r})(jc||(jc={}));var Uc;(function(t){function e(n,i,s){return{range:n,variableName:i,caseSensitiveLookup:s}}t.create=e;function r(n){const i=n;return i!=null&&X.is(i.range)&&v.boolean(i.caseSensitiveLookup)&&(v.string(i.variableName)||i.variableName===void 0)}t.is=r})(Uc||(Uc={}));var Gc;(function(t){function e(n,i){return{range:n,expression:i}}t.create=e;function r(n){const i=n;return i!=null&&X.is(i.range)&&(v.string(i.expression)||i.expression===void 0)}t.is=r})(Gc||(Gc={}));var zc;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}t.create=e;function r(n){const i=n;return v.defined(i)&&X.is(n.stoppedLocation)}t.is=r})(zc||(zc={}));var lo;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}t.is=e})(lo||(lo={}));var uo;(function(t){function e(n){return{value:n}}t.create=e;function r(n){const i=n;return v.objectLiteral(i)&&(i.tooltip===void 0||v.string(i.tooltip)||In.is(i.tooltip))&&(i.location===void 0||Ii.is(i.location))&&(i.command===void 0||Vr.is(i.command))}t.is=r})(uo||(uo={}));var Bc;(function(t){function e(n,i,s){const o={position:n,label:i};return s!==void 0&&(o.kind=s),o}t.create=e;function r(n){const i=n;return v.objectLiteral(i)&&ee.is(i.position)&&(v.string(i.label)||v.typedArray(i.label,uo.is))&&(i.kind===void 0||lo.is(i.kind))&&i.textEdits===void 0||v.typedArray(i.textEdits,Mt.is)&&(i.tooltip===void 0||v.string(i.tooltip)||In.is(i.tooltip))&&(i.paddingLeft===void 0||v.boolean(i.paddingLeft))&&(i.paddingRight===void 0||v.boolean(i.paddingRight))}t.is=r})(Bc||(Bc={}));var Kc;(function(t){function e(r){return{kind:"snippet",value:r}}t.createSnippet=e})(Kc||(Kc={}));var Wc;(function(t){function e(r,n,i,s){return{insertText:r,filterText:n,range:i,command:s}}t.create=e})(Wc||(Wc={}));var Vc;(function(t){function e(r){return{items:r}}t.create=e})(Vc||(Vc={}));var Hc;(function(t){t.Invoked=0,t.Automatic=1})(Hc||(Hc={}));var Yc;(function(t){function e(r,n){return{range:r,text:n}}t.create=e})(Yc||(Yc={}));var Xc;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}t.create=e})(Xc||(Xc={}));var Zc;(function(t){function e(r){const n=r;return v.objectLiteral(n)&&io.is(n.uri)&&v.string(n.name)}t.is=e})(Zc||(Zc={}));const yv=[`
`,`\r
`,"\r"];var Jc;(function(t){function e(s,o,a,c){return new Tv(s,o,a,c)}t.create=e;function r(s){let o=s;return!!(v.defined(o)&&v.string(o.uri)&&(v.undefined(o.languageId)||v.string(o.languageId))&&v.uinteger(o.lineCount)&&v.func(o.getText)&&v.func(o.positionAt)&&v.func(o.offsetAt))}t.is=r;function n(s,o){let a=s.getText(),c=i(o,(u,p)=>{let h=u.range.start.line-p.range.start.line;return h===0?u.range.start.character-p.range.start.character:h}),l=a.length;for(let u=c.length-1;u>=0;u--){let p=c[u],h=s.offsetAt(p.range.start),R=s.offsetAt(p.range.end);if(R<=l)a=a.substring(0,h)+p.newText+a.substring(R,a.length);else throw new Error("Overlapping edit");l=h}return a}t.applyEdits=n;function i(s,o){if(s.length<=1)return s;const a=s.length/2|0,c=s.slice(0,a),l=s.slice(a);i(c,o),i(l,o);let u=0,p=0,h=0;for(;u<c.length&&p<l.length;)o(c[u],l[p])<=0?s[h++]=c[u++]:s[h++]=l[p++];for(;u<c.length;)s[h++]=c[u++];for(;p<l.length;)s[h++]=l[p++];return s}})(Jc||(Jc={}));let Tv=class{constructor(t,e,r,n){this._uri=t,this._languageId=e,this._version=r,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let e=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(e,r)}return this._content}update(t,e){this._content=t.text,this._version=e,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let t=[],e=this._content,r=!0;for(let n=0;n<e.length;n++){r&&(t.push(n),r=!1);let i=e.charAt(n);r=i==="\r"||i===`
`,i==="\r"&&n+1<e.length&&e.charAt(n+1)===`
`&&n++}r&&e.length>0&&t.push(e.length),this._lineOffsets=t}return this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let e=this.getLineOffsets(),r=0,n=e.length;if(n===0)return ee.create(0,t);for(;r<n;){let s=Math.floor((r+n)/2);e[s]>t?n=s:r=s+1}let i=r-1;return ee.create(i,t-e[i])}offsetAt(t){let e=this.getLineOffsets();if(t.line>=e.length)return this._content.length;if(t.line<0)return 0;let r=e[t.line],n=t.line+1<e.length?e[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,n),r)}get lineCount(){return this.getLineOffsets().length}};var v;(function(t){const e=Object.prototype.toString;function r(R){return typeof R<"u"}t.defined=r;function n(R){return typeof R>"u"}t.undefined=n;function i(R){return R===!0||R===!1}t.boolean=i;function s(R){return e.call(R)==="[object String]"}t.string=s;function o(R){return e.call(R)==="[object Number]"}t.number=o;function a(R,E,A){return e.call(R)==="[object Number]"&&E<=R&&R<=A}t.numberRange=a;function c(R){return e.call(R)==="[object Number]"&&-2147483648<=R&&R<=2147483647}t.integer=c;function l(R){return e.call(R)==="[object Number]"&&0<=R&&R<=2147483647}t.uinteger=l;function u(R){return e.call(R)==="[object Function]"}t.func=u;function p(R){return R!==null&&typeof R=="object"}t.objectLiteral=p;function h(R,E){return Array.isArray(R)&&R.every(E)}t.typedArray=h})(v||(v={}));const vv=Object.freeze(Object.defineProperty({__proto__:null,get AnnotatedTextEdit(){return Zt},get ChangeAnnotation(){return Ur},get ChangeAnnotationIdentifier(){return Ue},get CodeAction(){return _c},get CodeActionContext(){return Ic},get CodeActionKind(){return wc},get CodeActionTriggerKind(){return Li},get CodeDescription(){return cc},get CodeLens(){return Oc},get Color(){return so},get ColorInformation(){return rc},get ColorPresentation(){return nc},get Command(){return Vr},get CompletionItem(){return Tc},get CompletionItemKind(){return pc},get CompletionItemLabelDetails(){return yc},get CompletionItemTag(){return hc},get CompletionList(){return vc},get CreateFile(){return xn},get DeleteFile(){return wn},get Diagnostic(){return _i},get DiagnosticRelatedInformation(){return oo},get DiagnosticSeverity(){return oc},get DiagnosticTag(){return ac},get DocumentHighlight(){return Sc},get DocumentHighlightKind(){return kc},get DocumentLink(){return Dc},get DocumentSymbol(){return Nc},get DocumentUri(){return Qa},EOL:yv,get FoldingRange(){return sc},get FoldingRangeKind(){return ic},get FormattingOptions(){return Pc},get Hover(){return Rc},get InlayHint(){return Bc},get InlayHintKind(){return lo},get InlayHintLabelPart(){return uo},get InlineCompletionContext(){return Xc},get InlineCompletionItem(){return Wc},get InlineCompletionList(){return Vc},get InlineCompletionTriggerKind(){return Hc},get InlineValueContext(){return zc},get InlineValueEvaluatableExpression(){return Gc},get InlineValueText(){return jc},get InlineValueVariableLookup(){return Uc},get InsertReplaceEdit(){return mc},get InsertTextFormat(){return fc},get InsertTextMode(){return gc},get Location(){return Ii},get LocationLink(){return tc},get MarkedString(){return Di},get MarkupContent(){return In},get MarkupKind(){return co},get OptionalVersionedTextDocumentIdentifier(){return Pi},get ParameterInformation(){return $c},get Position(){return ee},get Range(){return X},get RenameFile(){return Nn},get SelectedCompletionInfo(){return Yc},get SelectionRange(){return Lc},get SemanticTokenModifiers(){return Fc},get SemanticTokenTypes(){return Mc},get SemanticTokens(){return qc},get SignatureInformation(){return Ec},get StringValue(){return Kc},get SymbolInformation(){return Cc},get SymbolKind(){return bc},get SymbolTag(){return Ac},get TextDocument(){return Jc},get TextDocumentEdit(){return Oi},get TextDocumentIdentifier(){return lc},get TextDocumentItem(){return dc},get TextEdit(){return Mt},get URI(){return io},get VersionedTextDocumentIdentifier(){return uc},WorkspaceChange:gv,get WorkspaceEdit(){return ao},get WorkspaceFolder(){return Zc},get WorkspaceSymbol(){return xc},get integer(){return ec},get uinteger(){return wi}},Symbol.toStringTag,{value:"Module"}));class Rv{constructor(){this.nodeStack=[]}get current(){return this.nodeStack[this.nodeStack.length-1]??this.rootNode}buildRootNode(e){return this.rootNode=new eh(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){const r=new ql;return r.grammarSource=e,r.root=this.rootNode,this.current.content.push(r),this.nodeStack.push(r),r}buildLeafNode(e,r){const n=new Qc(e.startOffset,e.image.length,Ua(e),e.tokenType,!r);return n.grammarSource=r,n.root=this.rootNode,this.current.content.push(n),n}removeNode(e){const r=e.container;if(r){const n=r.content.indexOf(e);n>=0&&r.content.splice(n,1)}}addHiddenNodes(e){const r=[];for(const s of e){const o=new Qc(s.startOffset,s.image.length,Ua(s),s.tokenType,!0);o.root=this.rootNode,r.push(o)}let n=this.current,i=!1;if(n.content.length>0){n.content.push(...r);return}for(;n.container;){const s=n.container.content.indexOf(n);if(s>0){n.container.content.splice(s,0,...r),i=!0;break}n=n.container}i||this.rootNode.content.unshift(...r)}construct(e){const r=this.current;typeof e.$type=="string"&&!e.$infixName&&(this.current.astNode=e),e.$cstNode=r;const n=this.nodeStack.pop();(n==null?void 0:n.content.length)===0&&this.removeNode(n)}}class Qf{get hidden(){return!1}get astNode(){var e,r;const n=typeof((e=this._astNode)==null?void 0:e.$type)=="string"?this._astNode:(r=this.container)==null?void 0:r.astNode;if(!n)throw new Error("This node has no associated AST element");return n}set astNode(e){this._astNode=e}get text(){return this.root.fullText.substring(this.offset,this.end)}}class Qc extends Qf{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,r,n,i,s=!1){super(),this._hidden=s,this._offset=e,this._tokenType=i,this._length=r,this._range=n}}class ql extends Qf{constructor(){super(...arguments),this.content=new jl(this)}get offset(){var e;return((e=this.firstNonHiddenNode)==null?void 0:e.offset)??0}get length(){return this.end-this.offset}get end(){var e;return((e=this.lastNonHiddenNode)==null?void 0:e.end)??0}get range(){const e=this.firstNonHiddenNode,r=this.lastNonHiddenNode;if(e&&r){if(this._rangeCache===void 0){const{range:n}=e,{range:i}=r;this._rangeCache={start:n.start,end:i.end.line<n.start.line?n.start:i.end}}return this._rangeCache}else return{start:ee.create(0,0),end:ee.create(0,0)}}get firstNonHiddenNode(){for(const e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){const r=this.content[e];if(!r.hidden)return r}return this.content[this.content.length-1]}}class jl extends Array{constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,jl.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,r,...n){return this.addParents(n),super.splice(e,r,...n)}addParents(e){for(const r of e)r.container=this.parent}}class eh extends ql{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e??""}}const el=Symbol("Datatype");function sa(t){return t.$type===el}const Mu="​",th=t=>t.endsWith(Mu)?t:t+Mu;class rh{constructor(e){var r;this._unorderedGroups=new Map,this.allRules=new Map,this.lexer=e.parser.Lexer;const n=this.lexer.definition,i=e.LanguageMetaData.mode==="production";(r=e.shared.profilers.LangiumProfiler)!=null&&r.isActive("parsing")?this.wrapper=new bv(n,{...e.parser.ParserConfig,skipValidations:i,errorMessageProvider:e.parser.ParserErrorMessageProvider},e.shared.profilers.LangiumProfiler.createTask("parsing",e.LanguageMetaData.languageId)):this.wrapper=new ih(n,{...e.parser.ParserConfig,skipValidations:i,errorMessageProvider:e.parser.ParserErrorMessageProvider})}alternatives(e,r){this.wrapper.wrapOr(e,r)}optional(e,r){this.wrapper.wrapOption(e,r)}many(e,r){this.wrapper.wrapMany(e,r)}atLeastOne(e,r){this.wrapper.wrapAtLeastOne(e,r)}getRule(e){return this.allRules.get(e)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}}class $v extends rh{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new Rv,this.stack=[],this.assignmentMap=new Map,this.operatorPrecedence=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,r){const n=this.computeRuleType(e);let i;Ks(e)&&(i=e.name,this.registerPrecedenceMap(e));const s=this.wrapper.DEFINE_RULE(th(e.name),this.startImplementation(n,i,r).bind(this));return this.allRules.set(e.name,s),sr(e)&&e.entry&&(this.mainRule=s),s}registerPrecedenceMap(e){const r=e.name,n=new Map;for(let i=0;i<e.operators.precedences.length;i++){const s=e.operators.precedences[i];for(const o of s.operators)n.set(o.value,{precedence:i,rightAssoc:s.associativity==="right"})}this.operatorPrecedence.set(r,n)}computeRuleType(e){return Ks(e)?Ni(e):e.fragment?void 0:of(e)?el:Ni(e)}parse(e,r={}){this.nodeBuilder.buildRootNode(e);const n=this.lexerResult=this.lexer.tokenize(e);this.wrapper.input=n.tokens;const i=r.rule?this.allRules.get(r.rule):this.mainRule;if(!i)throw new Error(r.rule?`No rule found with name '${r.rule}'`:"No main rule available.");const s=this.doParse(i);return this.nodeBuilder.addHiddenNodes(n.hidden),this.unorderedGroups.clear(),this.lexerResult=void 0,_a(s,{deep:!0}),{value:s,lexerErrors:n.errors,lexerReport:n.report,parserErrors:this.wrapper.errors}}doParse(e){let r=this.wrapper.rule(e);if(this.stack.length>0&&(r=this.construct()),r===void 0)throw new Error("No result from parser");if(this.stack.length>0)throw new Error("Parser stack is not empty after parsing");return r}startImplementation(e,r,n){return i=>{const s=!this.isRecording()&&e!==void 0;if(s){const o={$type:e};this.stack.push(o),e===el?o.value="":r!==void 0&&(o.$infixName=r)}return n(i),s?this.construct():void 0}}extractHiddenTokens(e){const r=this.lexerResult.hidden;if(!r.length)return[];const n=e.startOffset;for(let i=0;i<r.length;i++)if(r[i].startOffset>n)return r.splice(0,i);return r.splice(0,r.length)}consume(e,r,n){const i=this.wrapper.wrapConsume(e,r);if(!this.isRecording()&&this.isValidToken(i)){const s=this.extractHiddenTokens(i);this.nodeBuilder.addHiddenNodes(s);const o=this.nodeBuilder.buildLeafNode(i,n),{assignment:a,crossRef:c}=this.getAssignment(n),l=this.current;if(a){const u=Br(n)?i.image:this.converter.convert(i.image,o);this.assign(a.operator,a.feature,u,o,c)}else if(sa(l)){let u=i.image;Br(n)||(u=this.converter.convert(u,o).toString()),l.value+=u}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&typeof e.endOffset=="number"&&!isNaN(e.endOffset)}subrule(e,r,n,i,s){let o;!this.isRecording()&&!n&&(o=this.nodeBuilder.buildCompositeNode(i));let a;try{a=this.wrapper.wrapSubrule(e,r,s)}finally{this.isRecording()||(a===void 0&&!n&&(a=this.construct()),a!==void 0&&o&&o.length>0&&this.performSubruleAssignment(a,i,o))}}performSubruleAssignment(e,r,n){const{assignment:i,crossRef:s}=this.getAssignment(r);if(i)this.assign(i.operator,i.feature,e,n,s);else if(!i){const o=this.current;if(sa(o))o.value+=e.toString();else if(typeof e=="object"&&e){const a=this.assignWithoutOverride(e,o);this.stack.pop(),this.stack.push(a)}}}action(e,r){if(!this.isRecording()){let n=this.current;if(r.feature&&r.operator){n=this.construct(),this.nodeBuilder.removeNode(n.$cstNode),this.nodeBuilder.buildCompositeNode(r).content.push(n.$cstNode);const i={$type:e};this.stack.push(i),this.assign(r.operator,r.feature,n,n.$cstNode)}else n.$type=e}}construct(){if(this.isRecording())return;const e=this.stack.pop();return this.nodeBuilder.construct(e),"$infixName"in e?this.constructInfix(e,this.operatorPrecedence.get(e.$infixName)):sa(e)?this.converter.convert(e.value,e.$cstNode):(Nm(this.astReflection,e),e)}constructInfix(e,r){const n=e.parts;if(!Array.isArray(n)||n.length===0)return;const i=e.operators;if(!Array.isArray(i)||n.length<2)return n[0];let s=0,o=-1;for(let A=0;A<i.length;A++){const P=i[A],N=r.get(P)??{precedence:1/0,rightAssoc:!1};N.precedence>o?(o=N.precedence,s=A):N.precedence===o&&(N.rightAssoc||(s=A))}const a=i.slice(0,s),c=i.slice(s+1),l=n.slice(0,s+1),u=n.slice(s+1),p={$infixName:e.$infixName,$type:e.$type,$cstNode:e.$cstNode,parts:l,operators:a},h={$infixName:e.$infixName,$type:e.$type,$cstNode:e.$cstNode,parts:u,operators:c},R=this.constructInfix(p,r),E=this.constructInfix(h,r);return{$type:e.$type,$cstNode:e.$cstNode,left:R,operator:i[s],right:E}}getAssignment(e){if(!this.assignmentMap.has(e)){const r=ko(e,zr);this.assignmentMap.set(e,{assignment:r,crossRef:r&&bo(r.terminal)?r.terminal.isMulti?"multi":"single":void 0})}return this.assignmentMap.get(e)}assign(e,r,n,i,s){const o=this.current;let a;switch(s==="single"&&typeof n=="string"?a=this.linker.buildReference(o,r,i,n):s==="multi"&&typeof n=="string"?a=this.linker.buildMultiReference(o,r,i,n):a=n,e){case"=":{o[r]=a;break}case"?=":{o[r]=!0;break}case"+=":Array.isArray(o[r])||(o[r]=[]),o[r].push(a)}}assignWithoutOverride(e,r){for(const[i,s]of Object.entries(r)){const o=e[i];o===void 0?e[i]=s:Array.isArray(o)&&Array.isArray(s)&&(s.push(...o),e[i]=s)}const n=e.$cstNode;return n&&(n.astNode=void 0,e.$cstNode=void 0),e}get definitionErrors(){return this.wrapper.definitionErrors}}class Ev{buildMismatchTokenMessage(e){return En.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return En.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return En.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return En.buildEarlyExitMessage(e)}}class nh extends Ev{buildMismatchTokenMessage({expected:e,actual:r}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${r.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}}class kv extends rh{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();const r=this.lexer.tokenize(e,{mode:"partial"});return this.tokens=r.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,r){const n=this.wrapper.DEFINE_RULE(th(e.name),this.startImplementation(r).bind(this));return this.allRules.set(e.name,n),e.entry&&(this.mainRule=n),n}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return r=>{const n=this.keepStackSize();try{e(r)}finally{this.resetStackSize(n)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,r,n){this.wrapper.wrapConsume(e,r),this.isRecording()||(this.lastElementStack=[...this.elementStack,n],this.nextTokenIndex=this.currIdx+1)}subrule(e,r,n,i,s){this.before(i),this.wrapper.wrapSubrule(e,r,s),this.after(i)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){const r=this.elementStack.lastIndexOf(e);r>=0&&this.elementStack.splice(r)}}get currIdx(){return this.wrapper.currIdx}}const Sv={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new nh};class ih extends NT{constructor(e,r){const n=r&&"maxLookahead"in r;super(e,{...Sv,lookaheadStrategy:n?new Ol({maxLookahead:r.maxLookahead}):new XT({logging:r.skipValidations?()=>{}:void 0}),...r})}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,r,n){return this.RULE(e,r,n)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,r){return this.consume(e,r,void 0)}wrapSubrule(e,r,n){return this.subrule(e,r,{ARGS:[n]})}wrapOr(e,r){this.or(e,r)}wrapOption(e,r){this.option(e,r)}wrapMany(e,r){this.many(e,r)}wrapAtLeastOne(e,r){this.atLeastOne(e,r)}rule(e){return e.call(this,{})}}class bv extends ih{constructor(e,r,n){super(e,r),this.task=n}rule(e){this.task.start(),this.task.startSubTask(this.ruleName(e));try{return super.rule(e)}finally{this.task.stopSubTask(this.ruleName(e)),this.task.stop()}}ruleName(e){return e.ruleName}subrule(e,r,n){this.task.startSubTask(this.ruleName(r));try{return super.subrule(e,r,n)}finally{this.task.stopSubTask(this.ruleName(r))}}}function sh(t,e,r){return Av({parser:e,tokens:r,ruleNames:new Map},t),e}function Av(t,e){const r=ef(e,!1),n=he(e.rules).filter(sr).filter(s=>r.has(s));for(const s of n){const o={...t,consume:1,optional:1,subrule:1,many:1,or:1};t.parser.rule(s,Hr(o,s.definition))}const i=he(e.rules).filter(Ks).filter(s=>r.has(s));for(const s of i)t.parser.rule(s,Cv(t,s))}function Cv(t,e){const r=e.call.rule.ref;if(!r)throw new Error("Could not resolve reference to infix operator rule: "+e.call.rule.$refText);if(or(r))throw new Error("Cannot use terminal rule in infix expression");const n=e.operators.precedences.flatMap(p=>p.operators),i={$type:"Group",elements:[]},s={$container:i,$type:"Assignment",feature:"parts",operator:"+=",terminal:e.call},o={$container:i,$type:"Group",elements:[],cardinality:"*"};i.elements.push(s,o);const a={$container:o,$type:"Assignment",feature:"operators",operator:"+=",terminal:{$type:"Alternatives",elements:n}},c={...s,$container:o};o.elements.push(a,c);const l=n.map(p=>t.tokens[p.value]).map((p,h)=>({ALT:()=>t.parser.consume(h,p,a)}));let u;return p=>{u??(u=Ul(t,r)),t.parser.subrule(0,u,!1,s,p),t.parser.many(0,{DEF:()=>{t.parser.alternatives(0,l),t.parser.subrule(1,u,!1,c,p)}})}}function Hr(t,e,r=!1){let n;if(Br(e))n=Pv(t,e);else if(So(e))n=xv(t,e);else if(zr(e))n=Hr(t,e.terminal);else if(bo(e))n=oh(t,e);else if(Kr(e))n=Nv(t,e);else if(Wp(e))n=Iv(t,e);else if(Yp(e))n=_v(t,e);else if(bl(e))n=Ov(t,e);else if(Dm(e)){const i=t.consume++;n=()=>t.parser.consume(i,Tr,e)}else throw new Zp(e.$cstNode,`Unexpected element type: ${e.$type}`);return ah(t,r?void 0:po(e),n,e.cardinality)}function xv(t,e){const r=Ni(e);return()=>t.parser.action(r,e)}function Nv(t,e){const r=e.rule.ref;if(Bi(r)){const n=t.subrule++,i=sr(r)&&r.fragment,s=e.arguments.length>0?wv(r,e.arguments):()=>({});let o;return a=>{o??(o=Ul(t,r)),t.parser.subrule(n,o,i,e,s(a))}}else if(or(r)){const n=t.consume++,i=tl(t,r.name);return()=>t.parser.consume(n,i,e)}else if(r)Ki();else throw new Zp(e.$cstNode,`Undefined rule: ${e.rule.$refText}`)}function wv(t,e){if(e.some(r=>r.calledByName)){const r=e.map(n=>{var i,s;return{parameterName:(s=(i=n.parameter)==null?void 0:i.ref)==null?void 0:s.name,predicate:Dt(n.value)}});return n=>{const i={};for(const{parameterName:s,predicate:o}of r)s&&(i[s]=o(n));return i}}else{const r=e.map(n=>Dt(n.value));return n=>{const i={};for(let s=0;s<r.length;s++)if(s<t.parameters.length){const o=t.parameters[s].name,a=r[s];i[o]=a(n)}return i}}}function Dt(t){if(Pm(t)){const e=Dt(t.left),r=Dt(t.right);return n=>e(n)||r(n)}else if(Om(t)){const e=Dt(t.left),r=Dt(t.right);return n=>e(n)&&r(n)}else if(Fm(t)){const e=Dt(t.value);return r=>!e(r)}else if(qm(t)){const e=t.parameter.ref.name;return r=>r!==void 0&&r[e]===!0}else if(Im(t)){const e=!!t.true;return()=>e}Ki()}function Iv(t,e){if(e.elements.length===1)return Hr(t,e.elements[0]);{const r=[];for(const i of e.elements){const s={ALT:Hr(t,i,!0)},o=po(i);o&&(s.GATE=Dt(o)),r.push(s)}const n=t.or++;return i=>t.parser.alternatives(n,r.map(s=>{const o={ALT:()=>s.ALT(i)},a=s.GATE;return a&&(o.GATE=()=>a(i)),o}))}}function _v(t,e){if(e.elements.length===1)return Hr(t,e.elements[0]);const r=[];for(const a of e.elements){const c={ALT:Hr(t,a,!0)},l=po(a);l&&(c.GATE=Dt(l)),r.push(c)}const n=t.or++,i=(a,c)=>{const l=c.getRuleStack().join("-");return`uGroup_${a}_${l}`},s=a=>t.parser.alternatives(n,r.map((c,l)=>{const u={ALT:()=>!0},p=t.parser;u.ALT=()=>{if(c.ALT(a),!p.isRecording()){const R=i(n,p);p.unorderedGroups.get(R)||p.unorderedGroups.set(R,[]);const E=p.unorderedGroups.get(R);typeof(E==null?void 0:E[l])>"u"&&(E[l]=!0)}};const h=c.GATE;return h?u.GATE=()=>h(a):u.GATE=()=>{const R=p.unorderedGroups.get(i(n,p));return!(R!=null&&R[l])},u})),o=ah(t,po(e),s,"*");return a=>{o(a),t.parser.isRecording()||t.parser.unorderedGroups.delete(i(n,t.parser))}}function Ov(t,e){const r=e.elements.map(n=>Hr(t,n));return n=>r.forEach(i=>i(n))}function po(t){if(bl(t))return t.guardCondition}function oh(t,e,r=e.terminal){if(r)if(Kr(r)&&sr(r.rule.ref)){const n=r.rule.ref,i=t.subrule++;let s;return o=>{s??(s=Ul(t,n)),t.parser.subrule(i,s,!1,e,o)}}else if(Kr(r)&&or(r.rule.ref)){const n=t.consume++,i=tl(t,r.rule.ref.name);return()=>t.parser.consume(n,i,e)}else if(Br(r)){const n=t.consume++,i=tl(t,r.value);return()=>t.parser.consume(n,i,e)}else throw new Error("Could not build cross reference parser");else{if(!e.type.ref)throw new Error("Could not resolve reference to type: "+e.type.$refText);const n=nf(e.type.ref),i=n==null?void 0:n.terminal;if(!i)throw new Error("Could not find name assignment for type: "+Ni(e.type.ref));return oh(t,e,i)}}function Pv(t,e){const r=t.consume++,n=t.tokens[e.value];if(!n)throw new Error("Could not find token for keyword: "+e.value);return()=>t.parser.consume(r,n,e)}function ah(t,e,r,n){const i=e&&Dt(e);if(!n)if(i){const s=t.or++;return o=>t.parser.alternatives(s,[{ALT:()=>r(o),GATE:()=>i(o)},{ALT:_u(),GATE:()=>!i(o)}])}else return r;if(n==="*"){const s=t.many++;return o=>t.parser.many(s,{DEF:()=>r(o),GATE:i?()=>i(o):void 0})}else if(n==="+"){const s=t.many++;if(i){const o=t.or++;return a=>t.parser.alternatives(o,[{ALT:()=>t.parser.atLeastOne(s,{DEF:()=>r(a)}),GATE:()=>i(a)},{ALT:_u(),GATE:()=>!i(a)}])}else return o=>t.parser.atLeastOne(s,{DEF:()=>r(o)})}else if(n==="?"){const s=t.optional++;return o=>t.parser.optional(s,{DEF:()=>r(o),GATE:i?()=>i(o):void 0})}else Ki()}function Ul(t,e){const r=Dv(t,e),n=t.parser.getRule(r);if(!n)throw new Error(`Rule "${r}" not found."`);return n}function Dv(t,e){if(Bi(e))return e.name;if(t.ruleNames.has(e))return t.ruleNames.get(e);{let r=e,n=r.$container,i=e.$type;for(;!sr(n);)(bl(n)||Wp(n)||Yp(n))&&(i=n.elements.indexOf(r).toString()+":"+i),r=n,n=n.$container;return i=n.name+":"+i,t.ruleNames.set(e,i),i}}function tl(t,e){const r=t.tokens[e];if(!r)throw new Error(`Token "${e}" not found."`);return r}function Lv(t){const e=t.Grammar,r=t.parser.Lexer,n=new kv(t);return sh(e,n,r.definition),n.finalize(),n}function Mv(t){const e=Fv(t);return e.finalize(),e}function Fv(t){const e=t.Grammar,r=t.parser.Lexer,n=new $v(t);return sh(e,n,r.definition)}class ch{constructor(){this.diagnostics=[]}buildTokens(e,r){const n=he(ef(e,!1)),i=this.buildTerminalTokens(n),s=this.buildKeywordTokens(n,i,r);return s.push(...i),s}flushLexingReport(e){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){const e=[...this.diagnostics];return this.diagnostics=[],e}buildTerminalTokens(e){return e.filter(or).filter(r=>!r.fragment).map(r=>this.buildTerminalToken(r)).toArray()}buildTerminalToken(e){const r=Cl(e),n=this.requiresCustomPattern(r)?this.regexPatternFunction(r):r,i={name:e.name,PATTERN:n};return typeof n=="function"&&(i.LINE_BREAKS=!0),e.hidden&&(i.GROUP=Qp(r)?rt.SKIPPED:"hidden"),i}requiresCustomPattern(e){return!!(e.flags.includes("u")||e.flags.includes("s"))}regexPatternFunction(e){const r=new RegExp(e,e.flags+"y");return(n,i)=>(r.lastIndex=i,r.exec(n))}buildKeywordTokens(e,r,n){return e.filter(Bi).flatMap(i=>zi(i).filter(Br)).distinct(i=>i.value).toArray().sort((i,s)=>s.value.length-i.value.length).map(i=>this.buildKeywordToken(i,r,!!(n!=null&&n.caseInsensitive)))}buildKeywordToken(e,r,n){const i=this.buildKeywordPattern(e,n),s={name:e.value,PATTERN:i,LONGER_ALT:this.findLongerAlt(e,r)};return typeof i=="function"&&(s.LINE_BREAKS=!0),s}buildKeywordPattern(e,r){return r?new RegExp(Co(e.value),"i"):e.value}findLongerAlt(e,r){return r.reduce((n,i)=>{const s=i==null?void 0:i.PATTERN;return s!=null&&s.source&&cg("^"+s.source+"$",e.value)&&n.push(i),n},[])}}class lh{convert(e,r){let n=r.grammarSource;if(bo(n)&&(n=pg(n)),Kr(n)){const i=n.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,e,r)}return e}runConverter(e,r,n){var i;switch(e.name.toUpperCase()){case"INT":return Ht.convertInt(r);case"STRING":return Ht.convertString(r);case"ID":return Ht.convertID(r)}switch((i=vg(e))==null?void 0:i.toLowerCase()){case"number":return Ht.convertNumber(r);case"boolean":return Ht.convertBoolean(r);case"bigint":return Ht.convertBigint(r);case"date":return Ht.convertDate(r);default:return r}}}var Ht;(function(t){function e(l){let u="";for(let p=1;p<l.length-1;p++){const h=l.charAt(p);if(h==="\\"){const R=l.charAt(++p);u+=r(R)}else u+=h}return u}t.convertString=e;function r(l){switch(l){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"0":return"\0";default:return l}}function n(l){return l.charAt(0)==="^"?l.substring(1):l}t.convertID=n;function i(l){return parseInt(l)}t.convertInt=i;function s(l){return BigInt(l)}t.convertBigint=s;function o(l){return new Date(l)}t.convertDate=o;function a(l){return Number(l)}t.convertNumber=a;function c(l){return l.toLowerCase()==="true"}t.convertBoolean=c})(Ht||(Ht={}));var Rr={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});let rl;function nl(){if(rl===void 0)throw new Error("No runtime abstraction layer installed");return rl}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");rl=r}t.install=e})(nl||(nl={}));ar.default=nl;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.stringArray=Ne.array=Ne.func=Ne.error=Ne.number=Ne.string=Ne.boolean=void 0;function qv(t){return t===!0||t===!1}Ne.boolean=qv;function uh(t){return typeof t=="string"||t instanceof String}Ne.string=uh;function jv(t){return typeof t=="number"||t instanceof Number}Ne.number=jv;function Uv(t){return t instanceof Error}Ne.error=Uv;function Gv(t){return typeof t=="function"}Ne.func=Gv;function dh(t){return Array.isArray(t)}Ne.array=dh;function zv(t){return dh(t)&&t.every(e=>uh(e))}Ne.stringArray=zv;var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});var ph=Ft.Emitter=Ft.Event=void 0;const Bv=ar;var Fu;(function(t){const e={dispose(){}};t.None=function(){return e}})(Fu||(Ft.Event=Fu={}));class Kv{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=n.length;s<o;s++)try{r.push(n[s].apply(i[s],e))}catch(a){(0,Bv.default)().console.error(a)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class Do{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new Kv),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);const i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=Do._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}ph=Ft.Emitter=Do;Do._noop=function(){};var ge;Object.defineProperty(Rr,"__esModule",{value:!0});var Gl=Rr.CancellationTokenSource=ge=Rr.CancellationToken=void 0;const Wv=ar,Vv=Ne,il=Ft;var fo;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:il.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:il.Event.None});function e(r){const n=r;return n&&(n===t.None||n===t.Cancelled||Vv.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(fo||(ge=Rr.CancellationToken=fo={}));const Hv=Object.freeze(function(t,e){const r=(0,Wv.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}});class qu{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Hv:(this._emitter||(this._emitter=new il.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class Yv{get token(){return this._token||(this._token=new qu),this._token}cancel(){this._token?this._token.cancel():this._token=fo.Cancelled}dispose(){this._token?this._token instanceof qu&&this._token.dispose():this._token=fo.None}}Gl=Rr.CancellationTokenSource=Yv;function Xv(){return new Promise(t=>{typeof setImmediate>"u"?setTimeout(t,0):setImmediate(t)})}let qs=0,Zv=10;function Jv(){return qs=performance.now(),new Gl}const kn=Symbol("OperationCancelled");function Lo(t){return t===kn}async function Ye(t){if(t===ge.None)return;const e=performance.now();if(e-qs>=Zv&&(qs=e,await Xv(),qs=performance.now()),t.isCancellationRequested)throw kn}class zl{constructor(){this.promise=new Promise((e,r)=>{this.resolve=n=>(e(n),this),this.reject=n=>(r(n),this)})}}class Mi{constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){const r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(const n of e)if(Mi.isIncremental(n)){const i=hh(n.range),s=this.offsetAt(i.start),o=this.offsetAt(i.end);this._content=this._content.substring(0,s)+n.text+this._content.substring(o,this._content.length);const a=Math.max(i.start.line,0),c=Math.max(i.end.line,0);let l=this._lineOffsets;const u=ju(n.text,!1,s);if(c-a===u.length)for(let h=0,R=u.length;h<R;h++)l[h+a+1]=u[h];else u.length<1e4?l.splice(a+1,c-a,...u):this._lineOffsets=l=l.slice(0,a+1).concat(u,l.slice(c+1));const p=n.text.length-(o-s);if(p!==0)for(let h=a+1+u.length,R=l.length;h<R;h++)l[h]=l[h]+p}else if(Mi.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=ju(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const r=this.getLineOffsets();let n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){const o=Math.floor((n+i)/2);r[o]>e?i=o:n=o+1}const s=n-1;return e=this.ensureBeforeEOL(e,r[s]),{line:s,character:e-r[s]}}offsetAt(e){const r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;const n=r[e.line];if(e.character<=0)return n;const i=e.line+1<r.length?r[e.line+1]:this._content.length,s=Math.min(n+e.character,i);return this.ensureBeforeEOL(s,n)}ensureBeforeEOL(e,r){for(;e>r&&fh(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){const r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){const r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}}var sl;(function(t){function e(i,s,o,a){return new Mi(i,s,o,a)}t.create=e;function r(i,s,o){if(i instanceof Mi)return i.update(s,o),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=r;function n(i,s){const o=i.getText(),a=ol(s.map(Qv),(u,p)=>{const h=u.range.start.line-p.range.start.line;return h===0?u.range.start.character-p.range.start.character:h});let c=0;const l=[];for(const u of a){const p=i.offsetAt(u.range.start);if(p<c)throw new Error("Overlapping edit");p>c&&l.push(o.substring(c,p)),u.newText.length&&l.push(u.newText),c=i.offsetAt(u.range.end)}return l.push(o.substr(c)),l.join("")}t.applyEdits=n})(sl||(sl={}));function ol(t,e){if(t.length<=1)return t;const r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);ol(n,e),ol(i,e);let s=0,o=0,a=0;for(;s<n.length&&o<i.length;)e(n[s],i[o])<=0?t[a++]=n[s++]:t[a++]=i[o++];for(;s<n.length;)t[a++]=n[s++];for(;o<i.length;)t[a++]=i[o++];return t}function ju(t,e,r=0){const n=e?[r]:[];for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);fh(s)&&(s===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}function fh(t){return t===13||t===10}function hh(t){const e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}function Qv(t){const e=hh(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var mh;(()=>{var t={975:b=>{function y(g){if(typeof g!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(g))}function m(g,T){for(var $,I="",D=0,_=-1,U=0,B=0;B<=g.length;++B){if(B<g.length)$=g.charCodeAt(B);else{if($===47)break;$=47}if($===47){if(!(_===B-1||U===1))if(_!==B-1&&U===2){if(I.length<2||D!==2||I.charCodeAt(I.length-1)!==46||I.charCodeAt(I.length-2)!==46){if(I.length>2){var se=I.lastIndexOf("/");if(se!==I.length-1){se===-1?(I="",D=0):D=(I=I.slice(0,se)).length-1-I.lastIndexOf("/"),_=B,U=0;continue}}else if(I.length===2||I.length===1){I="",D=0,_=B,U=0;continue}}T&&(I.length>0?I+="/..":I="..",D=2)}else I.length>0?I+="/"+g.slice(_+1,B):I=g.slice(_+1,B),D=B-_-1;_=B,U=0}else $===46&&U!==-1?++U:U=-1}return I}var k={resolve:function(){for(var g,T="",$=!1,I=arguments.length-1;I>=-1&&!$;I--){var D;I>=0?D=arguments[I]:(g===void 0&&(g=process.cwd()),D=g),y(D),D.length!==0&&(T=D+"/"+T,$=D.charCodeAt(0)===47)}return T=m(T,!$),$?T.length>0?"/"+T:"/":T.length>0?T:"."},normalize:function(g){if(y(g),g.length===0)return".";var T=g.charCodeAt(0)===47,$=g.charCodeAt(g.length-1)===47;return(g=m(g,!T)).length!==0||T||(g="."),g.length>0&&$&&(g+="/"),T?"/"+g:g},isAbsolute:function(g){return y(g),g.length>0&&g.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var g,T=0;T<arguments.length;++T){var $=arguments[T];y($),$.length>0&&(g===void 0?g=$:g+="/"+$)}return g===void 0?".":k.normalize(g)},relative:function(g,T){if(y(g),y(T),g===T||(g=k.resolve(g))===(T=k.resolve(T)))return"";for(var $=1;$<g.length&&g.charCodeAt($)===47;++$);for(var I=g.length,D=I-$,_=1;_<T.length&&T.charCodeAt(_)===47;++_);for(var U=T.length-_,B=D<U?D:U,se=-1,W=0;W<=B;++W){if(W===B){if(U>B){if(T.charCodeAt(_+W)===47)return T.slice(_+W+1);if(W===0)return T.slice(_+W)}else D>B&&(g.charCodeAt($+W)===47?se=W:W===0&&(se=0));break}var we=g.charCodeAt($+W);if(we!==T.charCodeAt(_+W))break;we===47&&(se=W)}var te="";for(W=$+se+1;W<=I;++W)W!==I&&g.charCodeAt(W)!==47||(te.length===0?te+="..":te+="/..");return te.length>0?te+T.slice(_+se):(_+=se,T.charCodeAt(_)===47&&++_,T.slice(_))},_makeLong:function(g){return g},dirname:function(g){if(y(g),g.length===0)return".";for(var T=g.charCodeAt(0),$=T===47,I=-1,D=!0,_=g.length-1;_>=1;--_)if((T=g.charCodeAt(_))===47){if(!D){I=_;break}}else D=!1;return I===-1?$?"/":".":$&&I===1?"//":g.slice(0,I)},basename:function(g,T){if(T!==void 0&&typeof T!="string")throw new TypeError('"ext" argument must be a string');y(g);var $,I=0,D=-1,_=!0;if(T!==void 0&&T.length>0&&T.length<=g.length){if(T.length===g.length&&T===g)return"";var U=T.length-1,B=-1;for($=g.length-1;$>=0;--$){var se=g.charCodeAt($);if(se===47){if(!_){I=$+1;break}}else B===-1&&(_=!1,B=$+1),U>=0&&(se===T.charCodeAt(U)?--U==-1&&(D=$):(U=-1,D=B))}return I===D?D=B:D===-1&&(D=g.length),g.slice(I,D)}for($=g.length-1;$>=0;--$)if(g.charCodeAt($)===47){if(!_){I=$+1;break}}else D===-1&&(_=!1,D=$+1);return D===-1?"":g.slice(I,D)},extname:function(g){y(g);for(var T=-1,$=0,I=-1,D=!0,_=0,U=g.length-1;U>=0;--U){var B=g.charCodeAt(U);if(B!==47)I===-1&&(D=!1,I=U+1),B===46?T===-1?T=U:_!==1&&(_=1):T!==-1&&(_=-1);else if(!D){$=U+1;break}}return T===-1||I===-1||_===0||_===1&&T===I-1&&T===$+1?"":g.slice(T,I)},format:function(g){if(g===null||typeof g!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof g);return function(T,$){var I=$.dir||$.root,D=$.base||($.name||"")+($.ext||"");return I?I===$.root?I+D:I+"/"+D:D}(0,g)},parse:function(g){y(g);var T={root:"",dir:"",base:"",ext:"",name:""};if(g.length===0)return T;var $,I=g.charCodeAt(0),D=I===47;D?(T.root="/",$=1):$=0;for(var _=-1,U=0,B=-1,se=!0,W=g.length-1,we=0;W>=$;--W)if((I=g.charCodeAt(W))!==47)B===-1&&(se=!1,B=W+1),I===46?_===-1?_=W:we!==1&&(we=1):_!==-1&&(we=-1);else if(!se){U=W+1;break}return _===-1||B===-1||we===0||we===1&&_===B-1&&_===U+1?B!==-1&&(T.base=T.name=U===0&&D?g.slice(1,B):g.slice(U,B)):(U===0&&D?(T.name=g.slice(1,_),T.base=g.slice(1,B)):(T.name=g.slice(U,_),T.base=g.slice(U,B)),T.ext=g.slice(_,B)),U>0?T.dir=g.slice(0,U-1):D&&(T.dir="/"),T},sep:"/",delimiter:":",win32:null,posix:null};k.posix=k,b.exports=k}},e={};function r(b){var y=e[b];if(y!==void 0)return y.exports;var m=e[b]={exports:{}};return t[b](m,m.exports,r),m.exports}r.d=(b,y)=>{for(var m in y)r.o(y,m)&&!r.o(b,m)&&Object.defineProperty(b,m,{enumerable:!0,get:y[m]})},r.o=(b,y)=>Object.prototype.hasOwnProperty.call(b,y),r.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>h,Utils:()=>ke}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);const s=/^\w[\w\d+.-]*$/,o=/^\//,a=/^\/\//;function c(b,y){if(!b.scheme&&y)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${b.authority}", path: "${b.path}", query: "${b.query}", fragment: "${b.fragment}"}`);if(b.scheme&&!s.test(b.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(b.path){if(b.authority){if(!o.test(b.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(b.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}const l="",u="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{constructor(y,m,k,g,T,$=!1){wr(this,"scheme"),wr(this,"authority"),wr(this,"path"),wr(this,"query"),wr(this,"fragment"),typeof y=="object"?(this.scheme=y.scheme||l,this.authority=y.authority||l,this.path=y.path||l,this.query=y.query||l,this.fragment=y.fragment||l):(this.scheme=function(I,D){return I||D?I:"file"}(y,$),this.authority=m||l,this.path=function(I,D){switch(I){case"https":case"http":case"file":D?D[0]!==u&&(D=u+D):D=u}return D}(this.scheme,k||l),this.query=g||l,this.fragment=T||l,c(this,$))}static isUri(y){return y instanceof h||!!y&&typeof y.authority=="string"&&typeof y.fragment=="string"&&typeof y.path=="string"&&typeof y.query=="string"&&typeof y.scheme=="string"&&typeof y.fsPath=="string"&&typeof y.with=="function"&&typeof y.toString=="function"}get fsPath(){return O(this,!1)}with(y){if(!y)return this;let{scheme:m,authority:k,path:g,query:T,fragment:$}=y;return m===void 0?m=this.scheme:m===null&&(m=l),k===void 0?k=this.authority:k===null&&(k=l),g===void 0?g=this.path:g===null&&(g=l),T===void 0?T=this.query:T===null&&(T=l),$===void 0?$=this.fragment:$===null&&($=l),m===this.scheme&&k===this.authority&&g===this.path&&T===this.query&&$===this.fragment?this:new E(m,k,g,T,$)}static parse(y,m=!1){const k=p.exec(y);return k?new E(k[2]||l,re(k[4]||l),re(k[5]||l),re(k[7]||l),re(k[9]||l),m):new E(l,l,l,l,l)}static file(y){let m=l;if(i&&(y=y.replace(/\\/g,u)),y[0]===u&&y[1]===u){const k=y.indexOf(u,2);k===-1?(m=y.substring(2),y=u):(m=y.substring(2,k),y=y.substring(k)||u)}return new E("file",m,y,l,l)}static from(y){const m=new E(y.scheme,y.authority,y.path,y.query,y.fragment);return c(m,!0),m}toString(y=!1){return C(this,y)}toJSON(){return this}static revive(y){if(y){if(y instanceof h)return y;{const m=new E(y);return m._formatted=y.external,m._fsPath=y._sep===R?y.fsPath:null,m}}return y}}const R=i?1:void 0;class E extends h{constructor(){super(...arguments),wr(this,"_formatted",null),wr(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=O(this,!1)),this._fsPath}toString(y=!1){return y?C(this,!0):(this._formatted||(this._formatted=C(this,!1)),this._formatted)}toJSON(){const y={$mid:1};return this._fsPath&&(y.fsPath=this._fsPath,y._sep=R),this._formatted&&(y.external=this._formatted),this.path&&(y.path=this.path),this.scheme&&(y.scheme=this.scheme),this.authority&&(y.authority=this.authority),this.query&&(y.query=this.query),this.fragment&&(y.fragment=this.fragment),y}}const A={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function P(b,y,m){let k,g=-1;for(let T=0;T<b.length;T++){const $=b.charCodeAt(T);if($>=97&&$<=122||$>=65&&$<=90||$>=48&&$<=57||$===45||$===46||$===95||$===126||y&&$===47||m&&$===91||m&&$===93||m&&$===58)g!==-1&&(k+=encodeURIComponent(b.substring(g,T)),g=-1),k!==void 0&&(k+=b.charAt(T));else{k===void 0&&(k=b.substr(0,T));const I=A[$];I!==void 0?(g!==-1&&(k+=encodeURIComponent(b.substring(g,T)),g=-1),k+=I):g===-1&&(g=T)}}return g!==-1&&(k+=encodeURIComponent(b.substring(g))),k!==void 0?k:b}function N(b){let y;for(let m=0;m<b.length;m++){const k=b.charCodeAt(m);k===35||k===63?(y===void 0&&(y=b.substr(0,m)),y+=A[k]):y!==void 0&&(y+=b[m])}return y!==void 0?y:b}function O(b,y){let m;return m=b.authority&&b.path.length>1&&b.scheme==="file"?`//${b.authority}${b.path}`:b.path.charCodeAt(0)===47&&(b.path.charCodeAt(1)>=65&&b.path.charCodeAt(1)<=90||b.path.charCodeAt(1)>=97&&b.path.charCodeAt(1)<=122)&&b.path.charCodeAt(2)===58?y?b.path.substr(1):b.path[1].toLowerCase()+b.path.substr(2):b.path,i&&(m=m.replace(/\//g,"\\")),m}function C(b,y){const m=y?N:P;let k="",{scheme:g,authority:T,path:$,query:I,fragment:D}=b;if(g&&(k+=g,k+=":"),(T||g==="file")&&(k+=u,k+=u),T){let _=T.indexOf("@");if(_!==-1){const U=T.substr(0,_);T=T.substr(_+1),_=U.lastIndexOf(":"),_===-1?k+=m(U,!1,!1):(k+=m(U.substr(0,_),!1,!1),k+=":",k+=m(U.substr(_+1),!1,!0)),k+="@"}T=T.toLowerCase(),_=T.lastIndexOf(":"),_===-1?k+=m(T,!1,!0):(k+=m(T.substr(0,_),!1,!0),k+=T.substr(_))}if($){if($.length>=3&&$.charCodeAt(0)===47&&$.charCodeAt(2)===58){const _=$.charCodeAt(1);_>=65&&_<=90&&($=`/${String.fromCharCode(_+32)}:${$.substr(3)}`)}else if($.length>=2&&$.charCodeAt(1)===58){const _=$.charCodeAt(0);_>=65&&_<=90&&($=`${String.fromCharCode(_+32)}:${$.substr(2)}`)}k+=m($,!0,!1)}return I&&(k+="?",k+=m(I,!1,!1)),D&&(k+="#",k+=y?D:P(D,!1,!1)),k}function L(b){try{return decodeURIComponent(b)}catch{return b.length>3?b.substr(0,3)+L(b.substr(3)):b}}const Z=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function re(b){return b.match(Z)?b.replace(Z,y=>L(y)):b}var ne=r(975);const ye=ne.posix||ne,Ee="/";var ke;(function(b){b.joinPath=function(y,...m){return y.with({path:ye.join(y.path,...m)})},b.resolvePath=function(y,...m){let k=y.path,g=!1;k[0]!==Ee&&(k=Ee+k,g=!0);let T=ye.resolve(k,...m);return g&&T[0]===Ee&&!y.authority&&(T=T.substring(1)),y.with({path:T})},b.dirname=function(y){if(y.path.length===0||y.path===Ee)return y;let m=ye.dirname(y.path);return m.length===1&&m.charCodeAt(0)===46&&(m=""),y.with({path:m})},b.basename=function(y){return ye.basename(y.path)},b.extname=function(y){return ye.extname(y.path)}})(ke||(ke={})),mh=n})();const{URI:Ct,Utils:ui}=mh;var lt;(function(t){t.basename=ui.basename,t.dirname=ui.dirname,t.extname=ui.extname,t.joinPath=ui.joinPath,t.resolvePath=ui.resolvePath;const e=typeof process=="object"&&(process==null?void 0:process.platform)==="win32";function r(o,a){return(o==null?void 0:o.toString())===(a==null?void 0:a.toString())}t.equals=r;function n(o,a){const c=typeof o=="string"?Ct.parse(o).path:o.path,l=typeof a=="string"?Ct.parse(a).path:a.path,u=c.split("/").filter(A=>A.length>0),p=l.split("/").filter(A=>A.length>0);if(e){const A=/^[A-Z]:$/;if(u[0]&&A.test(u[0])&&(u[0]=u[0].toLowerCase()),p[0]&&A.test(p[0])&&(p[0]=p[0].toLowerCase()),u[0]!==p[0])return l.substring(1)}let h=0;for(;h<u.length&&u[h]===p[h];h++);const R="../".repeat(u.length-h),E=p.slice(h).join("/");return R+E}t.relative=n;function i(o){return Ct.parse(o.toString()).toString()}t.normalize=i;function s(o,a){let c=typeof o=="string"?o:o.path,l=typeof a=="string"?a:a.path;return l.charAt(l.length-1)==="/"&&(l=l.slice(0,-1)),c.charAt(c.length-1)==="/"&&(c=c.slice(0,-1)),l===c?!0:l.length<c.length||l.charAt(c.length)!=="/"?!1:l.startsWith(c)}t.contains=s})(lt||(lt={}));class eR{constructor(){this.root={name:"",children:new Map}}normalizeUri(e){return lt.normalize(e)}clear(){this.root.children.clear()}insert(e,r){const n=this.getNode(this.normalizeUri(e),!0);n.element=r}delete(e){const r=this.getNode(this.normalizeUri(e),!1);r!=null&&r.parent&&r.parent.children.delete(r.name)}has(e){var r;return((r=this.getNode(this.normalizeUri(e),!1))==null?void 0:r.element)!==void 0}hasNode(e){return this.getNode(this.normalizeUri(e),!1)!==void 0}find(e){var r;return(r=this.getNode(this.normalizeUri(e),!1))==null?void 0:r.element}findNode(e){const r=this.normalizeUri(e),n=this.getNode(r,!1);if(n)return{name:n.name,uri:lt.joinPath(Ct.parse(r),n.name).toString(),element:n.element}}findChildren(e){const r=this.normalizeUri(e),n=this.getNode(r,!1);return n?Array.from(n.children.values()).map(i=>({name:i.name,uri:lt.joinPath(Ct.parse(r),i.name).toString(),element:i.element})):[]}all(){return this.collectValues(this.root)}findAll(e){const r=this.getNode(lt.normalize(e),!1);return r?this.collectValues(r):[]}getNode(e,r){const n=e.split("/");e.charAt(e.length-1)==="/"&&n.pop();let i=this.root;for(const s of n){let o=i.children.get(s);if(!o)if(r)o={name:s,children:new Map,parent:i},i.children.set(s,o);else return;i=o}return i}collectValues(e){const r=[];e.element&&r.push(e.element);for(const n of e.children.values())r.push(...this.collectValues(n));return r}}var H;(function(t){t[t.Changed=0]="Changed",t[t.Parsed=1]="Parsed",t[t.IndexedContent=2]="IndexedContent",t[t.ComputedScopes=3]="ComputedScopes",t[t.Linked=4]="Linked",t[t.IndexedReferences=5]="IndexedReferences",t[t.Validated=6]="Validated"})(H||(H={}));class tR{constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,r=ge.None){const n=await this.fileSystemProvider.readFile(e);return this.createAsync(e,n,r)}fromTextDocument(e,r,n){return r=r??Ct.parse(e.uri),ge.is(n)?this.createAsync(r,e,n):this.create(r,e,n)}fromString(e,r,n){return ge.is(n)?this.createAsync(r,e,n):this.create(r,e,n)}fromModel(e,r){return this.create(r,{$model:e})}create(e,r,n){if(typeof r=="string"){const i=this.parse(e,r,n);return this.createLangiumDocument(i,e,void 0,r)}else if("$model"in r){const i={value:r.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(i,e)}else{const i=this.parse(e,r.getText(),n);return this.createLangiumDocument(i,e,r)}}async createAsync(e,r,n){if(typeof r=="string"){const i=await this.parseAsync(e,r,n);return this.createLangiumDocument(i,e,void 0,r)}else{const i=await this.parseAsync(e,r.getText(),n);return this.createLangiumDocument(i,e,r)}}createLangiumDocument(e,r,n,i){let s;if(n)s={parseResult:e,uri:r,state:H.Parsed,references:[],textDocument:n};else{const o=this.createTextDocumentGetter(r,i);s={parseResult:e,uri:r,state:H.Parsed,references:[],get textDocument(){return o()}}}return e.value.$document=s,s}async update(e,r){var n,i;const s=(n=e.parseResult.value.$cstNode)==null?void 0:n.root.fullText,o=(i=this.textDocuments)==null?void 0:i.get(e.uri.toString()),a=o?o.getText():await this.fileSystemProvider.readFile(e.uri);if(o)Object.defineProperty(e,"textDocument",{value:o});else{const c=this.createTextDocumentGetter(e.uri,a);Object.defineProperty(e,"textDocument",{get:c})}return s!==a&&(e.parseResult=await this.parseAsync(e.uri,a,r),e.parseResult.value.$document=e),e.state=H.Parsed,e}parse(e,r,n){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(r,n)}parseAsync(e,r,n){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(r,n)}createTextDocumentGetter(e,r){const n=this.serviceRegistry;let i;return()=>i??(i=sl.create(e.toString(),n.getServices(e).LanguageMetaData.languageId,0,r??""))}}class rR{constructor(e){this.documentTrie=new eR,this.services=e,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.documentBuilder=()=>e.workspace.DocumentBuilder}get all(){return he(this.documentTrie.all())}addDocument(e){const r=e.uri.toString();if(this.documentTrie.has(r))throw new Error(`A document with the URI '${r}' is already present.`);this.documentTrie.insert(r,e)}getDocument(e){const r=e.toString();return this.documentTrie.find(r)}getDocuments(e){const r=e.toString();return this.documentTrie.findAll(r)}async getOrCreateDocument(e,r){let n=this.getDocument(e);return n||(n=await this.langiumDocumentFactory.fromUri(e,r),this.addDocument(n),n)}createDocument(e,r,n){if(n)return this.langiumDocumentFactory.fromString(r,e,n).then(i=>(this.addDocument(i),i));{const i=this.langiumDocumentFactory.fromString(r,e);return this.addDocument(i),i}}hasDocument(e){return this.documentTrie.has(e.toString())}invalidateDocument(e){const r=e.toString(),n=this.documentTrie.find(r);return n&&this.documentBuilder().resetToState(n,H.Changed),n}deleteDocument(e){const r=e.toString(),n=this.documentTrie.find(r);return n&&(n.state=H.Changed,this.documentTrie.delete(r)),n}deleteDocuments(e){const r=e.toString(),n=this.documentTrie.findAll(r);for(const i of n)i.state=H.Changed;return this.documentTrie.delete(r),n}}const sn=Symbol("RefResolving");class nR{constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator,this.profiler=e.shared.profilers.LangiumProfiler,this.languageId=e.LanguageMetaData.languageId}async link(e,r=ge.None){var n;if((n=this.profiler)!=null&&n.isActive("linking")){const i=this.profiler.createTask("linking",this.languageId);i.start();try{for(const s of Qt(e.parseResult.value))await Ye(r),Bs(s).forEach(o=>{const a=`${s.$type}:${o.property}`;i.startSubTask(a);try{this.doLink(o,e)}finally{i.stopSubTask(a)}})}finally{i.stop()}}else for(const i of Qt(e.parseResult.value))await Ye(r),Bs(i).forEach(s=>this.doLink(s,e))}doLink(e,r){const n=e.reference;if("_ref"in n&&n._ref===void 0){n._ref=sn;try{const i=this.getCandidate(e);if(ii(i))n._ref=i;else{n._nodeDescription=i;const s=this.loadAstNode(i);n._ref=s??this.createLinkingError(e,i)}}catch(i){console.error(`An error occurred while resolving reference to '${n.$refText}':`,i);const s=i.message??String(i);n._ref={info:e,message:`An error occurred while resolving reference to '${n.$refText}': ${s}`}}r.references.push(n)}else if("_items"in n&&n._items===void 0){n._items=sn;try{const i=this.getCandidates(e),s=[];if(ii(i))n._linkingError=i;else for(const o of i){const a=this.loadAstNode(o);a&&s.push({ref:a,$nodeDescription:o})}n._items=s}catch(i){n._linkingError={info:e,message:`An error occurred while resolving reference to '${n.$refText}': ${i}`},n._items=[]}r.references.push(n)}}unlink(e){for(const r of e.references)"_ref"in r?(r._ref=void 0,delete r._nodeDescription):"_items"in r&&(r._items=void 0,delete r._linkingError);e.references=[]}getCandidate(e){return this.scopeProvider.getScope(e).getElement(e.reference.$refText)??this.createLinkingError(e)}getCandidates(e){const r=this.scopeProvider.getScope(e).getElements(e.reference.$refText).distinct(n=>`${n.documentUri}#${n.path}`).toArray();return r.length>0?r:this.createLinkingError(e)}buildReference(e,r,n,i){const s=this,o={$refNode:n,$refText:i,_ref:void 0,get ref(){if(We(this._ref))return this._ref;if(Cm(this._nodeDescription)){const a=s.loadAstNode(this._nodeDescription);this._ref=a??s.createLinkingError({reference:o,container:e,property:r},this._nodeDescription)}else if(this._ref===void 0){this._ref=sn;const a=Cs(e).$document,c=s.getLinkedNode({reference:o,container:e,property:r});if(c.error&&a&&a.state<H.ComputedScopes)return this._ref=void 0;this._ref=c.node??c.error,this._nodeDescription=c.descr,a==null||a.references.push(this)}else this._ref===sn&&s.throwCyclicReferenceError(e,r,i);return We(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return ii(this._ref)?this._ref:void 0}};return o}buildMultiReference(e,r,n,i){const s=this,o={$refNode:n,$refText:i,_items:void 0,get items(){if(Array.isArray(this._items))return this._items;if(this._items===void 0){this._items=sn;const a=Cs(e).$document,c=s.getCandidates({reference:o,container:e,property:r}),l=[];if(ii(c))this._linkingError=c;else for(const u of c){const p=s.loadAstNode(u);p&&l.push({ref:p,$nodeDescription:u})}this._items=l,a==null||a.references.push(this)}else this._items===sn&&s.throwCyclicReferenceError(e,r,i);return Array.isArray(this._items)?this._items:[]},get error(){if(this._linkingError)return this._linkingError;if(!(this.items.length>0))return this._linkingError=s.createLinkingError({reference:o,container:e,property:r})}};return o}throwCyclicReferenceError(e,r,n){throw new Error(`Cyclic reference resolution detected: ${this.astNodeLocator.getAstNodePath(e)}/${r} (symbol '${n}')`)}getLinkedNode(e){try{const r=this.getCandidate(e);if(ii(r))return{error:r};const n=this.loadAstNode(r);return n?{node:n,descr:r}:{descr:r,error:this.createLinkingError(e,r)}}catch(r){console.error(`An error occurred while resolving reference to '${e.reference.$refText}':`,r);const n=r.message??String(r);return{error:{info:e,message:`An error occurred while resolving reference to '${e.reference.$refText}': ${n}`}}}}loadAstNode(e){if(e.node)return e.node;const r=this.langiumDocuments().getDocument(e.documentUri);if(r)return this.astNodeLocator.getAstNode(r.parseResult.value,e.path)}createLinkingError(e,r){const n=Cs(e.container).$document;n&&n.state<H.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${n.uri}).`);const i=this.reflection.getReferenceType(e);return{info:e,message:`Could not resolve reference to ${i} named '${e.reference.$refText}'.`,targetDescription:r}}}function iR(t){return typeof t.name=="string"}class sR{getName(e){if(iR(e))return e.name}getNameNode(e){return rf(e.$cstNode,"name")}}class oR{constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator,this.documents=e.shared.workspace.LangiumDocuments,this.hasMultiReference=Qt(e.Grammar).some(r=>bo(r)&&r.isMulti)}findDeclarations(e){if(e){const r=yg(e),n=e.astNode;if(r&&n){const i=n[r.feature];if(St(i)||dr(i))return Jl(i);if(Array.isArray(i)){for(const s of i)if((St(s)||dr(s))&&s.$refNode&&s.$refNode.offset<=e.offset&&s.$refNode.end>=e.end)return Jl(s)}}if(n){const i=this.nameProvider.getNameNode(n);if(i&&(i===e||Hm(e,i)))return this.getSelfNodes(n)}}return[]}getSelfNodes(e){if(this.hasMultiReference){const r=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e)),n=this.getNodeFromReferenceDescription(r.head());if(n){for(const i of Bs(n))if(dr(i.reference)&&i.reference.items.some(s=>s.ref===e))return i.reference.items.map(s=>s.ref)}return[e]}else return[e]}getNodeFromReferenceDescription(e){if(!e)return;const r=this.documents.getDocument(e.sourceUri);if(r)return this.nodeLocator.getAstNode(r.parseResult.value,e.sourcePath)}findDeclarationNodes(e){const r=this.findDeclarations(e),n=[];for(const i of r){const s=this.nameProvider.getNameNode(i)??i.$cstNode;s&&n.push(s)}return n}findReferences(e,r){const n=[];r.includeDeclaration&&n.push(...this.getSelfReferences(e));let i=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return r.documentUri&&(i=i.filter(s=>lt.equals(s.sourceUri,r.documentUri))),n.push(...i),he(n)}getSelfReferences(e){const r=this.getSelfNodes(e),n=[];for(const i of r){const s=this.nameProvider.getNameNode(i);if(s){const o=Jt(i),a=this.nodeLocator.getAstNodePath(i);n.push({sourceUri:o.uri,sourcePath:a,targetUri:o.uri,targetPath:a,segment:Ws(s),local:!0})}}return n}}class Fi{constructor(e){if(this.map=new Map,e)for(const[r,n]of e)this.add(r,n)}get size(){return Ia.sum(he(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(e,r){if(r===void 0)return this.map.delete(e);{const n=this.map.get(e);if(n){const i=n.indexOf(r);if(i>=0)return n.length===1?this.map.delete(e):n.splice(i,1),!0}return!1}}get(e){return this.map.get(e)??[]}getStream(e){const r=this.map.get(e);return r?he(r):Bp}has(e,r){if(r===void 0)return this.map.has(e);{const n=this.map.get(e);return n?n.indexOf(r)>=0:!1}}add(e,r){return this.map.has(e)?this.map.get(e).push(r):this.map.set(e,[r]),this}addAll(e,r){return this.map.has(e)?this.map.get(e).push(...r):this.map.set(e,Array.from(r)),this}forEach(e){this.map.forEach((r,n)=>r.forEach(i=>e(i,n,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return he(this.map.entries()).flatMap(([e,r])=>r.map(n=>[e,n]))}keys(){return he(this.map.keys())}values(){return he(this.map.values()).flat()}entriesGroupedByKey(){return he(this.map.entries())}}class Uu{get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(const[r,n]of e)this.set(r,n)}clear(){this.map.clear(),this.inverse.clear()}set(e,r){return this.map.set(e,r),this.inverse.set(r,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){const r=this.map.get(e);return r!==void 0?(this.map.delete(e),this.inverse.delete(r),!0):!1}}class aR{constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}async collectExportedSymbols(e,r=ge.None){return this.collectExportedSymbolsForNode(e.parseResult.value,e,void 0,r)}async collectExportedSymbolsForNode(e,r,n=Sl,i=ge.None){const s=[];this.addExportedSymbol(e,s,r);for(const o of n(e))await Ye(i),this.addExportedSymbol(o,s,r);return s}addExportedSymbol(e,r,n){const i=this.nameProvider.getName(e);i&&r.push(this.descriptions.createDescription(e,i,n))}async collectLocalSymbols(e,r=ge.None){const n=e.parseResult.value,i=new Fi;for(const s of zi(n))await Ye(r),this.addLocalSymbol(s,e,i);return i}addLocalSymbol(e,r,n){const i=e.$container;if(i){const s=this.nameProvider.getName(e);s&&n.add(i,this.descriptions.createDescription(e,s,r))}}}class Gu{constructor(e,r,n){this.elements=e,this.outerScope=r,this.caseInsensitive=(n==null?void 0:n.caseInsensitive)??!1,this.concatOuterScope=(n==null?void 0:n.concatOuterScope)??!0}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){const r=this.caseInsensitive?e.toLowerCase():e,n=this.caseInsensitive?this.elements.find(i=>i.name.toLowerCase()===r):this.elements.find(i=>i.name===e);if(n)return n;if(this.outerScope)return this.outerScope.getElement(e)}getElements(e){const r=this.caseInsensitive?e.toLowerCase():e,n=this.caseInsensitive?this.elements.filter(i=>i.name.toLowerCase()===r):this.elements.filter(i=>i.name===e);return(this.concatOuterScope||n.isEmpty())&&this.outerScope?n.concat(this.outerScope.getElements(e)):n}}class cR{constructor(e,r,n){this.elements=new Fi,this.caseInsensitive=(n==null?void 0:n.caseInsensitive)??!1,this.concatOuterScope=(n==null?void 0:n.concatOuterScope)??!0;for(const i of e){const s=this.caseInsensitive?i.name.toLowerCase():i.name;this.elements.add(s,i)}this.outerScope=r}getElement(e){const r=this.caseInsensitive?e.toLowerCase():e,n=this.elements.get(r)[0];if(n)return n;if(this.outerScope)return this.outerScope.getElement(e)}getElements(e){const r=this.caseInsensitive?e.toLowerCase():e,n=this.elements.get(r);return(this.concatOuterScope||n.length===0)&&this.outerScope?he(n).concat(this.outerScope.getElements(e)):he(n)}getAllElements(){let e=he(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}}class gh{constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}}class lR extends gh{constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,r){this.throwIfDisposed(),this.cache.set(e,r)}get(e,r){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(r){const n=r();return this.cache.set(e,n),n}else return}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}}class uR extends gh{constructor(e){super(),this.cache=new Map,this.converter=e??(r=>r)}has(e,r){return this.throwIfDisposed(),this.cacheForContext(e).has(r)}set(e,r,n){this.throwIfDisposed(),this.cacheForContext(e).set(r,n)}get(e,r,n){this.throwIfDisposed();const i=this.cacheForContext(e);if(i.has(r))return i.get(r);if(n){const s=n();return i.set(r,s),s}else return}delete(e,r){return this.throwIfDisposed(),this.cacheForContext(e).delete(r)}clear(e){if(this.throwIfDisposed(),e){const r=this.converter(e);this.cache.delete(r)}else this.cache.clear()}cacheForContext(e){const r=this.converter(e);let n=this.cache.get(r);return n||(n=new Map,this.cache.set(r,n)),n}}class dR extends lR{constructor(e,r){super(),r?(this.toDispose.push(e.workspace.DocumentBuilder.onBuildPhase(r,()=>{this.clear()})),this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((n,i)=>{i.length>0&&this.clear()}))):this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}class pR{constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new dR(e.shared)}getScope(e){const r=[],n=this.reflection.getReferenceType(e),i=Jt(e.container).localSymbols;if(i){let o=e.container;do i.has(o)&&r.push(i.getStream(o).filter(a=>this.reflection.isSubtype(a.type,n))),o=o.$container;while(o)}let s=this.getGlobalScope(n,e);for(let o=r.length-1;o>=0;o--)s=this.createScope(r[o],s);return s}createScope(e,r,n){return new Gu(he(e),r,n)}createScopeForNodes(e,r,n){const i=he(e).map(s=>{const o=this.nameProvider.getName(s);if(o)return this.descriptions.createDescription(s,o)}).nonNullable();return new Gu(i,r,n)}getGlobalScope(e,r){return this.globalScopeCache.get(e,()=>new cR(this.indexManager.allElements(e)))}}function fR(t){return typeof t.$comment=="string"}function zu(t){return typeof t=="object"&&!!t&&("$ref"in t||"$error"in t)}class hR{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,r){const n=r??{},i=r==null?void 0:r.replacer,s=(a,c)=>this.replacer(a,c,n),o=i?(a,c)=>i(a,c,s):s;try{return this.currentDocument=Jt(e),JSON.stringify(e,o,r==null?void 0:r.space)}finally{this.currentDocument=void 0}}deserialize(e,r){const n=r??{},i=JSON.parse(e);return this.linkNode(i,i,n),i}replacer(e,r,{refText:n,sourceText:i,textRegions:s,comments:o,uriConverter:a}){var c,l,u;if(!this.ignoreProperties.has(e))if(St(r)){const p=r.ref,h=n?r.$refText:void 0;if(p){const R=Jt(p);let E="";this.currentDocument&&this.currentDocument!==R&&(a?E=a(R.uri,p):E=R.uri.toString());const A=this.astNodeLocator.getAstNodePath(p);return{$ref:`${E}#${A}`,$refText:h}}else return{$error:((c=r.error)==null?void 0:c.message)??"Could not resolve reference",$refText:h}}else if(dr(r)){const p=n?r.$refText:void 0,h=[];for(const R of r.items){const E=R.ref,A=Jt(R.ref);let P="";this.currentDocument&&this.currentDocument!==A&&(a?P=a(A.uri,E):P=A.uri.toString());const N=this.astNodeLocator.getAstNodePath(E);h.push(`${P}#${N}`)}return{$refs:h,$refText:p}}else if(We(r)){let p;if(s&&(p=this.addAstNodeRegionWithAssignmentsTo({...r}),(!e||r.$document)&&p!=null&&p.$textRegion&&(p.$textRegion.documentURI=(l=this.currentDocument)==null?void 0:l.uri.toString())),i&&!e&&(p??(p={...r}),p.$sourceText=(u=r.$cstNode)==null?void 0:u.text),o){p??(p={...r});const h=this.commentProvider.getComment(r);h&&(p.$comment=h.replace(/\r/g,""))}return p??r}else return r}addAstNodeRegionWithAssignmentsTo(e){const r=n=>({offset:n.offset,end:n.end,length:n.length,range:n.range});if(e.$cstNode){const n=e.$textRegion=r(e.$cstNode),i=n.assignments={};return Object.keys(e).filter(s=>!s.startsWith("$")).forEach(s=>{const o=hg(e.$cstNode,s).map(r);o.length!==0&&(i[s]=o)}),e}}linkNode(e,r,n,i,s,o){for(const[c,l]of Object.entries(e))if(Array.isArray(l))for(let u=0;u<l.length;u++){const p=l[u];zu(p)?l[u]=this.reviveReference(e,c,r,p,n):We(p)&&this.linkNode(p,r,n,e,c,u)}else zu(l)?e[c]=this.reviveReference(e,c,r,l,n):We(l)&&this.linkNode(l,r,n,e,c);const a=e;a.$container=i,a.$containerProperty=s,a.$containerIndex=o}reviveReference(e,r,n,i,s){let o=i.$refText,a=i.$error,c;if(i.$ref){const l=this.getRefNode(n,i.$ref,s.uriConverter);if(We(l))return o||(o=this.nameProvider.getName(l)),{$refText:o??"",ref:l};a=l}else if(i.$refs){const l=[];for(const u of i.$refs){const p=this.getRefNode(n,u,s.uriConverter);We(p)&&l.push({ref:p})}if(l.length===0)c={$refText:o??"",items:l},a??(a="Could not resolve multi-reference");else return{$refText:o??"",items:l}}if(a)return c??(c={$refText:o??"",ref:void 0}),c.error={info:{container:e,property:r,reference:c},message:a},c}getRefNode(e,r,n){try{const i=r.indexOf("#");if(i===0)return this.astNodeLocator.getAstNode(e,r.substring(1))||"Could not resolve path: "+r;if(i<0){const c=n?n(r):Ct.parse(r),l=this.langiumDocuments.getDocument(c);return l?l.parseResult.value:"Could not find document for URI: "+r}const s=n?n(r.substring(0,i)):Ct.parse(r.substring(0,i)),o=this.langiumDocuments.getDocument(s);return o?i===r.length-1?o.parseResult.value:this.astNodeLocator.getAstNode(o.parseResult.value,r.substring(i+1))||"Could not resolve URI: "+r:"Could not find document for URI: "+r}catch(i){return String(i)}}}class mR{get map(){return this.fileExtensionMap}constructor(e){this.languageIdMap=new Map,this.fileExtensionMap=new Map,this.fileNameMap=new Map,this.textDocuments=e==null?void 0:e.workspace.TextDocuments}register(e){const r=e.LanguageMetaData;for(const n of r.fileExtensions)this.fileExtensionMap.has(n)&&console.warn(`The file extension ${n} is used by multiple languages. It is now assigned to '${r.languageId}'.`),this.fileExtensionMap.set(n,e);if(r.fileNames)for(const n of r.fileNames)this.fileNameMap.has(n)&&console.warn(`The file name ${n} is used by multiple languages. It is now assigned to '${r.languageId}'.`),this.fileNameMap.set(n,e);this.languageIdMap.set(r.languageId,e)}getServices(e){var r,n;if(this.languageIdMap.size===0)throw new Error("The service registry is empty. Use `register` to register the services of a language.");const i=(n=(r=this.textDocuments)==null?void 0:r.get(e))==null?void 0:n.languageId;if(i!==void 0){const c=this.languageIdMap.get(i);if(c)return c}const s=lt.extname(e),o=lt.basename(e),a=this.fileNameMap.get(o)??this.fileExtensionMap.get(s);if(!a)throw i?new Error(`The service registry contains no services for the extension '${s}' for language '${i}'.`):new Error(`The service registry contains no services for the extension '${s}'.`);return a}hasServices(e){try{return this.getServices(e),!0}catch{return!1}}get all(){return Array.from(this.languageIdMap.values())}}function ki(t){return{code:t}}var al;(function(t){t.defaults=["fast","slow","built-in"],t.all=t.defaults})(al||(al={}));class gR{constructor(e){this.entries=new Fi,this.knownCategories=new Set(al.defaults),this.entriesBefore=[],this.entriesAfter=[],this.reflection=e.shared.AstReflection}register(e,r=this,n="fast"){if(n==="built-in")throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");this.knownCategories.add(n);for(const[i,s]of Object.entries(e)){const o=s;if(Array.isArray(o))for(const a of o){const c={check:this.wrapValidationException(a,r),category:n};this.addEntry(i,c)}else if(typeof o=="function"){const a={check:this.wrapValidationException(o,r),category:n};this.addEntry(i,a)}else Ki()}}wrapValidationException(e,r){return async(n,i,s)=>{await this.handleException(()=>e.call(r,n,i,s),"An error occurred during validation",i,n)}}async handleException(e,r,n,i){try{await e()}catch(s){if(Lo(s))throw s;console.error(`${r}:`,s),s instanceof Error&&s.stack&&console.error(s.stack);const o=s instanceof Error?s.message:String(s);n("error",`${r}: ${o}`,{node:i})}}addEntry(e,r){if(e==="AstNode"){this.entries.add("AstNode",r);return}for(const n of this.reflection.getAllSubTypes(e))this.entries.add(n,r)}getChecks(e,r){let n=he(this.entries.get(e)).concat(this.entries.get("AstNode"));return r&&(n=n.filter(i=>r.includes(i.category))),n.map(i=>i.check)}registerBeforeDocument(e,r=this){this.entriesBefore.push(this.wrapPreparationException(e,"An error occurred during set-up of the validation",r))}registerAfterDocument(e,r=this){this.entriesAfter.push(this.wrapPreparationException(e,"An error occurred during tear-down of the validation",r))}wrapPreparationException(e,r,n){return async(i,s,o,a)=>{await this.handleException(()=>e.call(n,i,s,o,a),r,s,i)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}getAllValidationCategories(e){return this.knownCategories}}const yR=Object.freeze({validateNode:!0,validateChildren:!0});class TR{constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData,this.profiler=e.shared.profilers.LangiumProfiler,this.languageId=e.LanguageMetaData.languageId}async validateDocument(e,r={},n=ge.None){const i=e.parseResult,s=[];if(await Ye(n),(!r.categories||r.categories.includes("built-in"))&&(this.processLexingErrors(i,s,r),r.stopAfterLexingErrors&&s.some(o=>{var a;return((a=o.data)==null?void 0:a.code)===kt.LexingError})||(this.processParsingErrors(i,s,r),r.stopAfterParsingErrors&&s.some(o=>{var a;return((a=o.data)==null?void 0:a.code)===kt.ParsingError}))||(this.processLinkingErrors(e,s,r),r.stopAfterLinkingErrors&&s.some(o=>{var a;return((a=o.data)==null?void 0:a.code)===kt.LinkingError}))))return s;try{s.push(...await this.validateAst(i.value,r,n))}catch(o){if(Lo(o))throw o;console.error("An error occurred during validation:",o)}return await Ye(n),s}processLexingErrors(e,r,n){var i;const s=[...e.lexerErrors,...((i=e.lexerReport)==null?void 0:i.diagnostics)??[]];for(const o of s){const a=o.severity??"error",c={severity:oa(a),range:{start:{line:o.line-1,character:o.column-1},end:{line:o.line-1,character:o.column+o.length-1}},message:o.message,data:RR(a),source:this.getSource()};r.push(c)}}processParsingErrors(e,r,n){for(const i of e.parserErrors){let s;if(isNaN(i.token.startOffset)){if("previousToken"in i){const o=i.previousToken;if(isNaN(o.startOffset)){const a={line:0,character:0};s={start:a,end:a}}else{const a={line:o.endLine-1,character:o.endColumn};s={start:a,end:a}}}}else s=Ua(i.token);if(s){const o={severity:oa("error"),range:s,message:i.message,data:ki(kt.ParsingError),source:this.getSource()};r.push(o)}}}processLinkingErrors(e,r,n){var i;for(const s of e.references){const o=s.error;if(o){const a={node:o.info.container,range:(i=s.$refNode)==null?void 0:i.range,property:o.info.property,index:o.info.index,data:{code:kt.LinkingError,containerType:o.info.container.$type,property:o.info.property,refText:o.info.reference.$refText}};r.push(this.toDiagnostic("error",o.message,a))}}}async validateAst(e,r,n=ge.None){const i=[],s=(o,a,c)=>{i.push(this.toDiagnostic(o,a,c))};return await this.validateAstBefore(e,r,s,n),await this.validateAstNodes(e,r,s,n),await this.validateAstAfter(e,r,s,n),i}async validateAstBefore(e,r,n,i=ge.None){const s=this.validationRegistry.checksBefore;for(const o of s)await Ye(i),await o(e,n,r.categories??[],i)}async validateAstNodes(e,r,n,i=ge.None){var s;if((s=this.profiler)!=null&&s.isActive("validating")){const o=this.profiler.createTask("validating",this.languageId);o.start();try{const a=Qt(e).iterator();for(const c of a){o.startSubTask(c.$type);const l=this.validateSingleNodeOptions(c,r);if(l.validateNode)try{const u=this.validationRegistry.getChecks(c.$type,r.categories);for(const p of u)await p(c,n,i)}finally{o.stopSubTask(c.$type)}l.validateChildren||a.prune()}}finally{o.stop()}}else{const o=Qt(e).iterator();for(const a of o){await Ye(i);const c=this.validateSingleNodeOptions(a,r);if(c.validateNode){const l=this.validationRegistry.getChecks(a.$type,r.categories);for(const u of l)await u(a,n,i)}c.validateChildren||o.prune()}}}validateSingleNodeOptions(e,r){return yR}async validateAstAfter(e,r,n,i=ge.None){const s=this.validationRegistry.checksAfter;for(const o of s)await Ye(i),await o(e,n,r.categories??[],i)}toDiagnostic(e,r,n){return{message:r,range:vR(n),severity:oa(e),code:n.code,codeDescription:n.codeDescription,tags:n.tags,relatedInformation:n.relatedInformation,data:n.data,source:this.getSource()}}getSource(){return this.metadata.languageId}}function vR(t){if(t.range)return t.range;let e;return typeof t.property=="string"?e=rf(t.node.$cstNode,t.property,t.index):typeof t.keyword=="string"&&(e=mg(t.node.$cstNode,t.keyword,t.index)),e??(e=t.node.$cstNode),e?e.range:{start:{line:0,character:0},end:{line:0,character:0}}}function oa(t){switch(t){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+t)}}function RR(t){switch(t){case"error":return ki(kt.LexingError);case"warning":return ki(kt.LexingWarning);case"info":return ki(kt.LexingInfo);case"hint":return ki(kt.LexingHint);default:throw new Error("Invalid diagnostic severity: "+t)}}var kt;(function(t){t.LexingError="lexing-error",t.LexingWarning="lexing-warning",t.LexingInfo="lexing-info",t.LexingHint="lexing-hint",t.ParsingError="parsing-error",t.LinkingError="linking-error"})(kt||(kt={}));class $R{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,r,n){const i=n??Jt(e);r??(r=this.nameProvider.getName(e));const s=this.astNodeLocator.getAstNodePath(e);if(!r)throw new Error(`Node at path ${s} has no name.`);let o;const a=()=>o??(o=Ws(this.nameProvider.getNameNode(e)??e.$cstNode));return{node:e,name:r,get nameSegment(){return a()},selectionSegment:Ws(e.$cstNode),type:e.$type,documentUri:i.uri,path:s}}}class ER{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,r=ge.None){const n=[],i=e.parseResult.value;for(const s of Qt(i))await Ye(r),Bs(s).forEach(o=>{o.reference.error||n.push(...this.createInfoDescriptions(o))});return n}createInfoDescriptions(e){const r=e.reference;if(r.error||!r.$refNode)return[];let n=[];St(r)&&r.$nodeDescription?n=[r.$nodeDescription]:dr(r)&&(n=r.items.map(c=>c.$nodeDescription).filter(c=>c!==void 0));const i=Jt(e.container).uri,s=this.nodeLocator.getAstNodePath(e.container),o=[],a=Ws(r.$refNode);for(const c of n)o.push({sourceUri:i,sourcePath:s,targetUri:c.documentUri,targetPath:c.path,segment:a,local:lt.equals(c.documentUri,i)});return o}}class kR{constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){const r=this.getAstNodePath(e.$container),n=this.getPathSegment(e);return r+this.segmentSeparator+n}return""}getPathSegment({$containerProperty:e,$containerIndex:r}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return r!==void 0?e+this.indexSeparator+r:e}getAstNode(e,r){return r.split(this.segmentSeparator).reduce((n,i)=>{if(!n||i.length===0)return n;const s=i.indexOf(this.indexSeparator);if(s>0){const o=i.substring(0,s),a=parseInt(i.substring(s+1)),c=n[o];return c==null?void 0:c[a]}return n[i]},e)}}class SR{constructor(e){this._ready=new zl,this.onConfigurationSectionUpdateEmitter=new ph,this.settings={},this.workspaceConfig=!1,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var r;this.workspaceConfig=((r=e.capabilities.workspace)==null?void 0:r.configuration)??!1}async initialized(e){if(this.workspaceConfig){if(e.register){const r=this.serviceRegistry.all;e.register({section:r.map(n=>this.toSectionName(n.LanguageMetaData.languageId))})}if(e.fetchConfiguration){const r=this.serviceRegistry.all.map(i=>({section:this.toSectionName(i.LanguageMetaData.languageId)})),n=await e.fetchConfiguration(r);r.forEach((i,s)=>{this.updateSectionConfiguration(i.section,n[s])})}}this._ready.resolve()}updateConfiguration(e){typeof e.settings!="object"||e.settings===null||Object.entries(e.settings).forEach(([r,n])=>{this.updateSectionConfiguration(r,n),this.onConfigurationSectionUpdateEmitter.fire({section:r,configuration:n})})}updateSectionConfiguration(e,r){this.settings[e]=r}async getConfiguration(e,r){await this.ready;const n=this.toSectionName(e);if(this.settings[n])return this.settings[n][r]}toSectionName(e){return`${e}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}}var Si={},Zr={},Bl={},Bu={},q={},Ku;function yh(){if(Ku)return q;Ku=1,Object.defineProperty(q,"__esModule",{value:!0}),q.Message=q.NotificationType9=q.NotificationType8=q.NotificationType7=q.NotificationType6=q.NotificationType5=q.NotificationType4=q.NotificationType3=q.NotificationType2=q.NotificationType1=q.NotificationType0=q.NotificationType=q.RequestType9=q.RequestType8=q.RequestType7=q.RequestType6=q.RequestType5=q.RequestType4=q.RequestType3=q.RequestType2=q.RequestType1=q.RequestType=q.RequestType0=q.AbstractMessageSignature=q.ParameterStructures=q.ResponseError=q.ErrorCodes=void 0;const t=Ne;var e;(function(y){y.ParseError=-32700,y.InvalidRequest=-32600,y.MethodNotFound=-32601,y.InvalidParams=-32602,y.InternalError=-32603,y.jsonrpcReservedErrorRangeStart=-32099,y.serverErrorStart=-32099,y.MessageWriteError=-32099,y.MessageReadError=-32098,y.PendingResponseRejected=-32097,y.ConnectionInactive=-32096,y.ServerNotInitialized=-32002,y.UnknownErrorCode=-32001,y.jsonrpcReservedErrorRangeEnd=-32e3,y.serverErrorEnd=-32e3})(e||(q.ErrorCodes=e={}));class r extends Error{constructor(m,k,g){super(k),this.code=t.number(m)?m:e.UnknownErrorCode,this.data=g,Object.setPrototypeOf(this,r.prototype)}toJson(){const m={code:this.code,message:this.message};return this.data!==void 0&&(m.data=this.data),m}}q.ResponseError=r;class n{constructor(m){this.kind=m}static is(m){return m===n.auto||m===n.byName||m===n.byPosition}toString(){return this.kind}}q.ParameterStructures=n,n.auto=new n("auto"),n.byPosition=new n("byPosition"),n.byName=new n("byName");class i{constructor(m,k){this.method=m,this.numberOfParams=k}get parameterStructures(){return n.auto}}q.AbstractMessageSignature=i;class s extends i{constructor(m){super(m,0)}}q.RequestType0=s;class o extends i{constructor(m,k=n.auto){super(m,1),this._parameterStructures=k}get parameterStructures(){return this._parameterStructures}}q.RequestType=o;class a extends i{constructor(m,k=n.auto){super(m,1),this._parameterStructures=k}get parameterStructures(){return this._parameterStructures}}q.RequestType1=a;class c extends i{constructor(m){super(m,2)}}q.RequestType2=c;class l extends i{constructor(m){super(m,3)}}q.RequestType3=l;class u extends i{constructor(m){super(m,4)}}q.RequestType4=u;class p extends i{constructor(m){super(m,5)}}q.RequestType5=p;class h extends i{constructor(m){super(m,6)}}q.RequestType6=h;class R extends i{constructor(m){super(m,7)}}q.RequestType7=R;class E extends i{constructor(m){super(m,8)}}q.RequestType8=E;class A extends i{constructor(m){super(m,9)}}q.RequestType9=A;class P extends i{constructor(m,k=n.auto){super(m,1),this._parameterStructures=k}get parameterStructures(){return this._parameterStructures}}q.NotificationType=P;class N extends i{constructor(m){super(m,0)}}q.NotificationType0=N;class O extends i{constructor(m,k=n.auto){super(m,1),this._parameterStructures=k}get parameterStructures(){return this._parameterStructures}}q.NotificationType1=O;class C extends i{constructor(m){super(m,2)}}q.NotificationType2=C;class L extends i{constructor(m){super(m,3)}}q.NotificationType3=L;class Z extends i{constructor(m){super(m,4)}}q.NotificationType4=Z;class re extends i{constructor(m){super(m,5)}}q.NotificationType5=re;class ne extends i{constructor(m){super(m,6)}}q.NotificationType6=ne;class ye extends i{constructor(m){super(m,7)}}q.NotificationType7=ye;class Ee extends i{constructor(m){super(m,8)}}q.NotificationType8=Ee;class ke extends i{constructor(m){super(m,9)}}q.NotificationType9=ke;var b;return function(y){function m(T){const $=T;return $&&t.string($.method)&&(t.string($.id)||t.number($.id))}y.isRequest=m;function k(T){const $=T;return $&&t.string($.method)&&T.id===void 0}y.isNotification=k;function g(T){const $=T;return $&&($.result!==void 0||!!$.error)&&(t.string($.id)||t.number($.id)||$.id===null)}y.isResponse=g}(b||(q.Message=b={})),q}var zt={},Wu;function Th(){if(Wu)return zt;Wu=1;var t;Object.defineProperty(zt,"__esModule",{value:!0}),zt.LRUCache=zt.LinkedMap=zt.Touch=void 0;var e;(function(i){i.None=0,i.First=1,i.AsOld=i.First,i.Last=2,i.AsNew=i.Last})(e||(zt.Touch=e={}));class r{constructor(){this[t]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var s;return(s=this._head)==null?void 0:s.value}get last(){var s;return(s=this._tail)==null?void 0:s.value}has(s){return this._map.has(s)}get(s,o=e.None){const a=this._map.get(s);if(a)return o!==e.None&&this.touch(a,o),a.value}set(s,o,a=e.None){let c=this._map.get(s);if(c)c.value=o,a!==e.None&&this.touch(c,a);else{switch(c={key:s,value:o,next:void 0,previous:void 0},a){case e.None:this.addItemLast(c);break;case e.First:this.addItemFirst(c);break;case e.Last:this.addItemLast(c);break;default:this.addItemLast(c);break}this._map.set(s,c),this._size++}return this}delete(s){return!!this.remove(s)}remove(s){const o=this._map.get(s);if(o)return this._map.delete(s),this.removeItem(o),this._size--,o.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const s=this._head;return this._map.delete(s.key),this.removeItem(s),this._size--,s.value}forEach(s,o){const a=this._state;let c=this._head;for(;c;){if(o?s.bind(o)(c.value,c.key,this):s(c.value,c.key,this),this._state!==a)throw new Error("LinkedMap got modified during iteration.");c=c.next}}keys(){const s=this._state;let o=this._head;const a={[Symbol.iterator]:()=>a,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(o){const c={value:o.key,done:!1};return o=o.next,c}else return{value:void 0,done:!0}}};return a}values(){const s=this._state;let o=this._head;const a={[Symbol.iterator]:()=>a,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(o){const c={value:o.value,done:!1};return o=o.next,c}else return{value:void 0,done:!0}}};return a}entries(){const s=this._state;let o=this._head;const a={[Symbol.iterator]:()=>a,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(o){const c={value:[o.key,o.value],done:!1};return o=o.next,c}else return{value:void 0,done:!0}}};return a}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(s){if(s>=this.size)return;if(s===0){this.clear();return}let o=this._head,a=this.size;for(;o&&a>s;)this._map.delete(o.key),o=o.next,a--;this._head=o,this._size=a,o&&(o.previous=void 0),this._state++}addItemFirst(s){if(!this._head&&!this._tail)this._tail=s;else if(this._head)s.next=this._head,this._head.previous=s;else throw new Error("Invalid list");this._head=s,this._state++}addItemLast(s){if(!this._head&&!this._tail)this._head=s;else if(this._tail)s.previous=this._tail,this._tail.next=s;else throw new Error("Invalid list");this._tail=s,this._state++}removeItem(s){if(s===this._head&&s===this._tail)this._head=void 0,this._tail=void 0;else if(s===this._head){if(!s.next)throw new Error("Invalid list");s.next.previous=void 0,this._head=s.next}else if(s===this._tail){if(!s.previous)throw new Error("Invalid list");s.previous.next=void 0,this._tail=s.previous}else{const o=s.next,a=s.previous;if(!o||!a)throw new Error("Invalid list");o.previous=a,a.next=o}s.next=void 0,s.previous=void 0,this._state++}touch(s,o){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(o!==e.First&&o!==e.Last)){if(o===e.First){if(s===this._head)return;const a=s.next,c=s.previous;s===this._tail?(c.next=void 0,this._tail=c):(a.previous=c,c.next=a),s.previous=void 0,s.next=this._head,this._head.previous=s,this._head=s,this._state++}else if(o===e.Last){if(s===this._tail)return;const a=s.next,c=s.previous;s===this._head?(a.previous=void 0,this._head=a):(a.previous=c,c.next=a),s.next=void 0,s.previous=this._tail,this._tail.next=s,this._tail=s,this._state++}}}toJSON(){const s=[];return this.forEach((o,a)=>{s.push([a,o])}),s}fromJSON(s){this.clear();for(const[o,a]of s)this.set(o,a)}}zt.LinkedMap=r;class n extends r{constructor(s,o=1){super(),this._limit=s,this._ratio=Math.min(Math.max(0,o),1)}get limit(){return this._limit}set limit(s){this._limit=s,this.checkTrim()}get ratio(){return this._ratio}set ratio(s){this._ratio=Math.min(Math.max(0,s),1),this.checkTrim()}get(s,o=e.AsNew){return super.get(s,o)}peek(s){return super.get(s,e.None)}set(s,o){return super.set(s,o,e.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}return zt.LRUCache=n,zt}var di={},Vu;function bR(){if(Vu)return di;Vu=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Disposable=void 0;var t;return function(e){function r(n){return{dispose:n}}e.create=r}(t||(di.Disposable=t={})),di}var _r={},Hu;function AR(){if(Hu)return _r;Hu=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.SharedArrayReceiverStrategy=_r.SharedArraySenderStrategy=void 0;const t=Rr;var e;(function(o){o.Continue=0,o.Cancelled=1})(e||(e={}));class r{constructor(){this.buffers=new Map}enableCancellation(a){if(a.id===null)return;const c=new SharedArrayBuffer(4),l=new Int32Array(c,0,1);l[0]=e.Continue,this.buffers.set(a.id,c),a.$cancellationData=c}async sendCancellation(a,c){const l=this.buffers.get(c);if(l===void 0)return;const u=new Int32Array(l,0,1);Atomics.store(u,0,e.Cancelled)}cleanup(a){this.buffers.delete(a)}dispose(){this.buffers.clear()}}_r.SharedArraySenderStrategy=r;class n{constructor(a){this.data=new Int32Array(a,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===e.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class i{constructor(a){this.token=new n(a)}cancel(){}dispose(){}}class s{constructor(){this.kind="request"}createCancellationTokenSource(a){const c=a.$cancellationData;return c===void 0?new t.CancellationTokenSource:new i(c)}}return _r.SharedArrayReceiverStrategy=s,_r}var Bt={},pi={},Yu;function vh(){if(Yu)return pi;Yu=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.Semaphore=void 0;const t=ar;class e{constructor(n=1){if(n<=0)throw new Error("Capacity must be greater than 0");this._capacity=n,this._active=0,this._waiting=[]}lock(n){return new Promise((i,s)=>{this._waiting.push({thunk:n,resolve:i,reject:s}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,t.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const n=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const i=n.thunk();i instanceof Promise?i.then(s=>{this._active--,n.resolve(s),this.runNext()},s=>{this._active--,n.reject(s),this.runNext()}):(this._active--,n.resolve(i),this.runNext())}catch(i){this._active--,n.reject(i),this.runNext()}}}return pi.Semaphore=e,pi}var Xu;function CR(){if(Xu)return Bt;Xu=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.ReadableStreamMessageReader=Bt.AbstractMessageReader=Bt.MessageReader=void 0;const t=ar,e=Ne,r=Ft,n=vh();var i;(function(c){function l(u){let p=u;return p&&e.func(p.listen)&&e.func(p.dispose)&&e.func(p.onError)&&e.func(p.onClose)&&e.func(p.onPartialMessage)}c.is=l})(i||(Bt.MessageReader=i={}));class s{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(l){this.errorEmitter.fire(this.asError(l))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(l){this.partialMessageEmitter.fire(l)}asError(l){return l instanceof Error?l:new Error(`Reader received error. Reason: ${e.string(l.message)?l.message:"unknown"}`)}}Bt.AbstractMessageReader=s;var o;(function(c){function l(u){let p,h;const R=new Map;let E;const A=new Map;if(u===void 0||typeof u=="string")p=u??"utf-8";else{if(p=u.charset??"utf-8",u.contentDecoder!==void 0&&(h=u.contentDecoder,R.set(h.name,h)),u.contentDecoders!==void 0)for(const P of u.contentDecoders)R.set(P.name,P);if(u.contentTypeDecoder!==void 0&&(E=u.contentTypeDecoder,A.set(E.name,E)),u.contentTypeDecoders!==void 0)for(const P of u.contentTypeDecoders)A.set(P.name,P)}return E===void 0&&(E=(0,t.default)().applicationJson.decoder,A.set(E.name,E)),{charset:p,contentDecoder:h,contentDecoders:R,contentTypeDecoder:E,contentTypeDecoders:A}}c.fromOptions=l})(o||(o={}));class a extends s{constructor(l,u){super(),this.readable=l,this.options=o.fromOptions(u),this.buffer=(0,t.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new n.Semaphore(1)}set partialMessageTimeout(l){this._partialMessageTimeout=l}get partialMessageTimeout(){return this._partialMessageTimeout}listen(l){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=l;const u=this.readable.onData(p=>{this.onData(p)});return this.readable.onError(p=>this.fireError(p)),this.readable.onClose(()=>this.fireClose()),u}onData(l){try{for(this.buffer.append(l);;){if(this.nextMessageLength===-1){const p=this.buffer.tryReadHeaders(!0);if(!p)return;const h=p.get("content-length");if(!h){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(p))}`));return}const R=parseInt(h);if(isNaN(R)){this.fireError(new Error(`Content-Length value must be a number. Got ${h}`));return}this.nextMessageLength=R}const u=this.buffer.tryReadBody(this.nextMessageLength);if(u===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{const p=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(u):u,h=await this.options.contentTypeDecoder.decode(p,this.options);this.callback(h)}).catch(p=>{this.fireError(p)})}}catch(u){this.fireError(u)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,t.default)().timer.setTimeout((l,u)=>{this.partialMessageTimer=void 0,l===this.messageToken&&(this.firePartialMessage({messageToken:l,waitingTime:u}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}return Bt.ReadableStreamMessageReader=a,Bt}var Kt={},Zu;function xR(){if(Zu)return Kt;Zu=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.WriteableStreamMessageWriter=Kt.AbstractMessageWriter=Kt.MessageWriter=void 0;const t=ar,e=Ne,r=vh(),n=Ft,i="Content-Length: ",s=`\r
`;var o;(function(u){function p(h){let R=h;return R&&e.func(R.dispose)&&e.func(R.onClose)&&e.func(R.onError)&&e.func(R.write)}u.is=p})(o||(Kt.MessageWriter=o={}));class a{constructor(){this.errorEmitter=new n.Emitter,this.closeEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(p,h,R){this.errorEmitter.fire([this.asError(p),h,R])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(p){return p instanceof Error?p:new Error(`Writer received error. Reason: ${e.string(p.message)?p.message:"unknown"}`)}}Kt.AbstractMessageWriter=a;var c;(function(u){function p(h){return h===void 0||typeof h=="string"?{charset:h??"utf-8",contentTypeEncoder:(0,t.default)().applicationJson.encoder}:{charset:h.charset??"utf-8",contentEncoder:h.contentEncoder,contentTypeEncoder:h.contentTypeEncoder??(0,t.default)().applicationJson.encoder}}u.fromOptions=p})(c||(c={}));class l extends a{constructor(p,h){super(),this.writable=p,this.options=c.fromOptions(h),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError(R=>this.fireError(R)),this.writable.onClose(()=>this.fireClose())}async write(p){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(p,this.options).then(h=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(h):h).then(h=>{const R=[];return R.push(i,h.byteLength.toString(),s),R.push(s),this.doWrite(p,R,h)},h=>{throw this.fireError(h),h}))}async doWrite(p,h,R){try{return await this.writable.write(h.join(""),"ascii"),this.writable.write(R)}catch(E){return this.handleError(E,p),Promise.reject(E)}}handleError(p,h){this.errorCount++,this.fireError(p,h,this.errorCount)}end(){this.writable.end()}}return Kt.WriteableStreamMessageWriter=l,Kt}var fi={},Ju;function NR(){if(Ju)return fi;Ju=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.AbstractMessageBuffer=void 0;const t=13,e=10,r=`\r
`;class n{constructor(s="utf-8"){this._encoding=s,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(s){const o=typeof s=="string"?this.fromString(s,this._encoding):s;this._chunks.push(o),this._totalLength+=o.byteLength}tryReadHeaders(s=!1){if(this._chunks.length===0)return;let o=0,a=0,c=0,l=0;e:for(;a<this._chunks.length;){const R=this._chunks[a];for(c=0;c<R.length;){switch(R[c]){case t:switch(o){case 0:o=1;break;case 2:o=3;break;default:o=0}break;case e:switch(o){case 1:o=2;break;case 3:o=4,c++;break e;default:o=0}break;default:o=0}c++}l+=R.byteLength,a++}if(o!==4)return;const u=this._read(l+c),p=new Map,h=this.toString(u,"ascii").split(r);if(h.length<2)return p;for(let R=0;R<h.length-2;R++){const E=h[R],A=E.indexOf(":");if(A===-1)throw new Error(`Message header must separate key and value using ':'
${E}`);const P=E.substr(0,A),N=E.substr(A+1).trim();p.set(s?P.toLowerCase():P,N)}return p}tryReadBody(s){if(!(this._totalLength<s))return this._read(s)}get numberOfBytes(){return this._totalLength}_read(s){if(s===0)return this.emptyBuffer();if(s>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===s){const l=this._chunks[0];return this._chunks.shift(),this._totalLength-=s,this.asNative(l)}if(this._chunks[0].byteLength>s){const l=this._chunks[0],u=this.asNative(l,s);return this._chunks[0]=l.slice(s),this._totalLength-=s,u}const o=this.allocNative(s);let a=0,c=0;for(;s>0;){const l=this._chunks[c];if(l.byteLength>s){const u=l.slice(0,s);o.set(u,a),a+=s,this._chunks[c]=l.slice(s),this._totalLength-=s,s-=s}else o.set(l,a),a+=l.byteLength,this._chunks.shift(),this._totalLength-=l.byteLength,s-=l.byteLength}return o}}return fi.AbstractMessageBuffer=n,fi}var Qu={},ed;function wR(){return ed||(ed=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.RequestCancellationReceiverStrategy=t.IdCancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const e=ar,r=Ne,n=yh(),i=Th(),s=Ft,o=Rr;var a;(function(m){m.type=new n.NotificationType("$/cancelRequest")})(a||(a={}));var c;(function(m){function k(g){return typeof g=="string"||typeof g=="number"}m.is=k})(c||(t.ProgressToken=c={}));var l;(function(m){m.type=new n.NotificationType("$/progress")})(l||(l={}));class u{constructor(){}}t.ProgressType=u;var p;(function(m){function k(g){return r.func(g)}m.is=k})(p||(p={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var h;(function(m){m[m.Off=0]="Off",m[m.Messages=1]="Messages",m[m.Compact=2]="Compact",m[m.Verbose=3]="Verbose"})(h||(t.Trace=h={}));var R;(function(m){m.Off="off",m.Messages="messages",m.Compact="compact",m.Verbose="verbose"})(R||(t.TraceValues=R={})),function(m){function k(T){if(!r.string(T))return m.Off;switch(T=T.toLowerCase(),T){case"off":return m.Off;case"messages":return m.Messages;case"compact":return m.Compact;case"verbose":return m.Verbose;default:return m.Off}}m.fromString=k;function g(T){switch(T){case m.Off:return"off";case m.Messages:return"messages";case m.Compact:return"compact";case m.Verbose:return"verbose";default:return"off"}}m.toString=g}(h||(t.Trace=h={}));var E;(function(m){m.Text="text",m.JSON="json"})(E||(t.TraceFormat=E={})),function(m){function k(g){return r.string(g)?(g=g.toLowerCase(),g==="json"?m.JSON:m.Text):m.Text}m.fromString=k}(E||(t.TraceFormat=E={}));var A;(function(m){m.type=new n.NotificationType("$/setTrace")})(A||(t.SetTraceNotification=A={}));var P;(function(m){m.type=new n.NotificationType("$/logTrace")})(P||(t.LogTraceNotification=P={}));var N;(function(m){m[m.Closed=1]="Closed",m[m.Disposed=2]="Disposed",m[m.AlreadyListening=3]="AlreadyListening"})(N||(t.ConnectionErrors=N={}));class O extends Error{constructor(k,g){super(g),this.code=k,Object.setPrototypeOf(this,O.prototype)}}t.ConnectionError=O;var C;(function(m){function k(g){const T=g;return T&&r.func(T.cancelUndispatched)}m.is=k})(C||(t.ConnectionStrategy=C={}));var L;(function(m){function k(g){const T=g;return T&&(T.kind===void 0||T.kind==="id")&&r.func(T.createCancellationTokenSource)&&(T.dispose===void 0||r.func(T.dispose))}m.is=k})(L||(t.IdCancellationReceiverStrategy=L={}));var Z;(function(m){function k(g){const T=g;return T&&T.kind==="request"&&r.func(T.createCancellationTokenSource)&&(T.dispose===void 0||r.func(T.dispose))}m.is=k})(Z||(t.RequestCancellationReceiverStrategy=Z={}));var re;(function(m){m.Message=Object.freeze({createCancellationTokenSource(g){return new o.CancellationTokenSource}});function k(g){return L.is(g)||Z.is(g)}m.is=k})(re||(t.CancellationReceiverStrategy=re={}));var ne;(function(m){m.Message=Object.freeze({sendCancellation(g,T){return g.sendNotification(a.type,{id:T})},cleanup(g){}});function k(g){const T=g;return T&&r.func(T.sendCancellation)&&r.func(T.cleanup)}m.is=k})(ne||(t.CancellationSenderStrategy=ne={}));var ye;(function(m){m.Message=Object.freeze({receiver:re.Message,sender:ne.Message});function k(g){const T=g;return T&&re.is(T.receiver)&&ne.is(T.sender)}m.is=k})(ye||(t.CancellationStrategy=ye={}));var Ee;(function(m){function k(g){const T=g;return T&&r.func(T.handleMessage)}m.is=k})(Ee||(t.MessageStrategy=Ee={}));var ke;(function(m){function k(g){const T=g;return T&&(ye.is(T.cancellationStrategy)||C.is(T.connectionStrategy)||Ee.is(T.messageStrategy))}m.is=k})(ke||(t.ConnectionOptions=ke={}));var b;(function(m){m[m.New=1]="New",m[m.Listening=2]="Listening",m[m.Closed=3]="Closed",m[m.Disposed=4]="Disposed"})(b||(b={}));function y(m,k,g,T){const $=g!==void 0?g:t.NullLogger;let I=0,D=0,_=0;const U="2.0";let B;const se=new Map;let W;const we=new Map,te=new Map;let Ie,Me=new i.LinkedMap,de=new Map,Fe=new Set,Se=new Map,V=h.Off,Pe=E.Text,ce,et=b.New;const en=new s.Emitter,Vn=new s.Emitter,Hn=new s.Emitter,Yn=new s.Emitter,Xn=new s.Emitter,Rt=T&&T.cancellationStrategy?T.cancellationStrategy:ye.Message;function Zn(f){if(f===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+f.toString()}function Zi(f){return f===null?"res-unknown-"+(++_).toString():"res-"+f.toString()}function Ji(){return"not-"+(++D).toString()}function Qi(f,S){n.Message.isRequest(S)?f.set(Zn(S.id),S):n.Message.isResponse(S)?f.set(Zi(S.id),S):f.set(Ji(),S)}function es(f){}function Jn(){return et===b.Listening}function Qn(){return et===b.Closed}function Ut(){return et===b.Disposed}function ei(){(et===b.New||et===b.Listening)&&(et=b.Closed,Vn.fire(void 0))}function ts(f){en.fire([f,void 0,void 0])}function rs(f){en.fire(f)}m.onClose(ei),m.onError(ts),k.onClose(ei),k.onError(rs);function ti(){Ie||Me.size===0||(Ie=(0,e.default)().timer.setImmediate(()=>{Ie=void 0,ns()}))}function ri(f){n.Message.isRequest(f)?ss(f):n.Message.isNotification(f)?as(f):n.Message.isResponse(f)?os(f):cs(f)}function ns(){if(Me.size===0)return;const f=Me.shift();try{const S=T==null?void 0:T.messageStrategy;Ee.is(S)?S.handleMessage(f,ri):ri(f)}finally{ti()}}const is=f=>{try{if(n.Message.isNotification(f)&&f.method===a.type.method){const S=f.params.id,w=Zn(S),F=Me.get(w);if(n.Message.isRequest(F)){const oe=T==null?void 0:T.connectionStrategy,pe=oe&&oe.cancelUndispatched?oe.cancelUndispatched(F,es):void 0;if(pe&&(pe.error!==void 0||pe.result!==void 0)){Me.delete(w),Se.delete(S),pe.id=F.id,Cr(pe,f.method,Date.now()),k.write(pe).catch(()=>$.error("Sending response for canceled message failed."));return}}const le=Se.get(S);if(le!==void 0){le.cancel(),tn(f);return}else Fe.add(S)}Qi(Me,f)}finally{ti()}};function ss(f){if(Ut())return;function S(J,fe,ie){const _e={jsonrpc:U,id:f.id};J instanceof n.ResponseError?_e.error=J.toJson():_e.result=J===void 0?null:J,Cr(_e,fe,ie),k.write(_e).catch(()=>$.error("Sending response failed."))}function w(J,fe,ie){const _e={jsonrpc:U,id:f.id,error:J.toJson()};Cr(_e,fe,ie),k.write(_e).catch(()=>$.error("Sending response failed."))}function F(J,fe,ie){J===void 0&&(J=null);const _e={jsonrpc:U,id:f.id,result:J};Cr(_e,fe,ie),k.write(_e).catch(()=>$.error("Sending response failed."))}ds(f);const le=se.get(f.method);let oe,pe;le&&(oe=le.type,pe=le.handler);const Ce=Date.now();if(pe||B){const J=f.id??String(Date.now()),fe=L.is(Rt.receiver)?Rt.receiver.createCancellationTokenSource(J):Rt.receiver.createCancellationTokenSource(f);f.id!==null&&Fe.has(f.id)&&fe.cancel(),f.id!==null&&Se.set(J,fe);try{let ie;if(pe)if(f.params===void 0){if(oe!==void 0&&oe.numberOfParams!==0){w(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${f.method} defines ${oe.numberOfParams} params but received none.`),f.method,Ce);return}ie=pe(fe.token)}else if(Array.isArray(f.params)){if(oe!==void 0&&oe.parameterStructures===n.ParameterStructures.byName){w(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by name but received parameters by position`),f.method,Ce);return}ie=pe(...f.params,fe.token)}else{if(oe!==void 0&&oe.parameterStructures===n.ParameterStructures.byPosition){w(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by position but received parameters by name`),f.method,Ce);return}ie=pe(f.params,fe.token)}else B&&(ie=B(f.method,f.params,fe.token));const _e=ie;ie?_e.then?_e.then(He=>{Se.delete(J),S(He,f.method,Ce)},He=>{Se.delete(J),He instanceof n.ResponseError?w(He,f.method,Ce):He&&r.string(He.message)?w(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${He.message}`),f.method,Ce):w(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,Ce)}):(Se.delete(J),S(ie,f.method,Ce)):(Se.delete(J),F(ie,f.method,Ce))}catch(ie){Se.delete(J),ie instanceof n.ResponseError?S(ie,f.method,Ce):ie&&r.string(ie.message)?w(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${ie.message}`),f.method,Ce):w(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,Ce)}}else w(new n.ResponseError(n.ErrorCodes.MethodNotFound,`Unhandled method ${f.method}`),f.method,Ce)}function os(f){if(!Ut())if(f.id===null)f.error?$.error(`Received response message without id: Error is: 
${JSON.stringify(f.error,void 0,4)}`):$.error("Received response message without id. No further error information provided.");else{const S=f.id,w=de.get(S);if(ps(f,w),w!==void 0){de.delete(S);try{if(f.error){const F=f.error;w.reject(new n.ResponseError(F.code,F.message,F.data))}else if(f.result!==void 0)w.resolve(f.result);else throw new Error("Should never happen.")}catch(F){F.message?$.error(`Response handler '${w.method}' failed with message: ${F.message}`):$.error(`Response handler '${w.method}' failed unexpectedly.`)}}}}function as(f){if(Ut())return;let S,w;if(f.method===a.type.method){const F=f.params.id;Fe.delete(F),tn(f);return}else{const F=we.get(f.method);F&&(w=F.handler,S=F.type)}if(w||W)try{if(tn(f),w)if(f.params===void 0)S!==void 0&&S.numberOfParams!==0&&S.parameterStructures!==n.ParameterStructures.byName&&$.error(`Notification ${f.method} defines ${S.numberOfParams} params but received none.`),w();else if(Array.isArray(f.params)){const F=f.params;f.method===l.type.method&&F.length===2&&c.is(F[0])?w({token:F[0],value:F[1]}):(S!==void 0&&(S.parameterStructures===n.ParameterStructures.byName&&$.error(`Notification ${f.method} defines parameters by name but received parameters by position`),S.numberOfParams!==f.params.length&&$.error(`Notification ${f.method} defines ${S.numberOfParams} params but received ${F.length} arguments`)),w(...F))}else S!==void 0&&S.parameterStructures===n.ParameterStructures.byPosition&&$.error(`Notification ${f.method} defines parameters by position but received parameters by name`),w(f.params);else W&&W(f.method,f.params)}catch(F){F.message?$.error(`Notification handler '${f.method}' failed with message: ${F.message}`):$.error(`Notification handler '${f.method}' failed unexpectedly.`)}else Hn.fire(f)}function cs(f){if(!f){$.error("Received empty message.");return}$.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(f,null,4)}`);const S=f;if(r.string(S.id)||r.number(S.id)){const w=S.id,F=de.get(w);F&&F.reject(new Error("The received response has neither a result nor an error property."))}}function $t(f){if(f!=null)switch(V){case h.Verbose:return JSON.stringify(f,null,4);case h.Compact:return JSON.stringify(f);default:return}}function ls(f){if(!(V===h.Off||!ce))if(Pe===E.Text){let S;(V===h.Verbose||V===h.Compact)&&f.params&&(S=`Params: ${$t(f.params)}

`),ce.log(`Sending request '${f.method} - (${f.id})'.`,S)}else Gt("send-request",f)}function us(f){if(!(V===h.Off||!ce))if(Pe===E.Text){let S;(V===h.Verbose||V===h.Compact)&&(f.params?S=`Params: ${$t(f.params)}

`:S=`No parameters provided.

`),ce.log(`Sending notification '${f.method}'.`,S)}else Gt("send-notification",f)}function Cr(f,S,w){if(!(V===h.Off||!ce))if(Pe===E.Text){let F;(V===h.Verbose||V===h.Compact)&&(f.error&&f.error.data?F=`Error data: ${$t(f.error.data)}

`:f.result?F=`Result: ${$t(f.result)}

`:f.error===void 0&&(F=`No result returned.

`)),ce.log(`Sending response '${S} - (${f.id})'. Processing request took ${Date.now()-w}ms`,F)}else Gt("send-response",f)}function ds(f){if(!(V===h.Off||!ce))if(Pe===E.Text){let S;(V===h.Verbose||V===h.Compact)&&f.params&&(S=`Params: ${$t(f.params)}

`),ce.log(`Received request '${f.method} - (${f.id})'.`,S)}else Gt("receive-request",f)}function tn(f){if(!(V===h.Off||!ce||f.method===P.type.method))if(Pe===E.Text){let S;(V===h.Verbose||V===h.Compact)&&(f.params?S=`Params: ${$t(f.params)}

`:S=`No parameters provided.

`),ce.log(`Received notification '${f.method}'.`,S)}else Gt("receive-notification",f)}function ps(f,S){if(!(V===h.Off||!ce))if(Pe===E.Text){let w;if((V===h.Verbose||V===h.Compact)&&(f.error&&f.error.data?w=`Error data: ${$t(f.error.data)}

`:f.result?w=`Result: ${$t(f.result)}

`:f.error===void 0&&(w=`No result returned.

`)),S){const F=f.error?` Request failed: ${f.error.message} (${f.error.code}).`:"";ce.log(`Received response '${S.method} - (${f.id})' in ${Date.now()-S.timerStart}ms.${F}`,w)}else ce.log(`Received response ${f.id} without active response promise.`,w)}else Gt("receive-response",f)}function Gt(f,S){if(!ce||V===h.Off)return;const w={isLSPMessage:!0,type:f,message:S,timestamp:Date.now()};ce.log(w)}function cr(){if(Qn())throw new O(N.Closed,"Connection is closed.");if(Ut())throw new O(N.Disposed,"Connection is disposed.")}function fs(){if(Jn())throw new O(N.AlreadyListening,"Connection is already listening")}function hs(){if(!Jn())throw new Error("Call listen() first.")}function lr(f){return f===void 0?null:f}function ni(f){if(f!==null)return f}function d(f){return f!=null&&!Array.isArray(f)&&typeof f=="object"}function be(f,S){switch(f){case n.ParameterStructures.auto:return d(S)?ni(S):[lr(S)];case n.ParameterStructures.byName:if(!d(S))throw new Error("Received parameters by name but param is not an object literal.");return ni(S);case n.ParameterStructures.byPosition:return[lr(S)];default:throw new Error(`Unknown parameter structure ${f.toString()}`)}}function Ae(f,S){let w;const F=f.numberOfParams;switch(F){case 0:w=void 0;break;case 1:w=be(f.parameterStructures,S[0]);break;default:w=[];for(let le=0;le<S.length&&le<F;le++)w.push(lr(S[le]));if(S.length<F)for(let le=S.length;le<F;le++)w.push(null);break}return w}const K={sendNotification:(f,...S)=>{cr();let w,F;if(r.string(f)){w=f;const oe=S[0];let pe=0,Ce=n.ParameterStructures.auto;n.ParameterStructures.is(oe)&&(pe=1,Ce=oe);let J=S.length;const fe=J-pe;switch(fe){case 0:F=void 0;break;case 1:F=be(Ce,S[pe]);break;default:if(Ce===n.ParameterStructures.byName)throw new Error(`Received ${fe} parameters for 'by Name' notification parameter structure.`);F=S.slice(pe,J).map(ie=>lr(ie));break}}else{const oe=S;w=f.method,F=Ae(f,oe)}const le={jsonrpc:U,method:w,params:F};return us(le),k.write(le).catch(oe=>{throw $.error("Sending notification failed."),oe})},onNotification:(f,S)=>{cr();let w;return r.func(f)?W=f:S&&(r.string(f)?(w=f,we.set(f,{type:void 0,handler:S})):(w=f.method,we.set(f.method,{type:f,handler:S}))),{dispose:()=>{w!==void 0?we.delete(w):W=void 0}}},onProgress:(f,S,w)=>{if(te.has(S))throw new Error(`Progress handler for token ${S} already registered`);return te.set(S,w),{dispose:()=>{te.delete(S)}}},sendProgress:(f,S,w)=>K.sendNotification(l.type,{token:S,value:w}),onUnhandledProgress:Yn.event,sendRequest:(f,...S)=>{cr(),hs();let w,F,le;if(r.string(f)){w=f;const J=S[0],fe=S[S.length-1];let ie=0,_e=n.ParameterStructures.auto;n.ParameterStructures.is(J)&&(ie=1,_e=J);let He=S.length;o.CancellationToken.is(fe)&&(He=He-1,le=fe);const It=He-ie;switch(It){case 0:F=void 0;break;case 1:F=be(_e,S[ie]);break;default:if(_e===n.ParameterStructures.byName)throw new Error(`Received ${It} parameters for 'by Name' request parameter structure.`);F=S.slice(ie,He).map(Dh=>lr(Dh));break}}else{const J=S;w=f.method,F=Ae(f,J);const fe=f.numberOfParams;le=o.CancellationToken.is(J[fe])?J[fe]:void 0}const oe=I++;let pe;le&&(pe=le.onCancellationRequested(()=>{const J=Rt.sender.sendCancellation(K,oe);return J===void 0?($.log(`Received no promise from cancellation strategy when cancelling id ${oe}`),Promise.resolve()):J.catch(()=>{$.log(`Sending cancellation messages for id ${oe} failed`)})}));const Ce={jsonrpc:U,id:oe,method:w,params:F};return ls(Ce),typeof Rt.sender.enableCancellation=="function"&&Rt.sender.enableCancellation(Ce),new Promise(async(J,fe)=>{const ie=It=>{J(It),Rt.sender.cleanup(oe),pe==null||pe.dispose()},_e=It=>{fe(It),Rt.sender.cleanup(oe),pe==null||pe.dispose()},He={method:w,timerStart:Date.now(),resolve:ie,reject:_e};try{await k.write(Ce),de.set(oe,He)}catch(It){throw $.error("Sending request failed."),He.reject(new n.ResponseError(n.ErrorCodes.MessageWriteError,It.message?It.message:"Unknown reason")),It}})},onRequest:(f,S)=>{cr();let w=null;return p.is(f)?(w=void 0,B=f):r.string(f)?(w=null,S!==void 0&&(w=f,se.set(f,{handler:S,type:void 0}))):S!==void 0&&(w=f.method,se.set(f.method,{type:f,handler:S})),{dispose:()=>{w!==null&&(w!==void 0?se.delete(w):B=void 0)}}},hasPendingResponse:()=>de.size>0,trace:async(f,S,w)=>{let F=!1,le=E.Text;w!==void 0&&(r.boolean(w)?F=w:(F=w.sendNotification||!1,le=w.traceFormat||E.Text)),V=f,Pe=le,V===h.Off?ce=void 0:ce=S,F&&!Qn()&&!Ut()&&await K.sendNotification(A.type,{value:h.toString(f)})},onError:en.event,onClose:Vn.event,onUnhandledNotification:Hn.event,onDispose:Xn.event,end:()=>{k.end()},dispose:()=>{if(Ut())return;et=b.Disposed,Xn.fire(void 0);const f=new n.ResponseError(n.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const S of de.values())S.reject(f);de=new Map,Se=new Map,Fe=new Set,Me=new i.LinkedMap,r.func(k.dispose)&&k.dispose(),r.func(m.dispose)&&m.dispose()},listen:()=>{cr(),fs(),et=b.Listening,m.listen(is)},inspect:()=>{(0,e.default)().console.log("inspect")}};return K.onNotification(P.type,f=>{if(V===h.Off||!ce)return;const S=V===h.Verbose||V===h.Compact;ce.log(f.message,S?f.verbose:void 0)}),K.onNotification(l.type,f=>{const S=te.get(f.token);S?S(f.value):Yn.fire(f)}),K}t.createMessageConnection=y}(Qu)),Qu}var td;function cl(){return td||(td=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.AbstractMessageBuffer=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.SharedArrayReceiverStrategy=t.SharedArraySenderStrategy=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.MessageStrategy=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=void 0;const e=yh();Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return e.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return e.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return e.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return e.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return e.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return e.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return e.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return e.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return e.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return e.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return e.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return e.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return e.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return e.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return e.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return e.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return e.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return e.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return e.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return e.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return e.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return e.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return e.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return e.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return e.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return e.ParameterStructures}});const r=Th();Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return r.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return r.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return r.Touch}});const n=bR();Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return n.Disposable}});const i=Ft;Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return i.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return i.Emitter}});const s=Rr;Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return s.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return s.CancellationToken}});const o=AR();Object.defineProperty(t,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return o.SharedArraySenderStrategy}}),Object.defineProperty(t,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return o.SharedArrayReceiverStrategy}});const a=CR();Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return a.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return a.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a.ReadableStreamMessageReader}});const c=xR();Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});const l=NR();Object.defineProperty(t,"AbstractMessageBuffer",{enumerable:!0,get:function(){return l.AbstractMessageBuffer}});const u=wR();Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return u.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return u.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return u.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return u.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return u.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return u.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return u.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return u.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return u.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return u.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return u.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return u.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return u.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return u.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return u.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return u.CancellationStrategy}}),Object.defineProperty(t,"MessageStrategy",{enumerable:!0,get:function(){return u.MessageStrategy}});const p=ar;t.RAL=p.default}(Bu)),Bu}Object.defineProperty(Bl,"__esModule",{value:!0});const Lt=cl();class Mo extends Lt.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return Mo.emptyBuffer}fromString(e,r){return new TextEncoder().encode(e)}toString(e,r){return r==="ascii"?this.asciiDecoder.decode(e):new TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e:e.slice(0,r)}allocNative(e){return new Uint8Array(e)}}Mo.emptyBuffer=new Uint8Array(0);class IR{constructor(e){this.socket=e,this._onData=new Lt.Emitter,this._messageListener=r=>{r.data.arrayBuffer().then(n=>{this._onData.fire(new Uint8Array(n))},()=>{(0,Lt.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),Lt.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),Lt.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),Lt.Disposable.create(()=>this.socket.removeEventListener("end",e))}onData(e){return this._onData.event(e)}}class _R{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),Lt.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),Lt.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),Lt.Disposable.create(()=>this.socket.removeEventListener("end",e))}write(e,r){if(typeof e=="string"){if(r!==void 0&&r!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${r}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const OR=new TextEncoder,Rh=Object.freeze({messageBuffer:Object.freeze({create:t=>new Mo(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{if(e.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${e.charset}`);return Promise.resolve(OR.encode(JSON.stringify(t,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{if(!(t instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(e.charset).decode(t)))}})}),stream:Object.freeze({asReadableStream:t=>new IR(t),asWritableStream:t=>new _R(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){const n=setTimeout(t,e,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(t,...e){const r=setTimeout(t,0,...e);return{dispose:()=>clearTimeout(r)}},setInterval(t,e,...r){const n=setInterval(t,e,...r);return{dispose:()=>clearInterval(n)}}})});function ll(){return Rh}(function(t){function e(){Lt.RAL.install(Rh)}t.install=e})(ll||(ll={}));Bl.default=ll;(function(t){var e=yt&&yt.__createBinding||(Object.create?function(a,c,l,u){u===void 0&&(u=l);var p=Object.getOwnPropertyDescriptor(c,l);(!p||("get"in p?!c.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return c[l]}}),Object.defineProperty(a,u,p)}:function(a,c,l,u){u===void 0&&(u=l),a[u]=c[l]}),r=yt&&yt.__exportStar||function(a,c){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(c,l)&&e(c,a,l)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0,Bl.default.install();const n=cl();r(cl(),t);class i extends n.AbstractMessageReader{constructor(c){super(),this._onData=new n.Emitter,this._messageListener=l=>{this._onData.fire(l.data)},c.addEventListener("error",l=>this.fireError(l)),c.onmessage=this._messageListener}listen(c){return this._onData.event(c)}}t.BrowserMessageReader=i;class s extends n.AbstractMessageWriter{constructor(c){super(),this.port=c,this.errorCount=0,c.addEventListener("error",l=>this.fireError(l))}write(c){try{return this.port.postMessage(c),Promise.resolve()}catch(l){return this.handleError(l,c),Promise.reject(l)}}handleError(c,l){this.errorCount++,this.fireError(c,l,this.errorCount)}end(){}}t.BrowserMessageWriter=s;function o(a,c,l,u){return l===void 0&&(l=n.NullLogger),n.ConnectionStrategy.is(u)&&(u={connectionStrategy:u}),(0,n.createMessageConnection)(a,c,l,u)}t.createMessageConnection=o})(Zr);var rd=Zr,$h={};const Kl=Uh(vv);var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.ProtocolNotificationType=Y.ProtocolNotificationType0=Y.ProtocolRequestType=Y.ProtocolRequestType0=Y.RegistrationType=Y.MessageDirection=void 0;const _n=Zr;var nd;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(nd||(Y.MessageDirection=nd={}));class PR{constructor(e){this.method=e}}Y.RegistrationType=PR;class DR extends _n.RequestType0{constructor(e){super(e)}}Y.ProtocolRequestType0=DR;class LR extends _n.RequestType{constructor(e){super(e,_n.ParameterStructures.byName)}}Y.ProtocolRequestType=LR;class MR extends _n.NotificationType0{constructor(e){super(e)}}Y.ProtocolNotificationType0=MR;class FR extends _n.NotificationType{constructor(e){super(e,_n.ParameterStructures.byName)}}Y.ProtocolNotificationType=FR;var Eh={},ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.objectLiteral=ve.typedArray=ve.stringArray=ve.array=ve.func=ve.error=ve.number=ve.string=ve.boolean=void 0;function qR(t){return t===!0||t===!1}ve.boolean=qR;function kh(t){return typeof t=="string"||t instanceof String}ve.string=kh;function jR(t){return typeof t=="number"||t instanceof Number}ve.number=jR;function UR(t){return t instanceof Error}ve.error=UR;function GR(t){return typeof t=="function"}ve.func=GR;function Sh(t){return Array.isArray(t)}ve.array=Sh;function zR(t){return Sh(t)&&t.every(e=>kh(e))}ve.stringArray=zR;function BR(t,e){return Array.isArray(t)&&t.every(e)}ve.typedArray=BR;function KR(t){return t!==null&&typeof t=="object"}ve.objectLiteral=KR;var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.ImplementationRequest=void 0;const id=Y;var sd;(function(t){t.method="textDocument/implementation",t.messageDirection=id.MessageDirection.clientToServer,t.type=new id.ProtocolRequestType(t.method)})(sd||(Fo.ImplementationRequest=sd={}));var qo={};Object.defineProperty(qo,"__esModule",{value:!0});qo.TypeDefinitionRequest=void 0;const od=Y;var ad;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=od.MessageDirection.clientToServer,t.type=new od.ProtocolRequestType(t.method)})(ad||(qo.TypeDefinitionRequest=ad={}));var On={};Object.defineProperty(On,"__esModule",{value:!0});On.DidChangeWorkspaceFoldersNotification=On.WorkspaceFoldersRequest=void 0;const ho=Y;var cd;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=ho.MessageDirection.serverToClient,t.type=new ho.ProtocolRequestType0(t.method)})(cd||(On.WorkspaceFoldersRequest=cd={}));var ld;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=ho.MessageDirection.clientToServer,t.type=new ho.ProtocolNotificationType(t.method)})(ld||(On.DidChangeWorkspaceFoldersNotification=ld={}));var jo={};Object.defineProperty(jo,"__esModule",{value:!0});jo.ConfigurationRequest=void 0;const ud=Y;var dd;(function(t){t.method="workspace/configuration",t.messageDirection=ud.MessageDirection.serverToClient,t.type=new ud.ProtocolRequestType(t.method)})(dd||(jo.ConfigurationRequest=dd={}));var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.ColorPresentationRequest=Pn.DocumentColorRequest=void 0;const mo=Y;var pd;(function(t){t.method="textDocument/documentColor",t.messageDirection=mo.MessageDirection.clientToServer,t.type=new mo.ProtocolRequestType(t.method)})(pd||(Pn.DocumentColorRequest=pd={}));var fd;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=mo.MessageDirection.clientToServer,t.type=new mo.ProtocolRequestType(t.method)})(fd||(Pn.ColorPresentationRequest=fd={}));var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.FoldingRangeRefreshRequest=Dn.FoldingRangeRequest=void 0;const go=Y;var hd;(function(t){t.method="textDocument/foldingRange",t.messageDirection=go.MessageDirection.clientToServer,t.type=new go.ProtocolRequestType(t.method)})(hd||(Dn.FoldingRangeRequest=hd={}));var md;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=go.MessageDirection.serverToClient,t.type=new go.ProtocolRequestType0(t.method)})(md||(Dn.FoldingRangeRefreshRequest=md={}));var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.DeclarationRequest=void 0;const gd=Y;var yd;(function(t){t.method="textDocument/declaration",t.messageDirection=gd.MessageDirection.clientToServer,t.type=new gd.ProtocolRequestType(t.method)})(yd||(Uo.DeclarationRequest=yd={}));var Go={};Object.defineProperty(Go,"__esModule",{value:!0});Go.SelectionRangeRequest=void 0;const Td=Y;var vd;(function(t){t.method="textDocument/selectionRange",t.messageDirection=Td.MessageDirection.clientToServer,t.type=new Td.ProtocolRequestType(t.method)})(vd||(Go.SelectionRangeRequest=vd={}));var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.WorkDoneProgressCancelNotification=pr.WorkDoneProgressCreateRequest=pr.WorkDoneProgress=void 0;const WR=Zr,yo=Y;var Rd;(function(t){t.type=new WR.ProgressType;function e(r){return r===t.type}t.is=e})(Rd||(pr.WorkDoneProgress=Rd={}));var $d;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=yo.MessageDirection.serverToClient,t.type=new yo.ProtocolRequestType(t.method)})($d||(pr.WorkDoneProgressCreateRequest=$d={}));var Ed;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=yo.MessageDirection.clientToServer,t.type=new yo.ProtocolNotificationType(t.method)})(Ed||(pr.WorkDoneProgressCancelNotification=Ed={}));var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.CallHierarchyOutgoingCallsRequest=fr.CallHierarchyIncomingCallsRequest=fr.CallHierarchyPrepareRequest=void 0;const Ln=Y;var kd;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Ln.MessageDirection.clientToServer,t.type=new Ln.ProtocolRequestType(t.method)})(kd||(fr.CallHierarchyPrepareRequest=kd={}));var Sd;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Ln.MessageDirection.clientToServer,t.type=new Ln.ProtocolRequestType(t.method)})(Sd||(fr.CallHierarchyIncomingCallsRequest=Sd={}));var bd;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Ln.MessageDirection.clientToServer,t.type=new Ln.ProtocolRequestType(t.method)})(bd||(fr.CallHierarchyOutgoingCallsRequest=bd={}));var tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.SemanticTokensRefreshRequest=tt.SemanticTokensRangeRequest=tt.SemanticTokensDeltaRequest=tt.SemanticTokensRequest=tt.SemanticTokensRegistrationType=tt.TokenFormat=void 0;const ir=Y;var Ad;(function(t){t.Relative="relative"})(Ad||(tt.TokenFormat=Ad={}));var qi;(function(t){t.method="textDocument/semanticTokens",t.type=new ir.RegistrationType(t.method)})(qi||(tt.SemanticTokensRegistrationType=qi={}));var Cd;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=ir.MessageDirection.clientToServer,t.type=new ir.ProtocolRequestType(t.method),t.registrationMethod=qi.method})(Cd||(tt.SemanticTokensRequest=Cd={}));var xd;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=ir.MessageDirection.clientToServer,t.type=new ir.ProtocolRequestType(t.method),t.registrationMethod=qi.method})(xd||(tt.SemanticTokensDeltaRequest=xd={}));var Nd;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=ir.MessageDirection.clientToServer,t.type=new ir.ProtocolRequestType(t.method),t.registrationMethod=qi.method})(Nd||(tt.SemanticTokensRangeRequest=Nd={}));var wd;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=ir.MessageDirection.serverToClient,t.type=new ir.ProtocolRequestType0(t.method)})(wd||(tt.SemanticTokensRefreshRequest=wd={}));var zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.ShowDocumentRequest=void 0;const Id=Y;var _d;(function(t){t.method="window/showDocument",t.messageDirection=Id.MessageDirection.serverToClient,t.type=new Id.ProtocolRequestType(t.method)})(_d||(zo.ShowDocumentRequest=_d={}));var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.LinkedEditingRangeRequest=void 0;const Od=Y;var Pd;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Od.MessageDirection.clientToServer,t.type=new Od.ProtocolRequestType(t.method)})(Pd||(Bo.LinkedEditingRangeRequest=Pd={}));var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.WillDeleteFilesRequest=Ke.DidDeleteFilesNotification=Ke.DidRenameFilesNotification=Ke.WillRenameFilesRequest=Ke.DidCreateFilesNotification=Ke.WillCreateFilesRequest=Ke.FileOperationPatternKind=void 0;const vt=Y;var Dd;(function(t){t.file="file",t.folder="folder"})(Dd||(Ke.FileOperationPatternKind=Dd={}));var Ld;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolRequestType(t.method)})(Ld||(Ke.WillCreateFilesRequest=Ld={}));var Md;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolNotificationType(t.method)})(Md||(Ke.DidCreateFilesNotification=Md={}));var Fd;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolRequestType(t.method)})(Fd||(Ke.WillRenameFilesRequest=Fd={}));var qd;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolNotificationType(t.method)})(qd||(Ke.DidRenameFilesNotification=qd={}));var jd;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolNotificationType(t.method)})(jd||(Ke.DidDeleteFilesNotification=jd={}));var Ud;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=vt.MessageDirection.clientToServer,t.type=new vt.ProtocolRequestType(t.method)})(Ud||(Ke.WillDeleteFilesRequest=Ud={}));var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.MonikerRequest=hr.MonikerKind=hr.UniquenessLevel=void 0;const Gd=Y;var zd;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(zd||(hr.UniquenessLevel=zd={}));var Bd;(function(t){t.$import="import",t.$export="export",t.local="local"})(Bd||(hr.MonikerKind=Bd={}));var Kd;(function(t){t.method="textDocument/moniker",t.messageDirection=Gd.MessageDirection.clientToServer,t.type=new Gd.ProtocolRequestType(t.method)})(Kd||(hr.MonikerRequest=Kd={}));var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.TypeHierarchySubtypesRequest=mr.TypeHierarchySupertypesRequest=mr.TypeHierarchyPrepareRequest=void 0;const Mn=Y;var Wd;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=Mn.MessageDirection.clientToServer,t.type=new Mn.ProtocolRequestType(t.method)})(Wd||(mr.TypeHierarchyPrepareRequest=Wd={}));var Vd;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=Mn.MessageDirection.clientToServer,t.type=new Mn.ProtocolRequestType(t.method)})(Vd||(mr.TypeHierarchySupertypesRequest=Vd={}));var Hd;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=Mn.MessageDirection.clientToServer,t.type=new Mn.ProtocolRequestType(t.method)})(Hd||(mr.TypeHierarchySubtypesRequest=Hd={}));var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.InlineValueRefreshRequest=Fn.InlineValueRequest=void 0;const To=Y;var Yd;(function(t){t.method="textDocument/inlineValue",t.messageDirection=To.MessageDirection.clientToServer,t.type=new To.ProtocolRequestType(t.method)})(Yd||(Fn.InlineValueRequest=Yd={}));var Xd;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=To.MessageDirection.serverToClient,t.type=new To.ProtocolRequestType0(t.method)})(Xd||(Fn.InlineValueRefreshRequest=Xd={}));var gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.InlayHintRefreshRequest=gr.InlayHintResolveRequest=gr.InlayHintRequest=void 0;const qn=Y;var Zd;(function(t){t.method="textDocument/inlayHint",t.messageDirection=qn.MessageDirection.clientToServer,t.type=new qn.ProtocolRequestType(t.method)})(Zd||(gr.InlayHintRequest=Zd={}));var Jd;(function(t){t.method="inlayHint/resolve",t.messageDirection=qn.MessageDirection.clientToServer,t.type=new qn.ProtocolRequestType(t.method)})(Jd||(gr.InlayHintResolveRequest=Jd={}));var Qd;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=qn.MessageDirection.serverToClient,t.type=new qn.ProtocolRequestType0(t.method)})(Qd||(gr.InlayHintRefreshRequest=Qd={}));var gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.DiagnosticRefreshRequest=gt.WorkspaceDiagnosticRequest=gt.DocumentDiagnosticRequest=gt.DocumentDiagnosticReportKind=gt.DiagnosticServerCancellationData=void 0;const bh=Zr,VR=ve,jn=Y;var ep;(function(t){function e(r){const n=r;return n&&VR.boolean(n.retriggerRequest)}t.is=e})(ep||(gt.DiagnosticServerCancellationData=ep={}));var tp;(function(t){t.Full="full",t.Unchanged="unchanged"})(tp||(gt.DocumentDiagnosticReportKind=tp={}));var rp;(function(t){t.method="textDocument/diagnostic",t.messageDirection=jn.MessageDirection.clientToServer,t.type=new jn.ProtocolRequestType(t.method),t.partialResult=new bh.ProgressType})(rp||(gt.DocumentDiagnosticRequest=rp={}));var np;(function(t){t.method="workspace/diagnostic",t.messageDirection=jn.MessageDirection.clientToServer,t.type=new jn.ProtocolRequestType(t.method),t.partialResult=new bh.ProgressType})(np||(gt.WorkspaceDiagnosticRequest=np={}));var ip;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=jn.MessageDirection.serverToClient,t.type=new jn.ProtocolRequestType0(t.method)})(ip||(gt.DiagnosticRefreshRequest=ip={}));var Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.DidCloseNotebookDocumentNotification=Te.DidSaveNotebookDocumentNotification=Te.DidChangeNotebookDocumentNotification=Te.NotebookCellArrayChange=Te.DidOpenNotebookDocumentNotification=Te.NotebookDocumentSyncRegistrationType=Te.NotebookDocument=Te.NotebookCell=Te.ExecutionSummary=Te.NotebookCellKind=void 0;const ji=Kl,bt=ve,qt=Y;var ul;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}t.is=e})(ul||(Te.NotebookCellKind=ul={}));var dl;(function(t){function e(i,s){const o={executionOrder:i};return(s===!0||s===!1)&&(o.success=s),o}t.create=e;function r(i){const s=i;return bt.objectLiteral(s)&&ji.uinteger.is(s.executionOrder)&&(s.success===void 0||bt.boolean(s.success))}t.is=r;function n(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}t.equals=n})(dl||(Te.ExecutionSummary=dl={}));var vo;(function(t){function e(s,o){return{kind:s,document:o}}t.create=e;function r(s){const o=s;return bt.objectLiteral(o)&&ul.is(o.kind)&&ji.DocumentUri.is(o.document)&&(o.metadata===void 0||bt.objectLiteral(o.metadata))}t.is=r;function n(s,o){const a=new Set;return s.document!==o.document&&a.add("document"),s.kind!==o.kind&&a.add("kind"),s.executionSummary!==o.executionSummary&&a.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!i(s.metadata,o.metadata)&&a.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!dl.equals(s.executionSummary,o.executionSummary)&&a.add("executionSummary"),a}t.diff=n;function i(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;const a=Array.isArray(s),c=Array.isArray(o);if(a!==c)return!1;if(a&&c){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++)if(!i(s[l],o[l]))return!1}if(bt.objectLiteral(s)&&bt.objectLiteral(o)){const l=Object.keys(s),u=Object.keys(o);if(l.length!==u.length||(l.sort(),u.sort(),!i(l,u)))return!1;for(let p=0;p<l.length;p++){const h=l[p];if(!i(s[h],o[h]))return!1}}return!0}})(vo||(Te.NotebookCell=vo={}));var sp;(function(t){function e(n,i,s,o){return{uri:n,notebookType:i,version:s,cells:o}}t.create=e;function r(n){const i=n;return bt.objectLiteral(i)&&bt.string(i.uri)&&ji.integer.is(i.version)&&bt.typedArray(i.cells,vo.is)}t.is=r})(sp||(Te.NotebookDocument=sp={}));var Un;(function(t){t.method="notebookDocument/sync",t.messageDirection=qt.MessageDirection.clientToServer,t.type=new qt.RegistrationType(t.method)})(Un||(Te.NotebookDocumentSyncRegistrationType=Un={}));var op;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=qt.MessageDirection.clientToServer,t.type=new qt.ProtocolNotificationType(t.method),t.registrationMethod=Un.method})(op||(Te.DidOpenNotebookDocumentNotification=op={}));var ap;(function(t){function e(n){const i=n;return bt.objectLiteral(i)&&ji.uinteger.is(i.start)&&ji.uinteger.is(i.deleteCount)&&(i.cells===void 0||bt.typedArray(i.cells,vo.is))}t.is=e;function r(n,i,s){const o={start:n,deleteCount:i};return s!==void 0&&(o.cells=s),o}t.create=r})(ap||(Te.NotebookCellArrayChange=ap={}));var cp;(function(t){t.method="notebookDocument/didChange",t.messageDirection=qt.MessageDirection.clientToServer,t.type=new qt.ProtocolNotificationType(t.method),t.registrationMethod=Un.method})(cp||(Te.DidChangeNotebookDocumentNotification=cp={}));var lp;(function(t){t.method="notebookDocument/didSave",t.messageDirection=qt.MessageDirection.clientToServer,t.type=new qt.ProtocolNotificationType(t.method),t.registrationMethod=Un.method})(lp||(Te.DidSaveNotebookDocumentNotification=lp={}));var up;(function(t){t.method="notebookDocument/didClose",t.messageDirection=qt.MessageDirection.clientToServer,t.type=new qt.ProtocolNotificationType(t.method),t.registrationMethod=Un.method})(up||(Te.DidCloseNotebookDocumentNotification=up={}));var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.InlineCompletionRequest=void 0;const dp=Y;var pp;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=dp.MessageDirection.clientToServer,t.type=new dp.ProtocolRequestType(t.method)})(pp||(Ko.InlineCompletionRequest=pp={}));(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0,t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRefreshRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangesFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0,t.InlineCompletionRequest=t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=void 0;const e=Y,r=Kl,n=ve,i=Fo;Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return i.ImplementationRequest}});const s=qo;Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return s.TypeDefinitionRequest}});const o=On;Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return o.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return o.DidChangeWorkspaceFoldersNotification}});const a=jo;Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});const c=Pn;Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return c.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return c.ColorPresentationRequest}});const l=Dn;Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return l.FoldingRangeRequest}}),Object.defineProperty(t,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return l.FoldingRangeRefreshRequest}});const u=Uo;Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return u.DeclarationRequest}});const p=Go;Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return p.SelectionRangeRequest}});const h=pr;Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return h.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return h.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return h.WorkDoneProgressCancelNotification}});const R=fr;Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return R.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return R.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return R.CallHierarchyPrepareRequest}});const E=tt;Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return E.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return E.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return E.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return E.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return E.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return E.SemanticTokensRegistrationType}});const A=zo;Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return A.ShowDocumentRequest}});const P=Bo;Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return P.LinkedEditingRangeRequest}});const N=Ke;Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return N.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return N.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return N.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return N.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return N.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return N.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return N.WillDeleteFilesRequest}});const O=hr;Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return O.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return O.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return O.MonikerRequest}});const C=mr;Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return C.TypeHierarchyPrepareRequest}}),Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return C.TypeHierarchySubtypesRequest}}),Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return C.TypeHierarchySupertypesRequest}});const L=Fn;Object.defineProperty(t,"InlineValueRequest",{enumerable:!0,get:function(){return L.InlineValueRequest}}),Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return L.InlineValueRefreshRequest}});const Z=gr;Object.defineProperty(t,"InlayHintRequest",{enumerable:!0,get:function(){return Z.InlayHintRequest}}),Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Z.InlayHintResolveRequest}}),Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Z.InlayHintRefreshRequest}});const re=gt;Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return re.DiagnosticServerCancellationData}}),Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return re.DocumentDiagnosticReportKind}}),Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return re.DocumentDiagnosticRequest}}),Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return re.WorkspaceDiagnosticRequest}}),Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return re.DiagnosticRefreshRequest}});const ne=Te;Object.defineProperty(t,"NotebookCellKind",{enumerable:!0,get:function(){return ne.NotebookCellKind}}),Object.defineProperty(t,"ExecutionSummary",{enumerable:!0,get:function(){return ne.ExecutionSummary}}),Object.defineProperty(t,"NotebookCell",{enumerable:!0,get:function(){return ne.NotebookCell}}),Object.defineProperty(t,"NotebookDocument",{enumerable:!0,get:function(){return ne.NotebookDocument}}),Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return ne.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return ne.DidOpenNotebookDocumentNotification}}),Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:!0,get:function(){return ne.NotebookCellArrayChange}}),Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return ne.DidChangeNotebookDocumentNotification}}),Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return ne.DidSaveNotebookDocumentNotification}}),Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return ne.DidCloseNotebookDocumentNotification}});const ye=Ko;Object.defineProperty(t,"InlineCompletionRequest",{enumerable:!0,get:function(){return ye.InlineCompletionRequest}});var Ee;(function(d){function be(Ae){const K=Ae;return n.string(K)||n.string(K.language)||n.string(K.scheme)||n.string(K.pattern)}d.is=be})(Ee||(t.TextDocumentFilter=Ee={}));var ke;(function(d){function be(Ae){const K=Ae;return n.objectLiteral(K)&&(n.string(K.notebookType)||n.string(K.scheme)||n.string(K.pattern))}d.is=be})(ke||(t.NotebookDocumentFilter=ke={}));var b;(function(d){function be(Ae){const K=Ae;return n.objectLiteral(K)&&(n.string(K.notebook)||ke.is(K.notebook))&&(K.language===void 0||n.string(K.language))}d.is=be})(b||(t.NotebookCellTextDocumentFilter=b={}));var y;(function(d){function be(Ae){if(!Array.isArray(Ae))return!1;for(let K of Ae)if(!n.string(K)&&!Ee.is(K)&&!b.is(K))return!1;return!0}d.is=be})(y||(t.DocumentSelector=y={}));var m;(function(d){d.method="client/registerCapability",d.messageDirection=e.MessageDirection.serverToClient,d.type=new e.ProtocolRequestType(d.method)})(m||(t.RegistrationRequest=m={}));var k;(function(d){d.method="client/unregisterCapability",d.messageDirection=e.MessageDirection.serverToClient,d.type=new e.ProtocolRequestType(d.method)})(k||(t.UnregistrationRequest=k={}));var g;(function(d){d.Create="create",d.Rename="rename",d.Delete="delete"})(g||(t.ResourceOperationKind=g={}));var T;(function(d){d.Abort="abort",d.Transactional="transactional",d.TextOnlyTransactional="textOnlyTransactional",d.Undo="undo"})(T||(t.FailureHandlingKind=T={}));var $;(function(d){d.UTF8="utf-8",d.UTF16="utf-16",d.UTF32="utf-32"})($||(t.PositionEncodingKind=$={}));var I;(function(d){function be(Ae){const K=Ae;return K&&n.string(K.id)&&K.id.length>0}d.hasId=be})(I||(t.StaticRegistrationOptions=I={}));var D;(function(d){function be(Ae){const K=Ae;return K&&(K.documentSelector===null||y.is(K.documentSelector))}d.is=be})(D||(t.TextDocumentRegistrationOptions=D={}));var _;(function(d){function be(K){const f=K;return n.objectLiteral(f)&&(f.workDoneProgress===void 0||n.boolean(f.workDoneProgress))}d.is=be;function Ae(K){const f=K;return f&&n.boolean(f.workDoneProgress)}d.hasWorkDoneProgress=Ae})(_||(t.WorkDoneProgressOptions=_={}));var U;(function(d){d.method="initialize",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(U||(t.InitializeRequest=U={}));var B;(function(d){d.unknownProtocolVersion=1})(B||(t.InitializeErrorCodes=B={}));var se;(function(d){d.method="initialized",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolNotificationType(d.method)})(se||(t.InitializedNotification=se={}));var W;(function(d){d.method="shutdown",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType0(d.method)})(W||(t.ShutdownRequest=W={}));var we;(function(d){d.method="exit",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolNotificationType0(d.method)})(we||(t.ExitNotification=we={}));var te;(function(d){d.method="workspace/didChangeConfiguration",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolNotificationType(d.method)})(te||(t.DidChangeConfigurationNotification=te={}));var Ie;(function(d){d.Error=1,d.Warning=2,d.Info=3,d.Log=4,d.Debug=5})(Ie||(t.MessageType=Ie={}));var Me;(function(d){d.method="window/showMessage",d.messageDirection=e.MessageDirection.serverToClient,d.type=new e.ProtocolNotificationType(d.method)})(Me||(t.ShowMessageNotification=Me={}));var de;(function(d){d.method="window/showMessageRequest",d.messageDirection=e.MessageDirection.serverToClient,d.type=new e.ProtocolRequestType(d.method)})(de||(t.ShowMessageRequest=de={}));var Fe;(function(d){d.method="window/logMessage",d.messageDirection=e.MessageDirection.serverToClient,d.type=new e.ProtocolNotificationType(d.method)})(Fe||(t.LogMessageNotification=Fe={}));var Se;(function(d){d.method="telemetry/event",d.messageDirection=e.MessageDirection.serverToClient,d.type=new e.ProtocolNotificationType(d.method)})(Se||(t.TelemetryEventNotification=Se={}));var V;(function(d){d.None=0,d.Full=1,d.Incremental=2})(V||(t.TextDocumentSyncKind=V={}));var Pe;(function(d){d.method="textDocument/didOpen",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolNotificationType(d.method)})(Pe||(t.DidOpenTextDocumentNotification=Pe={}));var ce;(function(d){function be(K){let f=K;return f!=null&&typeof f.text=="string"&&f.range!==void 0&&(f.rangeLength===void 0||typeof f.rangeLength=="number")}d.isIncremental=be;function Ae(K){let f=K;return f!=null&&typeof f.text=="string"&&f.range===void 0&&f.rangeLength===void 0}d.isFull=Ae})(ce||(t.TextDocumentContentChangeEvent=ce={}));var et;(function(d){d.method="textDocument/didChange",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolNotificationType(d.method)})(et||(t.DidChangeTextDocumentNotification=et={}));var en;(function(d){d.method="textDocument/didClose",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolNotificationType(d.method)})(en||(t.DidCloseTextDocumentNotification=en={}));var Vn;(function(d){d.method="textDocument/didSave",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolNotificationType(d.method)})(Vn||(t.DidSaveTextDocumentNotification=Vn={}));var Hn;(function(d){d.Manual=1,d.AfterDelay=2,d.FocusOut=3})(Hn||(t.TextDocumentSaveReason=Hn={}));var Yn;(function(d){d.method="textDocument/willSave",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolNotificationType(d.method)})(Yn||(t.WillSaveTextDocumentNotification=Yn={}));var Xn;(function(d){d.method="textDocument/willSaveWaitUntil",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(Xn||(t.WillSaveTextDocumentWaitUntilRequest=Xn={}));var Rt;(function(d){d.method="workspace/didChangeWatchedFiles",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolNotificationType(d.method)})(Rt||(t.DidChangeWatchedFilesNotification=Rt={}));var Zn;(function(d){d.Created=1,d.Changed=2,d.Deleted=3})(Zn||(t.FileChangeType=Zn={}));var Zi;(function(d){function be(Ae){const K=Ae;return n.objectLiteral(K)&&(r.URI.is(K.baseUri)||r.WorkspaceFolder.is(K.baseUri))&&n.string(K.pattern)}d.is=be})(Zi||(t.RelativePattern=Zi={}));var Ji;(function(d){d.Create=1,d.Change=2,d.Delete=4})(Ji||(t.WatchKind=Ji={}));var Qi;(function(d){d.method="textDocument/publishDiagnostics",d.messageDirection=e.MessageDirection.serverToClient,d.type=new e.ProtocolNotificationType(d.method)})(Qi||(t.PublishDiagnosticsNotification=Qi={}));var es;(function(d){d.Invoked=1,d.TriggerCharacter=2,d.TriggerForIncompleteCompletions=3})(es||(t.CompletionTriggerKind=es={}));var Jn;(function(d){d.method="textDocument/completion",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(Jn||(t.CompletionRequest=Jn={}));var Qn;(function(d){d.method="completionItem/resolve",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(Qn||(t.CompletionResolveRequest=Qn={}));var Ut;(function(d){d.method="textDocument/hover",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(Ut||(t.HoverRequest=Ut={}));var ei;(function(d){d.Invoked=1,d.TriggerCharacter=2,d.ContentChange=3})(ei||(t.SignatureHelpTriggerKind=ei={}));var ts;(function(d){d.method="textDocument/signatureHelp",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(ts||(t.SignatureHelpRequest=ts={}));var rs;(function(d){d.method="textDocument/definition",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(rs||(t.DefinitionRequest=rs={}));var ti;(function(d){d.method="textDocument/references",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(ti||(t.ReferencesRequest=ti={}));var ri;(function(d){d.method="textDocument/documentHighlight",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(ri||(t.DocumentHighlightRequest=ri={}));var ns;(function(d){d.method="textDocument/documentSymbol",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(ns||(t.DocumentSymbolRequest=ns={}));var is;(function(d){d.method="textDocument/codeAction",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(is||(t.CodeActionRequest=is={}));var ss;(function(d){d.method="codeAction/resolve",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(ss||(t.CodeActionResolveRequest=ss={}));var os;(function(d){d.method="workspace/symbol",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(os||(t.WorkspaceSymbolRequest=os={}));var as;(function(d){d.method="workspaceSymbol/resolve",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(as||(t.WorkspaceSymbolResolveRequest=as={}));var cs;(function(d){d.method="textDocument/codeLens",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(cs||(t.CodeLensRequest=cs={}));var $t;(function(d){d.method="codeLens/resolve",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})($t||(t.CodeLensResolveRequest=$t={}));var ls;(function(d){d.method="workspace/codeLens/refresh",d.messageDirection=e.MessageDirection.serverToClient,d.type=new e.ProtocolRequestType0(d.method)})(ls||(t.CodeLensRefreshRequest=ls={}));var us;(function(d){d.method="textDocument/documentLink",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(us||(t.DocumentLinkRequest=us={}));var Cr;(function(d){d.method="documentLink/resolve",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(Cr||(t.DocumentLinkResolveRequest=Cr={}));var ds;(function(d){d.method="textDocument/formatting",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(ds||(t.DocumentFormattingRequest=ds={}));var tn;(function(d){d.method="textDocument/rangeFormatting",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(tn||(t.DocumentRangeFormattingRequest=tn={}));var ps;(function(d){d.method="textDocument/rangesFormatting",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(ps||(t.DocumentRangesFormattingRequest=ps={}));var Gt;(function(d){d.method="textDocument/onTypeFormatting",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(Gt||(t.DocumentOnTypeFormattingRequest=Gt={}));var cr;(function(d){d.Identifier=1})(cr||(t.PrepareSupportDefaultBehavior=cr={}));var fs;(function(d){d.method="textDocument/rename",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(fs||(t.RenameRequest=fs={}));var hs;(function(d){d.method="textDocument/prepareRename",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(hs||(t.PrepareRenameRequest=hs={}));var lr;(function(d){d.method="workspace/executeCommand",d.messageDirection=e.MessageDirection.clientToServer,d.type=new e.ProtocolRequestType(d.method)})(lr||(t.ExecuteCommandRequest=lr={}));var ni;(function(d){d.method="workspace/applyEdit",d.messageDirection=e.MessageDirection.serverToClient,d.type=new e.ProtocolRequestType("workspace/applyEdit")})(ni||(t.ApplyWorkspaceEditRequest=ni={}))})(Eh);var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.createProtocolConnection=void 0;const fp=Zr;function HR(t,e,r,n){return fp.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,fp.createMessageConnection)(t,e,r,n)}Wo.createProtocolConnection=HR;(function(t){var e=yt&&yt.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,c,l)}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),r=yt&&yt.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,s,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,r(Zr,t),r(Kl,t),r(Y,t),r(Eh,t);var n=Wo;Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return n.createProtocolConnection}});var i;(function(s){s.lspReservedErrorRangeStart=-32899,s.RequestFailed=-32803,s.ServerCancelled=-32802,s.ContentModified=-32801,s.RequestCancelled=-32800,s.lspReservedErrorRangeEnd=-32800})(i||(t.LSPErrorCodes=i={}))})($h);(function(t){var e=yt&&yt.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,c,l)}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),r=yt&&yt.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,s,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const n=rd;r(rd,t),r($h,t);function i(s,o,a,c){return(0,n.createMessageConnection)(s,o,a,c)}t.createProtocolConnection=i})(Si);var Ai;(function(t){function e(r){return{dispose:async()=>await r()}}t.create=e})(Ai||(Ai={}));class YR{constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new Fi,this.documentPhaseListeners=new Fi,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=H.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.textDocuments=e.workspace.TextDocuments,this.indexManager=e.workspace.IndexManager,this.fileSystemProvider=e.workspace.FileSystemProvider,this.workspaceManager=()=>e.workspace.WorkspaceManager,this.serviceRegistry=e.ServiceRegistry}async build(e,r={},n=ge.None){var i;for(const s of e){const o=s.uri.toString();if(s.state===H.Validated){if(typeof r.validation=="boolean"&&r.validation)this.resetToState(s,H.IndexedReferences);else if(typeof r.validation=="object"){const a=this.findMissingValidationCategories(s,r);a.length>0&&(this.buildState.set(o,{completed:!1,options:{validation:{categories:a}},result:(i=this.buildState.get(o))==null?void 0:i.result}),s.state=H.IndexedReferences)}}else this.buildState.delete(o)}this.currentState=H.Changed,await this.emitUpdate(e.map(s=>s.uri),[]),await this.buildDocuments(e,r,n)}async update(e,r,n=ge.None){this.currentState=H.Changed;const i=[];for(const c of r){const l=this.langiumDocuments.deleteDocuments(c);for(const u of l)i.push(u.uri),this.cleanUpDeleted(u)}const s=(await Promise.all(e.map(c=>this.findChangedUris(c)))).flat();for(const c of s){let l=this.langiumDocuments.getDocument(c);l===void 0&&(l=this.langiumDocumentFactory.fromModel({$type:"INVALID"},c),l.state=H.Changed,this.langiumDocuments.addDocument(l)),this.resetToState(l,H.Changed)}const o=he(s).concat(i).map(c=>c.toString()).toSet();this.langiumDocuments.all.filter(c=>!o.has(c.uri.toString())&&this.shouldRelink(c,o)).forEach(c=>this.resetToState(c,H.ComputedScopes)),await this.emitUpdate(s,i),await Ye(n);const a=this.sortDocuments(this.langiumDocuments.all.filter(c=>{var l;return c.state<H.Validated||!((l=this.buildState.get(c.uri.toString()))!=null&&l.completed)||this.resultsAreIncomplete(c,this.updateBuildOptions)}).toArray());await this.buildDocuments(a,this.updateBuildOptions,n)}resultsAreIncomplete(e,r){return this.findMissingValidationCategories(e,r).length>=1}findMissingValidationCategories(e,r){var n,i;const s=this.buildState.get(e.uri.toString()),o=this.serviceRegistry.getServices(e.uri).validation.ValidationRegistry.getAllValidationCategories(e),a=(n=s==null?void 0:s.result)!=null&&n.validationChecks?new Set((i=s==null?void 0:s.result)==null?void 0:i.validationChecks):s!=null&&s.completed?o:new Set,c=r===void 0||r.validation===!0?o:typeof r.validation=="object"?r.validation.categories??o:[];return he(c).filter(l=>!a.has(l)).toArray()}async findChangedUris(e){var r;if(this.langiumDocuments.getDocument(e)??((r=this.textDocuments)==null?void 0:r.get(e)))return[e];try{const n=await this.fileSystemProvider.stat(e);if(n.isDirectory)return await this.workspaceManager().searchFolder(e);if(this.workspaceManager().shouldIncludeEntry(n))return[e]}catch{}return[]}async emitUpdate(e,r){await Promise.all(this.updateListeners.map(n=>n(e,r)))}sortDocuments(e){let r=0,n=e.length-1;for(;r<n;){for(;r<e.length&&this.hasTextDocument(e[r]);)r++;for(;n>=0&&!this.hasTextDocument(e[n]);)n--;r<n&&([e[r],e[n]]=[e[n],e[r]])}return e}hasTextDocument(e){var r;return!!((r=this.textDocuments)!=null&&r.get(e.uri))}shouldRelink(e,r){return e.references.some(n=>n.error!==void 0)?!0:this.indexManager.isAffected(e,r)}onUpdate(e){return this.updateListeners.push(e),Ai.create(()=>{const r=this.updateListeners.indexOf(e);r>=0&&this.updateListeners.splice(r,1)})}resetToState(e,r){switch(r){case H.Changed:case H.Parsed:this.indexManager.removeContent(e.uri);case H.IndexedContent:e.localSymbols=void 0;case H.ComputedScopes:this.serviceRegistry.getServices(e.uri).references.Linker.unlink(e);case H.Linked:this.indexManager.removeReferences(e.uri);case H.IndexedReferences:e.diagnostics=void 0,this.buildState.delete(e.uri.toString());case H.Validated:}e.state>r&&(e.state=r)}cleanUpDeleted(e){this.buildState.delete(e.uri.toString()),this.indexManager.remove(e.uri),e.state=H.Changed}async buildDocuments(e,r,n){this.prepareBuild(e,r),await this.runCancelable(e,H.Parsed,n,o=>this.langiumDocumentFactory.update(o,n)),await this.runCancelable(e,H.IndexedContent,n,o=>this.indexManager.updateContent(o,n)),await this.runCancelable(e,H.ComputedScopes,n,async o=>{const a=this.serviceRegistry.getServices(o.uri).references.ScopeComputation;o.localSymbols=await a.collectLocalSymbols(o,n)});const i=e.filter(o=>this.shouldLink(o));await this.runCancelable(i,H.Linked,n,o=>this.serviceRegistry.getServices(o.uri).references.Linker.link(o,n)),await this.runCancelable(i,H.IndexedReferences,n,o=>this.indexManager.updateReferences(o,n));const s=e.filter(o=>this.shouldValidate(o)?!0:(this.markAsCompleted(o),!1));await this.runCancelable(s,H.Validated,n,async o=>{await this.validate(o,n),this.markAsCompleted(o)})}markAsCompleted(e){const r=this.buildState.get(e.uri.toString());r&&(r.completed=!0)}prepareBuild(e,r){for(const n of e){const i=n.uri.toString(),s=this.buildState.get(i);(!s||s.completed)&&this.buildState.set(i,{completed:!1,options:r,result:s==null?void 0:s.result})}}async runCancelable(e,r,n,i){for(const o of e)o.state<r&&(await Ye(n),await i(o),o.state=r,await this.notifyDocumentPhase(o,r,n));const s=e.filter(o=>o.state===r);await this.notifyBuildPhase(s,r,n),this.currentState=r}onBuildPhase(e,r){return this.buildPhaseListeners.add(e,r),Ai.create(()=>{this.buildPhaseListeners.delete(e,r)})}onDocumentPhase(e,r){return this.documentPhaseListeners.add(e,r),Ai.create(()=>{this.documentPhaseListeners.delete(e,r)})}waitUntil(e,r,n){let i;return r&&"path"in r?i=r:n=r,n??(n=ge.None),i?this.awaitDocumentState(e,i,n):this.awaitBuilderState(e,n)}awaitDocumentState(e,r,n){const i=this.langiumDocuments.getDocument(r);if(i){if(i.state>=e)return Promise.resolve(r);if(n.isCancellationRequested)return Promise.reject(kn);if(this.currentState>=e&&e>i.state)return Promise.reject(new Si.ResponseError(Si.LSPErrorCodes.RequestFailed,`Document state of ${r.toString()} is ${H[i.state]}, requiring ${H[e]}, but workspace state is already ${H[this.currentState]}. Returning undefined.`))}else return Promise.reject(new Si.ResponseError(Si.LSPErrorCodes.ServerCancelled,`No document found for URI: ${r.toString()}`));return new Promise((s,o)=>{const a=this.onDocumentPhase(e,l=>{lt.equals(l.uri,r)&&(a.dispose(),c.dispose(),s(l.uri))}),c=n.onCancellationRequested(()=>{a.dispose(),c.dispose(),o(kn)})})}awaitBuilderState(e,r){return this.currentState>=e?Promise.resolve():r.isCancellationRequested?Promise.reject(kn):new Promise((n,i)=>{const s=this.onBuildPhase(e,()=>{s.dispose(),o.dispose(),n()}),o=r.onCancellationRequested(()=>{s.dispose(),o.dispose(),i(kn)})})}async notifyDocumentPhase(e,r,n){const i=this.documentPhaseListeners.get(r).slice();for(const s of i)try{await Ye(n),await s(e,n)}catch(o){if(!Lo(o))throw o}}async notifyBuildPhase(e,r,n){if(e.length===0)return;const i=this.buildPhaseListeners.get(r).slice();for(const s of i)await Ye(n),await s(e,n)}shouldLink(e){return this.getBuildOptions(e).eagerLinking??!0}shouldValidate(e){return!!this.getBuildOptions(e).validation}async validate(e,r){const n=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,i=this.getBuildOptions(e),s=typeof i.validation=="object"?{...i.validation}:{};s.categories=this.findMissingValidationCategories(e,i);const o=await n.validateDocument(e,s,r);e.diagnostics?e.diagnostics.push(...o):e.diagnostics=o;const a=this.buildState.get(e.uri.toString());a&&(a.result??(a.result={}),a.result.validationChecks?a.result.validationChecks=he(a.result.validationChecks).concat(s.categories).distinct().toArray():a.result.validationChecks=[...s.categories])}getBuildOptions(e){var r;return((r=this.buildState.get(e.uri.toString()))==null?void 0:r.options)??{}}}class XR{constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new uR,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,r){const n=Jt(e).uri,i=[];return this.referenceIndex.forEach(s=>{s.forEach(o=>{lt.equals(o.targetUri,n)&&o.targetPath===r&&i.push(o)})}),he(i)}allElements(e,r){let n=he(this.symbolIndex.keys());return r&&(n=n.filter(i=>!r||r.has(i))),n.map(i=>this.getFileDescriptions(i,e)).flat()}getFileDescriptions(e,r){return r?this.symbolByTypeIndex.get(e,r,()=>(this.symbolIndex.get(e)??[]).filter(n=>this.astReflection.isSubtype(n.type,r))):this.symbolIndex.get(e)??[]}remove(e){this.removeContent(e),this.removeReferences(e)}removeContent(e){const r=e.toString();this.symbolIndex.delete(r),this.symbolByTypeIndex.clear(r)}removeReferences(e){const r=e.toString();this.referenceIndex.delete(r)}async updateContent(e,r=ge.None){const n=await this.serviceRegistry.getServices(e.uri).references.ScopeComputation.collectExportedSymbols(e,r),i=e.uri.toString();this.symbolIndex.set(i,n),this.symbolByTypeIndex.clear(i)}async updateReferences(e,r=ge.None){const n=await this.serviceRegistry.getServices(e.uri).workspace.ReferenceDescriptionProvider.createDescriptions(e,r);this.referenceIndex.set(e.uri.toString(),n)}isAffected(e,r){const n=this.referenceIndex.get(e.uri.toString());return n?n.some(i=>!i.local&&r.has(i.targetUri.toString())):!1}}class ZR{constructor(e){this.initialBuildOptions={},this._ready=new zl,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(e){this.folders=e.workspaceFolders??void 0}initialized(e){return this.mutex.write(r=>this.initializeWorkspace(this.folders??[],r))}async initializeWorkspace(e,r=ge.None){const n=await this.performStartup(e);await Ye(r),await this.documentBuilder.build(n,this.initialBuildOptions,r)}async performStartup(e){const r=[],n=o=>{r.push(o),this.langiumDocuments.hasDocument(o.uri)||this.langiumDocuments.addDocument(o)};await this.loadAdditionalDocuments(e,n);const i=[];await Promise.all(e.map(o=>this.getRootFolder(o)).map(async o=>this.traverseFolder(o,i)));const s=he(i).distinct(o=>o.toString()).filter(o=>!this.langiumDocuments.hasDocument(o));return await this.loadWorkspaceDocuments(s,n),this._ready.resolve(),r}async loadWorkspaceDocuments(e,r){await Promise.all(e.map(async n=>{const i=await this.langiumDocuments.getOrCreateDocument(n);r(i)}))}loadAdditionalDocuments(e,r){return Promise.resolve()}getRootFolder(e){return Ct.parse(e.uri)}async traverseFolder(e,r){try{const n=await this.fileSystemProvider.readDirectory(e);await Promise.all(n.map(async i=>{this.shouldIncludeEntry(i)&&(i.isDirectory?await this.traverseFolder(i.uri,r):i.isFile&&r.push(i.uri))}))}catch(n){console.error("Failure to read directory content of "+e.toString(!0),n)}}async searchFolder(e){const r=[];return await this.traverseFolder(e,r),r}shouldIncludeEntry(e){const r=lt.basename(e.uri);return r.startsWith(".")?!1:e.isDirectory?r!=="node_modules"&&r!=="out":e.isFile?this.serviceRegistry.hasServices(e.uri):!1}}class JR{buildUnexpectedCharactersMessage(e,r,n,i,s){return Ka.buildUnexpectedCharactersMessage(e,r,n,i,s)}buildUnableToPopLexerModeMessage(e){return Ka.buildUnableToPopLexerModeMessage(e)}}const QR={mode:"full"};class e${constructor(e){this.errorMessageProvider=e.parser.LexerErrorMessageProvider,this.tokenBuilder=e.parser.TokenBuilder;const r=this.tokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(r);const n=hp(r)?Object.values(r):r,i=e.LanguageMetaData.mode==="production";this.chevrotainLexer=new rt(n,{positionTracking:"full",skipValidations:i,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(e,r=QR){var n,i;const s=this.chevrotainLexer.tokenize(e);return{tokens:s.tokens,errors:s.errors,hidden:s.groups.hidden??[],report:(i=(n=this.tokenBuilder).flushLexingReport)==null?void 0:i.call(n,e)}}toTokenTypeDictionary(e){if(hp(e))return e;const r=Ah(e)?Object.values(e.modes).flat():e,n={};return r.forEach(i=>n[i.name]=i),n}}function t$(t){return Array.isArray(t)&&(t.length===0||"name"in t[0])}function Ah(t){return t&&"modes"in t&&"defaultMode"in t}function hp(t){return!t$(t)&&!Ah(t)}function r$(t,e,r){let n,i;typeof t=="string"?(i=e,n=r):(i=t.range.start,n=e),i||(i=ee.create(0,0));const s=Ch(t),o=Wl(n),a=s$({lines:s,position:i,options:o});return u$({index:0,tokens:a,position:i})}function n$(t,e){const r=Wl(e),n=Ch(t);if(n.length===0)return!1;const i=n[0],s=n[n.length-1],o=r.start,a=r.end;return!!(o!=null&&o.exec(i))&&!!(a!=null&&a.exec(s))}function Ch(t){let e="";return typeof t=="string"?e=t:e=t.text,e.split(ng)}const mp=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,i$=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function s$(t){var e,r,n;const i=[];let s=t.position.line,o=t.position.character;for(let a=0;a<t.lines.length;a++){const c=a===0,l=a===t.lines.length-1;let u=t.lines[a],p=0;if(c&&t.options.start){const h=(e=t.options.start)==null?void 0:e.exec(u);h&&(p=h.index+h[0].length)}else{const h=(r=t.options.line)==null?void 0:r.exec(u);h&&(p=h.index+h[0].length)}if(l){const h=(n=t.options.end)==null?void 0:n.exec(u);h&&(u=u.substring(0,h.index))}if(u=u.substring(0,l$(u)),pl(u,p)>=u.length){if(i.length>0){const h=ee.create(s,o);i.push({type:"break",content:"",range:X.create(h,h)})}}else{mp.lastIndex=p;const h=mp.exec(u);if(h){const R=h[0],E=h[1],A=ee.create(s,o+p),P=ee.create(s,o+p+R.length);i.push({type:"tag",content:E,range:X.create(A,P)}),p+=R.length,p=pl(u,p)}if(p<u.length){const R=u.substring(p),E=Array.from(R.matchAll(i$));i.push(...o$(E,R,s,o+p))}}s++,o=0}return i.length>0&&i[i.length-1].type==="break"?i.slice(0,-1):i}function o$(t,e,r,n){const i=[];if(t.length===0){const s=ee.create(r,n),o=ee.create(r,n+e.length);i.push({type:"text",content:e,range:X.create(s,o)})}else{let s=0;for(const a of t){const c=a.index,l=e.substring(s,c);l.length>0&&i.push({type:"text",content:e.substring(s,c),range:X.create(ee.create(r,s+n),ee.create(r,c+n))});let u=l.length+1;const p=a[1];if(i.push({type:"inline-tag",content:p,range:X.create(ee.create(r,s+u+n),ee.create(r,s+u+p.length+n))}),u+=p.length,a.length===4){u+=a[2].length;const h=a[3];i.push({type:"text",content:h,range:X.create(ee.create(r,s+u+n),ee.create(r,s+u+h.length+n))})}else i.push({type:"text",content:"",range:X.create(ee.create(r,s+u+n),ee.create(r,s+u+n))});s=c+a[0].length}const o=e.substring(s);o.length>0&&i.push({type:"text",content:o,range:X.create(ee.create(r,s+n),ee.create(r,s+n+o.length))})}return i}const a$=/\S/,c$=/\s*$/;function pl(t,e){const r=t.substring(e).match(a$);return r?e+r.index:t.length}function l$(t){const e=t.match(c$);if(e&&typeof e.index=="number")return e.index}function u$(t){var e,r;const n=ee.create(t.position.line,t.position.character);if(t.tokens.length===0)return new gp([],X.create(n,n));const i=[];for(;t.index<t.tokens.length;){const a=d$(t,i[i.length-1]);a&&i.push(a)}const s=((e=i[0])==null?void 0:e.range.start)??n,o=((r=i[i.length-1])==null?void 0:r.range.end)??n;return new gp(i,X.create(s,o))}function d$(t,e){const r=t.tokens[t.index];if(r.type==="tag")return Nh(t,!1);if(r.type==="text"||r.type==="inline-tag")return xh(t);p$(r,e),t.index++}function p$(t,e){if(e){const r=new Ih("",t.range);"inlines"in e?e.inlines.push(r):e.content.inlines.push(r)}}function xh(t){let e=t.tokens[t.index];const r=e;let n=e;const i=[];for(;e&&e.type!=="break"&&e.type!=="tag";)i.push(f$(t)),n=e,e=t.tokens[t.index];return new fl(i,X.create(r.range.start,n.range.end))}function f$(t){return t.tokens[t.index].type==="inline-tag"?Nh(t,!0):wh(t)}function Nh(t,e){const r=t.tokens[t.index++],n=r.content.substring(1),i=t.tokens[t.index];if((i==null?void 0:i.type)==="text")if(e){const s=wh(t);return new ca(n,new fl([s],s.range),e,X.create(r.range.start,s.range.end))}else{const s=xh(t);return new ca(n,s,e,X.create(r.range.start,s.range.end))}else{const s=r.range;return new ca(n,new fl([],s),e,s)}}function wh(t){const e=t.tokens[t.index++];return new Ih(e.content,e.range)}function Wl(t){if(!t)return Wl({start:"/**",end:"*/",line:"*"});const{start:e,end:r,line:n}=t;return{start:aa(e,!0),end:aa(r,!1),line:aa(n,!0)}}function aa(t,e){if(typeof t=="string"||typeof t=="object"){const r=typeof t=="string"?Co(t):t.source;return e?new RegExp(`^\\s*${r}`):new RegExp(`\\s*${r}\\s*$`)}else return t}class gp{constructor(e,r){this.elements=e,this.range=r}getTag(e){return this.getAllTags().find(r=>r.name===e)}getTags(e){return this.getAllTags().filter(r=>r.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(const r of this.elements)if(e.length===0)e=r.toString();else{const n=r.toString();e+=yp(e)+n}return e.trim()}toMarkdown(e){let r="";for(const n of this.elements)if(r.length===0)r=n.toMarkdown(e);else{const i=n.toMarkdown(e);r+=yp(r)+i}return r.trim()}}class ca{constructor(e,r,n,i){this.name=e,this.content=r,this.inline=n,this.range=i}toString(){let e=`@${this.name}`;const r=this.content.toString();return this.content.inlines.length===1?e=`${e} ${r}`:this.content.inlines.length>1&&(e=`${e}
${r}`),this.inline?`{${e}}`:e}toMarkdown(e){var r;return((r=e==null?void 0:e.renderTag)==null?void 0:r.call(e,this))??this.toMarkdownDefault(e)}toMarkdownDefault(e){const r=this.content.toMarkdown(e);if(this.inline){const s=h$(this.name,r,e??{});if(typeof s=="string")return s}let n="";(e==null?void 0:e.tag)==="italic"||(e==null?void 0:e.tag)===void 0?n="*":(e==null?void 0:e.tag)==="bold"?n="**":(e==null?void 0:e.tag)==="bold-italic"&&(n="***");let i=`${n}@${this.name}${n}`;return this.content.inlines.length===1?i=`${i} — ${r}`:this.content.inlines.length>1&&(i=`${i}
${r}`),this.inline?`{${i}}`:i}}function h$(t,e,r){var n;if(t==="linkplain"||t==="linkcode"||t==="link"){const i=e.indexOf(" ");let s=e;if(i>0){const o=pl(e,i);s=e.substring(o),e=e.substring(0,i)}return(t==="linkcode"||t==="link"&&r.link==="code")&&(s=`\`${s}\``),((n=r.renderLink)==null?void 0:n.call(r,e,s))??m$(e,s)}}function m$(t,e){try{return Ct.parse(t,!0),`[${e}](${t})`}catch{return t}}class fl{constructor(e,r){this.inlines=e,this.range=r}toString(){let e="";for(let r=0;r<this.inlines.length;r++){const n=this.inlines[r],i=this.inlines[r+1];e+=n.toString(),i&&i.range.start.line>n.range.start.line&&(e+=`
`)}return e}toMarkdown(e){let r="";for(let n=0;n<this.inlines.length;n++){const i=this.inlines[n],s=this.inlines[n+1];r+=i.toMarkdown(e),s&&s.range.start.line>i.range.start.line&&(r+=`
`)}return r}}class Ih{constructor(e,r){this.text=e,this.range=r}toString(){return this.text}toMarkdown(){return this.text}}function yp(t){return t.endsWith(`
`)?`
`:`

`}class g${constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){const r=this.commentProvider.getComment(e);if(r&&n$(r))return r$(r).toMarkdown({renderLink:(n,i)=>this.documentationLinkRenderer(e,n,i),renderTag:n=>this.documentationTagRenderer(e,n)})}documentationLinkRenderer(e,r,n){const i=this.findNameInLocalSymbols(e,r)??this.findNameInGlobalScope(e,r);if(i&&i.nameSegment){const s=i.nameSegment.range.start.line+1,o=i.nameSegment.range.start.character+1,a=i.documentUri.with({fragment:`L${s},${o}`});return`[${n}](${a.toString()})`}else return}documentationTagRenderer(e,r){}findNameInLocalSymbols(e,r){const n=Jt(e).localSymbols;if(!n)return;let i=e;do{const s=n.getStream(i).find(o=>o.name===r);if(s)return s;i=i.$container}while(i)}findNameInGlobalScope(e,r){return this.indexManager.allElements().find(n=>n.name===r)}}class y${constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var r;return fR(e)?e.$comment:(r=Jm(e.$cstNode,this.grammarConfig().multilineCommentRules))==null?void 0:r.text}}class T${constructor(e){this.syncParser=e.parser.LangiumParser}parse(e,r){return Promise.resolve(this.syncParser.parse(e))}}class v${constructor(){this.previousTokenSource=new Gl,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();const r=Jv();return this.previousTokenSource=r,this.enqueue(this.writeQueue,e,r.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,r,n=ge.None){const i=new zl,s={action:r,deferred:i,cancellationToken:n};return e.push(s),this.performNextOperation(),i.promise}async performNextOperation(){if(!this.done)return;const e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else if(this.readQueue.length>0)e.push(...this.readQueue.splice(0,this.readQueue.length));else return;this.done=!1,await Promise.all(e.map(async({action:r,deferred:n,cancellationToken:i})=>{try{const s=await Promise.resolve().then(()=>r(i));n.resolve(s)}catch(s){Lo(s)?n.resolve(void 0):n.reject(s)}})),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}}class R${constructor(e){this.grammarElementIdMap=new Uu,this.tokenTypeIdMap=new Uu,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport?this.dehydrateLexerReport(e.lexerReport):void 0,parserErrors:e.parserErrors.map(r=>({...r,message:r.message})),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}dehydrateLexerReport(e){return e}createDehyrationContext(e){const r=new Map,n=new Map;for(const i of Qt(e))r.set(i,{});if(e.$cstNode)for(const i of ja(e.$cstNode))n.set(i,{});return{astNodes:r,cstNodes:n}}dehydrateAstNode(e,r){const n=r.astNodes.get(e);n.$type=e.$type,n.$containerIndex=e.$containerIndex,n.$containerProperty=e.$containerProperty,e.$cstNode!==void 0&&(n.$cstNode=this.dehydrateCstNode(e.$cstNode,r));for(const[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){const o=[];n[i]=o;for(const a of s)We(a)?o.push(this.dehydrateAstNode(a,r)):St(a)?o.push(this.dehydrateReference(a,r)):o.push(a)}else We(s)?n[i]=this.dehydrateAstNode(s,r):St(s)?n[i]=this.dehydrateReference(s,r):s!==void 0&&(n[i]=s);return n}dehydrateReference(e,r){const n={};return n.$refText=e.$refText,e.$refNode&&(n.$refNode=r.cstNodes.get(e.$refNode)),n}dehydrateCstNode(e,r){const n=r.cstNodes.get(e);return zp(e)?n.fullText=e.fullText:n.grammarSource=this.getGrammarElementId(e.grammarSource),n.hidden=e.hidden,n.astNode=r.astNodes.get(e.astNode),xi(e)?n.content=e.content.map(i=>this.dehydrateCstNode(i,r)):Gp(e)&&(n.tokenType=e.tokenType.name,n.offset=e.offset,n.length=e.length,n.startLine=e.range.start.line,n.startColumn=e.range.start.character,n.endLine=e.range.end.line,n.endColumn=e.range.end.character),n}hydrate(e){const r=e.value,n=this.createHydrationContext(r);return"$cstNode"in r&&this.hydrateCstNode(r.$cstNode,n),{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport,parserErrors:e.parserErrors,value:this.hydrateAstNode(r,n)}}createHydrationContext(e){const r=new Map,n=new Map;for(const s of Qt(e))r.set(s,{});let i;if(e.$cstNode)for(const s of ja(e.$cstNode)){let o;"fullText"in s?(o=new eh(s.fullText),i=o):"content"in s?o=new ql:"tokenType"in s&&(o=this.hydrateCstLeafNode(s)),o&&(n.set(s,o),o.root=i)}return{astNodes:r,cstNodes:n}}hydrateAstNode(e,r){const n=r.astNodes.get(e);n.$type=e.$type,n.$containerIndex=e.$containerIndex,n.$containerProperty=e.$containerProperty,e.$cstNode&&(n.$cstNode=r.cstNodes.get(e.$cstNode));for(const[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){const o=[];n[i]=o;for(const a of s)We(a)?o.push(this.setParent(this.hydrateAstNode(a,r),n)):St(a)?o.push(this.hydrateReference(a,n,i,r)):o.push(a)}else We(s)?n[i]=this.setParent(this.hydrateAstNode(s,r),n):St(s)?n[i]=this.hydrateReference(s,n,i,r):s!==void 0&&(n[i]=s);return n}setParent(e,r){return e.$container=r,e}hydrateReference(e,r,n,i){return this.linker.buildReference(r,n,i.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,r,n=0){const i=r.cstNodes.get(e);if(typeof e.grammarSource=="number"&&(i.grammarSource=this.getGrammarElement(e.grammarSource)),i.astNode=r.astNodes.get(e.astNode),xi(i))for(const s of e.content){const o=this.hydrateCstNode(s,r,n++);i.content.push(o)}return i}hydrateCstLeafNode(e){const r=this.getTokenType(e.tokenType),n=e.offset,i=e.length,s=e.startLine,o=e.startColumn,a=e.endLine,c=e.endColumn,l=e.hidden;return new Qc(n,i,{start:{line:s,character:o},end:{line:a,character:c}},r,l)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){if(e)return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.getKey(e)}createGrammarElementIdMap(){let e=0;for(const r of Qt(this.grammar))wm(r)&&this.grammarElementIdMap.set(r,e++)}}function kr(t){return{documentation:{CommentProvider:e=>new y$(e),DocumentationProvider:e=>new g$(e)},parser:{AsyncParser:e=>new T$(e),GrammarConfig:e=>bg(e),LangiumParser:e=>Mv(e),CompletionParser:e=>Lv(e),ValueConverter:()=>new lh,TokenBuilder:()=>new ch,Lexer:e=>new e$(e),ParserErrorMessageProvider:()=>new nh,LexerErrorMessageProvider:()=>new JR},workspace:{AstNodeLocator:()=>new kR,AstNodeDescriptionProvider:e=>new $R(e),ReferenceDescriptionProvider:e=>new ER(e)},references:{Linker:e=>new nR(e),NameProvider:()=>new sR,ScopeProvider:e=>new pR(e),ScopeComputation:e=>new aR(e),References:e=>new oR(e)},serializer:{Hydrator:e=>new R$(e),JsonSerializer:e=>new hR(e)},validation:{DocumentValidator:e=>new TR(e),ValidationRegistry:e=>new gR(e)},shared:()=>t.shared}}function Sr(t){return{ServiceRegistry:e=>new mR(e),workspace:{LangiumDocuments:e=>new rR(e),LangiumDocumentFactory:e=>new tR(e),DocumentBuilder:e=>new YR(e),IndexManager:e=>new XR(e),WorkspaceManager:e=>new ZR(e),FileSystemProvider:e=>t.fileSystemProvider(e),WorkspaceLock:()=>new v$,ConfigurationProvider:e=>new SR(e)},profilers:{}}}var Tp;(function(t){t.merge=(e,r)=>Ui(Ui({},e),r)})(Tp||(Tp={}));function Ve(t,e,r,n,i,s,o,a,c){const l=[t,e,r,n,i,s,o,a,c].reduce(Ui,{});return _h(l)}const $$=Symbol("isProxy");function _h(t,e){const r=new Proxy({},{deleteProperty:()=>!1,set:()=>{throw new Error("Cannot set property on injected service container")},get:(n,i)=>i===$$?!0:Rp(n,i,t,e||r),getOwnPropertyDescriptor:(n,i)=>(Rp(n,i,t,e||r),Object.getOwnPropertyDescriptor(n,i)),has:(n,i)=>i in t,ownKeys:()=>[...Object.getOwnPropertyNames(t)]});return r}const vp=Symbol();function Rp(t,e,r,n){if(e in t){if(t[e]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable. Cause: "+t[e]);if(t[e]===vp)throw new Error('Cycle detected. Please make "'+String(e)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies');return t[e]}else if(e in r){const i=r[e];t[e]=vp;try{t[e]=typeof i=="function"?i(n):_h(i,n)}catch(s){throw t[e]=s instanceof Error?s:void 0,s}return t[e]}else return}function Ui(t,e){if(e){for(const[r,n]of Object.entries(e))if(n!=null)if(typeof n=="object"){const i=t[r];typeof i=="object"&&i!==null?t[r]=Ui(i,n):t[r]=Ui({},n)}else t[r]=n}return t}class E${stat(e){throw new Error("No file system is available.")}statSync(e){throw new Error("No file system is available.")}async exists(){return!1}existsSync(){return!1}readBinary(){throw new Error("No file system is available.")}readBinarySync(){throw new Error("No file system is available.")}readFile(){throw new Error("No file system is available.")}readFileSync(){throw new Error("No file system is available.")}async readDirectory(){return[]}readDirectorySync(){return[]}}const br={fileSystemProvider:()=>new E$},k$={Grammar:()=>{},LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})},S$={AstReflection:()=>new Xp};function b$(){const t=Ve(Sr(br),S$),e=Ve(kr({shared:t}),k$);return t.ServiceRegistry.register(e),e}function Jr(t){const e=b$(),r=e.serializer.JsonSerializer.deserialize(t);return e.shared.workspace.LangiumDocumentFactory.fromModel(r,Ct.parse(`memory:/${r.name??"grammar"}.langium`)),r}var A$=Object.defineProperty,x=(t,e)=>A$(t,"name",{value:e,configurable:!0}),hl;(t=>{t.Terminals={ARROW_DIRECTION:/L|R|T|B/,ARROW_GROUP:/\{group\}/,ARROW_INTO:/<|>/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,ID:/[\w]([-\w]*\w)?/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/,ARCH_ICON:/\([\w-:]+\)/,ARCH_TITLE:/\[[\w ]+\]/}})(hl||(hl={}));var ml;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,INT:/0|[1-9][0-9]*(?!\.)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/,REFERENCE:/\w([-\./\w]*[-\w])?/}})(ml||(ml={}));var gl;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(gl||(gl={}));var yl;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,INT:/0|[1-9][0-9]*(?!\.)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(yl||(yl={}));var Tl;(t=>{t.Terminals={NUMBER_PIE:/(?:-?[0-9]+\.[0-9]+(?!\.))|(?:-?(0|[1-9][0-9]*)(?!\.))/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(Tl||(Tl={}));var vl;(t=>{t.Terminals={GRATICULE:/circle|polygon/,BOOLEAN:/true|false/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,NUMBER:/(?:[0-9]+\.[0-9]+(?!\.))|(?:0|[1-9][0-9]*(?!\.))/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,ID:/[\w]([-\w]*\w)?/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(vl||(vl={}));var Rl;(t=>{t.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,TREEMAP_KEYWORD:/treemap-beta|treemap/,CLASS_DEF:/classDef\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\s+([^;\r\n]*))?(?:;)?/,STYLE_SEPARATOR:/:::/,SEPARATOR:/:/,COMMA:/,/,INDENTATION:/[ \t]{1,}/,WS:/[ \t]+/,ML_COMMENT:/\%\%[^\n]*/,NL:/\r?\n/,ID2:/[a-zA-Z_][a-zA-Z0-9_]*/,NUMBER2:/[0-9_\.\,]+/,STRING2:/"[^"]*"|'[^']*'/}})(Rl||(Rl={}));({...hl.Terminals,...ml.Terminals,...gl.Terminals,...yl.Terminals,...Tl.Terminals,...vl.Terminals,...Rl.Terminals});var Vt={$type:"Architecture",accDescr:"accDescr",accTitle:"accTitle",edges:"edges",groups:"groups",junctions:"junctions",services:"services",title:"title"};function C$(t){return wt.isInstance(t,Vt.$type)}x(C$,"isArchitecture");var ks={$type:"Axis",label:"label",name:"name"},js={$type:"Branch",name:"name",order:"order"};function x$(t){return wt.isInstance(t,js.$type)}x(x$,"isBranch");var $p={$type:"Checkout",branch:"branch"},Ss={$type:"CherryPicking",id:"id",parent:"parent",tags:"tags"},la={$type:"ClassDefStatement",className:"className",styleText:"styleText"},yn={$type:"Commit",id:"id",message:"message",tags:"tags",type:"type"};function N$(t){return wt.isInstance(t,yn.$type)}x(N$,"isCommit");var bs={$type:"Curve",entries:"entries",label:"label",name:"name"},on={$type:"Direction",accDescr:"accDescr",accTitle:"accTitle",dir:"dir",statements:"statements",title:"title"},_t={$type:"Edge",lhsDir:"lhsDir",lhsGroup:"lhsGroup",lhsId:"lhsId",lhsInto:"lhsInto",rhsDir:"rhsDir",rhsGroup:"rhsGroup",rhsId:"rhsId",rhsInto:"rhsInto",title:"title"},ua={$type:"Entry",axis:"axis",value:"value"},Fr={$type:"GitGraph",accDescr:"accDescr",accTitle:"accTitle",statements:"statements",title:"title"};function w$(t){return wt.isInstance(t,Fr.$type)}x(w$,"isGitGraph");var hi={$type:"Group",icon:"icon",id:"id",in:"in",title:"title"},bi={$type:"Info",accDescr:"accDescr",accTitle:"accTitle",title:"title"};function I$(t){return wt.isInstance(t,bi.$type)}x(I$,"isInfo");var mi={$type:"Item",classSelector:"classSelector",name:"name"},da={$type:"Junction",id:"id",in:"in"},As={$type:"Leaf",classSelector:"classSelector",name:"name",value:"value"},Tn={$type:"Merge",branch:"branch",id:"id",tags:"tags",type:"type"};function _$(t){return wt.isInstance(t,Tn.$type)}x(_$,"isMerge");var pa={$type:"Option",name:"name",value:"value"},vn={$type:"Packet",accDescr:"accDescr",accTitle:"accTitle",blocks:"blocks",title:"title"};function O$(t){return wt.isInstance(t,vn.$type)}x(O$,"isPacket");var Rn={$type:"PacketBlock",bits:"bits",end:"end",label:"label",start:"start"};function P$(t){return wt.isInstance(t,Rn.$type)}x(P$,"isPacketBlock");var qr={$type:"Pie",accDescr:"accDescr",accTitle:"accTitle",sections:"sections",showData:"showData",title:"title"};function D$(t){return wt.isInstance(t,qr.$type)}x(D$,"isPie");var Us={$type:"PieSection",label:"label",value:"value"};function L$(t){return wt.isInstance(t,Us.$type)}x(L$,"isPieSection");var Or={$type:"Radar",accDescr:"accDescr",accTitle:"accTitle",axes:"axes",curves:"curves",options:"options",title:"title"},fa={$type:"Section",classSelector:"classSelector",name:"name"},an={$type:"Service",icon:"icon",iconText:"iconText",id:"id",in:"in",title:"title"},cn={$type:"Statement"},$n={$type:"Treemap",accDescr:"accDescr",accTitle:"accTitle",title:"title",TreemapRows:"TreemapRows"};function M$(t){return wt.isInstance(t,$n.$type)}x(M$,"isTreemap");var ha={$type:"TreemapRow",indent:"indent",item:"item"},ma,Oh=(ma=class extends Up{constructor(){super(...arguments),this.types={Architecture:{name:Vt.$type,properties:{accDescr:{name:Vt.accDescr},accTitle:{name:Vt.accTitle},edges:{name:Vt.edges,defaultValue:[]},groups:{name:Vt.groups,defaultValue:[]},junctions:{name:Vt.junctions,defaultValue:[]},services:{name:Vt.services,defaultValue:[]},title:{name:Vt.title}},superTypes:[]},Axis:{name:ks.$type,properties:{label:{name:ks.label},name:{name:ks.name}},superTypes:[]},Branch:{name:js.$type,properties:{name:{name:js.name},order:{name:js.order}},superTypes:[cn.$type]},Checkout:{name:$p.$type,properties:{branch:{name:$p.branch}},superTypes:[cn.$type]},CherryPicking:{name:Ss.$type,properties:{id:{name:Ss.id},parent:{name:Ss.parent},tags:{name:Ss.tags,defaultValue:[]}},superTypes:[cn.$type]},ClassDefStatement:{name:la.$type,properties:{className:{name:la.className},styleText:{name:la.styleText}},superTypes:[]},Commit:{name:yn.$type,properties:{id:{name:yn.id},message:{name:yn.message},tags:{name:yn.tags,defaultValue:[]},type:{name:yn.type}},superTypes:[cn.$type]},Curve:{name:bs.$type,properties:{entries:{name:bs.entries,defaultValue:[]},label:{name:bs.label},name:{name:bs.name}},superTypes:[]},Direction:{name:on.$type,properties:{accDescr:{name:on.accDescr},accTitle:{name:on.accTitle},dir:{name:on.dir},statements:{name:on.statements,defaultValue:[]},title:{name:on.title}},superTypes:[Fr.$type]},Edge:{name:_t.$type,properties:{lhsDir:{name:_t.lhsDir},lhsGroup:{name:_t.lhsGroup,defaultValue:!1},lhsId:{name:_t.lhsId},lhsInto:{name:_t.lhsInto,defaultValue:!1},rhsDir:{name:_t.rhsDir},rhsGroup:{name:_t.rhsGroup,defaultValue:!1},rhsId:{name:_t.rhsId},rhsInto:{name:_t.rhsInto,defaultValue:!1},title:{name:_t.title}},superTypes:[]},Entry:{name:ua.$type,properties:{axis:{name:ua.axis,referenceType:ks.$type},value:{name:ua.value}},superTypes:[]},GitGraph:{name:Fr.$type,properties:{accDescr:{name:Fr.accDescr},accTitle:{name:Fr.accTitle},statements:{name:Fr.statements,defaultValue:[]},title:{name:Fr.title}},superTypes:[]},Group:{name:hi.$type,properties:{icon:{name:hi.icon},id:{name:hi.id},in:{name:hi.in},title:{name:hi.title}},superTypes:[]},Info:{name:bi.$type,properties:{accDescr:{name:bi.accDescr},accTitle:{name:bi.accTitle},title:{name:bi.title}},superTypes:[]},Item:{name:mi.$type,properties:{classSelector:{name:mi.classSelector},name:{name:mi.name}},superTypes:[]},Junction:{name:da.$type,properties:{id:{name:da.id},in:{name:da.in}},superTypes:[]},Leaf:{name:As.$type,properties:{classSelector:{name:As.classSelector},name:{name:As.name},value:{name:As.value}},superTypes:[mi.$type]},Merge:{name:Tn.$type,properties:{branch:{name:Tn.branch},id:{name:Tn.id},tags:{name:Tn.tags,defaultValue:[]},type:{name:Tn.type}},superTypes:[cn.$type]},Option:{name:pa.$type,properties:{name:{name:pa.name},value:{name:pa.value,defaultValue:!1}},superTypes:[]},Packet:{name:vn.$type,properties:{accDescr:{name:vn.accDescr},accTitle:{name:vn.accTitle},blocks:{name:vn.blocks,defaultValue:[]},title:{name:vn.title}},superTypes:[]},PacketBlock:{name:Rn.$type,properties:{bits:{name:Rn.bits},end:{name:Rn.end},label:{name:Rn.label},start:{name:Rn.start}},superTypes:[]},Pie:{name:qr.$type,properties:{accDescr:{name:qr.accDescr},accTitle:{name:qr.accTitle},sections:{name:qr.sections,defaultValue:[]},showData:{name:qr.showData,defaultValue:!1},title:{name:qr.title}},superTypes:[]},PieSection:{name:Us.$type,properties:{label:{name:Us.label},value:{name:Us.value}},superTypes:[]},Radar:{name:Or.$type,properties:{accDescr:{name:Or.accDescr},accTitle:{name:Or.accTitle},axes:{name:Or.axes,defaultValue:[]},curves:{name:Or.curves,defaultValue:[]},options:{name:Or.options,defaultValue:[]},title:{name:Or.title}},superTypes:[]},Section:{name:fa.$type,properties:{classSelector:{name:fa.classSelector},name:{name:fa.name}},superTypes:[mi.$type]},Service:{name:an.$type,properties:{icon:{name:an.icon},iconText:{name:an.iconText},id:{name:an.id},in:{name:an.in},title:{name:an.title}},superTypes:[]},Statement:{name:cn.$type,properties:{},superTypes:[]},Treemap:{name:$n.$type,properties:{accDescr:{name:$n.accDescr},accTitle:{name:$n.accTitle},title:{name:$n.title},TreemapRows:{name:$n.TreemapRows,defaultValue:[]}},superTypes:[]},TreemapRow:{name:ha.$type,properties:{indent:{name:ha.indent},item:{name:ha.item}},superTypes:[]}}}},x(ma,"MermaidAstReflection"),ma),wt=new Oh,Ep,F$=x(()=>Ep??(Ep=Jr(`{"$type":"Grammar","isDeclared":true,"name":"ArchitectureGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Architecture","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"},"parenthesized":false}],"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"},"parenthesized":false}],"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@18"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@19"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[],"types":[]}`)),"ArchitectureGrammarGrammar"),kp,q$=x(()=>kp??(kp=Jr(`{"$type":"Grammar","isDeclared":true,"name":"GitGraphGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@14"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","name":"REFERENCE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[],"types":[]}`)),"GitGraphGrammarGrammar"),Sp,j$=x(()=>Sp??(Sp=Jr(`{"$type":"Grammar","isDeclared":true,"name":"InfoGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Info","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"?"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@7"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"InfoGrammarGrammar"),bp,U$=x(()=>bp??(bp=Jr(`{"$type":"Grammar","isDeclared":true,"name":"PacketGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Packet","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"packet"},{"$type":"Keyword","value":"packet-beta"}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}],"cardinality":"?"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"+"},{"$type":"Assignment","feature":"bits","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]}]},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@9"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"PacketGrammarGrammar"),Ap,G$=x(()=>Ap??(Ap=Jr(`{"$type":"Grammar","isDeclared":true,"name":"PieGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Pie","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"FLOAT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?(0|[1-9][0-9]*)(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@2"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@3"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@11"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@12"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"PieGrammarGrammar"),Cp,z$=x(()=>Cp??(Cp=Jr(`{"$type":"Grammar","isDeclared":true,"name":"RadarGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Radar","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":"radar-beta:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Keyword","value":"axis"},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"curve"},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Label","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}},{"$type":"Keyword","value":"]"}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"Axis","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Curve","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"},{"$type":"Keyword","value":"{"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Keyword","value":"}"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Entries","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"DetailedEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"axis","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@2"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},"deprecatedSyntax":false,"isMulti":false}},{"$type":"Keyword","value":":","cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"NumberEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Option","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"showLegend"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"ticks"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"max"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"min"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"graticule"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"GRATICULE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"circle"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"polygon"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@16"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[{"$type":"Interface","name":"Entry","attributes":[{"$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"$type":"ReferenceType","referenceType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@2"}},"isMulti":false}},{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"types":[]}`)),"RadarGrammarGrammar"),xp,B$=x(()=>xp??(xp=Jr(`{"$type":"Grammar","isDeclared":true,"name":"TreemapGrammar","rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","entry":true,"name":"Treemap","returnType":{"$ref":"#/interfaces@4"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"TreemapRows","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"TREEMAP_KEYWORD","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap-beta"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"CLASS_DEF","definition":{"$type":"RegexToken","regex":"/classDef\\\\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\\\\s+([^;\\\\r\\\\n]*))?(?:;)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STYLE_SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":::"},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":"},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"COMMA","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":","},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INDENTATION","definition":{"$type":"RegexToken","regex":"/[ \\\\t]{1,}/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WS","definition":{"$type":"RegexToken","regex":"/[ \\\\t]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"ML_COMMENT","definition":{"$type":"RegexToken","regex":"/\\\\%\\\\%[^\\\\n]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"NL","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false},{"$type":"ParserRule","name":"TreemapRow","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"indent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"item","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"ClassDef","dataType":"string","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Item","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Section","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Leaf","returnType":{"$ref":"#/interfaces@2"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"ID2","definition":{"$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9_]*/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER2","definition":{"$type":"RegexToken","regex":"/[0-9_\\\\.\\\\,]+/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"MyNumber","dataType":"number","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"STRING2","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[{"$type":"Interface","name":"Item","attributes":[{"$type":"TypeAttribute","name":"name","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"classSelector","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"$type":"Interface","name":"Section","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[]},{"$type":"Interface","name":"Leaf","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}]},{"$type":"Interface","name":"ClassDefStatement","attributes":[{"$type":"TypeAttribute","name":"className","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"styleText","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false}],"superTypes":[]},{"$type":"Interface","name":"Treemap","attributes":[{"$type":"TypeAttribute","name":"TreemapRows","type":{"$type":"ArrayType","elementType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@15"}}},"isOptional":false},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"imports":[],"types":[],"$comment":"/**\\n * Treemap grammar for Langium\\n * Converted from mindmap grammar\\n *\\n * The ML_COMMENT and NL hidden terminals handle whitespace, comments, and newlines\\n * before the treemap keyword, allowing for empty lines and comments before the\\n * treemap declaration.\\n */"}`)),"TreemapGrammarGrammar"),K$={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},W$={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},V$={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},H$={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Y$={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},X$={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Z$={languageId:"treemap",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Qr={AstReflection:x(()=>new Oh,"AstReflection")},J$={Grammar:x(()=>F$(),"Grammar"),LanguageMetaData:x(()=>K$,"LanguageMetaData"),parser:{}},Q$={Grammar:x(()=>q$(),"Grammar"),LanguageMetaData:x(()=>W$,"LanguageMetaData"),parser:{}},eE={Grammar:x(()=>j$(),"Grammar"),LanguageMetaData:x(()=>V$,"LanguageMetaData"),parser:{}},tE={Grammar:x(()=>U$(),"Grammar"),LanguageMetaData:x(()=>H$,"LanguageMetaData"),parser:{}},rE={Grammar:x(()=>G$(),"Grammar"),LanguageMetaData:x(()=>Y$,"LanguageMetaData"),parser:{}},nE={Grammar:x(()=>z$(),"Grammar"),LanguageMetaData:x(()=>X$,"LanguageMetaData"),parser:{}},iE={Grammar:x(()=>B$(),"Grammar"),LanguageMetaData:x(()=>Z$,"LanguageMetaData"),parser:{}},sE=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,oE=/accTitle[\t ]*:([^\n\r]*)/,aE=/title([\t ][^\n\r]*|)/,cE={ACC_DESCR:sE,ACC_TITLE:oE,TITLE:aE},ga,Vo=(ga=class extends lh{runConverter(t,e,r){let n=this.runCommonConverter(t,e,r);return n===void 0&&(n=this.runCustomConverter(t,e,r)),n===void 0?super.runConverter(t,e,r):n}runCommonConverter(t,e,r){const n=cE[t.name];if(n===void 0)return;const i=n.exec(e);if(i!==null){if(i[1]!==void 0)return i[1].trim().replace(/[\t ]{2,}/gm," ");if(i[2]!==void 0)return i[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},x(ga,"AbstractMermaidValueConverter"),ga),ya,Ho=(ya=class extends Vo{runCustomConverter(t,e,r){}},x(ya,"CommonValueConverter"),ya),Ta,Ar=(Ta=class extends ch{constructor(t){super(),this.keywords=new Set(t)}buildKeywordTokens(t,e,r){const n=super.buildKeywordTokens(t,e,r);return n.forEach(i=>{this.keywords.has(i.name)&&i.PATTERN!==void 0&&(i.PATTERN=new RegExp(i.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),n}},x(Ta,"AbstractMermaidTokenBuilder"),Ta),Np;Np=class extends Ar{},x(Np,"CommonTokenBuilder");var va,lE=(va=class extends Ar{constructor(){super(["gitGraph"])}},x(va,"GitGraphTokenBuilder"),va),uE={parser:{TokenBuilder:x(()=>new lE,"TokenBuilder"),ValueConverter:x(()=>new Ho,"ValueConverter")}};function dE(t=br){const e=Ve(Sr(t),Qr),r=Ve(kr({shared:e}),Q$,uE);return e.ServiceRegistry.register(r),{shared:e,GitGraph:r}}x(dE,"createGitGraphServices");var Ra,pE=(Ra=class extends Ar{constructor(){super(["info","showInfo"])}},x(Ra,"InfoTokenBuilder"),Ra),fE={parser:{TokenBuilder:x(()=>new pE,"TokenBuilder"),ValueConverter:x(()=>new Ho,"ValueConverter")}};function hE(t=br){const e=Ve(Sr(t),Qr),r=Ve(kr({shared:e}),eE,fE);return e.ServiceRegistry.register(r),{shared:e,Info:r}}x(hE,"createInfoServices");var $a,mE=($a=class extends Ar{constructor(){super(["packet"])}},x($a,"PacketTokenBuilder"),$a),gE={parser:{TokenBuilder:x(()=>new mE,"TokenBuilder"),ValueConverter:x(()=>new Ho,"ValueConverter")}};function yE(t=br){const e=Ve(Sr(t),Qr),r=Ve(kr({shared:e}),tE,gE);return e.ServiceRegistry.register(r),{shared:e,Packet:r}}x(yE,"createPacketServices");var Ea,TE=(Ea=class extends Ar{constructor(){super(["pie","showData"])}},x(Ea,"PieTokenBuilder"),Ea),ka,vE=(ka=class extends Vo{runCustomConverter(t,e,r){if(t.name==="PIE_SECTION_LABEL")return e.replace(/"/g,"").trim()}},x(ka,"PieValueConverter"),ka),RE={parser:{TokenBuilder:x(()=>new TE,"TokenBuilder"),ValueConverter:x(()=>new vE,"ValueConverter")}};function $E(t=br){const e=Ve(Sr(t),Qr),r=Ve(kr({shared:e}),rE,RE);return e.ServiceRegistry.register(r),{shared:e,Pie:r}}x($E,"createPieServices");var Sa,EE=(Sa=class extends Ar{constructor(){super(["architecture"])}},x(Sa,"ArchitectureTokenBuilder"),Sa),ba,kE=(ba=class extends Vo{runCustomConverter(t,e,r){if(t.name==="ARCH_ICON")return e.replace(/[()]/g,"").trim();if(t.name==="ARCH_TEXT_ICON")return e.replace(/["()]/g,"");if(t.name==="ARCH_TITLE")return e.replace(/[[\]]/g,"").trim()}},x(ba,"ArchitectureValueConverter"),ba),SE={parser:{TokenBuilder:x(()=>new EE,"TokenBuilder"),ValueConverter:x(()=>new kE,"ValueConverter")}};function bE(t=br){const e=Ve(Sr(t),Qr),r=Ve(kr({shared:e}),J$,SE);return e.ServiceRegistry.register(r),{shared:e,Architecture:r}}x(bE,"createArchitectureServices");var Aa,AE=(Aa=class extends Ar{constructor(){super(["radar-beta"])}},x(Aa,"RadarTokenBuilder"),Aa),CE={parser:{TokenBuilder:x(()=>new AE,"TokenBuilder"),ValueConverter:x(()=>new Ho,"ValueConverter")}};function xE(t=br){const e=Ve(Sr(t),Qr),r=Ve(kr({shared:e}),nE,CE);return e.ServiceRegistry.register(r),{shared:e,Radar:r}}x(xE,"createRadarServices");var Ca,NE=(Ca=class extends Ar{constructor(){super(["treemap"])}},x(Ca,"TreemapTokenBuilder"),Ca),wE=/classDef\s+([A-Z_a-z]\w+)(?:\s+([^\n\r;]*))?;?/,xa,IE=(xa=class extends Vo{runCustomConverter(t,e,r){if(t.name==="NUMBER2")return parseFloat(e.replace(/,/g,""));if(t.name==="SEPARATOR"||t.name==="STRING2")return e.substring(1,e.length-1);if(t.name==="INDENTATION")return e.length;if(t.name==="ClassDef"){if(typeof e!="string")return e;const n=wE.exec(e);if(n)return{$type:"ClassDefStatement",className:n[1],styleText:n[2]||void 0}}}},x(xa,"TreemapValueConverter"),xa);function Ph(t){const e=t.validation.TreemapValidator,r=t.validation.ValidationRegistry;if(r){const n={Treemap:e.checkSingleRoot.bind(e)};r.register(n,e)}}x(Ph,"registerValidationChecks");var Na,_E=(Na=class{checkSingleRoot(t,e){let r;for(const n of t.TreemapRows)n.item&&(r===void 0&&n.indent===void 0?r=0:n.indent===void 0?e("error","Multiple root nodes are not allowed in a treemap.",{node:n,property:"item"}):r!==void 0&&r>=parseInt(n.indent,10)&&e("error","Multiple root nodes are not allowed in a treemap.",{node:n,property:"item"}))}},x(Na,"TreemapValidator"),Na),OE={parser:{TokenBuilder:x(()=>new NE,"TokenBuilder"),ValueConverter:x(()=>new IE,"ValueConverter")},validation:{TreemapValidator:x(()=>new _E,"TreemapValidator")}};function PE(t=br){const e=Ve(Sr(t),Qr),r=Ve(kr({shared:e}),iE,OE);return e.ServiceRegistry.register(r),Ph(r),{shared:e,Treemap:r}}x(PE,"createTreemapServices");var Yt={},DE={info:x(async()=>{const{createInfoServices:t}=await xr(()=>Nr(()=>import("./info-VBDWY6EO-af9205af-44751d0c.js"),["assets/info-VBDWY6EO-af9205af-44751d0c.js","assets/index-51dab561.js","assets/index-102dc34d.css","assets/_baseUniq-40c863a3-ba4bbca3.js","assets/_basePickBy-085c36dd-77a779c7.js","assets/clone-a6e1a53e-ea0866c6.js"]),["info-VBDWY6EO-af9205af.js","project-d3f478d5.js","project-d813fe3f.css","_baseUniq-40c863a3.js","_basePickBy-085c36dd.js","clone-a6e1a53e.js"]),e=t().Info.parser.LangiumParser;Yt.info=e},"info"),packet:x(async()=>{const{createPacketServices:t}=await xr(()=>Nr(()=>import("./packet-DYOGHKS2-01d0f10f-dcc6ea58.js"),["assets/packet-DYOGHKS2-01d0f10f-dcc6ea58.js","assets/index-51dab561.js","assets/index-102dc34d.css","assets/_baseUniq-40c863a3-ba4bbca3.js","assets/_basePickBy-085c36dd-77a779c7.js","assets/clone-a6e1a53e-ea0866c6.js"]),["packet-DYOGHKS2-01d0f10f.js","project-d3f478d5.js","project-d813fe3f.css","_baseUniq-40c863a3.js","_basePickBy-085c36dd.js","clone-a6e1a53e.js"]),e=t().Packet.parser.LangiumParser;Yt.packet=e},"packet"),pie:x(async()=>{const{createPieServices:t}=await xr(()=>Nr(()=>import("./pie-VRWISCQL-2ae0d2a4-4c6dfeb9.js"),["assets/pie-VRWISCQL-2ae0d2a4-4c6dfeb9.js","assets/index-51dab561.js","assets/index-102dc34d.css","assets/_baseUniq-40c863a3-ba4bbca3.js","assets/_basePickBy-085c36dd-77a779c7.js","assets/clone-a6e1a53e-ea0866c6.js"]),["pie-VRWISCQL-2ae0d2a4.js","project-d3f478d5.js","project-d813fe3f.css","_baseUniq-40c863a3.js","_basePickBy-085c36dd.js","clone-a6e1a53e.js"]),e=t().Pie.parser.LangiumParser;Yt.pie=e},"pie"),architecture:x(async()=>{const{createArchitectureServices:t}=await xr(()=>Nr(()=>import("./architecture-7HQA4BMR-581a0a1d-6fdfb238.js"),["assets/architecture-7HQA4BMR-581a0a1d-6fdfb238.js","assets/index-51dab561.js","assets/index-102dc34d.css","assets/_baseUniq-40c863a3-ba4bbca3.js","assets/_basePickBy-085c36dd-77a779c7.js","assets/clone-a6e1a53e-ea0866c6.js"]),["architecture-7HQA4BMR-581a0a1d.js","project-d3f478d5.js","project-d813fe3f.css","_baseUniq-40c863a3.js","_basePickBy-085c36dd.js","clone-a6e1a53e.js"]),e=t().Architecture.parser.LangiumParser;Yt.architecture=e},"architecture"),gitGraph:x(async()=>{const{createGitGraphServices:t}=await xr(()=>Nr(()=>import("./gitGraph-G5XIXVHT-f0e1f30f-575d0f7d.js"),["assets/gitGraph-G5XIXVHT-f0e1f30f-575d0f7d.js","assets/index-51dab561.js","assets/index-102dc34d.css","assets/_baseUniq-40c863a3-ba4bbca3.js","assets/_basePickBy-085c36dd-77a779c7.js","assets/clone-a6e1a53e-ea0866c6.js"]),["gitGraph-G5XIXVHT-f0e1f30f.js","project-d3f478d5.js","project-d813fe3f.css","_baseUniq-40c863a3.js","_basePickBy-085c36dd.js","clone-a6e1a53e.js"]),e=t().GitGraph.parser.LangiumParser;Yt.gitGraph=e},"gitGraph"),radar:x(async()=>{const{createRadarServices:t}=await xr(()=>Nr(()=>import("./radar-ZZBFDIW7-29a9b007-ca2ae6bb.js"),["assets/radar-ZZBFDIW7-29a9b007-ca2ae6bb.js","assets/index-51dab561.js","assets/index-102dc34d.css","assets/_baseUniq-40c863a3-ba4bbca3.js","assets/_basePickBy-085c36dd-77a779c7.js","assets/clone-a6e1a53e-ea0866c6.js"]),["radar-ZZBFDIW7-29a9b007.js","project-d3f478d5.js","project-d813fe3f.css","_baseUniq-40c863a3.js","_basePickBy-085c36dd.js","clone-a6e1a53e.js"]),e=t().Radar.parser.LangiumParser;Yt.radar=e},"radar"),treemap:x(async()=>{const{createTreemapServices:t}=await xr(()=>Nr(()=>import("./treemap-GDKQZRPO-ea0d78b5-dd9f569a.js"),["assets/treemap-GDKQZRPO-ea0d78b5-dd9f569a.js","assets/index-51dab561.js","assets/index-102dc34d.css","assets/_baseUniq-40c863a3-ba4bbca3.js","assets/_basePickBy-085c36dd-77a779c7.js","assets/clone-a6e1a53e-ea0866c6.js"]),["treemap-GDKQZRPO-ea0d78b5.js","project-d3f478d5.js","project-d813fe3f.css","_baseUniq-40c863a3.js","_basePickBy-085c36dd.js","clone-a6e1a53e.js"]),e=t().Treemap.parser.LangiumParser;Yt.treemap=e},"treemap")};async function LE(t,e){const r=DE[t];if(!r)throw new Error(`Unknown diagram type: ${t}`);Yt[t]||await r();const n=Yt[t].parse(e);if(n.lexerErrors.length>0||n.parserErrors.length>0)throw new ME(n);return n.value}x(LE,"parse");var wa,ME=(wa=class extends Error{constructor(t){const e=t.lexerErrors.map(n=>n.message).join(`
`),r=t.parserErrors.map(n=>n.message).join(`
`);super(`Parsing failed: ${e} ${r}`),this.result=t}},x(wa,"MermaidParseError"),wa);export{SE as A,PE as L,xE as N,OE as P,RE as R,bE as S,fE as f,yE as g,hE as h,CE as k,uE as l,gE as m,dE as u,$E as v,LE as x};
